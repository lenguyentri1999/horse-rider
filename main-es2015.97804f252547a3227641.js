(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+/gg":function(t,e,n){"use strict";var r=n("mrSG"),i=n("s7LF"),o=(n("ajt+"),n("Gon4"),n("VMA6"),n("ZZ/e"),function(t){return t.Easy="Easy",t.Intermediate="Intermediate",t.Extreme="Extreme",t}({})),s=function(t){return t.Puddles="Puddles",t.Streams="Streams",t.Rivers="Rivers",t}({}),a=function(t){return t.High="High",t.Low="Low",t.Scary="Scary",t}({}),l=function(t){return t.Plenty="Plenty",t.Limited="Limited",t.None="None",t}({}),u=function(t){return t.Carriage="Carriage",t.Sandy="Sandy",t.Muddy="Muddy",t.Rocky="Rocky",t}({}),c=n("LRne"),h=n("lJxs"),d=n("SxV6"),f=n("gRsD"),p=n("ZedB"),g=n("AytR");n.d(e,"a",function(){return m});class m{constructor(t,e,n,r,i,o,a,l,u){this.mapboxService=t,this.db=e,this.campService=n,this.fb=r,this.toastCtrl=i,this.modalCtrl=o,this.route=a,this.router=l,this.alertCtrl=u,this.TrailWaterCrossings=s,this.type=this.route.paramMap.pipe(Object(h.a)(t=>t.get("type")))}isEditMode(){return null!=this.camp}populateForm(){let t="",e="",n="",r="",c="",h=[],d=null,p={bigRigFriendly:!1,petFriendly:!1,wifi:!1,difficulty:o.Easy.toString(),waterCrossings:s.Puddles.toString(),footing:u.Carriage.toString(),parking:l.Plenty.toString(),bridges:a.Low.toString()};this.isEditMode()&&(t=this.camp.name,e=this.camp.description,n=this.camp.address,d=this.camp.coords,r=this.camp.url,c=this.camp.phoneNumber,h=this.camp.pictures.map(t=>f.a.getAlreadyUploadedImage(t)),p=this.camp.attributes||p),this.myForm=this.fb.group({name:[t,i.o.required],description:[e,i.o.required],address:[n,i.o.required],coords:[d,i.o.required],url:[r,[i.o.required]],phoneNumber:[c,i.o.required],pictureUrl:[h],bridges:[p.bridges],parking:[p.parking],footing:[p.footing],difficulty:[p.difficulty],waterCrossings:[p.waterCrossings]})}ngOnInit(){this.populateForm(),this.isEditMode()&&this.campService.isTrail(this.camp).subscribe(t=>{this.type=t?Object(c.a)("trail"):Object(c.a)("camp")})}ngAfterViewInit(){this.isEditMode()&&(this.addressSearchBar.keyword=this.camp.address)}onLocationSelected(t){const e=t.place;this.myForm.get("address").setValue(e.place_name),this.myForm.get("coords").setValue({long:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]})}onPhotoUrlsChange(t){this.myForm.get("pictureUrl").setValue(t)}uploadAllPhotos(t){return t.map(t=>{if(t.isLocal){const e=this.db.getImageUrl(this.db.uuidv4(),t.file);return p.a.getLocalImage(e.ref,e.task)}return p.a.getUploadedImage(t.url)}).map(t=>t.getUrl())}checkForDuplicates(t,e=10){return r.__awaiter(this,void 0,void 0,function*(){const n=yield this.campService.getAllAsList().pipe(Object(h.a)(n=>n.filter(n=>{const r=this.mapboxService.straightLineDistance(t,n.coords);return console.log(r),r<e})),Object(d.a)()).toPromise();if(n.length>0){let t=`We found these camps already on the database within ${e} miles of where you added, please check to make sure that you are not adding duplicates: <br>`;t+=`\n      <ul>\n      ${n.map(t=>"<li>"+t.name+"</li>")}\n      </ul>`;const r=yield this.alertCtrl.create({message:t,buttons:[{text:"I'm sure, go ahead and add!",handler:()=>(r.dismiss(!0),!1)},{text:"Cancel",handler:()=>(r.dismiss(!1),!1)}]});return r.present(),r.onDidDismiss().then(t=>t.data)}return!0})}submit(){return r.__awaiter(this,void 0,void 0,function*(){if(!this.isEditMode()&&!(yield this.checkForDuplicates(this.myForm.get("coords").value)))return;const t=this.isEditMode()?this.camp.id:this.db.uuidv4(),e=this.myForm.get("pictureUrl").value,n=yield Promise.all(this.uploadAllPhotos(e));if(!(n.length>0))return void alert("You must add at least one picture!");this.myForm.get("pictureUrl").setValue(n);const i={id:t,name:this.myForm.get("name").value,description:this.myForm.get("description").value,address:this.myForm.get("address").value,coords:{long:this.myForm.get("coords").value.long,lat:this.myForm.get("coords").value.lat},url:this.myForm.get("url").value,phoneNumber:this.myForm.get("phoneNumber").value,pictures:this.myForm.get("pictureUrl").value,attributes:{difficulty:this.myForm.get("difficulty").value,parking:this.myForm.get("parking").value,bridges:this.myForm.get("bridges").value,footing:this.myForm.get("footing").value,waterCrossings:this.myForm.get("waterCrossings").value}};this.campService.tryAddNew(i).subscribe(t=>r.__awaiter(this,void 0,void 0,function*(){t?(this.onSuccessAlert(),this.modalCtrl.dismiss()):this.onFailureAlert()})),this.type.subscribe(t=>{"camp"!==t?"trail"===t&&this.addTrail(i):this.addCamp(i)})})}openNewTab(t){window.open(g.a.baseUrl+`/camp-info/${t.id}`,"_blank")}addCamp(t){this.campService.addToCampTable(t)}addTrail(t){this.campService.addToTrailTable(t)}onSuccessAlert(){return r.__awaiter(this,void 0,void 0,function*(){const t=this.isEditMode()?"Camp edited!":"Camp added!";(yield this.toastCtrl.create({message:t,duration:2e3})).present()})}onFailureAlert(){return r.__awaiter(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Error!",duration:2e3})).present()})}onCloseButton(){this.modalCtrl.dismiss()}onTypeChange(t){console.log(t)}cancel(){this.modalCtrl.dismiss()}}},"+z1p":function(t,e,n){var r;(r=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})).en=Object.assign(r.en||{},{a:"Cannot upload file:",b:"Image toolbar",c:"Table toolbar",d:"Bold",e:"Insert image or file",f:"Choose heading",g:"Heading",h:"Full size image",i:"Side image",j:"Left aligned image",k:"Centered image",l:"Right aligned image",m:"image widget",n:"Block quote",o:"Numbered List",p:"Bulleted List",q:"Increase indent",r:"Decrease indent",s:"Insert image",t:"Insert table",u:"Header column",v:"Insert column left",w:"Insert column right",x:"Delete column",y:"Column",z:"Header row",aa:"Insert row below",ab:"Insert row above",ac:"Delete row",ad:"Row",ae:"Merge cell up",af:"Merge cell right",ag:"Merge cell down",ah:"Merge cell left",ai:"Split cell vertically",aj:"Split cell horizontally",ak:"Merge cells",al:"Italic",am:"Insert media",an:"The URL must not be empty.",ao:"This media URL is not supported.",ap:"media widget",aq:"Upload failed",ar:"Enter image caption",as:"Link",at:"Could not obtain resized image URL.",au:"Selecting resized image failed",av:"Could not insert image at the current position.",aw:"Inserting image failed",ax:"Widget toolbar",ay:"Upload in progress",az:"Open in a new tab",ba:"Downloadable",bb:"Unlink",bc:"Edit link",bd:"Open link in new tab",be:"This link has no URL",bf:"Save",bg:"Cancel",bh:"Link URL",bi:"Rich Text Editor",bj:"Undo",bk:"Redo",bl:"%0 of %1",bm:"Previous",bn:"Next",bo:"Editor toolbar",bp:"Show more items",bq:"Dropdown toolbar",br:"Paste the media URL in the input.",bs:"Tip: Paste the URL into the content to embed faster.",bt:"Media URL",bu:"Rich Text Editor, %0",bv:"Change image text alternative",bw:"Paragraph",bx:"Heading 1",by:"Heading 2",bz:"Heading 3",ca:"Heading 4",cb:"Heading 5",cc:"Heading 6",cd:"Text alternative"}),window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=91)}([function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});const r="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";class i extends Error{constructor(t,e,n){t=o(t),n&&(t+=" "+JSON.stringify(n)),super(t),this.name="CKEditorError",this.context=e,this.data=n}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new i("unexpected-error",e,{originalError:{message:t.message,stack:t.stack,name:t.name}})}}function o(t){const e=t.match(/^([^:]+):/);return e?t+` Read more: ${r}#error-${e[1]}\n`:t}},function(t,e,n){"use strict";var r={},i=function(){var t;return function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t}}(),o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}();function s(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function a(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id],s=0;if(o){for(o.refs++;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(f(i.parts[s],e))}else{for(var a=[];s<i.parts.length;s++)a.push(f(i.parts[s],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function l(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var r=n.nc;r&&(t.attributes.nonce=r)}if(Object.keys(t.attributes).forEach(function(n){e.setAttribute(n,t.attributes[n])}),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function c(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=u(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var h=null,d=0;function f(t,e){var n,r,i;if(e.singleton){var o=d++;n=h||(h=l(e)),r=c.bind(null,n,o,!1),i=c.bind(null,n,o,!0)}else n=l(e),r=(function(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i&&t.setAttribute("media",i),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}).bind(null,n,e),i=function(){!function(t){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}()};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=s(t,e);return a(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var l=r[n[o].id];l&&(l.refs--,i.push(l))}t&&a(s(t,e),e);for(var u=0;u<i.length;u++){var c=i[u];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete r[c.id]}}}}},,function(t,e,n){"use strict";var r=n(7),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,n,r){"use strict";(function(t){var i=r(7),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o&&i.a.process,l=function(){try{return s&&s.require&&s.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();n.a=l}).call(this,r(8)(t))},function(t,n,r){"use strict";(function(t){var i=r(3),o=r(11),s=e&&!e.nodeType&&e,a=s&&"object"==typeof t&&t&&!t.nodeType&&t,l=a&&a.exports===s?i.a.Buffer:void 0;n.a=(l?l.isBuffer:void 0)||o.a}).call(this,r(8)(t))},function(t,e,n){"use strict";(function(t){var e=n(13),r=n(0);const i="object"==typeof window?window:t;if(i.CKEDITOR_VERSION)throw new r.b("ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.",null);i.CKEDITOR_VERSION=e.a}).call(this,n(9))},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(9))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(70);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,n,r){"use strict";(function(t){var i=r(3),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?i.a.Buffer:void 0,l=a?a.allocUnsafe:void 0;n.a=function(t,e){if(e)return t.slice();var n=t.length,r=l?l(n):new t.constructor(n);return t.copy(r),r}}).call(this,r(8)(t))},function(t){t.exports=JSON.parse('{"a":"15.0.0"}')},function(t,e,n){var r=n(15);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(t,e,n){var r=n(17);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border:#47a4f5;--ck-color-focus-shadow:rgba(119,186,248,0.5);--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(t,e,n){var r=n(19);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(t,e,n){var r=n(21);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(t,e,n){var r=n(23);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}"},function(t,e,n){var r=n(25);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block;will-change:transform}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{transform:translate3d(0,100%,0)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}"},function(t,e,n){var r=n(27);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(t,e,n){var r=n(29);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck-tooltip .ck-tooltip__text{display:inline-block}.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{border-style:solid;left:50%}.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s}'},function(t,e,n){var r=n(31);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button .ck-button__label,.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button .ck-button__label,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;border-color:transparent}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(t,e,n){var r=n(33);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;border:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:hover:not(ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(t,e,n){var r=n(35);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:1.3846153847em}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}"},function(t,e,n){var r=n(37);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(t,e,n){var r=n(39);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(t,e,n){var r=n(41);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__grouped-dropdown,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{padding-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__items>:last-child,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__items>:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__grouped-dropdown,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{padding-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__items>*,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__items>*{margin-left:var(--ck-spacing-small);margin-right:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__items>:last-child,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__items>:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{margin-left:var(--ck-spacing-small)}"},function(t,e,n){var r=n(43);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}"},function(t,e,n){var r=n(45);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(t,e,n){var r=n(47);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}"},function(t,e,n){var r=n(49);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected .ck-widget__selection-handle:hover,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-read-only .ck-widget{--ck-widget-outline-thickness:0}"},function(t,e,n){var r=n(51);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}"},function(t,e,n){var r=n(53);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition-property:box-shadow,border;transition:.2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(t,e,n){var r=n(55);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-input{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(t,e,n){var r=n(57);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}'},function(t,e,n){var r=n(59);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(t,e,n){var r=n(61);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(t,e,n){var r=n(63);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}"},function(t,e,n){var r=n(65);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(t,e,n){var r=n(67);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(t,e,n){var r=n(69);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(t,e){t.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(t,e,n){var r=n(72);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}"},function(t,e,n){var r=n(74);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center,.ck-content .image-style-align-left,.ck-content .image-style-align-right,.ck-content .image-style-side{max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}"},function(t,e,n){var r=n(76);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-input{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}"},function(t,e,n){var r=n(78);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(t,e,n){var r=n(80);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3*var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c8,#b900b4,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}'},function(t,e,n){var r=n(82);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-input{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-input{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}.ck.ck-media-form{padding:var(--ck-spacing-standard)}.ck.ck-media-form:focus{outline:none}[dir=ltr] .ck.ck-media-form>:not(:first-child),[dir=rtl] .ck.ck-media-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-media-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-media-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-media-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-media-form .ck-labeled-input .ck-labeled-input__error{white-space:normal}.ck.ck-media-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-media-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-media-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-media-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-media-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(t,e,n){var r=n(84);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}"},function(t,e,n){var r=n(86);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=":root{--ck-color-table-focused-cell-background:#f5fafe}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(t,e,n){var r=n(88);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=":root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px;--ck-insert-table-dropdown-box-border-color:#bfbfbf;--ck-insert-table-dropdown-box-border-active-color:#53a0e4;--ck-insert-table-dropdown-box-active-background:#c7e5ff}.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-insert-table-dropdown-box-border-color);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-insert-table-dropdown-box-border-active-color);background:var(--ck-insert-table-dropdown-box-active-background)}"},function(t,e,n){var r=n(90);"string"==typeof r&&(r=[[t.i,r,""]]),n(1)(r,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),r.locals&&(t.exports=r.locals)},function(t,e){t.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border-color:#d9d9d9}.ck-content .table table th{font-weight:700;background:#fafafa}"},function(t,e,n){"use strict";n.r(e);var r=n(3),i=r.a.Symbol,o=Object.prototype,s=o.hasOwnProperty,a=o.toString,l=i?i.toStringTag:void 0,u=Object.prototype.toString,c=i?i.toStringTag:void 0,h=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?function(t){var e=s.call(t,l),n=t[l];try{t[l]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[l]=n:delete t[l]),i}(t):function(t){return u.call(t)}(t)},d=function(t,e){return function(n){return t(e(n))}},f=d(Object.getPrototypeOf,Object),p=function(t){return null!=t&&"object"==typeof t},g=Function.prototype,m=Object.prototype,b=g.toString,v=m.hasOwnProperty,y=b.call(Object),w=function(t){if(!p(t)||"[object Object]"!=h(t))return!1;var e=f(t);if(null===e)return!0;var n=v.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&b.call(n)==y},_=function(t,e){return t===e||t!=t&&e!=e},k=function(t,e){for(var n=t.length;n--;)if(_(t[n][0],e))return n;return-1},C=Array.prototype.splice;function E(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}E.prototype.clear=function(){this.__data__=[],this.size=0},E.prototype.delete=function(t){var e=this.__data__,n=k(e,t);return!(n<0||(n==e.length-1?e.pop():C.call(e,n,1),--this.size,0))},E.prototype.get=function(t){var e=this.__data__,n=k(e,t);return n<0?void 0:e[n][1]},E.prototype.has=function(t){return k(this.__data__,t)>-1},E.prototype.set=function(t,e){var n=this.__data__,r=k(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var S=E,T=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},x=function(t){if(!T(t))return!1;var e=h(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},A=r.a["__core-js_shared__"],I=function(){var t=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),D=Function.prototype.toString,P=function(t){if(null!=t){try{return D.call(t)}catch(t){}try{return t+""}catch(t){}}return""},O=/^\[object .+?Constructor\]$/,N=Function.prototype,R=Object.prototype,M=RegExp("^"+N.toString.call(R.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!T(t)||function(t){return!!I&&I in t}(t))&&(x(t)?M:O).test(P(t))}(n)?n:void 0},F=L(r.a,"Map"),j=L(Object,"create"),B=Object.prototype.hasOwnProperty,V=Object.prototype.hasOwnProperty;function U(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}U.prototype.clear=function(){this.__data__=j?j(null):{},this.size=0},U.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},U.prototype.get=function(t){var e=this.__data__;if(j){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return B.call(e,t)?e[t]:void 0},U.prototype.has=function(t){var e=this.__data__;return j?void 0!==e[t]:V.call(e,t)},U.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=j&&void 0===e?"__lodash_hash_undefined__":e,this};var z=U,q=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function H(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}H.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(F||S),string:new z}},H.prototype.delete=function(t){var e=q(this,t).delete(t);return this.size-=e?1:0,e},H.prototype.get=function(t){return q(this,t).get(t)},H.prototype.has=function(t){return q(this,t).has(t)},H.prototype.set=function(t,e){var n=q(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var $=H;function W(t){var e=this.__data__=new S(t);this.size=e.size}W.prototype.clear=function(){this.__data__=new S,this.size=0},W.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},W.prototype.get=function(t){return this.__data__.get(t)},W.prototype.has=function(t){return this.__data__.has(t)},W.prototype.set=function(t,e){var n=this.__data__;if(n instanceof S){var r=n.__data__;if(!F||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new $(r)}return n.set(t,e),this.size=n.size,this};var J=W,G=function(){try{var t=L(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Q=function(t,e,n){"__proto__"==e&&G?G(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},K=Object.prototype.hasOwnProperty,Y=function(t,e,n){var r=t[e];K.call(t,e)&&_(r,n)&&(void 0!==n||e in t)||Q(t,e,n)},X=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=r?r(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),i?Q(n,a,l):Y(n,a,l)}return n},Z=function(t){return p(t)&&"[object Arguments]"==h(t)},tt=Object.prototype,et=tt.hasOwnProperty,nt=tt.propertyIsEnumerable,rt=Z(function(){return arguments}())?Z:function(t){return p(t)&&et.call(t,"callee")&&!nt.call(t,"callee")},it=Array.isArray,ot=n(5),st=/^(?:0|[1-9]\d*)$/,at=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&st.test(t))&&t>-1&&t%1==0&&t<e},lt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ut={};ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut["[object Arguments]"]=ut["[object Array]"]=ut["[object ArrayBuffer]"]=ut["[object Boolean]"]=ut["[object DataView]"]=ut["[object Date]"]=ut["[object Error]"]=ut["[object Function]"]=ut["[object Map]"]=ut["[object Number]"]=ut["[object Object]"]=ut["[object RegExp]"]=ut["[object Set]"]=ut["[object String]"]=ut["[object WeakMap]"]=!1;var ct=function(t){return function(e){return t(e)}},ht=n(4),dt=ht.a&&ht.a.isTypedArray,ft=dt?ct(dt):function(t){return p(t)&&lt(t.length)&&!!ut[h(t)]},pt=Object.prototype.hasOwnProperty,gt=function(t,e){var n=it(t),r=!n&&rt(t),i=!n&&!r&&Object(ot.a)(t),o=!n&&!r&&!i&&ft(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=a.length;for(var u in t)!e&&!pt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||at(u,l))||a.push(u);return a},mt=Object.prototype,bt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||mt)},vt=d(Object.keys,Object),yt=Object.prototype.hasOwnProperty,wt=function(t){return null!=t&&lt(t.length)&&!x(t)},_t=function(t){return wt(t)?gt(t):function(t){if(!bt(t))return vt(t);var e=[];for(var n in Object(t))yt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},kt=Object.prototype.hasOwnProperty,Ct=function(t){return wt(t)?gt(t,!0):function(t){if(!T(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=bt(t),n=[];for(var r in t)("constructor"!=r||!e&&kt.call(t,r))&&n.push(r);return n}(t)},Et=n(12),St=function(){return[]},Tt=Object.prototype.propertyIsEnumerable,xt=Object.getOwnPropertySymbols,At=xt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s)&&(o[i++]=s)}return o}(xt(t),function(e){return Tt.call(t,e)}))}:St,It=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Dt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)It(e,At(t)),t=f(t);return e}:St,Pt=function(t,e,n){var r=e(t);return it(t)?r:It(r,n(t))},Ot=function(t){return Pt(t,_t,At)},Nt=function(t){return Pt(t,Ct,Dt)},Rt=L(r.a,"DataView"),Mt=L(r.a,"Promise"),Lt=L(r.a,"Set"),Ft=L(r.a,"WeakMap"),jt=P(Rt),Bt=P(F),Vt=P(Mt),Ut=P(Lt),zt=P(Ft),qt=h;(Rt&&"[object DataView]"!=qt(new Rt(new ArrayBuffer(1)))||F&&"[object Map]"!=qt(new F)||Mt&&"[object Promise]"!=qt(Mt.resolve())||Lt&&"[object Set]"!=qt(new Lt)||Ft&&"[object WeakMap]"!=qt(new Ft))&&(qt=function(t){var e=h(t),n="[object Object]"==e?t.constructor:void 0,r=n?P(n):"";if(r)switch(r){case jt:return"[object DataView]";case Bt:return"[object Map]";case Vt:return"[object Promise]";case Ut:return"[object Set]";case zt:return"[object WeakMap]"}return e});var Ht=qt,$t=Object.prototype.hasOwnProperty,Wt=r.a.Uint8Array,Jt=function(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e},Gt=/\w*$/,Qt=i?i.prototype:void 0,Kt=Qt?Qt.valueOf:void 0,Yt=Object.create,Xt=function(){function t(){}return function(e){if(!T(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Zt=ht.a&&ht.a.isMap,te=Zt?ct(Zt):function(t){return p(t)&&"[object Map]"==Ht(t)},ee=ht.a&&ht.a.isSet,ne=ee?ct(ee):function(t){return p(t)&&"[object Set]"==Ht(t)},re="[object Arguments]",ie="[object Function]",oe="[object Object]",se={};se[re]=se["[object Array]"]=se["[object ArrayBuffer]"]=se["[object DataView]"]=se["[object Boolean]"]=se["[object Date]"]=se["[object Float32Array]"]=se["[object Float64Array]"]=se["[object Int8Array]"]=se["[object Int16Array]"]=se["[object Int32Array]"]=se["[object Map]"]=se["[object Number]"]=se[oe]=se["[object RegExp]"]=se["[object Set]"]=se["[object String]"]=se["[object Symbol]"]=se["[object Uint8Array]"]=se["[object Uint8ClampedArray]"]=se["[object Uint16Array]"]=se["[object Uint32Array]"]=!0,se["[object Error]"]=se[ie]=se["[object WeakMap]"]=!1;var ae=function t(e,n,r,i,o,s){var a,l=1&n,u=2&n,c=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!T(e))return e;var h=it(e);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&$t.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(e,a)}else{var d=Ht(e),p=d==ie||"[object GeneratorFunction]"==d;if(Object(ot.a)(e))return Object(Et.a)(e,l);if(d==oe||d==re||p&&!o){if(a=u||p?{}:function(t){return"function"!=typeof t.constructor||bt(t)?{}:Xt(f(t))}(e),!l)return u?function(t,e){return X(t,Dt(t),e)}(e,function(t,e){return t&&X(e,Ct(e),t)}(a,e)):function(t,e){return X(t,At(t),e)}(e,function(t,e){return t&&X(e,_t(e),t)}(a,e))}else{if(!se[d])return o?e:{};a=function(t,e,n){var r=t.constructor;switch(d){case"[object ArrayBuffer]":return Jt(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?Jt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?Jt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,Gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Set]":return new r;case"[object Symbol]":return function(t){return Kt?Object(Kt.call(t)):{}}(t)}}(e,0,l)}}s||(s=new J);var g=s.get(e);if(g)return g;s.set(e,a),ne(e)?e.forEach(function(i){a.add(t(i,n,r,i,e,s))}):te(e)&&e.forEach(function(i,o){a.set(o,t(i,n,r,o,e,s))});var m=c?u?Nt:Ot:u?keysIn:_t,b=h?void 0:m(e);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n););}(b||e,function(i,o){b&&(i=e[o=i]),Y(a,o,t(i,n,r,o,e,s))}),a},le=function(t,e){return ae(t,5,e="function"==typeof e?e:void 0)},ue=function(t){return p(t)&&1===t.nodeType&&!w(t)};class ce{constructor(t,e){this._config={},e&&this.define(e),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}_setToTarget(t,e,n,r=!1){if(w(e))return void this._setObjectToTarget(t,e,r);const i=e.split(".");e=i.pop();for(const o of i)w(t[o])||(t[o]={}),t=t[o];if(w(n))return w(t[e])||(t[e]={}),void this._setObjectToTarget(t=t[e],n,r);r&&void 0!==t[e]||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const r of n){if(!w(t[r])){t=null;break}t=t[r]}return t?function(t){return le(t,he)}(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(r=>{this._setToTarget(t,r,e[r],n)})}}function he(t){return ue(t)?t:void 0}var de=n(0),fe=function(){return function t(){t.called=!0}};class pe{constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=fe(),this.off=fe()}}function ge(){let t="e";for(let e=0;e<8;e++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t}var me={get(t){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};n(6);const be=Symbol("listeningTo"),ve=Symbol("emitterId");var ye={on(t,e,n={}){this.listenTo(this,t,e,n)},once(t,e,n){let r=!1;this.listenTo(this,t,function(t,...n){r||(r=!0,t.off(),e.call(this,t,...n))},n)},off(t,e){this.stopListening(this,t,e)},listenTo(t,e,n,r={}){let i,o;this[be]||(this[be]={});const s=this[be];_e(t)||we(t);const a=_e(t);(i=s[a])||(i=s[a]={emitter:t,callbacks:{}}),(o=i.callbacks[e])||(o=i.callbacks[e]=[]),o.push(n),function(t,e){const n=ke(t);if(n[e])return;let r=e,i=null;const o=[];for(;""!==r&&!n[r];)n[r]={callbacks:[],childEvents:[]},o.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(""!==r){for(const t of o)t.callbacks=n[r].callbacks.slice();n[r].childEvents.push(i)}}(t,e);const l=Ce(t,e),u=me.get(r.priority),c={callback:n,priority:u};for(const h of l){let t=!1;for(let e=0;e<h.length;e++)if(h[e].priority<u){h.splice(e,0,c),t=!0;break}t||h.push(c)}},stopListening(t,e,n){const r=this[be];let i=t&&_e(t);const o=r&&i&&r[i],s=o&&e&&o.callbacks[e];if(!(!r||t&&!o||e&&!s))if(n)Se(t,e,n);else if(s){for(;n=s.pop();)Se(t,e,n);delete o.callbacks[e]}else if(o){for(e in o.callbacks)this.stopListening(t,e);delete r[i]}else{for(i in r)this.stopListening(r[i].emitter);delete this[be]}},fire(t,...e){try{const n=t instanceof pe?t:new pe(this,t),r=n.name;let i=function t(e,n){let r;return e._events&&(r=e._events[n])&&r.callbacks.length?r.callbacks:n.indexOf(":")>-1?t(e,n.substr(0,n.lastIndexOf(":"))):null}(this,r);if(n.path.push(this),i){const t=[n,...e];i=Array.from(i);for(let e=0;e<i.length&&(i[e].callback.apply(this,t),n.off.called&&(delete n.off.called,Se(this,r,i[e].callback)),!n.stop.called);e++);}if(this._delegations){const t=this._delegations.get(r),i=this._delegations.get("*");t&&Ee(t,n,e),i&&Ee(i,n,e)}return n.return}catch(t){de.b.rethrowUnexpectedError(t,this)}},delegate(...t){return{to:(e,n)=>{this._delegations||(this._delegations=new Map),t.forEach(t=>{const r=this._delegations.get(t);r?r.set(e,n):this._delegations.set(t,new Map([[e,n]]))})}}},stopDelegating(t,e){if(this._delegations)if(t)if(e){const n=this._delegations.get(t);n&&n.delete(e)}else this._delegations.delete(t);else this._delegations.clear()}};function we(t,e){t[ve]||(t[ve]=e||ge())}function _e(t){return t[ve]}function ke(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Ce(t,e){const n=ke(t)[e];if(!n)return[];let r=[n.callbacks];for(let i=0;i<n.childEvents.length;i++){const e=Ce(t,n.childEvents[i]);r=r.concat(e)}return r}function Ee(t,e,n){for(let[r,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new pe(e.source,i);t.path=[...e.path],r.fire(t,...n)}}function Se(t,e,n){const r=Ce(t,e);for(const i of r)for(let t=0;t<i.length;t++)i[t].callback==n&&(i.splice(t,1),t--)}function Te(t,...e){e.forEach(e=>{Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(n=>{if(n in t.prototype)return;const r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t.prototype,n,r)})})}function xe(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)if(t[r]!=e[r])return r;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}var Ae=function(t){return ae(t,4)};class Ie{constructor(){this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new de.b("view-node-not-found-in-parent: The node's parent does not contain this node.",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}get document(){return this.parent instanceof Ie?this.parent.document:null}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),r=t.getAncestors(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),r=xe(e,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return e[r]<n[r]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e){this.fire("change:"+t,e),this.parent&&this.parent._fireChange(t,e)}toJSON(){const t=Ae(this);return delete t.parent,t}is(t){return"node"==t||"view:node"==t}}Te(Ie,ye);class De extends Ie{constructor(t){super(),this._textData=t}is(t){return"text"==t||"view:text"==t||super.is(t)}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof De&&(this===t||this.data===t.data)}_clone(){return new De(this.data)}}class Pe{constructor(t,e,n){if(this.textNode=t,e<0||e>t.data.length)throw new de.b("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(n<0||e+n>t.data.length)throw new de.b("view-textproxy-wrong-length: Given length value is incorrect.",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return"textProxy"==t||"view:textProxy"==t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this.textNode:this.parent;for(;null!==n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}}function Oe(t){const e=new Map;for(const n in t)e.set(n,t[n]);return e}function Ne(t){return!(!t||!t[Symbol.iterator])}class Re{constructor(...t){this._patterns=[],this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),e.classes&&("string"==typeof e.classes||e.classes instanceof RegExp)&&(e.classes=[e.classes]),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const n=Me(e,t);if(n)return{element:e,pattern:t,match:n}}return null}matchAll(...t){const e=[];for(const n of t)for(const t of this._patterns){const r=Me(n,t);r&&e.push({element:n,pattern:t,match:r})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}}function Me(t,e){if("function"==typeof e)return e(t);const n={};return e.name&&(n.name=function(t,e){return t instanceof RegExp?t.test(e):t===e}(e.name,t.name),!n.name)?null:e.attributes&&(n.attributes=function(t,e){const n=[];for(const r in t){const i=t[r];if(!e.hasAttribute(r))return null;{const t=e.getAttribute(r);if(!0===i)n.push(r);else if(i instanceof RegExp){if(!i.test(t))return null;n.push(r)}else{if(t!==i)return null;n.push(r)}}}return n}(e.attributes,t),!n.attributes)?null:!(e.classes&&(n.classes=function(t,e){const n=[];for(const r of t)if(r instanceof RegExp){const t=e.getClassNames();for(const e of t)r.test(e)&&n.push(e);if(0===n.length)return null}else{if(!e.hasClass(r))return null;n.push(r)}return n}(e.classes,t),!n.classes))&&!(e.styles&&(n.styles=function(t,e){const n=[];for(const r in t){const i=t[r];if(!e.hasStyle(r))return null;{const t=e.getStyle(r);if(i instanceof RegExp){if(!i.test(t))return null;n.push(r)}else{if(t!==i)return null;n.push(r)}}}return n}(e.styles,t),!n.styles))&&n}class Le extends Ie{constructor(t,e,n){if(super(),this.name=t,this._attrs=function(t){t=w(t)?Oe(t):new Map(t);for(const[e,n]of t)null===n?t.delete(e):"string"!=typeof n&&t.set(e,String(n));return t}(e),this._children=[],n&&this._insertChild(0,n),this._classes=new Set,this._attrs.has("class")){const t=this._attrs.get("class");je(this._classes,t),this._attrs.delete("class")}this._styles=new Map,this._attrs.has("style")&&(Fe(this._styles,this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}is(t,e=null){const n=t.replace(/^view:/,"");return e?"element"==n&&e==this.name:"element"==n||n==this.name||super.is(t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.size>0&&(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.size>0&&(yield["style",this.getAttribute("style")])}getAttribute(t){if("class"==t)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"!=t)return this._attrs.get(t);if(this._styles.size>0){let t="";for(const[e,n]of this._styles)t+=`${e}:${n};`;return t}}hasAttribute(t){return"class"==t?this._classes.size>0:"style"==t?this._styles.size>0:this._attrs.has(t)}isSimilar(t){if(!(t instanceof Le))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[e,n]of this._attrs)if(!t._attrs.has(e)||t._attrs.get(e)!==n)return!1;for(const e of this._classes)if(!t._classes.has(e))return!1;for(const[e,n]of this._styles)if(!t._styles.has(e)||t._styles.get(e)!==n)return!1;return!0}hasClass(...t){for(const e of t)if(!this._classes.has(e))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.get(t)}getStyleNames(){return this._styles.keys()}hasStyle(...t){for(const e of t)if(!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new Re(...t);let n=this.parent;for(;n;){if(e.match(n))return n;n=n.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),e=Array.from(this._styles).map(t=>`${t[0]}:${t[1]}`).sort().join(";"),n=Array.from(this._attrs).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(""==e?"":` style="${e}"`)+(""==n?"":` ${n}`)}_clone(t=!1){const e=[];if(t)for(const r of this.getChildren())e.push(r._clone(t));const n=new this.constructor(this.name,this._attrs,e);return n._classes=new Set(this._classes),n._styles=new Map(this._styles),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this);let n=0;const r=function(t){return"string"==typeof t?[new De(t)]:(Ne(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new De(t):t instanceof Pe?new De(t.data):t))}(e);for(const i of r)null!==i.parent&&i._remove(),i.parent=this,this._children.splice(t,0,i),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_setAttribute(t,e){e=String(e),this._fireChange("attributes",this),"class"==t?je(this._classes,e):"style"==t?Fe(this._styles,e):this._attrs.set(t,e)}_removeAttribute(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?this._styles.size>0&&(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(t=>this._classes.add(t))}_removeClass(t){this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(t=>this._classes.delete(t))}_setStyle(t,e){if(this._fireChange("attributes",this),w(t)){const e=Object.keys(t);for(const n of e)this._styles.set(n,t[n])}else this._styles.set(t,e)}_removeStyle(t){this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(t=>this._styles.delete(t))}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}function Fe(t,e){let n=null,r=0,i=0,o=null;if(t.clear(),""!==e){";"!=e.charAt(e.length-1)&&(e+=";");for(let s=0;s<e.length;s++){const a=e.charAt(s);if(null===n)switch(a){case":":o||(o=e.substr(r,s-r),i=s+1);break;case'"':case"'":n=a;break;case";":{const n=e.substr(i,s-i);o&&t.set(o.trim(),n.trim()),o=null,r=s+1;break}}else a===n&&(n=null)}}}function je(t,e){const n=e.split(/\s+/);t.clear(),n.forEach(e=>t.add(e))}class Be extends Le{constructor(t,e,n){super(t,e,n),this.getFillerOffset=Ve}is(t,e=null){const n=t&&t.replace(/^view:/,"");return e?"containerElement"==n&&e==this.name||super.is(t,e):"containerElement"==n||super.is(t)}}function Ve(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const n of t)if(!n.is("uiElement"))return null;return this.childCount}var Ue=function(t){return t},ze=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},qe=Math.max,He=function(t){return function(){return t}},$e=Date.now,We=function(t){var e=0,n=0;return function(){var r=$e(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(G?function(t,e){return G(t,"toString",{configurable:!0,enumerable:!1,value:He(e),writable:!0})}:Ue),Je=function(t){return function(t,e){return We(function(t,e,n){return e=qe(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=qe(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),ze(t,this,a)}}(t,void 0,Ue),t+"")}(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(t,e,n){if(!T(n))return!1;var r=typeof e;return!!("number"==r?wt(n)&&at(e,n.length):"string"==r&&e in n)&&_(n[e],t)}(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a)}return e})}(function(t,e){X(e,Ct(e),t)});const Ge=Symbol("observableProperties"),Qe=Symbol("boundObservables"),Ke=Symbol("boundProperties"),Ye={set(t,e){if(T(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);Ze(this);const n=this[Ge];if(t in this&&!n.has(t))throw new de.b("observable-set-cannot-override: Cannot override an existing property.",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>n.get(t),set(e){const r=n.get(t);let i=this.fire("set:"+t,t,e,r);void 0===i&&(i=e),r===i&&n.has(t)||(n.set(t,i),this.fire("change:"+t,t,i,r))}}),this[t]=e},bind(...t){if(!t.length||!nn(t))throw new de.b("observable-bind-wrong-properties: All properties must be strings.",this);if(new Set(t).size!==t.length)throw new de.b("observable-bind-duplicate-properties: Properties must be unique.",this);Ze(this);const e=this[Ke];t.forEach(t=>{if(e.has(t))throw new de.b("observable-bind-rebind: Cannot bind the same property more that once.",this)});const n=new Map;return t.forEach(t=>{const r={property:t,to:[]};e.set(t,r),n.set(t,r)}),{to:tn,toMany:en,_observable:this,_bindProperties:t,_to:[],_bindings:n}},unbind(...t){if(!(Ge in this))return;const e=this[Ke],n=this[Qe];if(t.length){if(!nn(t))throw new de.b("observable-unbind-wrong-properties: Properties must be strings.",this);t.forEach(t=>{const r=e.get(t);if(!r)return;let i,o,s,a;r.to.forEach(t=>{o=t[1],s=n.get(i=t[0]),(a=s[o]).delete(r),a.size||delete s[o],Object.keys(s).length||(n.delete(i),this.stopListening(i,"change"))}),e.delete(t)})}else n.forEach((t,e)=>{this.stopListening(e,"change")}),n.clear(),e.clear()},decorate(t){const e=this[t];if(!e)throw new de.b("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",this,{object:this,methodName:t});this.on(t,(t,n)=>{t.return=e.apply(this,n)}),this[t]=function(...e){return this.fire(t,e)}}};Je(Ye,ye);var Xe=Ye;function Ze(t){Ge in t||(Object.defineProperty(t,Ge,{value:new Map}),Object.defineProperty(t,Qe,{value:new Map}),Object.defineProperty(t,Ke,{value:new Map}))}function tn(...t){const e=function(...t){if(!t.length)throw new de.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);const e={to:[]};let n;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)n.properties.push(t);else{if("object"!=typeof t)throw new de.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);e.to.push(n={observable:t,properties:[]})}}),e}(...t),n=Array.from(this._bindings.keys()),r=n.length;if(!e.callback&&e.to.length>1)throw new de.b("observable-bind-to-no-callback: Binding multiple observables only possible with callback.",this);if(r>1&&e.callback)throw new de.b("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.",this);e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==r)throw new de.b("observable-bind-to-properties-length: The number of properties must match.",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),function(t,e){e.forEach(e=>{const n=t[Qe];let r;n.get(e.observable)||t.listenTo(e.observable,"change",(i,o)=>{(r=n.get(e.observable)[o])&&r.forEach(e=>{rn(t,e.property)})})})}(this._observable,this._to),function(t){let e;t._bindings.forEach((n,r)=>{t._to.forEach(i=>{e=i.properties[n.callback?0:t._bindProperties.indexOf(r)],n.to.push([i.observable,e]),function(t,e,n,r){const i=t[Qe],o=i.get(n),s=o||{};s[r]||(s[r]=new Set),s[r].add(e),o||i.set(n,s)}(t._observable,n,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{rn(this._observable,t)})}function en(t,e,n){if(this._bindings.size>1)throw new de.b("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().",this);this.to(...function(t,e){const n=t.map(t=>[t,e]);return Array.prototype.concat.apply([],n)}(t,e),n)}function nn(t){return t.every(t=>"string"==typeof t)}function rn(t,e){const n=t[Ke].get(e);let r;r=n.callback?n.callback.apply(t,n.to.map(t=>t[0][t[1]])):(r=n.to[0])[0][r[1]],t.hasOwnProperty(e)?t[e]=r:t.set(e,r)}const on=Symbol("document");class sn extends Be{constructor(t,e,n){super(t,e,n),this.set("isReadOnly",!1),this.set("isFocused",!1)}is(t,e=null){const n=t&&t.replace(/^view:/,"");return e?"editableElement"==n&&e==this.name||super.is(t,e):"editableElement"==n||super.is(t)}destroy(){this.stopListening()}get document(){return this.getCustomProperty(on)}set _document(t){if(this.getCustomProperty(on))throw new de.b("view-editableelement-document-already-set: View document is already set.",this);this._setCustomProperty(on,t),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}}Te(sn,Xe);const an=Symbol("rootName");class ln extends sn{constructor(t){super(t),this.rootName="main"}is(t,e=null){const n=t.replace(/^view:/,"");return e?"rootElement"==n&&e==this.name||super.is(t,e):"rootElement"==n||super.is(t)}get rootName(){return this.getCustomProperty(an)}set rootName(t){this._setCustomProperty(an,t)}set _name(t){this.name=t}}class un{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new de.b("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new de.b("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,this.position=cn._createAt(t.startPosition?t.startPosition:t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(t){let e,n,r;do{r=this.position,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=r)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};let r;if(n instanceof De){if(t.isAtEnd)return this.position=cn._createAfter(n),this._next();r=n.data[t.offset]}else r=n.getChild(t.offset);if(r instanceof Le)return this.shallow?t.offset++:t=new cn(r,0),this.position=t,this._formatReturnValue("elementStart",r,e,t,1);if(r instanceof De){if(this.singleCharacters)return t=new cn(r,0),this.position=t,this._next();{let n,i=r.data.length;return r==this._boundaryEndParent?(n=new Pe(r,0,i=this.boundaries.end.offset),t=cn._createAfter(n)):(n=new Pe(r,0,r.data.length),t.offset++),this.position=t,this._formatReturnValue("text",n,e,t,i)}}if("string"==typeof r){let r;const i=new Pe(n,t.offset,r=this.singleCharacters?1:(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset);return t.offset+=r,this.position=t,this._formatReturnValue("text",i,e,t,r)}return t=cn._createAfter(n),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};let r;if(n instanceof De){if(t.isAtStart)return this.position=cn._createBefore(n),this._previous();r=n.data[t.offset-1]}else r=n.getChild(t.offset-1);if(r instanceof Le)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",r,e,t,1)):(t=new cn(r,r.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,e,t));if(r instanceof De){if(this.singleCharacters)return t=new cn(r,r.data.length),this.position=t,this._previous();{let n,i=r.data.length;if(r==this._boundaryStartParent){const e=this.boundaries.start.offset;i=(n=new Pe(r,e,r.data.length-e)).data.length,t=cn._createBefore(n)}else n=new Pe(r,0,r.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",n,e,t,i)}}if("string"==typeof r){let r;t.offset-=r=this.singleCharacters?1:t.offset-(n===this._boundaryStartParent?this.boundaries.start.offset:0);const i=new Pe(n,t.offset,r);return this.position=t,this._formatReturnValue("text",i,e,t,r)}return t=cn._createBefore(n),this.position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,r,i){return e instanceof Pe&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=cn._createAfter(e.textNode):(r=cn._createAfter(e.textNode),this.position=r)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=cn._createBefore(e.textNode):(r=cn._createBefore(e.textNode),this.position=r))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}}class cn{constructor(t,e){this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof sn);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=cn._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new un(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let r=0;for(;e[r]==n[r]&&e[r];)r++;return 0===r?null:e[r-1]}is(t){return"position"==t||"view:position"==t}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);const r=xe(e,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return e[r]<n[r]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new un(t)}clone(){return new cn(this.parent,this.offset)}static _createAt(t,e){if(t instanceof cn)return new this(t.parent,t.offset);{const n=t;if("end"==e)e=n.is("text")?n.data.length:n.childCount;else{if("before"==e)return this._createBefore(n);if("after"==e)return this._createAfter(n);if(0!==e&&!e)throw new de.b("view-createPositionAt-offset-required: View#createPositionAt() requires the offset when the first parameter is a view item.",n)}return new cn(n,e)}}static _createAfter(t){if(t.is("textProxy"))return new cn(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new de.b("view-position-after-root: You can not make position after root.",t,{root:t});return new cn(t.parent,t.index+1)}static _createBefore(t){if(t.is("textProxy"))return new cn(t.textNode,t.offsetInText);if(!t.parent)throw new de.b("view-position-before-root: You can not make position before root.",t,{root:t});return new cn(t.parent,t.index)}}class hn{constructor(t,e=null){this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new un({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(dn,{direction:"backward"}),e=this.end.getLastMatchingPosition(dn);return t.parent.is("text")&&t.isAtStart&&(t=cn._createBefore(t.parent)),e.parent.is("text")&&e.isAtEnd&&(e=cn._createAfter(e.parent)),new hn(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(dn);if(t.isAfter(this.end)||t.isEqual(this.end))return new hn(t,t);let e=this.end.getLastMatchingPosition(dn,{direction:"backward"});const n=t.nodeAfter,r=e.nodeBefore;return n&&n.is("text")&&(t=new cn(n,0)),r&&r.is("text")&&(e=new cn(r,r.data.length)),new hn(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&r}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new hn(this.start,t.start)),this.containsPosition(t.end)&&e.push(new hn(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new hn(e,n)}return null}getWalker(t={}){return t.boundaries=this,new un(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}clone(){return new hn(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new un(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new un(t);yield e.position;for(const n of e)yield n.nextPosition}is(t){return"range"==t||"view:range"==t}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,e,n,r){return new this(new cn(t,e),new cn(n,r))}static _createFromPositionAndShift(t,e){const n=t,r=t.getShiftedBy(e);return e>0?new this(n,r):new this(r,n)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(cn._createBefore(t),e)}}function dn(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}function fn(t){let e=0;for(const n of t)e++;return e}class pn{constructor(t=null,e,n){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,e,n)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const r of t._ranges)if(e.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=fn(this.getRanges());if(e!=fn(t.getRanges()))return!1;if(0==e)return!0;for(let n of this.getRanges()){n=n.getTrimmed();let e=!1;for(let r of t.getRanges())if(r=r.getTrimmed(),n.start.isEqual(r.start)&&n.end.isEqual(r.end)){e=!0;break}if(!e)return!1}return!0}getSelectedElement(){if(1!==this.rangeCount)return null;const t=this.getFirstRange();let e=t.start.nodeAfter,n=t.end.nodeBefore;return t.start.parent.is("text")&&t.start.isAtEnd&&t.start.parent.nextSibling&&(e=t.start.parent.nextSibling),t.end.parent.is("text")&&t.end.isAtStart&&t.end.parent.previousSibling&&(n=t.end.parent.previousSibling),e instanceof Le&&e==n?e:null}setTo(t,e,n){if(null===t)this._setRanges([]),this._setFakeOptions(e);else if(t instanceof pn||t instanceof gn)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof hn)this._setRanges([t],e&&e.backward),this._setFakeOptions(e);else if(t instanceof cn)this._setRanges([new hn(t)]),this._setFakeOptions(e);else if(t instanceof Ie){const r=!!n&&!!n.backward;let i;if(void 0===e)throw new de.b("view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",this);i="in"==e?hn._createIn(t):"on"==e?hn._createOn(t):new hn(cn._createAt(t,e)),this._setRanges([i],r),this._setFakeOptions(n)}else{if(!Ne(t))throw new de.b("view-selection-setTo-not-selectable: Cannot set selection to given place.",this);this._setRanges(t,e&&e.backward),this._setFakeOptions(e)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new de.b("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",this);const n=cn._createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.pop(),"before"==n.compareWith(r)?this._addRange(new hn(n,r),!0):this._addRange(new hn(r,n)),this.fire("change")}is(t){return"selection"==t||"view:selection"==t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const n of t)this._addRange(n);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof hn))throw new de.b("view-selection-add-range-not-range: Selection range set to an object that is not an instance of view.Range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new de.b("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",this,{addedRange:t,intersectingRange:e});this._ranges.push(new hn(t.start,t.end))}}Te(pn,ye);class gn{constructor(t=null,e,n){this._selection=new pn,this._selection.delegate("change").to(this),this._selection.setTo(t,e,n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}is(t){return"selection"==t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t}_setTo(t,e,n){this._selection.setTo(t,e,n)}_setFocus(t,e){this._selection.setFocus(t,e)}}Te(gn,ye);class mn{constructor(t={}){this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[]}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){let n;const r=this._idProperty;if(r in t){if("string"!=typeof(n=t[r]))throw new de.b("collection-add-invalid-id",this);if(this.get(n))throw new de.b("collection-add-item-already-exists",this)}else t[r]=n=ge();if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new de.b("collection-add-item-invalid-index",this);return this._items.splice(e,0,t),this._itemMap.set(n,t),this.fire("add",t,e),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new de.b("collection-get-invalid-arg: Index or id must be given.",this);e=this._items[t]}return e||null}has(t){return this._itemMap.has("string"==typeof t?t:t[this._idProperty])}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,this._items.indexOf(e)}remove(t){let e,n,r,i=!1;const o=this._idProperty;if("string"==typeof t?(i=!(r=this._itemMap.get(n=t)),r&&(e=this._items.indexOf(r))):"number"==typeof t?(i=!(r=this._items[e=t]),r&&(n=r[o])):(n=(r=t)[o],i=-1==(e=this._items.indexOf(r))||!this._itemMap.get(n)),i)throw new de.b("collection-remove-404: Item not found.",this);this._items.splice(e,1),this._itemMap.delete(n);const s=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(s),this.fire("remove",r,e),r}map(t,e){return this._items.map(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;)this.remove(0)}bindTo(t){if(this._bindToCollection)throw new de.b("collection-bind-to-rebind: The collection cannot be bound more than once.",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{this._setUpBindToBinding("function"==typeof t?e=>t(e):e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,r,i)=>{const o=e._bindToCollection==this,s=e._bindToInternalToExternalMap.get(r);if(o&&s)this._bindToExternalToInternalMap.set(r,s),this._bindToInternalToExternalMap.set(s,r);else{const n=t(r);if(!n)return void this._skippedIndexesFromExternal.push(i);let o=i;for(const t of this._skippedIndexesFromExternal)i>t&&o--;for(const t of e._skippedIndexesFromExternal)o>=t&&o++;this._bindToExternalToInternalMap.set(r,n),this._bindToInternalToExternalMap.set(n,r),this.add(n,o);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)o<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const r of e)n(0,r,e.getIndex(r));this.listenTo(e,"add",n),this.listenTo(e,"remove",(t,e,n)=>{const r=this._bindToExternalToInternalMap.get(e);r&&this.remove(r),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(n<e&&t.push(e-1),n>e&&t.push(e),t),[])})}[Symbol.iterator](){return this._items[Symbol.iterator]()}}Te(mn,ye);class bn{constructor(){this.selection=new gn,this.roots=new mn({idProperty:"rootName"}),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.map(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(e=n(t))break}while(e)}}Te(bn,Xe);const vn=10;class yn extends Le{constructor(t,e,n){super(t,e,n),this.getFillerOffset=wn,this._priority=vn,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new de.b("attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.",this);return new Set(this._clonesGroup)}is(t,e=null){const n=t&&t.replace(/^view:/,"");return e?"attributeElement"==n&&e==this.name||super.is(t,e):"attributeElement"==n||super.is(t)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}}function wn(){if(_n(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(_n(t)>1)return null;t=t.parent}return!t||_n(t)>1?null:this.childCount}function _n(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}yn.DEFAULT_PRIORITY=vn;class kn extends Le{constructor(t,e,n){super(t,e,n),this.getFillerOffset=Cn}is(t,e=null){const n=t.replace(/^view:/,"");return e?"emptyElement"==n&&e==this.name||super.is(t,e):"emptyElement"==n||super.is(t)}_insertChild(t,e){if(e&&(e instanceof Ie||Array.from(e).length>0))throw new de.b("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.",[this,e])}}function Cn(){return null}const En=navigator.userAgent.toLowerCase();var Sn={isMac:En.indexOf("macintosh")>-1,isEdge:!!En.match(/edge\/(\d+.?\d*)/),isGecko:!!En.match(/gecko\/\d+/),isSafari:function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}(En),isAndroid:En.indexOf("android")>-1,features:{isRegExpUnicodePropertySupported:function(){let t=!1;try{t=0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch(t){}return t}()}};const Tn={"\u2318":"ctrl","\u21e7":"shift","\u2325":"alt"},xn={ctrl:"\u2318",shift:"\u21e7",alt:"\u2325"},An=function(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let e=65;e<=90;e++)t[String.fromCharCode(e).toLowerCase()]=e;for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return t}();function In(t){let e;if("string"==typeof t){if(!(e=An[t.toLowerCase()]))throw new de.b("keyboard-unknown-key: Unknown key name.",null,{key:t})}else e=t.keyCode+(t.altKey?An.alt:0)+(t.ctrlKey?An.ctrl:0)+(t.shiftKey?An.shift:0);return e}function Dn(t){return"string"==typeof t&&(t=Pn(t)),t.map(t=>"string"==typeof t?In(t):t).reduce((t,e)=>e+t,0)}function Pn(t){return t.split(/\s*\+\s*/)}class On extends Le{constructor(t,e,n){super(t,e,n),this.getFillerOffset=Nn}is(t,e=null){const n=t.replace(/^view:/,"");return e?"uiElement"==n&&e==this.name||super.is(t,e):"uiElement"==n||super.is(t)}_insertChild(t,e){if(e&&(e instanceof Ie||Array.from(e).length>0))throw new de.b("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.",this)}render(t){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}function Nn(){return null}class Rn{constructor(t){this._children=[],t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return"documentFragment"==t||"view:documentFragment"==t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this);let n=0;const r=function(t){return"string"==typeof t?[new De(t)]:(Ne(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new De(t):t instanceof Pe?new De(t.data):t))}(e);for(const i of r)null!==i.parent&&i._remove(),i.parent=this,this._children.splice(t,0,i),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e){this.fire("change:"+t,e)}}Te(Rn,ye);class Mn{constructor(t){this.document=t,this._cloneGroups=new Map}setSelection(t,e,n){this.document.selection._setTo(t,e,n)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createText(t){return new De(t)}createAttributeElement(t,e,n={}){const r=new yn(t,e);return n.priority&&(r._priority=n.priority),n.id&&(r._id=n.id),r}createContainerElement(t,e){return new Be(t,e)}createEditableElement(t,e){const n=new sn(t,e);return n._document=this.document,n}createEmptyElement(t,e){return new kn(t,e)}createUIElement(t,e,n){const r=new On(t,e);return n&&(r.render=n),r}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){w(t)&&void 0===n&&(n=e),n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof cn?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new de.b("view-writer-break-non-container-element: Trying to break an element which is not a container element.",this.document);if(!e.parent)throw new de.b("view-writer-break-root: Trying to break root element.",this.document);if(t.isAtStart)return cn._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(cn._createAfter(e),n);const r=new hn(t,cn._createAt(e,"end")),i=new cn(n,0);this.move(r,i)}return cn._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("text"))return t;if(n.is("attributeElement")&&0===n.childCount){const t=n.parent,e=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new cn(t,e))}const r=n.getChild(e-1),i=n.getChild(e);if(!r||!i)return t;if(r.is("text")&&i.is("text"))return Vn(r,i);if(r.is("attributeElement")&&i.is("attributeElement")&&r.isSimilar(i)){const t=r.childCount;return r._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new cn(r,t))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!(e&&n&&e.is("containerElement")&&n.is("containerElement")))throw new de.b("view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.",this.document);const r=e.getChild(e.childCount-1),i=cn._createAt(r instanceof De?r:e,"end");return this.move(hn._createIn(n),cn._createAt(e,"end")),this.remove(hn._createOn(n)),i}insert(t,e){!function t(e,n){for(const r of e){if(!Un.some(t=>r instanceof t))throw new de.b("view-writer-insert-invalid-node",n);r.is("text")||t(r.getChildren(),n)}}(e=Ne(e)?[...e]:[e],this.document);const n=Ln(t);if(!n)throw new de.b("view-writer-invalid-position-container",this.document);const r=this._breakAttributes(t,!0),i=n._insertChild(r.offset,e);for(const a of e)this._addToClonedElementsGroup(a);const o=r.getShiftedBy(i),s=this.mergeAttributes(r);if(0===i)return new hn(s,s);{s.isEqual(r)||o.offset--;const t=this.mergeAttributes(o);return new hn(s,t)}}remove(t){const e=t instanceof hn?t:hn._createOn(t);if(qn(e,this.document),e.isCollapsed)return new Rn;const{start:n,end:r}=this._breakAttributesRange(e,!0),i=n.parent._removeChildren(n.offset,r.offset-n.offset);for(const s of i)this._removeFromClonedElementsGroup(s);const o=this.mergeAttributes(n);return e.start=o,e.end=o.clone(),new Rn(i)}clear(t,e){qn(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of n){const n=r.item;let i;if(n.is("element")&&e.isSimilar(n))i=hn._createOn(n);else if(!r.nextPosition.isAfter(t.start)&&n.is("textProxy")){const t=n.getAncestors().find(t=>t.is("element")&&e.isSimilar(t));t&&(i=hn._createIn(t))}i&&(i.end.isAfter(t.end)&&(i.end=t.end),i.start.isBefore(t.start)&&(i.start=t.start),this.remove(i))}}move(t,e){let n;if(e.isAfter(t.end)){const r=(e=this._breakAttributes(e,!0)).parent,i=r.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=r.childCount-i}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof yn))throw new de.b("view-writer-wrap-invalid-attribute",this.document);if(qn(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!Array.from(n.parent.getChildren()).some(t=>!t.is("uiElement"))&&(n=n.getLastMatchingPosition(t=>t.item.is("uiElement"))),n=this._wrapPosition(n,e);const r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new hn(n)}return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof yn))throw new de.b("view-writer-unwrap-invalid-attribute",this.document);if(qn(t,this.document),t.isCollapsed)return t;const{start:n,end:r}=this._breakAttributesRange(t,!0),i=this._unwrapChildren(n.parent,n.offset,r.offset,e),o=this.mergeAttributes(i.start);o.isEqual(i.start)||i.end.offset--;const s=this.mergeAttributes(i.end);return new hn(o,s)}rename(t,e){const n=new Be(t,e.getAttributes());return this.insert(cn._createAfter(e),n),this.move(hn._createIn(e),cn._createAt(n,0)),this.remove(hn._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return cn._createAt(t,e)}createPositionAfter(t){return cn._createAfter(t)}createPositionBefore(t){return cn._createBefore(t)}createRange(t,e){return new hn(t,e)}createRangeOn(t){return hn._createOn(t)}createRangeIn(t){return hn._createIn(t)}createSelection(t,e,n){return new pn(t,e,n)}_wrapChildren(t,e,n,r){let i=e;const o=[];for(;i<n;){const e=t.getChild(i),n=e.is("text"),s=e.is("attributeElement"),a=e.is("emptyElement"),l=e.is("uiElement");if(s&&this._wrapAttributeElement(r,e))o.push(new cn(t,i));else if(n||a||l||s&&Fn(r,e)){const n=r._clone();e._remove(),n._appendChild(e),t._insertChild(i,n),this._addToClonedElementsGroup(n),o.push(new cn(t,i))}else s&&this._wrapChildren(e,0,e.childCount,r);i++}let s=0;for(const a of o)a.offset-=s,a.offset!=e&&(this.mergeAttributes(a).isEqual(a)||(s++,n--));return hn._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,r){let i=e;const o=[];for(;i<n;){const e=t.getChild(i);if(e.is("attributeElement"))if(e.isSimilar(r)){const r=e.getChildren(),s=e.childCount;e._remove(),t._insertChild(i,r),this._removeFromClonedElementsGroup(e),o.push(new cn(t,i),new cn(t,i+s)),i+=s,n+=s-1}else this._unwrapAttributeElement(r,e)?(o.push(new cn(t,i),new cn(t,i+1)),i++):(this._unwrapChildren(e,0,e.childCount,r),i++);else i++}let s=0;for(const a of o)a.offset-=s,a.offset!=e&&a.offset!=n&&(this.mergeAttributes(a).isEqual(a)||(s++,n--));return hn._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:r}=this._breakAttributesRange(t,!0),i=this._wrapChildren(n.parent,n.offset,r.offset,e),o=this.mergeAttributes(i.start);o.isEqual(i.start)||i.end.offset--;const s=this.mergeAttributes(i.end);return new hn(o,s)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return jn(t.clone());t.parent.is("text")&&(t=Bn(t));const n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const r=new hn(t,t.getShiftedBy(1));this.wrap(r,e);const i=new cn(n.parent,n.index);n._remove();const o=i.nodeBefore,s=i.nodeAfter;return o instanceof De&&s instanceof De?Vn(o,s):jn(i)}_wrapAttributeElement(t,e){if(!Hn(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&e.hasAttribute(n)&&e.getAttribute(n)!==t.getAttribute(n))return!1;for(const n of t.getStyleNames())if(e.hasStyle(n)&&e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())"class"!==n&&"style"!==n&&(e.hasAttribute(n)||this.setAttribute(n,t.getAttribute(n),e));for(const n of t.getStyleNames())e.hasStyle(n)||this.setStyle(n,t.getStyle(n),e);for(const n of t.getClassNames())e.hasClass(n)||this.addClass(n,e);return!0}_unwrapAttributeElement(t,e){if(!Hn(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&(!e.hasAttribute(n)||e.getAttribute(n)!==t.getAttribute(n)))return!1;if(!e.hasClass(...t.getClassNames()))return!1;for(const n of t.getStyleNames())if(!e.hasStyle(n)||e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())"class"!==n&&"style"!==n&&this.removeAttribute(n,e);return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0}_breakAttributesRange(t,e=!1){const n=t.start,r=t.end;if(qn(t,this.document),t.isCollapsed){const n=this._breakAttributes(t.start,e);return new hn(n,n)}const i=this._breakAttributes(r,e),o=i.parent.childCount,s=this._breakAttributes(n,e);return i.offset+=i.parent.childCount-o,new hn(s,i)}_breakAttributes(t,e=!1){const n=t.offset,r=t.parent;if(t.parent.is("emptyElement"))throw new de.b("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new de.b("view-writer-cannot-break-ui-element",this.document);if(!e&&r.is("text")&&zn(r.parent))return t.clone();if(zn(r))return t.clone();if(r.is("text"))return this._breakAttributes(Bn(t),e);if(n==r.childCount){const t=new cn(r.parent,r.index+1);return this._breakAttributes(t,e)}if(0===n){const t=new cn(r.parent,r.index);return this._breakAttributes(t,e)}{const t=r.index+1,i=r._clone();r.parent._insertChild(t,i),this._addToClonedElementsGroup(i);const o=r._removeChildren(n,r.childCount-n);i._appendChild(o);const s=new cn(r.parent,t);return this._breakAttributes(s,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const r of t.getChildren())this._addToClonedElementsGroup(r);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const r of t.getChildren())this._removeFromClonedElementsGroup(r);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Ln(t){let e=t.parent;for(;!zn(e);){if(!e)return;e=e.parent}return e}function Fn(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity()}function jn(t){const e=t.nodeBefore;if(e&&e.is("text"))return new cn(e,e.data.length);const n=t.nodeAfter;return n&&n.is("text")?new cn(n,0):t}function Bn(t){if(t.offset==t.parent.data.length)return new cn(t.parent.parent,t.parent.index+1);if(0===t.offset)return new cn(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new De(e)),new cn(t.parent.parent,t.parent.index+1)}function Vn(t,e){const n=t.data.length;return t._data+=e.data,e._remove(),new cn(t,n)}const Un=[De,yn,Be,kn,On];function zn(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function qn(t,e){const n=Ln(t.start),r=Ln(t.end);if(!n||!r||n!==r)throw new de.b("view-writer-invalid-range-container",e)}function Hn(t,e){return null===t.id&&null===e.id}function $n(t){return"[object Text]"==Object.prototype.toString.call(t)}const Wn=t=>t.createTextNode("\xa0"),Jn=t=>{const e=t.createElement("br");return e.dataset.ckeFiller=!0,e},Gn=7,Qn=(()=>{let t="";for(let e=0;e<Gn;e++)t+="\u200b";return t})();function Kn(t){return $n(t)&&t.data.substr(0,Gn)===Qn}function Yn(t){return t.data.length==Gn&&Kn(t)}function Xn(t){return Kn(t)?t.data.slice(Gn):t.data}function Zn(t,e){if(e.keyCode==An.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(1==t.rangeCount&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer,n=t.getRangeAt(0).startOffset;Kn(e)&&n<=Gn&&t.collapse(e,0)}}}function tr(t,e,n,r=!1){n=n||function(t,e){return t===e},Array.isArray(t)||(t=Array.from(t)),Array.isArray(e)||(e=Array.from(e));const i=function(t,e,n){const r=er(t,e,n);if(-1===r)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=er(nr(t,r),nr(e,r),n);return{firstIndex:r,lastIndexOld:t.length-i,lastIndexNew:e.length-i}}(t,e,n);return r?function(t,e){const{firstIndex:n,lastIndexOld:r,lastIndexNew:i}=t;if(-1===n)return Array(e).fill("equal");let o=[];return n>0&&(o=o.concat(Array(n).fill("equal"))),i-n>0&&(o=o.concat(Array(i-n).fill("insert"))),r-n>0&&(o=o.concat(Array(r-n).fill("delete"))),i<e&&(o=o.concat(Array(e-i).fill("equal"))),o}(i,e.length):function(t,e){const n=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:o}=e;return o-r>0&&n.push({index:r,type:"insert",values:t.slice(r,o)}),i-r>0&&n.push({index:r+(o-r),type:"delete",howMany:i-r}),n}(e,i)}function er(t,e,n){for(let r=0;r<Math.max(t.length,e.length);r++)if(void 0===t[r]||void 0===e[r]||!n(t[r],e[r]))return r;return-1}function nr(t,e){return t.slice(e).reverse()}function rr(t,e,n){n=n||function(t,e){return t===e};const r=t.length,i=e.length;if(r>200||i>200||r+i>300)return rr.fastDiff(t,e,n,!0);let o,s;if(i<r){const n=t;t=e,e=n,o="delete",s="insert"}else o="insert",s="delete";const a=t.length,l=e.length,u=l-a,c={},h={};function d(r){const i=(void 0!==h[r-1]?h[r-1]:-1)+1,u=void 0!==h[r+1]?h[r+1]:-1,d=i>u?-1:1;c[r+d]&&(c[r]=c[r+d].slice(0)),c[r]||(c[r]=[]),c[r].push(i>u?o:s);let f=Math.max(i,u),p=f-r;for(;p<a&&f<l&&n(t[p],e[f]);)p++,f++,c[r].push("equal");return f}let f,p=0;do{for(f=-p;f<u;f++)h[f]=d(f);for(f=u+p;f>u;f--)h[f]=d(f);h[u]=d(u),p++}while(h[u]!==l);return c[u].slice(1)}function ir(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}function or(t){const e=t.parentNode;e&&e.removeChild(t)}function sr(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}rr.fastDiff=tr;class ar{constructor(t,e){this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=e,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new de.b("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.",this);this.markedChildren.add(e)}}}render(){let t;for(const e of this.markedChildren)this._updateChildrenMappings(e);this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent));for(const e of this.markedAttributes)this._updateAttrs(e);for(const e of this.markedChildren)this._updateChildren(e,{inlineFillerPosition:t});for(const e of this.markedTexts)!this.markedChildren.has(e.parent)&&this.domConverter.mapViewToDom(e.parent)&&this._updateText(e,{inlineFillerPosition:t});if(t){const e=this.domConverter.viewPositionToDom(t),n=e.parent.ownerDocument;this._inlineFiller=Kn(e.parent)?e.parent:lr(n,e.parent,e.offset)}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=this.domConverter.mapViewToDom(t).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(t,e.ownerDocument,{withChildren:!1})),i=this._diffNodeLists(n,r),o=this._findReplaceActions(i,n,r);if(-1!==o.indexOf("replace")){const e={equal:0,insert:0,delete:0};for(const i of o)if("replace"===i){const i=e.equal+e.insert,o=e.equal+e.delete,s=t.getChild(i);s&&!s.is("uiElement")&&this._updateElementMappings(s,n[o]),or(r[i]),e.equal++}else e[i]++}}_updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("text")?cn._createBefore(this.selection.getFirstPosition().parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&$n(e.parent)&&Kn(e.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!Kn(t))throw new de.b("view-renderer-filler-was-lost: The inline filler node was lost.",this);Yn(t)?t.parentNode.removeChild(t):t.data=t.data.substr(Gn),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;return!(!this.domConverter.mapViewToDom(e.root)||!e.is("element")||!function(t){if("false"==t.getAttribute("contenteditable"))return!1;const e=t.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||"true"==e.getAttribute("contenteditable")}(e)||n===e.getFillerOffset()||t.nodeBefore instanceof De||t.nodeAfter instanceof De)}_updateText(t,e){const n=this.domConverter.findCorrespondingDomText(t),r=this.domConverter.viewToDom(t,n.ownerDocument),i=n.data;let o=r.data;const s=e.inlineFillerPosition;if(s&&s.parent==t.parent&&s.offset==t.index&&(o=Qn+o),i!=o){const t=tr(i,o);for(const e of t)"insert"===e.type?n.insertData(e.index,e.values.join("")):n.deleteData(e.index,e.howMany)}}_updateAttrs(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=Array.from(e.attributes).map(t=>t.name),r=t.getAttributeKeys();for(const i of r)e.setAttribute(i,t.getAttribute(i));for(const i of n)t.hasAttribute(i)||e.removeAttribute(i)}_updateChildren(t,e){const n=this.domConverter.mapViewToDom(t);if(!n)return;const r=e.inlineFillerPosition,i=this.domConverter.mapViewToDom(t).childNodes,o=Array.from(this.domConverter.viewChildrenToDom(t,n.ownerDocument,{bind:!0,inlineFillerPosition:r}));r&&r.parent===t&&lr(n.ownerDocument,o,r.offset);const s=this._diffNodeLists(i,o);let a=0;const l=new Set;for(const u of s)"insert"===u?(ir(n,a,o[a]),a++):"delete"===u?(l.add(i[a]),or(i[a])):(this._markDescendantTextToSync(this.domConverter.domToView(o[a])),a++);for(const u of l)u.parentNode||this.domConverter.unbindDomElement(u)}_diffNodeLists(t,e){return rr(t=function(t,e){const n=Array.from(t);return 0!=n.length&&e?(n[n.length-1]==e&&n.pop(),n):n}(t,this._fakeSelectionContainer),e,(function(t,e,n){return e===n||($n(e)&&$n(n)?e.data===n.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(n)))}).bind(null,this.domConverter))}_findReplaceActions(t,e,n){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;let r=[],i=[],o=[];const s={equal:0,insert:0,delete:0};for(const a of t)"insert"===a?o.push(n[s.equal+s.insert]):"delete"===a?i.push(e[s.equal+s.delete]):((r=r.concat(rr(i,o,ur).map(t=>"equal"===t?"replace":t))).push("equal"),i=[],o=[]),s[a]++;return r.concat(rr(i,o,ur).map(t=>"equal"===t?"replace":t))}_markDescendantTextToSync(t){if(t)if(t.is("text"))this.markedTexts.add(t);else if(t.is("element"))for(const e of t.getChildren())this._markDescendantTextToSync(e)}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):(this._removeFakeSelection(),this._updateDomSelection(t)))}_updateFakeSelection(t){const e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(t){const e=t.createElement("div");return Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xa0",e}(e));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(t))return;n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"\xa0";const r=e.getSelection(),i=e.createRange();r.removeAllRanges(),i.selectNodeContents(n),r.addRange(i)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.focus(),e.collapse(n.parent,n.offset),e.extend(r.parent,r.offset),Sn.isGecko&&function(t,e){const n=t.parent;if(n.nodeType!=Node.ELEMENT_NODE||t.offset!=n.childNodes.length-1)return;const r=n.childNodes[t.offset];r&&"BR"==r.tagName&&e.addRange(e.getRangeAt(0))}(r,e)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const e=t&&this.domConverter.domSelectionToView(t);return!(e&&this.selection.isEqual(e)||!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(t){const e=this._fakeSelectionContainer,n=t.ownerDocument.getSelection();return!e||e.parentElement!==t||n.anchorNode!==e&&!e.contains(n.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments)if(t.getSelection().rangeCount){const e=t.activeElement,n=this.domConverter.mapDomToView(e);e&&n&&t.getSelection().removeAllRanges()}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function lr(t,e,n){const r=e instanceof Array?e:e.childNodes,i=r[n];if($n(i))return i.data=Qn+i.data,i;{const i=t.createTextNode(Qn);return Array.isArray(e)?r.splice(n,0,i):ir(e,n,i),i}}function ur(t,e){return sr(t)&&sr(e)&&!$n(t)&&!$n(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}Te(ar,Xe);var cr={window,document};function hr(t){let e=0;for(;t.previousSibling;)t=t.previousSibling,e++;return e}function dr(t){const e=[];for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}const fr=Jn(document);class pr{constructor(t={}){this.blockFillerMode=t.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption"],this._blockFiller="br"==this.blockFillerMode?Jn:Wn,this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new pn(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const e of Array.from(t.childNodes))this.unbindDomElement(e)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}viewToDom(t,e,n={}){if(t.is("text")){const n=this._processDataFromViewText(t);return e.createTextNode(n)}{if(this.mapViewToDom(t))return this.mapViewToDom(t);let r;if(t.is("documentFragment"))r=e.createDocumentFragment(),n.bind&&this.bindDocumentFragments(r,t);else{if(t.is("uiElement"))return r=t.render(e),n.bind&&this.bindElements(r,t),r;r=t.hasAttribute("xmlns")?e.createElementNS(t.getAttribute("xmlns"),t.name):e.createElement(t.name),n.bind&&this.bindElements(r,t);for(const e of t.getAttributeKeys())r.setAttribute(e,t.getAttribute(e))}if(n.withChildren||void 0===n.withChildren)for(const i of this.viewChildrenToDom(t,e,n))r.appendChild(i);return r}}*viewChildrenToDom(t,e,n={}){const r=t.getFillerOffset&&t.getFillerOffset();let i=0;for(const o of t.getChildren())r===i&&(yield this._blockFiller(e)),yield this.viewToDom(o,e,n),i++;r===i&&(yield this._blockFiller(e))}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),r=document.createRange();return r.setStart(e.parent,e.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(t){const e=t.parent;if(e.is("text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let r=t.offset;return Kn(n)&&(r+=Gn),{parent:n,offset:r}}{let n,r,i;if(0===t.offset){if(!(n=this.mapViewToDom(e)))return null;i=n.childNodes[0]}else{const e=t.nodeBefore;if(!(r=e.is("text")?this.findCorrespondingDomText(e):this.mapViewToDom(t.nodeBefore)))return null;n=r.parentNode,i=r.nextSibling}return $n(i)&&Kn(i)?{parent:i,offset:Gn}:{parent:n,offset:r?hr(r)+1:0}}}domToView(t,e={}){if(this.isBlockFiller(t,this.blockFillerMode))return null;const n=this.getParentUIElement(t,this._domToViewMapping);if(n)return n;if($n(t)){if(Yn(t))return null;{const e=this._processDataFromDomText(t);return""===e?null:new De(e)}}if(this.isComment(t))return null;{if(this.mapDomToView(t))return this.mapDomToView(t);let n;if(this.isDocumentFragment(t))n=new Rn,e.bind&&this.bindDocumentFragments(t,n);else{const r=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();n=new Le(r),e.bind&&this.bindElements(t,n);const i=t.attributes;for(let t=i.length-1;t>=0;t--)n._setAttribute(i[t].name,i[t].value)}if(e.withChildren||void 0===e.withChildren)for(const r of this.domChildrenToView(t,e))n._appendChild(r);return n}}*domChildrenToView(t,e={}){for(let n=0;n<t.childNodes.length;n++){const r=this.domToView(t.childNodes[n],e);null!==r&&(yield r)}}domSelectionToView(t){if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;$n(e)&&(e=e.parentNode);const n=this.fakeSelectionToView(e);if(n)return n}const e=this.isDomSelectionBackward(t),n=[];for(let r=0;r<t.rangeCount;r++){const e=t.getRangeAt(r),i=this.domRangeToView(e);i&&n.push(i)}return new pn(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new hn(e,n):null}domPositionToView(t,e){if(this.isBlockFiller(t,this.blockFillerMode))return this.domPositionToView(t.parentNode,hr(t));const n=this.mapDomToView(t);if(n&&n.is("uiElement"))return cn._createBefore(n);if($n(t)){if(Yn(t))return this.domPositionToView(t.parentNode,hr(t));const n=this.findCorrespondingViewText(t);let r=e;return n?(Kn(t)&&(r=(r-=Gn)<0?0:r),new cn(n,r)):null}if(0===e){const e=this.mapDomToView(t);if(e)return new cn(e,0)}else{const n=t.childNodes[e-1],r=$n(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(r&&r.parent)return new cn(r.parent,r.index+1)}return null}mapDomToView(t){return this.getParentUIElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(Yn(t))return null;const e=this.getParentUIElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const t=this.mapDomToView(n);if(t)return t.nextSibling instanceof De?t.nextSibling:null}else{const e=this.mapDomToView(t.parentNode);if(e){const t=e.getChild(0);return t instanceof De?t:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:t,scrollY:n}=cr.window,r=[];mr(e,t=>{const{scrollLeft:e,scrollTop:n}=t;r.push([e,n])}),e.focus(),mr(e,t=>{const[e,n]=r.shift();t.scrollLeft=e,t.scrollTop=n}),cr.window.scrollTo(t,n)}}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(t){return t&&t.nodeType==Node.COMMENT_NODE}isBlockFiller(t){return"br"==this.blockFillerMode?t.isEqualNode(fr):function(t,e){return $n(t)&&"\xa0"==t.data&&function(t,e){const n=t.parentNode;return n&&n.tagName&&e.includes(n.tagName.toLowerCase())}(t,e)&&1===t.parentNode.childNodes.length}(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.collapsed;return e.detach(),n}getParentUIElement(t){const e=dr(t);for(e.pop();e.length;){const t=e.pop(),n=this._domToViewMapping.get(t);if(n&&n.is("uiElement"))return n}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}_isDomSelectionPositionCorrect(t,e){if($n(t)&&Kn(t)&&e<Gn)return!1;if(this.isElement(t)&&Kn(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!n||!n.is("uiElement")}_processDataFromViewText(t){let e=t.data;if(t.getAncestors().some(t=>this.preElements.includes(t.name)))return e;if(" "==e.charAt(0)){const n=this._getTouchingViewTextNode(t,!1);(!n||!this._nodeEndsWithSpace(n))&&n||(e="\xa0"+e.substr(1))}if(" "==e.charAt(e.length-1)){const n=this._getTouchingViewTextNode(t,!0);" "!=e.charAt(e.length-2)&&n&&" "!=n.data.charAt(0)||(e=e.substr(0,e.length-1)+"\xa0")}return e.replace(/ {2}/g," \xa0")}_nodeEndsWithSpace(t){if(t.getAncestors().some(t=>this.preElements.includes(t.name)))return!1;const e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1)}_processDataFromDomText(t){let e=t.data;if(gr(t,this.preElements))return Xn(t);e=e.replace(/[ \n\t\r]{1,}/g," ");const n=this._getTouchingInlineDomNode(t,!1),r=this._getTouchingInlineDomNode(t,!0),i=this._checkShouldLeftTrimDomText(n),o=this._checkShouldRightTrimDomText(t,r);return i&&(e=e.replace(/^ /,"")),o&&(e=e.replace(/ $/,"")),e=(e=Xn(new Text(e))).replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(e)||!r||r.data&&" "==r.data.charAt(0))&&(e=e.replace(/\u00A0$/," ")),i&&(e=e.replace(/^\u00A0/," ")),e}_checkShouldLeftTrimDomText(t){return!t||!!ue(t)||/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1))}_checkShouldRightTrimDomText(t,e){return!e&&!Kn(t)}_getTouchingViewTextNode(t,e){const n=new un({startPosition:e?cn._createAfter(t):cn._createBefore(t),direction:e?"forward":"backward"});for(const r of n){if(r.item.is("containerElement"))return null;if(r.item.is("br"))return null;if(r.item.is("textProxy"))return r.item}return null}_getTouchingInlineDomNode(t,e){if(!t.parentNode)return null;const n=e?"nextNode":"previousNode",r=t.ownerDocument,i=dr(t)[0],o=r.createTreeWalker(i,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:t=>$n(t)?NodeFilter.FILTER_ACCEPT:"BR"==t.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});o.currentNode=t;const s=o[n]();if(null!==s){const e=function(t,e){const n=dr(t),r=dr(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}(t,s);if(e&&!gr(t,this.blockElements,e)&&!gr(s,this.blockElements,e))return s}return null}}function gr(t,e,n){let r=dr(t);return n&&(r=r.slice(r.indexOf(n)+1)),r.some(t=>t.tagName&&e.includes(t.tagName.toLowerCase()))}function mr(t,e){for(;t&&t!=cr.document;)e(t),t=t.parentNode}function br(t){const e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}var vr=Je({},ye,{listenTo(t,...e){if(sr(t)||br(t)){const n=this._getProxyEmitter(t)||new yr(t);n.attach(...e),t=n}ye.listenTo.call(this,t,...e)},stopListening(t,e,n){if(sr(t)||br(t)){const e=this._getProxyEmitter(t);if(!e)return;t=e}ye.stopListening.call(this,t,e,n),t instanceof yr&&t.detach(e)},_getProxyEmitter(t){return function(t,e){return t[be]&&t[be][e]?t[be][e].emitter:null}(this,wr(t))}});class yr{constructor(t){we(this,wr(t)),this._domNode=t}}function wr(t){return t["data-ck-expando"]||(t["data-ck-expando"]=ge())}Je(yr.prototype,ye,{attach(t,e,n={}){if(this._domListeners&&this._domListeners[t])return;const r=this._createDomListener(t,!!n.useCapture);this._domNode.addEventListener(t,r,!!n.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[t]=r},detach(t){let e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()},_createDomListener(t,e){const n=e=>{this.fire(t,e)};return n.removeListener=()=>{this._domNode.removeEventListener(t,n,e),delete this._domListeners[t]},n}});class _r{constructor(t){this.view=t,this.document=t.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}}function kr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new $;++e<n;)this.add(t[e])}Te(_r,vr),kr.prototype.add=kr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},kr.prototype.has=function(t){return this.__data__.has(t)};var Cr=kr,Er=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Sr=function(t,e){return t.has(e)},Tr=function(t,e,n,r,i,o){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,h=!0,d=2&n?new Cr:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var f=t[c],p=e[c];if(r)var g=s?r(p,f,c,e,t,o):r(f,p,c,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!Er(e,function(t,e){if(!Sr(d,e)&&(f===t||i(f,t,n,r,o)))return d.push(e)})){h=!1;break}}else if(f!==p&&!i(f,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},xr=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},Ar=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Ir=i?i.prototype:void 0,Dr=Ir?Ir.valueOf:void 0,Pr=Object.prototype.hasOwnProperty,Or="[object Arguments]",Nr="[object Array]",Rr="[object Object]",Mr=Object.prototype.hasOwnProperty,Lr=function t(e,n,r,i,o){return e===n||(null==e||null==n||!p(e)&&!p(n)?e!=e&&n!=n:function(t,e,n,r,i,o){var s=it(t),a=it(e),l=s?Nr:Ht(t),u=a?Nr:Ht(e),c=(l=l==Or?Rr:l)==Rr,h=(u=u==Or?Rr:u)==Rr,d=l==u;if(d&&Object(ot.a)(t)){if(!Object(ot.a)(e))return!1;s=!0,c=!1}if(d&&!c)return o||(o=new J),s||ft(t)?Tr(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(l){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Wt(t),new Wt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=xr;case"[object Set]":if(a||(a=Ar),t.size!=e.size&&!(1&r))return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var c=Tr(a(t),a(e),r,i,o,s);return s.delete(t),c;case"[object Symbol]":if(Dr)return Dr.call(t)==Dr.call(e)}return!1}(t,e,0,n,r,i,o);if(!(1&n)){var f=c&&Mr.call(t,"__wrapped__"),p=h&&Mr.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return o||(o=new J),i(g,m,n,r,o)}}return!!d&&(o||(o=new J),function(t,e,n,r,i,o){var s=1&n,a=Ot(t),l=a.length;if(l!=Ot(e).length&&!s)return!1;for(var u=l;u--;){var c=a[u];if(!(s?c in e:Pr.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);for(var f=s;++u<l;){var p=t[c=a[u]],g=e[c];if(r)var m=s?r(g,p,c,e,t,o):r(p,g,c,t,e,o);if(!(void 0===m?p===g||i(p,g,n,r,o):m)){d=!1;break}f||(f="constructor"==c)}if(d&&!f){var b=t.constructor,v=e.constructor;b!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v)&&(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))}(e,n,r,i,t,o))},Fr=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Lr(t,e,void 0,n):!!r};class jr extends _r{constructor(t){super(t),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=t.domConverter,this.renderer=t._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0===t.length)return;const e=this.domConverter,n=new Map,r=new Set;for(const l of t)if("childList"===l.type){const t=e.mapDomToView(l.target);if(t&&t.is("uiElement"))continue;t&&!this._isBogusBrMutation(l)&&r.add(t)}for(const l of t){const t=e.mapDomToView(l.target);if(!(t&&t.is("uiElement")||"characterData"!==l.type)){const t=e.findCorrespondingViewText(l.target);t&&!r.has(t.parent)?n.set(t,{type:"text",oldText:t.data,newText:Xn(l.target),node:t}):!t&&Kn(l.target)&&r.add(e.mapDomToView(l.target.parentNode))}}const i=[];for(const l of n.values())this.renderer.markToSync("text",l.node),i.push(l);for(const l of r){const t=e.mapViewToDom(l),n=Array.from(l.getChildren()),r=Array.from(e.domChildrenToView(t,{withChildren:!1}));Fr(n,r,a)||(this.renderer.markToSync("children",l),i.push({type:"children",oldChildren:n,newChildren:r,node:l}))}const o=t[0].target.ownerDocument.getSelection();let s=null;if(o&&o.anchorNode){const t=e.domPositionToView(o.anchorNode,o.anchorOffset),n=e.domPositionToView(o.focusNode,o.focusOffset);t&&n&&(s=new pn(t)).setFocus(n)}function a(t,e){if(!Array.isArray(t))return t===e||!(!t.is("text")||!e.is("text"))&&t.data===e.data}this.document.fire("mutations",i,s),this.view.forceRender()}_isBogusBrMutation(t){let e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}class Br{constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,Je(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Vr extends _r{constructor(t){super(t),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(t,e)=>{this.isEnabled&&this.onDomEvent(e)},{useCapture:this.useCapture})})}fire(t,e,n){this.isEnabled&&this.document.fire(t,new Br(this.view,e,n))}}class Ur extends Vr{constructor(t){super(t),this.domEventType=["keydown","keyup"]}onDomEvent(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,get keystroke(){return In(this)}})}}var zr=function(){return r.a.Date.now()},qr=function(t){return"symbol"==typeof t||p(t)&&"[object Symbol]"==h(t)},Hr=/^\s+|\s+$/g,$r=/^[-+]0x[0-9a-f]+$/i,Wr=/^0b[01]+$/i,Jr=/^0o[0-7]+$/i,Gr=parseInt,Qr=function(t){if("number"==typeof t)return t;if(qr(t))return NaN;if(T(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=T(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Hr,"");var n=Wr.test(t);return n||Jr.test(t)?Gr(t.slice(2),n?2:8):$r.test(t)?NaN:+t},Kr=Math.max,Yr=Math.min,Xr=function(t,e,n){var r,i,o,s,a,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function p(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function g(){var t=zr();if(p(t))return m(t);a=setTimeout(g,function(t){var n=e-(t-l);return h?Yr(n,o-(t-u)):n}(t))}function m(t){return a=void 0,d&&r?f(t):(r=i=void 0,s)}function b(){var t=zr(),n=p(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return function(t){return u=t,a=setTimeout(g,e),c?f(t):s}(l);if(h)return clearTimeout(a),a=setTimeout(g,e),f(l)}return void 0===a&&(a=setTimeout(g,e)),s}return e=Qr(e)||0,T(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Kr(Qr(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},b.flush=function(){return void 0===a?s:m(zr())},b};class Zr extends _r{constructor(t){super(t),this._fireSelectionChangeDoneDebounced=Xr(t=>this.document.fire("selectionChangeDone",t),200)}observe(){const t=this.document;t.on("keydown",(e,n)=>{t.selection.isFake&&function(t){return t==An.arrowright||t==An.arrowleft||t==An.arrowup||t==An.arrowdown}(n.keyCode)&&this.isEnabled&&(n.preventDefault(),this._handleSelectionMove(n.keyCode))},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection,n=new pn(e.getRanges(),{backward:e.isBackward,fake:!1});t!=An.arrowleft&&t!=An.arrowup||n.setTo(n.getFirstPosition()),t!=An.arrowright&&t!=An.arrowdown||n.setTo(n.getLastPosition());const r={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}class ti extends _r{constructor(t){super(t),this.mutationObserver=t.getObserver(jr),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Xr(t=>this.document.fire("selectionChangeDone",t),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._loopbackCounter=0}observe(t){const e=t.ownerDocument;this._documents.has(e)||(this.listenTo(e,"selectionchange",()=>{this._handleSelectionChange(e)}),this._documents.add(e))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(t){if(!this.isEnabled||!this.document.isFocused&&!this.document.isReadOnly)return;this.mutationObserver.flush();const e=t.defaultView.getSelection(),n=this.domConverter.domSelectionToView(e);if(!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(e)||++this._loopbackCounter>60))if(this.selection.isSimilar(n))this.view.forceRender();else{const t={oldSelection:this.selection,newSelection:n,domSelection:e};this.document.fire("selectionChange",t),this._fireSelectionChangeDoneDebounced(t)}}_clearInfiniteLoop(){this._loopbackCounter=0}}class ei extends Vr{constructor(t){super(t),this.domEventType=["focus","blur"],this.useCapture=!0;const e=this.document;e.on("focus",()=>{e.isFocused=!0,this._renderTimeoutId=setTimeout(()=>t.forceRender(),50)}),e.on("blur",(n,r)=>{const i=e.selection.editableElement;null!==i&&i!==r.target||(e.isFocused=!1,t.forceRender())})}onDomEvent(t){this.fire(t.type,t)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class ni extends Vr{constructor(t){super(t),this.domEventType=["compositionstart","compositionupdate","compositionend"];const e=this.document;e.on("compositionstart",()=>{e.isComposing=!0}),e.on("compositionend",()=>{e.isComposing=!1})}onDomEvent(t){this.fire(t.type,t)}}class ri extends Vr{constructor(t){super(t),this.domEventType=["beforeinput"]}onDomEvent(t){this.fire(t.type,t)}}function ii(t){return"[object Range]"==Object.prototype.toString.apply(t)}function oi(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}const si=["top","right","bottom","left","width","height"];class ai{constructor(t){const e=ii(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),ue(t)||e)li(this,e?ai.getDomRangeRects(t)[0]:t.getBoundingClientRect());else if(br(t)){const{innerWidth:e,innerHeight:n}=t;li(this,{top:0,right:e,bottom:n,left:0,width:e,height:n})}else li(this,t)}clone(){return new ai(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new ai(e)}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(!ui(t)){let n=t.parentNode||t.commonAncestorContainer;for(;n&&!ui(n);){const t=new ai(n),r=e.getIntersection(t);if(!r)return null;r.getArea()<e.getArea()&&(e=r),n=n.parentNode}}return e}isEqual(t){for(const e of si)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!(!e||!e.isEqual(t))}excludeScrollbarsAndBorders(){const t=this._source;let e,n,r;if(br(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,r=t.getComputedStyle(t.document.documentElement).direction;else{const i=oi(this._source);e=t.offsetWidth-t.clientWidth-i.left-i.right,n=t.offsetHeight-t.clientHeight-i.top-i.bottom,r=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=i.left,this.top+=i.top,this.right-=i.right,this.bottom-=i.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===r?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const r of n)e.push(new ai(r));else{let n=t.startContainer;$n(n)&&(n=n.parentNode);const r=new ai(n.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}}function li(t,e){for(const n of si)t[n]=e[n]}function ui(t){return!!ue(t)&&t===t.ownerDocument.body}function ci({target:t,viewportOffset:e=0}){const n=bi(t);let r=n,i=null;for(;r;){let o;di(o=vi(r==n?t:i),()=>yi(t,r));const s=yi(t,r);if(hi(r,s,e),r.parent!=r){if(i=r.frameElement,r=r.parent,!i)return}else r=null}}function hi(t,e,n){const r=e.clone().moveBy(0,n),i=e.clone().moveBy(0,-n),o=new ai(t).excludeScrollbarsAndBorders();if(![i,r].every(t=>o.contains(t))){let{scrollX:s,scrollY:a}=t;pi(i,o)?a-=o.top-e.top+n:fi(r,o)&&(a+=e.bottom-o.bottom+n),gi(e,o)?s-=o.left-e.left+n:mi(e,o)&&(s+=e.right-o.right+n),t.scrollTo(s,a)}}function di(t,e){const n=bi(t);let r,i;for(;t!=n.document.body;)i=e(),(r=new ai(t).excludeScrollbarsAndBorders()).contains(i)||(pi(i,r)?t.scrollTop-=r.top-i.top:fi(i,r)&&(t.scrollTop+=i.bottom-r.bottom),gi(i,r)?t.scrollLeft-=r.left-i.left:mi(i,r)&&(t.scrollLeft+=i.right-r.right)),t=t.parentNode}function fi(t,e){return t.bottom>e.bottom}function pi(t,e){return t.top<e.top}function gi(t,e){return t.left<e.left}function mi(t,e){return t.right>e.right}function bi(t){return ii(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function vi(t){if(ii(t)){let e=t.commonAncestorContainer;return $n(e)&&(e=e.parentNode),e}return t.parentNode}function yi(t,e){const n=bi(t),r=new ai(t);if(n===e)return r;{let t=n;for(;t!=e;){const e=new ai(t.frameElement).excludeScrollbarsAndBorders();r.moveBy(e.left,e.top),t=t.parent}}return r}Object.assign({},{scrollViewportToShowTarget:ci,scrollAncestorsToShowTarget:function(t){di(vi(t),()=>new ai(t))}});class wi{constructor(){this.document=new bn,this.domConverter=new pr,this.domRoots=new Map,this.set("isRenderingInProgress",!1),this._renderer=new ar(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Mn(this.document),this.addObserver(jr),this.addObserver(ti),this.addObserver(ei),this.addObserver(Ur),this.addObserver(Zr),this.addObserver(ni),Sn.isAndroid&&this.addObserver(ri),function(t){t.document.on("keydown",Zn)}(this),function(t){t.document.on("keydown",(e,n)=>(function(t,e,n){if(e.keyCode==An.arrowright){const t=e.domTarget.ownerDocument.defaultView.getSelection(),r=1==t.rangeCount&&t.getRangeAt(0).collapsed;if(r||e.shiftKey){const e=n.domPositionToView(t.focusNode,t.focusOffset);if(null===e)return;let i=!1;const o=e.getLastMatchingPosition(t=>(t.item.is("uiElement")&&(i=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"))));if(i){const e=n.viewPositionToDom(o);r?t.collapse(e.parent,e.offset):t.extend(e.parent,e.offset)}}}})(0,n,t.domConverter))}(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(t,e="main"){const n=this.document.getRoot(e);n._name=t.tagName.toLowerCase();const r={};for(const{name:o,value:s}of Array.from(t.attributes))r[o]=s,"class"===o?this._writer.addClass(s.split(" "),n):this._writer.setAttribute(o,s,n);this._initialDomRootAttributes.set(t,r);const i=()=>{this._writer.setAttribute("contenteditable",!n.isReadOnly,n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};i(),this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",(t,e)=>this._renderer.markToSync("children",e)),n.on("change:attributes",(t,e)=>this._renderer.markToSync("attributes",e)),n.on("change:text",(t,e)=>this._renderer.markToSync("text",e)),n.on("change:isReadOnly",()=>this.change(i)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const o of this._observers.values())o.observe(t,e)}detachDomRoot(t){const e=this.domRoots.get(t);Array.from(e.attributes).forEach(({name:t})=>e.removeAttribute(t));const n=this._initialDomRootAttributes.get(e);for(const r in n)e.setAttribute(r,n[r]);this.domRoots.delete(t),this.domConverter.unbindDomElement(e)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);for(const[n,r]of this.domRoots)e.observe(r,n);return e.enable(),e}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection(){const t=this.document.selection.getFirstRange();t&&ci({target:this.domConverter.viewRangeToDom(t),viewportOffset:20})}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new de.b("cannot-change-view-tree: Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. This may cause some unexpected behavior and inconsistency between the DOM and the view.",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(t){de.b.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,e){return cn._createAt(t,e)}createPositionAfter(t){return cn._createAfter(t)}createPositionBefore(t){return cn._createBefore(t)}createRange(t,e){return new hn(t,e)}createRangeOn(t){return hn._createOn(t)}createRangeIn(t){return hn._createIn(t)}createSelection(t,e,n){return new pn(t,e,n)}_disableRendering(t){this._renderingDisabled=t,0==t&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}function _i(t){return w(t)?Oe(t):new Map(t)}Te(wi,Xe);class ki{constructor(t){this.parent=null,this._attrs=_i(t)}get index(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new de.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return t}get startOffset(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new de.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return t}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}get document(){return this.root==this?null:this.root.document||null}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),r=t.getAncestors(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),r=xe(e,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return e[r]<n[r]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}is(t){return"node"==t||"model:node"==t}_clone(){return new ki(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=_i(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}class Ci extends ki{constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}is(t){return"text"==t||"model:text"==t||super.is(t)}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Ci(this.data,this.getAttributes())}static fromJSON(t){return new Ci(t.data,t.attributes)}}class Ei{constructor(t,e,n){if(this.textNode=t,e<0||e>t.offsetSize)throw new de.b("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(n<0||e+n>t.offsetSize)throw new de.b("model-textproxy-wrong-length: Given length value is incorrect.",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return"textProxy"==t||"model:textProxy"==t}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={includeSelf:!1,parentFirst:!1}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class Si{constructor(t){this._nodes=[],t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((t,e)=>t+e.offsetSize,0)}getNode(t){return this._nodes[t]||null}getNodeIndex(t){const e=this._nodes.indexOf(t);return-1==e?null:e}getNodeStartOffset(t){const e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce((t,e)=>t+e.offsetSize,0)}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new de.b("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this);return this.getNodeStartOffset(e)}offsetToIndex(t){let e=0;for(const n of this._nodes){if(t>=e&&t<e+n.offsetSize)return this.getNodeIndex(n);e+=n.offsetSize}if(e!=t)throw new de.b("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:t,nodeList:this});return this.length}_insertNodes(t,e){for(const n of e)if(!(n instanceof ki))throw new de.b("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this);this._nodes.splice(t,0,...e)}_removeNodes(t,e=1){return this._nodes.splice(t,e)}toJSON(){return this._nodes.map(t=>t.toJSON())}}class Ti extends ki{constructor(t,e,n){super(e),this.name=t,this._children=new Si,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(t,e=null){const n=t.replace(/^model:/,"");return e?"element"==n&&e==this.name:"element"==n||n==this.name||super.is(t)}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?Array.from(this._children).map(t=>t._clone(!0)):null;return new Ti(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){return"string"==typeof t?[new Ci(t)]:(Ne(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new Ci(t):t instanceof Ei?new Ci(t.data,t.getAttributes()):t))}(e);for(const r of n)null!==r.parent&&r._remove(),r.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const r of n)r.parent=null;return n}static fromJSON(t){let e=null;if(t.children){e=[];for(const n of t.children)e.push(n.name?Ti.fromJSON(n):Ci.fromJSON(n))}return new Ti(t.name,t.attributes,e)}}class xi{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new de.b("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new de.b("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,this.position=t.startPosition?t.startPosition.clone():Di._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(t){let e,n,r,i;do{r=this.position,i=this._visitedParent,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=r,this._visitedParent=i)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};const r=e.textNode?e.textNode:e.nodeAfter;if(r instanceof Ti)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=r),this.position=e,Ai("elementStart",r,t,e,1);if(r instanceof Ci){let i;if(this.singleCharacters)i=1;else{let t=r.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),i=t-e.offset}const o=new Ei(r,e.offset-r.startOffset,i);return e.offset+=i,this.position=e,Ai("text",o,t,e,i)}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Ai("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};const r=e.textNode?e.textNode:e.nodeBefore;if(r instanceof Ti)return e.offset--,this.shallow?(this.position=e,Ai("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this.position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():Ai("elementEnd",r,t,e));if(r instanceof Ci){let i;if(this.singleCharacters)i=1;else{let t=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),i=e.offset-t}const o=new Ei(r,e.offset-r.startOffset-i,i);return e.offset-=i,this.position=e,Ai("text",o,t,e,i)}return e.path.pop(),this.position=e,this._visitedParent=n.parent,Ai("elementStart",n,t,e,1)}}function Ai(t,e,n,r,i){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}var Ii=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};class Di{constructor(t,e,n="toNone"){if(!t.is("element")&&!t.is("documentFragment"))throw new de.b("model-position-root-invalid: Position root invalid.",t);if(!(e instanceof Array)||0===e.length)throw new de.b("model-position-path-incorrect-format: Position path must be an array with at least one item.",t,{path:e});e=t.getPath().concat(e),this.root=t=t.root,this.path=e,this.stickiness=n}get offset(){return Ii(this.path)}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(!(t=t.getChild(t.offsetToIndex(this.path[e]))))throw new de.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});if(t.is("text"))throw new de.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){const t=this.parent.getChild(this.index);return t instanceof Ci&&t.startOffset<this.offset?t:null}get nodeAfter(){return null===this.textNode?this.parent.getChild(this.index):null}get nodeBefore(){return null===this.textNode?this.parent.getChild(this.index-1):null}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=xe(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new xi(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonPath(t){if(this.root!=t.root)return[];const e=xe(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let r=0;for(;e[r]==n[r]&&e[r];)r++;return 0===r?null:e[r-1]}getShiftedBy(t){const e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){let e=null,n=null;switch(this.compareWith(t)){case"same":return!0;case"before":e=Di._createAt(this),n=Di._createAt(t);break;case"after":e=Di._createAt(t),n=Di._createAt(this);break;default:return!1}let r=e.parent;for(;e.path.length+n.path.length;){if(e.isEqual(n))return!0;if(e.path.length>n.path.length){if(e.offset!==r.maxOffset)return!1;e.path=e.path.slice(0,-1),r=r.parent,e.offset++}else{if(0!==n.offset)return!1;n.path=n.path.slice(0,-1)}}}is(t){return"position"==t||"model:position"==t}hasSameParentAs(t){return this.root===t.root&&"same"==xe(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Di._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let n;return e.containsPosition(this)||e.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?Di._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n}_getTransformedByDeletion(t,e){const n=Di._createAt(this);if(this.root!=t.root)return n;if("same"==xe(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e}}else if("prefix"==xe(t.getParentPath(),this.getParentPath())){const r=t.path.length-1;if(t.offset<=this.path[r]){if(t.offset+e>this.path[r])return null;n.path[r]-=e}}return n}_getTransformedByInsertion(t,e){const n=Di._createAt(this);if(this.root!=t.root)return n;if("same"==xe(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=e);else if("prefix"==xe(t.getParentPath(),this.getParentPath())){const r=t.path.length-1;t.offset<=this.path[r]&&(n.path[r]+=e)}return n}_getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return Di._createAt(this);const r=this._getTransformedByDeletion(t,n);return null===r||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):r._getTransformedByInsertion(e,n)}_getCombined(t,e){const n=t.path.length-1,r=Di._createAt(e);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-t.offset,r.path=r.path.concat(this.path.slice(n+1)),r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,n="toNone"){if(t instanceof Di)return new Di(t.root,t.path,t.stickiness);{const r=t;if("end"==e)e=r.maxOffset;else{if("before"==e)return this._createBefore(r,n);if("after"==e)return this._createAfter(r,n);if(0!==e&&!e)throw new de.b("model-createPositionAt-offset-required: Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,t])}if(!r.is("element")&&!r.is("documentFragment"))throw new de.b("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,t]);const i=r.getPath();return i.push(e),new this(r.root,i,n)}}static _createAfter(t,e){if(!t.parent)throw new de.b("model-position-after-root: You cannot make a position after root.",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new de.b("model-position-before-root: You cannot make a position before root.",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const n=new Di(e.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!e.getRoot(t.root))throw new de.b("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",e,{rootName:t.root});return new Di(e.getRoot(t.root),t.path,t.stickiness)}}class Pi{constructor(t,e=null){this.start=Di._createAt(t),this.end=Di._createAt(e||t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new xi({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==xe(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&r}containsItem(t){const e=Di._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}is(t){return"range"==t||"model:range"==t}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Pi(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Pi(t.end,this.end))):e.push(new Pi(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new Pi(e,n)}return null}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,n=Di._createAt(this.start);let r=n.parent;for(;n.path.length>e+1;){const e=r.maxOffset-n.offset;0!==e&&t.push(new Pi(n,n.getShiftedBy(e))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const e=this.end.path[n.path.length-1],r=e-n.offset;0!==r&&t.push(new Pi(n,n.getShiftedBy(r))),n.offset=e,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new xi(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new xi(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new xi(t);yield e.position;for(const n of e)yield n.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Pi(this.start,this.end)]}getTransformedByOperations(t){const e=[new Pi(this.start,this.end)];for(const n of t)for(let t=0;t<e.length;t++){const r=e[t].getTransformedByOperation(n);e.splice(t,1,...r),t+=r.length-1}for(let n=0;n<e.length;n++){const t=e[n];for(let r=n+1;r<e.length;r++){const n=e[r];(t.containsRange(n)||n.containsRange(t)||t.isEqual(n))&&e.splice(r,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new Pi(e,n)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Pi(this.start);let e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Di._createAt(n)).offset=0:(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new Pi(e,n)):new Pi(e,n)}_getTransformedByInsertion(t,e,n=!1){if(n&&this.containsPosition(t))return[new Pi(this.start,t),new Pi(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const n=new Pi(this.start,this.end);return n.start=n.start._getTransformedByInsertion(t,e),n.end=n.end._getTransformedByInsertion(t,e),[n]}}_getTransformedByMove(t,e,n,r=!1){if(this.isCollapsed){const r=this.start._getTransformedByMove(t,e,n);return[new Pi(r)]}const i=Pi._createFromPositionAndShift(t,n),o=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!r&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const r=this.start._getTransformedByMove(t,e,n),i=this.end._getTransformedByMove(t,e,n);return[new Pi(r,i)]}let s;const a=this.getDifference(i);let l=null;const u=this.getIntersection(i);if(1==a.length?l=new Pi(a[0].start._getTransformedByDeletion(t,n),a[0].end._getTransformedByDeletion(t,n)):2==a.length&&(l=new Pi(this.start,this.end._getTransformedByDeletion(t,n))),s=l?l._getTransformedByInsertion(o,n,null!==u||r):[],u){const t=new Pi(u.start._getCombined(i.start,o),u.end._getCombined(i.start,o));2==s.length?s.splice(1,0,t):s.push(t)}return s}_getTransformedByDeletion(t,e){let n=this.start._getTransformedByDeletion(t,e),r=this.end._getTransformedByDeletion(t,e);return null==n&&null==r?null:(null==n&&(n=t),null==r&&(r=t),new Pi(n,r))}static _createFromPositionAndShift(t,e){const n=t,r=t.getShiftedBy(e);return e>0?new this(n,r):new this(r,n)}static _createIn(t){return new this(Di._createAt(t,0),Di._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Di._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new de.b("range-create-from-ranges-empty-array: At least one range has to be passed.",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const n=t.indexOf(e),r=new this(e.start,e.end);if(n>0)for(let i=n-1;t[i].end.isEqual(r.start);i++)r.start=Di._createAt(t[i].start);for(let i=n+1;i<t.length&&t[i].start.isEqual(r.end);i++)r.end=Di._createAt(t[i].end);return r}static fromJSON(t,e){return new this(Di.fromJSON(t.start,e),Di.fromJSON(t.end,e))}}class Oi{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition)return;const n=this._modelToViewMapping.get(e.modelPosition.parent);e.viewPosition=this._findPositionIn(n,e.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition)return;const n=this.findMappedViewAncestor(e.viewPosition),r=this._viewToModelMapping.get(n),i=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=Di._createAt(r,i)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t){const e=this.toModelElement(t);if(this._viewToModelMapping.delete(t),this._elementToMarkerNames.has(t))for(const n of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(n);this._modelToViewMapping.get(e)==t&&this._modelToViewMapping.delete(e)}unbindModelElement(t){const e=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping.delete(e)}bindElementToMarker(t,e){const n=this._markerNameToElements.get(e)||new Set;n.add(t);const r=this._elementToMarkerNames.get(t)||new Set;r.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,r)}unbindElementFromMarkerName(t,e){const n=this._markerNameToElements.get(e);n&&(n.delete(t),0==n.size&&this._markerNameToElements.delete(e));const r=this._elementToMarkerNames.get(t);r&&(r.delete(e),0==r.size&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new Pi(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new hn(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t,e={isPhantom:!1}){const n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e)return null;const n=new Set;for(const r of e)if(r.is("attributeElement"))for(const t of r.getElementsWithSameId())n.add(t);else n.add(r);return n}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;for(;!this._viewToModelMapping.has(e);)e=e.parent;return e}_toModelOffset(t,e,n){if(n!=t)return this._toModelOffset(t.parent,t.index,n)+this._toModelOffset(t,e,t);if(t.is("text"))return e;let r=0;for(let i=0;i<e;i++)r+=this.getModelLength(t.getChild(i));return r}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(const n of t.getChildren())e+=this.getModelLength(n);return e}}_findPositionIn(t,e){let n,r=0,i=0,o=0;if(t.is("text"))return new cn(t,e);for(;i<e;)n=t.getChild(o),i+=r=this.getModelLength(n),o++;return i==e?this._moveViewPositionToTextNode(new cn(t,o)):this._findPositionIn(n,e-(i-r))}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e instanceof De?new cn(e,e.data.length):n instanceof De?new cn(n,0):t}}Te(Oi,ye);class Ni{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(t,e){e=Ri(e),t instanceof Ei&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Ri(e),t instanceof Ei&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}test(t,e){e=Ri(e),t instanceof Ei&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(void 0===n)return null;const r=n.get(e);return void 0===r?null:r}revert(t,e){e=Ri(e),t instanceof Ei&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const r=n.get(t.endOffset);r&&(e=r.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t.startOffset,t.endOffset,t.parent)),e}_addSymbolForTextProxy(t,e,n){const r=Symbol("textProxySymbol");let i,o;return(i=this._textProxyRegistry.get(t))||(i=new Map,this._textProxyRegistry.set(t,i)),(o=i.get(e))||(o=new Map,i.set(e,o)),o.set(n,r),r}}function Ri(t){const e=t.split(":");return e.length>1?e[0]+":"+e[1]:e[0]}class Mi{constructor(t){this.conversionApi=Je({dispatcher:this},t)}convertChanges(t,e,n){for(const r of t.getMarkersToRemove())this.convertMarkerRemove(r.name,r.range,n);for(const r of t.getChanges())"insert"==r.type?this.convertInsert(Pi._createFromPositionAndShift(r.position,r.length),n):"remove"==r.type?this.convertRemove(r.position,r.length,r.name,n):this.convertAttribute(r.range,r.attributeKey,r.attributeOldValue,r.attributeNewValue,n);for(const r of this.conversionApi.mapper.flushUnboundMarkerNames()){const t=e.get(r).getRange();this.convertMarkerRemove(r,t,n),this.convertMarkerAdd(r,t,n)}for(const r of t.getMarkersToAdd())this.convertMarkerAdd(r.name,r.range,n)}convertInsert(t,e){this.conversionApi.writer=e,this.conversionApi.consumable=this._createInsertConsumable(t);for(const n of t){const t=n.item,e={item:t,range:Pi._createFromPositionAndShift(n.previousPosition,n.length)};this._testAndFire("insert",e);for(const n of t.getAttributeKeys())e.attributeKey=n,e.attributeOldValue=null,e.attributeNewValue=t.getAttribute(n),this._testAndFire(`attribute:${n}`,e)}this._clearConversionApi()}convertRemove(t,e,n,r){this.conversionApi.writer=r,this.fire("remove:"+n,{position:t,length:e},this.conversionApi),this._clearConversionApi()}convertAttribute(t,e,n,r,i){this.conversionApi.writer=i,this.conversionApi.consumable=this._createConsumableForRange(t,`attribute:${e}`);for(const o of t){const t={item:o.item,range:Pi._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:e,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${e}`,t)}this._clearConversionApi()}convertSelection(t,e,n){const r=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(t,r),this.fire("selection",{selection:t},this.conversionApi),t.isCollapsed){for(const e of r){const n=e.getRange();if(!Li(t.getFirstPosition(),e,this.conversionApi.mapper))continue;const r={item:t,markerName:e.name,markerRange:n};this.conversionApi.consumable.test(t,"addMarker:"+e.name)&&this.fire("addMarker:"+e.name,r,this.conversionApi)}for(const e of t.getAttributeKeys()){const n={item:t,range:t.getFirstRange(),attributeKey:e,attributeOldValue:null,attributeNewValue:t.getAttribute(e)};this.conversionApi.consumable.test(t,"attribute:"+n.attributeKey)&&this.fire("attribute:"+n.attributeKey+":$text",n,this.conversionApi)}this._clearConversionApi()}}convertMarkerAdd(t,e,n){if(!e.root.document||"$graveyard"==e.root.rootName)return;this.conversionApi.writer=n;const r="addMarker:"+t,i=new Ni;if(i.add(e,r),this.conversionApi.consumable=i,this.fire(r,{markerName:t,markerRange:e},this.conversionApi),i.test(e,r)){this.conversionApi.consumable=this._createConsumableForRange(e,r);for(const n of e.getItems()){if(!this.conversionApi.consumable.test(n,r))continue;const i={item:n,range:Pi._createOn(n),markerName:t,markerRange:e};this.fire(r,i,this.conversionApi)}this._clearConversionApi()}}convertMarkerRemove(t,e,n){e.root.document&&"$graveyard"!=e.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+t,{markerName:t,markerRange:e},this.conversionApi),this._clearConversionApi())}_createInsertConsumable(t){const e=new Ni;for(const n of t){const t=n.item;e.add(t,"insert");for(const n of t.getAttributeKeys())e.add(t,"attribute:"+n)}return e}_createConsumableForRange(t,e){const n=new Ni;for(const r of t.getItems())n.add(r,e);return n}_createSelectionConsumable(t,e){const n=new Ni;n.add(t,"selection");for(const r of e)n.add(t,"addMarker:"+r.name);for(const r of t.getAttributeKeys())n.add(t,"attribute:"+r);return n}_testAndFire(t,e){this.conversionApi.consumable.test(e.item,t)&&this.fire(t+":"+(e.item.name||"$text"),e,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}}function Li(t,e,n){const r=e.getRange(),i=Array.from(t.getAncestors());return i.shift(),i.reverse(),!i.some(t=>{if(r.containsItem(t))return!!n.toViewElement(t).getCustomProperty("addHighlight")})}Te(Mi,ye);class Fi{constructor(t,e,n){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t&&this.setTo(t,e,n)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const r of t._ranges)if(e.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Pi(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new Pi(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new Pi(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(t,e,n){if(null===t)this._setRanges([]);else if(t instanceof Fi)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof Pi)this._setRanges([t],!!e&&!!e.backward);else if(t instanceof Di)this._setRanges([new Pi(t)]);else if(t instanceof ki){const r=!!n&&!!n.backward;let i;if("in"==e)i=Pi._createIn(t);else if("on"==e)i=Pi._createOn(t);else{if(void 0===e)throw new de.b("model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",[this,t]);i=new Pi(Di._createAt(t,e))}this._setRanges([i],r)}else{if(!Ne(t))throw new de.b("model-selection-setTo-not-selectable: Cannot set the selection to the given place.",[this,t]);this._setRanges(t,e&&!!e.backward)}}_setRanges(t,e=!1){const n=(t=Array.from(t)).some(e=>{if(!(e instanceof Pi))throw new de.b("model-selection-set-ranges-not-range: Selection range set to an object that is not an instance of model.Range.",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});if(t.length!==this._ranges.length||n){this._removeAllRanges();for(const e of t)this._pushRange(e);this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0})}}setFocus(t,e){if(null===this.anchor)throw new de.b("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",[this,t]);const n=Di._createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?(this._pushRange(new Pi(n,r)),this._lastRangeBackward=!0):(this._pushRange(new Pi(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){if(1!==this.rangeCount)return null;const t=this.getFirstRange(),e=t.start.nodeAfter;return e instanceof Ti&&e==t.end.nodeBefore?e:null}is(t){return"selection"==t||"model:selection"==t}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=Vi(e.start,t);n&&Ui(n,e)&&(yield n);for(const i of e.getWalker()){const n=i.item;"elementEnd"==i.type&&Bi(n,t,e)&&(yield n)}const r=Vi(e.end,t);r&&!e.end.isTouching(Di._createAt(r,0))&&Ui(r,e)&&(yield r)}}containsEntireContent(t=this.anchor.root){const e=Di._createAt(t,0),n=Di._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new Pi(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new de.b("model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function ji(t,e){return!e.has(t)&&(e.add(t),t.document.model.schema.isBlock(t)&&t.parent)}function Bi(t,e,n){return ji(t,e)&&Ui(t,n)}function Vi(t,e){const n=t.parent.document.model.schema,r=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const o=r.find(t=>!i&&!(i=n.isLimit(t))&&ji(t,e));return r.forEach(t=>e.add(t)),o}function Ui(t,e){const n=function(t){const e=t.document.model.schema;let n=t.parent;for(;n;){if(e.isBlock(n))return n;n=n.parent}}(t);return!n||!e.containsRange(Pi._createOn(n),!0)}Te(Fi,ye);class zi extends Pi{constructor(t,e){super(t,e),(function(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&(function(t){const e=this.getTransformedByOperation(t),n=Pi._createFromRanges(e),r=!n.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let o=null;if(r){"$graveyard"==n.root.rootName&&(o="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",e,{deletionPosition:o})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:o})}).call(this,n)},{priority:"low"})}).call(this)}detach(){this.stopListening()}is(t){return"liveRange"==t||"model:liveRange"==t||super.is(t)}toRange(){return new Pi(this.start,this.end)}static fromRange(t){return new zi(t.start,t.end)}}Te(zi,ye);const qi="selection:";class Hi{constructor(t){this._selection=new $i(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}is(t){return"selection"==t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(t,e,n){this._selection.setTo(t,e,n)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return qi+t}static _isStoreAttributeKey(t){return t.startsWith(qi)}}Te(Hi,ye);class $i extends Fi{constructor(t){super(),this.markers=new mn({idProperty:"name"}),this._model=t.model,this._document=t,this._attributePriority=new Map,this._fixGraveyardRangesData=[],this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this.listenTo(this._model,"applyOperation",(t,e)=>{const n=e[0];if(n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type){for(;this._fixGraveyardRangesData.length;){const{liveRange:t,sourcePosition:e}=this._fixGraveyardRangesData.shift();this._fixGraveyardSelection(t,e)}this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1}))}},{priority:"lowest"}),this.on("change:range",()=>{for(const t of this.getRanges())if(!this._document._validateSelectionRange(t))throw new de.b("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",this,{range:t})}),this.listenTo(this._model.markers,"update",()=>this._updateMarkers()),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const n=t.document.differ;for(const r of n.getChanges()){if("insert"!=r.type)continue;const n=r.position.parent;r.length===n.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(n.getAttributeKeys()).filter(t=>t.startsWith(qi));for(const r of e)t.removeAttribute(r,n)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(t,e,n){super.setTo(t,e,n),this._updateAttributes(!0)}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0)}setAttribute(t,e){this._setAttribute(t,e)&&this.fire("change:attribute",{attributeKeys:[t],directChange:!0})}removeAttribute(t){this._removeAttribute(t)&&this.fire("change:attribute",{attributeKeys:[t],directChange:!0})}overrideGravity(){const t=ge();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new de.b("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=zi.fromRange(t);return e.on("change:range",(t,n,r)=>{this._hasChangedRange=!0,e.root==this._document.graveyard&&this._fixGraveyardRangesData.push({liveRange:e,sourcePosition:r.deletionPosition})}),e}_updateMarkers(){const t=[];for(const e of this._model.markers){const n=e.getRange();for(const r of this.getRanges())n.containsRange(r,!r.isCollapsed)&&t.push(e)}for(const e of t)this.markers.has(e)||this.markers.add(e);for(const e of Array.from(this.markers))t.includes(e)||this.markers.remove(e)}_updateAttributes(t){const e=_i(this._getSurroundingAttributes()),n=_i(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[i,o]of this._attributePriority)"low"==o&&(this._attrs.delete(i),this._attributePriority.delete(i));this._setAttributesTo(e);const r=[];for(const[i,o]of this.getAttributes())n.has(i)&&n.get(i)===o||r.push(i);for(const[i]of n)this.hasAttribute(i)||r.push(i);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(t,e,n=!0){const r=n?"normal":"low";return("low"!=r||"normal"!=this._attributePriority.get(t))&&super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,r),!0)}_removeAttribute(t,e=!0){const n=e?"normal":"low";return!("low"==n&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,n),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[n,r]of this.getAttributes())t.get(n)!==r&&this._removeAttribute(n,!1);for(const[n,r]of t)this._setAttribute(n,r,!1)&&e.add(n);return e}*_getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())e.startsWith(qi)&&(yield[e.substr(qi.length),t.getAttribute(e)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;let n=null;if(this.isCollapsed){const e=t.textNode?t.textNode:t.nodeBefore,r=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=Wi(e)),n||(n=Wi(r)),!this.isGravityOverridden&&!n){let t=e;for(;t&&!n;)n=Wi(t=t.previousSibling)}if(!n){let t=r;for(;t&&!n;)n=Wi(t=t.nextSibling)}n||(n=this._getStoredAttributes())}else{const t=this.getFirstRange();for(const r of t){if(r.item.is("element")&&e.isObject(r.item))break;if("text"==r.type){n=r.item.getAttributes();break}}}return n}_fixGraveyardSelection(t,e){const n=e.clone(),r=this._model.schema.getNearestSelectionRange(n),i=this._ranges.indexOf(t);if(this._ranges.splice(i,1),t.detach(),r){const t=this._prepareRange(r);this._ranges.splice(i,0,t)}}}function Wi(t){return t instanceof Ei||t instanceof Ci?t.getAttributes():null}class Ji{constructor(t){this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}var Gi=function(t){return ae(t,5)};class Qi extends Ji{elementToElement(t){return this.add(function(t){return(t=Gi(t)).view=Yi(t.view,"container"),e=>{e.on("insert:"+t.model,function(t){return(e,n,r)=>{const i=t(n.item,r.writer);if(!i)return;if(!r.consumable.consume(n.item,"insert"))return;const o=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,i),r.writer.insert(o,i)}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}attributeToElement(t){return this.add(function(t){let e="attribute:"+((t=Gi(t)).model.key?t.model.key:t.model);if(t.model.name&&(e+=":"+t.model.name),t.model.values)for(const r of t.model.values)t.view[r]=Yi(t.view[r],"attribute");else t.view=Yi(t.view,"attribute");const n=Xi(t);return r=>{r.on(e,function(t){return(e,n,r)=>{const i=t(n.attributeOldValue,r.writer),o=t(n.attributeNewValue,r.writer);if(!i&&!o)return;if(!r.consumable.consume(n.item,e.name))return;const s=r.writer;if(n.item instanceof Fi||n.item instanceof Hi)s.wrap(s.document.selection.getFirstRange(),o);else{let t=r.mapper.toViewRange(n.range);null!==n.attributeOldValue&&i&&(t=s.unwrap(t,i)),null!==n.attributeNewValue&&o&&s.wrap(t,o)}}}(n),{priority:t.converterPriority||"normal"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e="attribute:"+((t=Gi(t)).model.key?t.model.key:t.model);if(t.model.name&&(e+=":"+t.model.name),t.model.values)for(const r of t.model.values)t.view[r]=Zi(t.view[r]);else t.view=Zi(t.view);const n=Xi(t);return r=>{r.on(e,function(t){return(e,n,r)=>{const i=t(n.attributeOldValue,n),o=t(n.attributeNewValue,n);if(!i&&!o)return;if(!r.consumable.consume(n.item,e.name))return;const s=r.mapper.toViewElement(n.item),a=r.writer;if(!s)throw new de.b("conversion-attribute-to-attribute-on-text: Trying to convert text node's attribute with attribute-to-attribute converter.",[n,r]);if(null!==n.attributeOldValue&&i)if("class"==i.key){const t=Array.isArray(i.value)?i.value:[i.value];for(const e of t)a.removeClass(e,s)}else if("style"==i.key){const t=Object.keys(i.value);for(const e of t)a.removeStyle(e,s)}else a.removeAttribute(i.key,s);if(null!==n.attributeNewValue&&o)if("class"==o.key){const t=Array.isArray(o.value)?o.value:[o.value];for(const e of t)a.addClass(e,s)}else if("style"==o.key){const t=Object.keys(o.value);for(const e of t)a.setStyle(e,o.value[e],s)}else a.setAttribute(o.key,o.value,s)}}(n),{priority:t.converterPriority||"normal"})}}(t))}markerToElement(t){return this.add(function(t){return(t=Gi(t)).view=Yi(t.view,"ui"),e=>{e.on("addMarker:"+t.model,function(t){return(e,n,r)=>{n.isOpening=!0;const i=t(n,r.writer);n.isOpening=!1;const o=t(n,r.writer);if(!i||!o)return;const s=n.markerRange;if(s.isCollapsed&&!r.consumable.consume(s,e.name))return;for(const t of s)if(!r.consumable.consume(t.item,e.name))return;const a=r.mapper,l=r.writer;l.insert(a.toViewPosition(s.start),i),r.mapper.bindElementToMarker(i,n.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),o),r.mapper.bindElementToMarker(o,n.markerName)),e.stop()}}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(t,e,n)=>{const r=n.mapper.markerNameToElements(e.markerName);if(r){for(const t of r)n.mapper.unbindElementFromMarkerName(t,e.markerName),n.writer.clear(n.writer.createRangeOn(t),t);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}},{priority:t.converterPriority||"normal"})}}(t))}markerToHighlight(t){return this.add(function(t){return e=>{e.on("addMarker:"+t.model,function(t){return(e,n,r)=>{if(!n.item)return;if(!(n.item instanceof Fi||n.item instanceof Hi||n.item.is("textProxy")))return;const i=to(t,n,r);if(!i)return;if(!r.consumable.consume(n.item,e.name))return;const o=Ki(i),s=r.writer,a=s.document.selection;if(n.item instanceof Fi||n.item instanceof Hi)s.wrap(a.getFirstRange(),o,a);else{const t=r.mapper.toViewRange(n.range),e=s.wrap(t,o);for(const i of e.getItems())if(i.is("attributeElement")&&i.isSimilar(o)){r.mapper.bindElementToMarker(i,n.markerName);break}}}}(t.view),{priority:t.converterPriority||"normal"}),e.on("addMarker:"+t.model,function(t){return(e,n,r)=>{if(!n.item)return;if(!(n.item instanceof Ti))return;const i=to(t,n,r);if(!i)return;if(!r.consumable.test(n.item,e.name))return;const o=r.mapper.toViewElement(n.item);if(o&&o.getCustomProperty("addHighlight")){r.consumable.consume(n.item,e.name);for(const t of Pi._createIn(n.item))r.consumable.consume(t.item,e.name);o.getCustomProperty("addHighlight")(o,i,r.writer),r.mapper.bindElementToMarker(o,n.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,function(t){return(e,n,r)=>{if(n.markerRange.isCollapsed)return;const i=to(t,n,r);if(!i)return;const o=Ki(i),s=r.mapper.markerNameToElements(n.markerName);if(s){for(const t of s)r.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(t),o):t.getCustomProperty("removeHighlight")(t,i.id,r.writer);r.writer.clearClonedElementsGroup(n.markerName),e.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}}function Ki(t){const e=new yn("span",t.attributes);return t.classes&&e._addClass(t.classes),t.priority&&(e._priority=t.priority),e._id=t.id,e}function Yi(t,e){return"function"==typeof t?t:(n,r)=>(function(t,e,n){let r;"string"==typeof t&&(t={name:t});const i=Object.assign({},t.attributes);if(r="container"==n?e.createContainerElement(t.name,i):"attribute"==n?e.createAttributeElement(t.name,i,{priority:t.priority||yn.DEFAULT_PRIORITY}):e.createUIElement(t.name,i),t.styles){const n=Object.keys(t.styles);for(const i of n)e.setStyle(i,t.styles[i],r)}if(t.classes){const n=t.classes;if("string"==typeof n)e.addClass(n,r);else for(const t of n)e.addClass(t,r)}return r})(t,r,e)}function Xi(t){return t.model.values?(e,n)=>{const r=t.view[e];return r?r(e,n):null}:t.view}function Zi(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function to(t,e,n){const r="function"==typeof t?t(e,n):t;return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}class eo extends Ji{elementToElement(t){return this.add(no(t))}elementToAttribute(t){return this.add(function(t){io(t=Gi(t));const e=oo(t,!1),n=ro(t.view),r=n?"element:"+n:"element";return n=>{n.on(r,e,{priority:t.converterPriority||"low"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e=null;("string"==typeof(t=Gi(t)).view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});const e=t.view.key;let n;return n="class"==e||"style"==e?{["class"==e?"classes":"styles"]:t.view.value}:{attributes:{[e]:void 0===t.view.value?/[\s\S]*/:t.view.value}},t.view.name&&(n.name=t.view.name),t.view=n,e}(t)),io(t,e);const n=oo(t,!0);return e=>{e.on("element",n,{priority:t.converterPriority||"low"})}}(t))}elementToMarker(t){return this.add(function(t){return function(t){const e=t.model;t.model=(t,n)=>{const r="string"==typeof e?e:e(t);return n.createElement("$marker",{"data-name":r})}}(t=Gi(t)),no(t)}(t))}}function no(t){const e=function(t){const e=t.view?new Re(t.view):null;return(n,r,i)=>{let o={};if(e){const t=e.match(r.viewItem);if(!t)return;o=t.match}o.name=!0;const s=function(t,e,n){return t instanceof Function?t(r.viewItem,n):n.createElement(t)}(t.model,0,i.writer);if(!s)return;if(!i.consumable.test(r.viewItem,o))return;const a=i.splitToAllowedParent(s,r.modelCursor);if(!a)return;i.writer.insert(s,a.position),i.convertChildren(r.viewItem,i.writer.createPositionAt(s,0)),i.consumable.consume(r.viewItem,o);const l=i.getSplitParts(s);r.modelRange=new Pi(i.writer.createPositionBefore(s),i.writer.createPositionAfter(l[l.length-1])),r.modelCursor=a.cursorParent?i.writer.createPositionAt(a.cursorParent,0):r.modelRange.end}}(t=Gi(t)),n=ro(t.view),r=n?"element:"+n:"element";return n=>{n.on(r,e,{priority:t.converterPriority||"normal"})}}function ro(t){return"string"==typeof t?t:"object"==typeof t&&"string"==typeof t.name?t.name:null}function io(t,e=null){const n=null===e||(t=>t.getAttribute(e));t.model={key:"object"!=typeof t.model?t.model:t.model.key,value:"object"!=typeof t.model||void 0===t.model.value?n:t.model.value}}function oo(t,e){const n=new Re(t.view);return(r,i,o)=>{const s=n.match(i.viewItem);if(!s)return;const a=t.model.key,l="function"==typeof t.model.value?t.model.value(i.viewItem):t.model.value;null!==l&&(function(t,e){const n="function"==typeof t?t(i.viewItem):t;return!("object"==typeof n&&!ro(n)||n.classes||n.attributes||n.styles)}(t.view)?s.match.name=!0:delete s.match.name,o.consumable.test(i.viewItem,s.match)&&(i.modelRange||(i=Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor))),function(t,e,n,r){let i=!1;for(const o of Array.from(t.getItems({shallow:n})))r.schema.checkAttribute(o,e.key)&&(r.writer.setAttribute(e.key,e.value,o),i=!0);return i}(i.modelRange,{key:a,value:l},e,o)&&o.consumable.consume(i.viewItem,s.match)))}}class so{constructor(t){this.model=t,this.view=new wi,this.mapper=new Oi,this.downcastDispatcher=new Mi({mapper:this.mapper});const e=this.model.document,n=e.selection,r=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(e,"change",()=>{this.view.change(t=>{this.downcastDispatcher.convertChanges(e.differ,r,t),this.downcastDispatcher.convertSelection(n,r,t)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(t,e){return(n,r)=>{const i=r.newSelection,o=new Fi,s=[];for(const t of i.getRanges())s.push(e.toModelRange(t));o.setTo(s,{backward:i.isBackward}),o.isEqual(t.document.selection)||t.change(t=>{t.setSelection(o)})}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",(t,e,n)=>{if(!n.consumable.consume(e.item,"insert"))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(t,e,n)=>{const r=n.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),o=n.mapper.toViewPosition(i,{isPhantom:!0}),s=n.writer.createRange(r,o),a=n.writer.remove(s.getTrimmed());for(const l of n.writer.createRangeIn(a).getItems())n.mapper.unbindViewElement(l)},{priority:"low"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const r=n.writer,i=r.document.selection;for(const o of i.getRanges())o.isCollapsed&&o.end.parent.document&&n.writer.mergeAttributes(o.start);r.setSelection(null)},{priority:"low"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const r=e.selection;if(r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=[];for(const o of r.getRanges()){const t=n.mapper.toViewRange(o);i.push(t)}n.writer.setSelection(i,{backward:r.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const r=e.selection;if(!r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=n.writer,o=r.getFirstPosition(),s=n.mapper.toViewPosition(o),a=i.breakAttributes(s);i.setSelection(a)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(t=>{if("$graveyard"==t.rootName)return null;const e=new ln(t.name);return e.rootName=t.rootName,e._document=this.view.document,this.mapper.bindElements(t,e),e})}destroy(){this.view.destroy(),this.stopListening()}}Te(so,Xe);class ao{constructor(t,e=[]){this._editor=t,this._availablePlugins=new Map,this._plugins=new Map;for(const n of e)this._availablePlugins.set(n,n),n.pluginName&&this._availablePlugins.set(n.pluginName,n)}*[Symbol.iterator](){for(const t of this._plugins)"function"==typeof t[0]&&(yield t)}get(t){const e=this._plugins.get(t);if(!e){let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new de.b("plugincollection-plugin-not-loaded: The requested plugin is not loaded.",this._editor,{plugin:e})}return e}has(t){return this._plugins.has(t)}init(t,e=[]){const n=this,r=this._editor,i=new Set,o=[],s=h(t),a=h(e),l=function(t){const e=[];for(const n of t)c(n)||e.push(n);return e.length?e:null}(t);if(l){const t="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";return console.error(Object(de.a)(t),{plugins:l}),Promise.reject(new de.b(t,this._editor,{plugins:l}))}return Promise.all(s.map(function t(s){if(!a.includes(s)&&!n._plugins.has(s)&&!i.has(s))return function(s){return new Promise(a=>{i.add(s),s.requires&&s.requires.forEach(n=>{const i=c(n);if(e.includes(i))throw new de.b("plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.",r,{plugin:i,requiredBy:s});t(i)});const l=new s(r);n._add(s,l),o.push(l),a()})}(s).catch(t=>{throw console.error(Object(de.a)("plugincollection-load: It was not possible to load the plugin."),{plugin:s}),t})})).then(()=>u(o,"init")).then(()=>u(o,"afterInit")).then(()=>o);function u(t,e){return t.reduce((t,n)=>n[e]?t.then(n[e].bind(n)):t,Promise.resolve())}function c(t){return"function"==typeof t?t:n._availablePlugins.get(t)}function h(t){return t.map(t=>c(t)).filter(t=>!!t)}}destroy(){const t=Array.from(this).map(([,t])=>t).filter(t=>"function"==typeof t.destroy).map(t=>t.destroy());return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const n=t.pluginName;if(n){if(this._plugins.has(n))throw new de.b("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e)}}}Te(ao,ye);class lo{constructor(){this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new de.b("commandcollection-command-not-found: Command does not exist.",this,{commandName:t});n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});const uo=["ar","fa","he","ku","ug"];class co{constructor(t={}){this.uiLanguage=t.uiLanguage||"en",this.contentLanguage=t.contentLanguage||this.uiLanguage,this.uiLanguageDirection=ho(this.uiLanguage),this.contentLanguageDirection=ho(this.contentLanguage),this.t=(...t)=>this._t(...t)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e){let n=function(t,e){const n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;return 1===n&&(t=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]),0!==n&&function(t,e){return t in window.CKEDITOR_TRANSLATIONS&&e in window.CKEDITOR_TRANSLATIONS[t]}(t,e)?window.CKEDITOR_TRANSLATIONS[t][e].replace(/ \[context: [^\]]+\]$/,""):e.replace(/ \[context: [^\]]+\]$/,"")}(this.uiLanguage,t);return e&&(n=n.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)),n}}function ho(t){return uo.includes(t)?"rtl":"ltr"}class fo{constructor(){this._consumables=new Map}add(t,e){let n;t.is("text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new po,this._consumables.set(t,n)),n.add(e))}test(t,e){const n=this._consumables.get(t);return void 0===n?null:t.is("text")||t.is("documentFragment")?n:n.test(e)}consume(t,e){return!!this.test(t,e)&&(t.is("text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0)}revert(t,e){const n=this._consumables.get(t);void 0!==n&&(t.is("text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(e))}static consumablesFromElement(t){const e={name:!0,attributes:[],classes:[],styles:[]},n=t.getAttributeKeys();for(const o of n)"style"!=o&&"class"!=o&&e.attributes.push(o);const r=t.getClassNames();for(const o of r)e.classes.push(o);const i=t.getStyleNames();for(const o of i)e.styles.push(o);return e}static createFrom(t,e){if(e||(e=new fo),t.is("text"))return e.add(t),e;t.is("element")&&e.add(t,fo.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);for(const n of t.getChildren())e=fo.createFrom(n,e);return e}}class po{constructor(){this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(t){t.name&&(this._canConsumeName=!0);for(const e in this._consumables)e in t&&this._add(e,t[e])}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const e in this._consumables)if(e in t){const n=this._test(e,t[e]);if(!0!==n)return n}return!0}consume(t){t.name&&(this._canConsumeName=!1);for(const e in this._consumables)e in t&&this._consume(e,t[e])}revert(t){t.name&&(this._canConsumeName=!0);for(const e in this._consumables)e in t&&this._revert(e,t[e])}_add(t,e){const n=it(e)?e:[e],r=this._consumables[t];for(const i of n){if("attributes"===t&&("class"===i||"style"===i))throw new de.b("viewconsumable-invalid-attribute: Classes and styles should be handled separately.",this);r.set(i,!0)}}_test(t,e){const n=it(e)?e:[e],r=this._consumables[t];for(const i of n)if("attributes"!==t||"class"!==i&&"style"!==i){const t=r.get(i);if(void 0===t)return null;if(!t)return!1}else{const t="class"==i?"classes":"styles",e=this._test(t,[...this._consumables[t].keys()]);if(!0!==e)return e}return!0}_consume(t,e){const n=it(e)?e:[e],r=this._consumables[t];for(const i of n)if("attributes"!==t||"class"!==i&&"style"!==i)r.set(i,!1);else{const t="class"==i?"classes":"styles";this._consume(t,[...this._consumables[t].keys()])}}_revert(t,e){const n=it(e)?e:[e],r=this._consumables[t];for(const i of n)if("attributes"!==t||"class"!==i&&"style"!==i)!1===r.get(i)&&r.set(i,!0);else{const t="class"==i?"classes":"styles";this._revert(t,[...this._consumables[t].keys()])}}}class go{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,e)=>{e[0]=new mo(e[0])},{priority:"highest"}),this.on("checkChild",(t,e)=>{e[0]=new mo(e[0]),e[1]=this.getDefinition(e[1])},{priority:"highest"})}register(t,e){if(this._sourceDefinitions[t])throw new de.b("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache()}extend(t,e){if(!this._sourceDefinitions[t])throw new de.b("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let e;return e="string"==typeof t?t:t.is&&(t.is("text")||t.is("textProxy"))?"$text":t.name,this.getDefinitions()[e]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const e=this.getDefinition(t);return!(!e||!e.isBlock)}isLimit(t){const e=this.getDefinition(t);return!(!e||!e.isLimit&&!e.isObject)}isObject(t){const e=this.getDefinition(t);return!(!e||!e.isObject)}isInline(t){const e=this.getDefinition(t);return!(!e||!e.isInline)}checkChild(t,e){return!!e&&this._checkContextMatch(e,t)}checkAttribute(t,e){const n=this.getDefinition(t.last);return!!n&&n.allowAttributes.includes(e)}checkMerge(t,e=null){if(t instanceof Di){const e=t.nodeBefore,n=t.nodeAfter;if(!(e instanceof Ti))throw new de.b("schema-check-merge-no-element-before: The node before the merge position must be an element.",this);if(!(n instanceof Ti))throw new de.b("schema-check-merge-no-element-after: The node after the merge position must be an element.",this);return this.checkMerge(e,n)}for(const n of e.getChildren())if(!this.checkChild(t,n))return!1;return!0}addChildCheck(t){this.on("checkChild",(e,[n,r])=>{if(!r)return;const i=t(n,r);"boolean"==typeof i&&(e.stop(),e.return=i)},{priority:"high"})}addAttributeCheck(t){this.on("checkAttribute",(e,[n,r])=>{const i=t(n,r);"boolean"==typeof i&&(e.stop(),e.return=i)},{priority:"high"})}setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}getAttributeProperties(t){return this._attributeProperties[t]||{}}getLimitElement(t){let e;for(e=t instanceof Di?t.parent:(t instanceof Pi?[t]:Array.from(t.getRanges())).reduce((t,e)=>{const n=e.getCommonAncestor();return t?t.getCommonAncestor(n,{includeSelf:!0}):n},null);!this.isLimit(e)&&e.parent;)e=e.parent;return e}checkAttributeInSelection(t,e){if(t.isCollapsed){const n=[...t.getFirstPosition().getAncestors(),new Ci("",t.getAttributes())];return this.checkAttribute(n,e)}{const n=t.getRanges();for(const t of n)for(const n of t)if(this.checkAttribute(n.item,e))return!0}return!1}*getValidRanges(t,e){t=function*(t){for(const e of t)yield*e.getMinimalFlatRanges()}(t);for(const n of t)yield*this._getValidRangesForRange(n,e)}getNearestSelectionRange(t,e="both"){if(this.checkChild(t,"$text"))return new Pi(t);let n,r;"both"!=e&&"backward"!=e||(n=new xi({startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(r=new xi({startPosition:t}));for(const i of function*(t,e){let n=!1;for(;!n;){if(n=!0,t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}if(e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}}}(n,r)){const t=i.value;if(t.type==(i.walker==n?"elementEnd":"elementStart")&&this.isObject(t.item))return Pi._createOn(t.item);if(this.checkChild(t.nextPosition,"$text"))return new Pi(t.nextPosition)}return null}findAllowedParent(t,e){let n=t.parent;for(;n;){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent}return null}removeDisallowedAttributes(t,e){for(const n of t)if(n.is("text"))xo(this,n,e);else{const t=Pi._createIn(n).getPositions();for(const n of t)xo(this,n.nodeBefore||n.parent,e)}}createContext(t){return new mo(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},e=this._sourceDefinitions,n=Object.keys(e);for(const r of n)t[r]=bo(e[r],r);for(const r of n)vo(t,r);for(const r of n)yo(t,r);for(const r of n)wo(t,r),_o(t,r);for(const r of n)ko(t,r),Co(t,r);this._compiledDefinitions=t}_checkContextMatch(t,e,n=e.length-1){const r=e.getItem(n);if(t.allowIn.includes(r.name)){if(0==n)return!0;{const t=this.getDefinition(r);return this._checkContextMatch(t,e,n-1)}}return!1}*_getValidRangesForRange(t,e){let n=t.start,r=t.start;for(const i of t.getItems({shallow:!0}))i.is("element")&&(yield*this._getValidRangesForRange(Pi._createIn(i),e)),this.checkAttribute(i,e)||(n.isEqual(r)||(yield new Pi(n,r)),n=Di._createAfter(i)),r=Di._createAfter(i);n.isEqual(r)||(yield new Pi(n,r))}}Te(go,Xe);class mo{constructor(t){if(t instanceof mo)return t;"string"==typeof t?t=[t]:Array.isArray(t)||(t=t.getAncestors({includeSelf:!0})),t[0]&&"string"!=typeof t[0]&&t[0].is("documentFragment")&&t.shift(),this._items=t.map(To)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new mo([t]);return e._items=[...this._items,...e._items],e}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}}function bo(t,e){const n={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(t,e){for(const n of t){const t=Object.keys(n).filter(t=>t.startsWith("is"));for(const r of t)e[r]=n[r]}}(t,n),Eo(t,n,"allowIn"),Eo(t,n,"allowContentOf"),Eo(t,n,"allowWhere"),Eo(t,n,"allowAttributes"),Eo(t,n,"allowAttributesOf"),Eo(t,n,"inheritTypesFrom"),function(t,e){for(const n of t){const t=n.inheritAllFrom;t&&(e.allowContentOf.push(t),e.allowWhere.push(t),e.allowAttributesOf.push(t),e.inheritTypesFrom.push(t))}}(t,n),n}function vo(t,e){for(const n of t[e].allowContentOf)t[n]&&So(t,n).forEach(t=>{t.allowIn.push(e)});delete t[e].allowContentOf}function yo(t,e){for(const n of t[e].allowWhere){const r=t[n];r&&t[e].allowIn.push(...r.allowIn)}delete t[e].allowWhere}function wo(t,e){for(const n of t[e].allowAttributesOf){const r=t[n];r&&t[e].allowAttributes.push(...r.allowAttributes)}delete t[e].allowAttributesOf}function _o(t,e){const n=t[e];for(const r of n.inheritTypesFrom){const e=t[r];if(e){const t=Object.keys(e).filter(t=>t.startsWith("is"));for(const r of t)r in n||(n[r]=e[r])}}delete n.inheritTypesFrom}function ko(t,e){const n=t[e],r=n.allowIn.filter(e=>t[e]);n.allowIn=Array.from(new Set(r))}function Co(t,e){const n=t[e];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function Eo(t,e,n){for(const r of t)"string"==typeof r[n]?e[n].push(r[n]):Array.isArray(r[n])&&e[n].push(...r[n])}function So(t,e){const n=t[e];return function(t){return Object.keys(t).map(e=>t[e])}(t).filter(t=>t.allowIn.includes(n.name))}function To(t){return"string"==typeof t?{name:t,*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute:e=>t.getAttribute(e)}}function xo(t,e,n){for(const r of e.getAttributeKeys())t.checkAttribute(e,r)||n.removeAttribute(r,e)}class Ao{constructor(t={}){this._splitParts=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(t,e,n=["$root"]){this.fire("viewCleanup",t),this._modelCursor=function(t,e){let n;for(const r of new mo(t)){const t={};for(const e of r.getAttributeKeys())t[e]=r.getAttribute(e);const i=e.createElement(r.name,t);n&&e.append(i,n),n=Di._createAt(i,0)}return n}(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=fo.createFrom(t),this.conversionApi.store={};const{modelRange:r}=this._convertItem(t,this._modelCursor),i=e.createDocumentFragment();if(r){this._removeEmptyElements();for(const t of Array.from(this._modelCursor.parent.getChildren()))e.append(t,i);i.markers=function(t,e){const n=new Set,r=new Map,i=Pi._createIn(t).getItems();for(const o of i)"$marker"==o.name&&n.add(o);for(const o of n){const t=o.getAttribute("data-name"),n=e.createPositionBefore(o);r.has(t)?r.get(t).end=n.clone():r.set(t,new Pi(n.clone())),e.remove(o)}return r}(i,e)}return this._modelCursor=null,this._splitParts.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}_convertItem(t,e){const n=Object.assign({viewItem:t,modelCursor:e,modelRange:null});if(t.is("element")?this.fire("element:"+t.name,n,this.conversionApi):t.is("text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof Pi))throw new de.b("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(t,e){const n=new Pi(e);let r=e;for(const i of Array.from(t.getChildren())){const t=this._convertItem(i,r);t.modelRange instanceof Pi&&(n.end=t.modelRange.end,r=t.modelCursor)}return{modelRange:n,modelCursor:r}}_splitToAllowedParent(t,e){const n=this.conversionApi.schema.findAllowedParent(e,t);if(!n)return null;if(n===e.parent)return{position:e};if(this._modelCursor.parent.getAncestors().includes(n))return null;const r=this.conversionApi.writer.split(e,n),i=[];for(const o of r.range.getWalker())if("elementEnd"==o.type)i.push(o.item);else{const t=i.pop();this._registerSplitPair(t,o.item)}return{position:r.position,cursorParent:r.range.end.parent}}_registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);const n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e)}_getSplitParts(t){return this._splitParts.has(t)?this._splitParts.get(t):[t]}_removeEmptyElements(){let t=!1;for(const e of this._splitParts.keys())e.isEmpty&&(this.conversionApi.writer.remove(e),this._splitParts.delete(e),t=!0);t&&this._removeEmptyElements()}}Te(Ao,ye);class Io{constructor(t,e){this.model=t,this.processor=e,this.mapper=new Oi,this.downcastDispatcher=new Mi({mapper:this.mapper}),this.downcastDispatcher.on("insert:$text",(t,e,n)=>{if(!n.consumable.consume(e.item,"insert"))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)},{priority:"lowest"}),this.upcastDispatcher=new Ao({schema:t.schema}),this.upcastDispatcher.on("text",(t,e,n)=>{if(n.schema.checkChild(e.modelCursor,"$text")&&n.consumable.consume(e.viewItem)){const t=n.writer.createText(e.viewItem.data);n.writer.insert(t,e.modelCursor),e.modelRange=Pi._createFromPositionAndShift(e.modelCursor,t.offsetSize),e.modelCursor=e.modelRange.end}},{priority:"lowest"}),this.upcastDispatcher.on("element",(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:r}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=r}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:r}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=r}},{priority:"lowest"}),this.decorate("init"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"})}get(t){const{rootName:e="main",trim:n="empty"}=t||{};if(!this._checkIfRootsExists([e]))throw new de.b("datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.",this);const r=this.model.document.getRoot(e);return"empty"!==n||this.model.hasContent(r,{ignoreWhitespaces:!0})?this.stringify(r):""}stringify(t){const e=this.toView(t);return this.processor.toData(e)}toView(t){this.mapper.clearBindings();const e=Pi._createIn(t),n=new Rn,r=new Mn(new bn);if(this.mapper.bindElements(t,n),this.downcastDispatcher.convertInsert(e,r),!t.is("documentFragment")){const e=function(t){const e=[],n=t.root.document;if(!n)return[];const r=Pi._createIn(t);for(const i of n.model.markers){const t=r.getIntersection(i.getRange());t&&e.push([i.name,t])}return e}(t);for(const[t,n]of e)this.downcastDispatcher.convertMarkerAdd(t,n,r)}return n}init(t){if(this.model.document.version)throw new de.b("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.",this);let e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new de.b("datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.",this);return this.model.enqueueChange("transparent",t=>{for(const n of Object.keys(e)){const r=this.model.document.getRoot(n);t.insert(this.parse(e[n],r),r,0)}}),Promise.resolve()}set(t){let e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new de.b("datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.",this);this.model.enqueueChange("transparent",t=>{t.setSelection(null),t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const n of Object.keys(e)){const r=this.model.document.getRoot(n);t.remove(t.createRangeIn(r)),t.insert(this.parse(e[n],r),r,0)}})}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.model.change(n=>this.upcastDispatcher.convert(t,n,e))}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t)if(!this.model.document.getRootNames().includes(e))return!1;return!0}}Te(Io,Xe);class Do{constructor(t,e){this._helpers=new Map,this._downcast=Array.isArray(t)?t:[t],this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Array.isArray(e)?e:[e],this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new de.b("conversion-add-alias-dispatcher-not-registered: Trying to register and alias for a dispatcher that nas not been registered.",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new de.b("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of Po(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of Po(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of Po(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new de.b("conversion-group-exists: Trying to register a group name that has already been registered.",this);const r=n?new Qi(e):new eo(e);this._helpers.set(t,r)}}function*Po(t){if(t.model.values)for(const e of t.model.values)yield*Oo({key:t.model.key,value:e},t.view[e],t.upcastAlso?t.upcastAlso[e]:void 0);else yield*Oo(t.model,t.view,t.upcastAlso)}function*Oo(t,e,n){if(yield{model:t,view:e},n){n=Array.isArray(n)?n:[n];for(const e of n)yield{model:t,view:e}}}class No{constructor(t="default"){this.operations=[],this.type=t}get baseVersion(){for(const t of this.operations)if(null!==t.baseVersion)return t.baseVersion;return null}addOperation(t){return t.batch=this,this.operations.push(t),t}}class Ro{constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t){return new this(t.baseVersion)}}class Mo{constructor(t){this.markers=new Map,this._children=new Si,t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(t){return"documentFragment"==t||"model:documentFragment"==t}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const n of t)e.push(n.name?Ti.fromJSON(n):Ci.fromJSON(n));return new Mo(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){return"string"==typeof t?[new Ci(t)]:(Ne(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new Ci(t):t instanceof Ei?new Ci(t.data,t.getAttributes()):t))}(e);for(const r of n)null!==r.parent&&r._remove(),r.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const r of n)r.parent=null;return n}}function Lo(t,e){const n=(e=Bo(e)).reduce((t,e)=>t+e.offsetSize,0),r=t.parent;Uo(t);const i=t.index;return r._insertChild(i,e),Vo(r,i+e.length),Vo(r,i),new Pi(t,t.getShiftedBy(n))}function Fo(t){if(!t.isFlat)throw new de.b("operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.",this);const e=t.start.parent;Uo(t.start),Uo(t.end);const n=e._removeChildren(t.start.index,t.end.index-t.start.index);return Vo(e,t.start.index),n}function jo(t,e){if(!t.isFlat)throw new de.b("operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.",this);const n=Fo(t);return Lo(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),n)}function Bo(t){const e=[];t instanceof Array||(t=[t]);for(let n=0;n<t.length;n++)if("string"==typeof t[n])e.push(new Ci(t[n]));else if(t[n]instanceof Ei)e.push(new Ci(t[n].data,t[n].getAttributes()));else if(t[n]instanceof Mo||t[n]instanceof Si)for(const r of t[n])e.push(r);else t[n]instanceof ki&&e.push(t[n]);for(let n=1;n<e.length;n++){const t=e[n],r=e[n-1];t instanceof Ci&&r instanceof Ci&&zo(t,r)&&(e.splice(n-1,2,new Ci(r.data+t.data,r.getAttributes())),n--)}return e}function Vo(t,e){const n=t.getChild(e-1),r=t.getChild(e);if(n&&r&&n.is("text")&&r.is("text")&&zo(n,r)){const i=new Ci(n.data+r.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function Uo(t){const e=t.textNode,n=t.parent;if(e){const r=t.offset-e.startOffset,i=e.index;n._removeChildren(i,1);const o=new Ci(e.data.substr(0,r),e.getAttributes()),s=new Ci(e.data.substr(r),e.getAttributes());n._insertChild(i,[o,s])}}function zo(t,e){const n=t.getAttributes(),r=e.getAttributes();for(const i of n){if(i[1]!==e.getAttribute(i[0]))return!1;r.next()}return r.next().done}var qo=function(t,e){return Lr(t,e)};class Ho extends Ro{constructor(t,e,n,r,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===r?null:r}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new Ho(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ho(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new de.b("attribute-operation-range-not-flat: The range to change is not flat.",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!qo(t.getAttribute(this.key),this.oldValue))throw new de.b("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new de.b("attribute-operation-attribute-exists: The attribute with given key already exists.",this,{node:t,key:this.key})}}_execute(){qo(this.oldValue,this.newValue)||function(t,e,n){Uo(t.start),Uo(t.end);for(const r of t.getItems({shallow:!0})){const t=r.is("textProxy")?r.textNode:r;null!==n?t._setAttribute(e,n):t._removeAttribute(e),Vo(t.parent,t.index)}Vo(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Ho(Pi.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class $o extends Ro{constructor(t,e){super(null),this.sourcePosition=t.clone(),this.howMany=e}get type(){return"detach"}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new de.b("detach-operation-on-document-node: Cannot detach document node.",this)}_execute(){Fo(Pi._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Wo extends Ro{constructor(t,e,n,r){super(r),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new de.b("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.",this);if(t===e&&n<r&&r<n+this.howMany)throw new de.b("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==xe(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=n&&this.targetPosition.path[t]<n+this.howMany)throw new de.b("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.",this)}}_execute(){jo(Pi._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const n=Di.fromJSON(t.sourcePosition,e),r=Di.fromJSON(t.targetPosition,e);return new this(n,t.howMany,r,t.baseVersion)}}class Jo extends Ro{constructor(t,e,n){super(n),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new Si(Bo(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const t=new Si([...this.nodes].map(t=>t._clone(!0))),e=new Jo(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=new Di(this.position.root.document.graveyard,[0]);return new Wo(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new de.b("insert-operation-position-invalid: Insertion position is invalid.",this)}_execute(){const t=this.nodes;this.nodes=new Si([...t].map(t=>t._clone(!0))),Lo(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const n=[];for(const i of t.nodes)n.push(i.name?Ti.fromJSON(i):Ci.fromJSON(i));const r=new Jo(Di.fromJSON(t.position,e),n,t.baseVersion);return r.shouldReceiveAttributes=t.shouldReceiveAttributes,r}}class Go extends Ro{constructor(t,e,n,r,i,o){super(o),this.name=t,this.oldRange=e?e.clone():null,this.newRange=n?n.clone():null,this.affectsData=i,this._markers=r}get type(){return"marker"}clone(){return new Go(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Go(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this._markers[this.newRange?"_set":"_remove"](this.name,this.newRange,!0,this.affectsData)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new Go(t.name,t.oldRange?Pi.fromJSON(t.oldRange,e):null,t.newRange?Pi.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class Qo extends Ro{constructor(t,e,n,r){super(r),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=n}get type(){return"rename"}clone(){return new Qo(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Qo(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof Ti))throw new de.b("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.",this);if(t.name!==this.oldName)throw new de.b("rename-operation-wrong-name: Element to change has different name than operation's old name.",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Qo(Di.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Ko extends Ro{constructor(t,e,n,r,i){super(i),this.root=t,this.key=e,this.oldValue=n,this.newValue=r}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new Ko(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ko(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new de.b("rootattribute-operation-not-a-root: The element to change is not a root element.",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new de.b("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new de.b("rootattribute-operation-attribute-exists: The attribute with given key already exists.",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new de.b("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",this,{rootName:t.root});return new Ko(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Yo extends Ro{constructor(t,e,n,r,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new Di(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Pi(this.sourcePosition,t)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new Di(this.sourcePosition.root,e)._getTransformedByMergeOperation(this),r=new Xo(t,this.howMany,this.graveyardPosition,this.baseVersion+1);return r.insertionPosition=n,r}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new de.b("merge-operation-source-position-invalid: Merge source position is invalid.",this);if(!e.parent)throw new de.b("merge-operation-target-position-invalid: Merge target position is invalid.",this);if(this.howMany!=t.maxOffset)throw new de.b("merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.",this)}_execute(){const t=this.sourcePosition.parent;jo(Pi._createIn(t),this.targetPosition),jo(Pi._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const n=Di.fromJSON(t.sourcePosition,e),r=Di.fromJSON(t.targetPosition,e),i=Di.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,r,i,t.baseVersion)}}class Xo extends Ro{constructor(t,e,n,r){super(r),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=Xo.getInsertionPosition(t),this.insertionPosition.stickiness="toNone",this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Di(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Pi(this.splitPosition,t)}clone(){const t=new this.constructor(this.splitPosition,this.howMany,this.graveyardPosition,this.baseVersion);return t.insertionPosition=this.insertionPosition,t}getReversed(){const t=new Di(this.splitPosition.root.document.graveyard,[0]);return new Yo(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent;if(!t||t.maxOffset<this.splitPosition.offset)throw new de.b("split-operation-position-invalid: Split position is invalid.",this);if(!t.parent)throw new de.b("split-operation-split-in-root: Cannot split root element.",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new de.b("split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new de.b("split-operation-graveyard-position-invalid: Graveyard position invalid.",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)jo(Pi._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();Lo(this.insertionPosition,e)}jo(new Pi(Di._createAt(t,this.splitPosition.offset),Di._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new Di(t.root,e)}static fromJSON(t,e){const n=Di.fromJSON(t.splitPosition,e),r=Di.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?Di.fromJSON(t.graveyardPosition,e):null,o=new this(n,t.howMany,i,t.baseVersion);return o.insertionPosition=r,o}}class Zo extends Ti{constructor(t,e,n="main"){super(e),this._doc=t,this.rootName=n}get document(){return this._doc}is(t,e){const n=t.replace("model:","");return e?"rootElement"==n&&e==this.name||super.is(t,e):"rootElement"==n||super.is(t)}toJSON(){return this.rootName}}class ts{constructor(t,e){this.model=t,this.batch=e}createText(t,e){return new Ci(t,e)}createElement(t,e){return new Ti(t,e)}createDocumentFragment(){return new Mo}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Ci&&""==t.data)return;const r=Di._createAt(e,n);if(t.parent){if(os(t.root,r.root))return void this.move(Pi._createOn(t),r);if(t.root.document)throw new de.b("model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree. It is forbidden to move a node that was already in a document outside of it.",this);this.remove(t)}const i=new Jo(r,t,r.root.document?r.root.document.version:null);if(t instanceof Ci&&(i.shouldReceiveAttributes=!0),this.batch.addOperation(i),this.model.applyOperation(i),t instanceof Mo)for(const[o,s]of t.markers){const t=Di._createAt(s.root,0),e={range:new Pi(s.start._getCombined(t,r),s.end._getCombined(t,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(o)?this.updateMarker(o,e):this.addMarker(o,e)}}insertText(t,e,n,r){e instanceof Mo||e instanceof Ti||e instanceof Di?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,r)}insertElement(t,e,n,r){e instanceof Mo||e instanceof Ti||e instanceof Di?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,r)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof Mo||e instanceof Ti?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof Mo||e instanceof Ti?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof Pi){const r=n.getMinimalFlatRanges();for(const n of r)es(this,t,e,n)}else ns(this,t,e,n)}setAttributes(t,e){for(const[n,r]of _i(t))this.setAttribute(n,r,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Pi){const n=e.getMinimalFlatRanges();for(const e of n)es(this,t,null,e)}else ns(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=t=>{for(const e of t.getAttributeKeys())this.removeAttribute(e,t)};if(t instanceof Pi)for(const n of t.getItems())e(n);else e(t)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof Pi))throw new de.b("writer-move-invalid-range: Invalid range to move.",this);if(!t.isFlat)throw new de.b("writer-move-range-not-flat: Range to move is not flat.",this);const r=Di._createAt(e,n);if(r.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!os(t.root,r.root))throw new de.b("writer-move-different-document: Range is going to be moved between different documents.",this);const i=new Wo(t.start,t.end.offset-t.start.offset,r,t.root.document?t.root.document.version:null);this.batch.addOperation(i),this.model.applyOperation(i)}remove(t){this._assertWriterUsedCorrectly();const e=(t instanceof Pi?t:Pi._createOn(t)).getMinimalFlatRanges().reverse();for(const n of e)this._addOperationForAffectedMarkers("move",n),is(n.start,n.end.offset-n.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Ti))throw new de.b("writer-merge-no-element-before: Node before merge position must be an element.",this);if(!(n instanceof Ti))throw new de.b("writer-merge-no-element-after: Node after merge position must be an element.",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(t,e,n){return this.model.createSelection(t,e,n)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(Pi._createIn(n),Di._createAt(e,"end")),this.remove(n)}_merge(t){const e=Di._createAt(t.nodeBefore,"end"),n=Di._createAt(t.nodeAfter,0),r=new Di(t.root.document.graveyard,[0]),i=new Yo(n,t.nodeAfter.maxOffset,e,r,t.root.document.version);this.batch.addOperation(i),this.model.applyOperation(i)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Ti))throw new de.b("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.",this);const n=t.root.document?t.root.document.version:null,r=new Qo(Di._createBefore(t),t.name,e,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(t,e){this._assertWriterUsedCorrectly();let n,r,i=t.parent;if(!i.parent)throw new de.b("writer-split-element-no-parent: Element with no parent can not be split.",this);if(e||(e=i.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new de.b("writer-split-invalid-limit-element: Limit element is not a position ancestor.",this);do{const e=new Xo(t,i.maxOffset-t.offset,null,i.root.document?i.root.document.version:null);this.batch.addOperation(e),this.model.applyOperation(e),n||r||(n=i,r=t.parent.nextSibling),i=(t=this.createPositionAfter(t.parent)).parent}while(i!==e);return{position:t,range:new Pi(Di._createAt(n,"end"),Di._createAt(r,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new de.b("writer-wrap-range-not-flat: Range to wrap is not flat.",this);const n=e instanceof Ti?e:new Ti(e);if(n.childCount>0)throw new de.b("writer-wrap-element-not-empty: Element to wrap with is not empty.",this);if(null!==n.parent)throw new de.b("writer-wrap-element-attached: Element to wrap with is already attached to tree model.",this);this.insert(n,t.start);const r=new Pi(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(r,Di._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new de.b("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.",this);this.move(Pi._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new de.b("writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.",this);const n=e.usingOperation,r=e.range,i=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new de.b("writer-addMarker-marker-exists: Marker with provided name already exists.",this);if(!r)throw new de.b("writer-addMarker-no-range: Range parameter is required when adding a new marker.",this);return n?(rs(this,t,null,r,i),this.model.markers.get(t)):this.model.markers._set(t,r,n,i)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n="string"==typeof t?t:t.name,r=this.model.markers.get(n);if(!r)throw new de.b("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.",this);if(!e)return void this.model.markers._refresh(r);const i="boolean"==typeof e.usingOperation,o="boolean"==typeof e.affectsData,s=o?e.affectsData:r.affectsData;if(!i&&!e.range&&!o)throw new de.b("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.",this);const a=r.getRange(),l=e.range?e.range:a;i&&e.usingOperation!==r.managedUsingOperations?e.usingOperation?rs(this,n,null,l,s):(rs(this,n,a,null,s),this.model.markers._set(n,l,void 0,s)):r.managedUsingOperations?rs(this,n,a,l,s):this.model.markers._set(n,l,void 0,s)}removeMarker(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new de.b("writer-removeMarker-no-marker: Trying to remove marker which does not exist.",this);const n=this.model.markers.get(e);n.managedUsingOperations?rs(this,e,n.getRange(),null,n.affectsData):this.model.markers._remove(e)}setSelection(t,e,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(t,e,n)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else for(const[n,r]of _i(t))this._setSelectionAttribute(n,r)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=Hi._getStoreAttributeKey(t);this.setAttribute(r,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=Hi._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new de.b("writer-incorrect-use: Trying to use a writer outside the change() block.",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const r=n.getRange();let i=!1;if("move"==t)i=e.containsPosition(r.start)||e.start.isEqual(r.start)||e.containsPosition(r.end)||e.end.isEqual(r.end);else{const t=e.nodeAfter,n=r.end.parent==t&&0==r.end.offset,o=r.end.nodeAfter==t,s=r.start.nodeAfter==t;i=r.start.parent==e.nodeBefore&&r.start.isAtEnd||n||o||s}i&&this.updateMarker(n.name,{range:r})}}}function es(t,e,n,r){const i=t.model,o=i.document;let s,a,l,u=r.start;for(const h of r.getWalker({shallow:!0}))l=h.item.getAttribute(e),s&&a!=l&&(a!=n&&c(),u=s),s=h.nextPosition,a=l;function c(){const r=new Pi(u,s),l=new Ho(r,e,a,n,r.root.document?o.version:null);t.batch.addOperation(l),i.applyOperation(l)}s instanceof Di&&s!=u&&a!=n&&c()}function ns(t,e,n,r){const i=t.model,o=i.document,s=r.getAttribute(e);let a,l;if(s!=n){if(r.root===r)l=new Ko(r,e,s,n,r.document?o.version:null);else{const i=(a=new Pi(Di._createBefore(r),t.createPositionAfter(r))).root.document?o.version:null;l=new Ho(a,e,s,n,i)}t.batch.addOperation(l),i.applyOperation(l)}}function rs(t,e,n,r,i){const o=t.model,s=new Go(e,n,r,o.markers,i,o.document.version);t.batch.addOperation(s),o.applyOperation(s)}function is(t,e,n,r){let i;if(t.root.document){const n=r.document,o=new Di(n.graveyard,[0]);i=new Wo(t,e,o,n.version)}else i=new $o(t,e);n.addOperation(i),r.applyOperation(i)}function os(t,e){return t===e||t instanceof Zo&&e instanceof Zo}class ss{constructor(t){this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize);const e=Pi._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const t=n.getRange();this.bufferMarkerChange(n.name,t,t,n.affectsData)}this._cachedChanges=null}bufferOperation(t){switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const e of t.range.getItems({shallow:!0}))this._isInInsertedElement(e.parent)||this._markAttribute(e);break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const e=this._isInInsertedElement(t.sourcePosition.parent),n=this._isInInsertedElement(t.targetPosition.parent);e||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),n||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const e=Pi._createFromPositionAndShift(t.position,1);for(const t of this._markerCollection.getMarkersIntersectingRange(e)){const e=t.getRange();this.bufferMarkerChange(t.name,e,e,t.affectsData)}break}case"split":{const e=t.splitPosition.parent;this._isInInsertedElement(e)||this._markRemove(e,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const e=t.sourcePosition.parent;this._isInInsertedElement(e.parent)||this._markRemove(e.parent,e.startOffset,1),this._markInsert(t.graveyardPosition.parent,t.graveyardPosition.offset,1);const n=t.targetPosition.parent;this._isInInsertedElement(n)||this._markInsert(n,t.targetPosition.offset,e.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n,r){const i=this._changedMarkers.get(t);i?(i.newRange=n,i.affectsData=r,null==i.oldRange&&null==i.newRange&&this._changedMarkers.delete(t)):this._changedMarkers.set(t,{oldRange:e,newRange:n,affectsData:r})}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.oldRange&&t.push({name:e,range:n.oldRange});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.newRange&&t.push({name:e,range:n.newRange});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(t=>({name:t[0],data:{oldRange:t[1].oldRange,newRange:t[1].newRange}}))}hasDataChanges(){for(const[,t]of this._changedMarkers)if(t.affectsData)return!0;return this._changesInElement.size>0}getChanges(t={includeChangesInGraveyard:!1}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();const e=[];for(const n of this._changesInElement.keys()){const t=this._changesInElement.get(n).sort((t,e)=>t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1),r=this._elementSnapshots.get(n),i=as(n.getChildren()),o=ls(r.length,t);let s=0,a=0;for(const l of o)if("i"===l)e.push(this._getInsertDiff(n,s,i[s].name)),s++;else if("r"===l)e.push(this._getRemoveDiff(n,s,r[a].name)),a++;else if("a"===l){const t=i[s].attributes,o=r[a].attributes;let l;if("$text"==i[s].name)l=new Pi(Di._createAt(n,s),Di._createAt(n,s+1));else{const t=n.offsetToIndex(s);l=new Pi(Di._createAt(n,s),Di._createAt(n.getChild(t),0))}e.push(...this._getAttributesDiff(l,o,t)),s++,a++}else s++,a++}e.sort((t,e)=>t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1);for(let n=1;n<e.length;n++){const t=e[n-1],r=e[n],i="remove"==t.type&&"remove"==r.type&&"$text"==t.name&&"$text"==r.name&&t.position.isEqual(r.position),o="insert"==t.type&&"insert"==r.type&&"$text"==t.name&&"$text"==r.name&&t.position.parent==r.position.parent&&t.position.offset+t.length==r.position.offset,s="attribute"==t.type&&"attribute"==r.type&&t.position.parent==r.position.parent&&t.range.isFlat&&r.range.isFlat&&t.position.offset+t.length==r.position.offset&&t.attributeKey==r.attributeKey&&t.attributeOldValue==r.attributeOldValue&&t.attributeNewValue==r.attributeNewValue;(i||o||s)&&(e[n-1].length++,s&&(e[n-1].range.end=e[n-1].range.end.getShiftedBy(1)),e.splice(n,1),n--)}for(const n of e)delete n.changeCount,"attribute"==n.type&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e.slice(),this._cachedChanges=e.slice().filter(us),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(t,e,n){const r={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,r)}_markRemove(t,e,n){const r={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,r),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshot(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):this._changesInElement.set(t,e=[]),e}_makeSnapshot(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,as(t.getChildren()))}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const r=t.offset+t.howMany,i=n.offset+n.howMany;if("insert"==t.type&&("insert"==n.type&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<i&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==n.type&&t.offset<n.offset&&(n.offset+=t.howMany),"attribute"==n.type))if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<i){const i=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:r,howMany:i-n.howMany,count:this._changeCount++})}if("remove"==t.type){if("insert"==n.type)if(r<=n.offset)n.offset-=t.howMany;else if(r<=i)if(t.offset<n.offset){const e=r-n.offset;n.offset=t.offset,n.howMany-=e,t.nodesToHandle-=e}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<i){const e=i-t.offset;n.howMany-=e,t.nodesToHandle-=e}if("remove"==n.type&&(r<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),"attribute"==n.type)if(r<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const e=r-n.offset;n.offset=t.offset,n.howMany-=e}else if(t.offset<i)if(r<=i){const r=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:t.offset,howMany:r-n.howMany-t.nodesToHandle,count:this._changeCount++})}else n.howMany-=i-t.offset}if("attribute"==t.type){if("insert"==n.type)if(t.offset<n.offset&&r>n.offset){if(r>i){const t={type:"attribute",offset:i,howMany:r-i,count:this._changeCount++};this._handleChange(t,e),e.push(t)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<i&&(r>i?(t.nodesToHandle=r-i,t.offset=i):t.nodesToHandle=0);if("remove"==n.type&&t.offset<n.offset&&r>n.offset){const i={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(i,e),e.push(i),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}"attribute"==n.type&&(t.offset>=n.offset&&r<=i?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&r>=i&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n){return{type:"insert",position:Di._createAt(t,e),name:n,length:1,changeCount:this._changeCount++}}_getRemoveDiff(t,e,n){return{type:"remove",position:Di._createAt(t,e),name:n,length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const r=[];n=new Map(n);for(const[i,o]of e){const e=n.has(i)?n.get(i):null;e!==o&&r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:i,attributeOldValue:o,attributeNewValue:e,changeCount:this._changeCount++}),n.delete(i)}for(const[i,o]of n)r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:i,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return r}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),r=t.startOffset;if(n)for(const i of n)if("insert"==i.type&&r>=i.offset&&r<i.offset+i.howMany)return!0;return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const r=new Pi(Di._createAt(t,e),Di._createAt(t,e+n));for(const i of r.getItems({shallow:!0}))i.is("element")&&(this._elementSnapshots.delete(i),this._changesInElement.delete(i),this._removeAllNestedChanges(i,0,i.maxOffset))}}function as(t){const e=[];for(const n of t)if(n.is("text"))for(let t=0;t<n.data.length;t++)e.push({name:"$text",attributes:new Map(n.getAttributes())});else e.push({name:n.name,attributes:new Map(n.getAttributes())});return e}function ls(t,e){const n=[];let r=0,i=0;for(const o of e){if(o.offset>r){for(let t=0;t<o.offset-r;t++)n.push("e");i+=o.offset-r}if("insert"==o.type){for(let t=0;t<o.howMany;t++)n.push("i");r=o.offset+o.howMany}else if("remove"==o.type){for(let t=0;t<o.howMany;t++)n.push("r");r=o.offset,i+=o.howMany}else n.push(..."a".repeat(o.howMany).split("")),r=o.offset+o.howMany,i+=o.howMany}if(i<t)for(let o=0;o<t-i-r;o++)n.push("e");return n}function us(t){return!(t.position&&"$graveyard"==t.position.root.rootName||t.range&&"$graveyard"==t.range.root.rootName)}class cs{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(t){this._operations.includes(t)||this._operations.push(t)}getOperations(t=0,e=Number.POSITIVE_INFINITY){return t<0?[]:this._operations.slice(t,e)}getOperation(t){return this._operations[t]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}}function hs(t,e){return function(t){return!!t&&1==t.length&&/[\ud800-\udbff]/.test(t)}(t.charAt(e-1))&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}(t.charAt(e))}function ds(t,e){return function(t){return!!t&&1==t.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}(t.charAt(e))}const fs="$graveyard";class ps{constructor(t){this.model=t,this.version=0,this.history=new cs(this),this.selection=new Hi(this),this.roots=new mn({idProperty:"rootName"}),this.differ=new ss(t.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",fs),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];if(n.isDocumentOperation&&n.baseVersion!==this.version)throw new de.b("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",this,{operation:n})},{priority:"highest"}),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&this.differ.bufferOperation(n)},{priority:"high"}),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&(this.version++,this.history.addOperation(n))},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(t,e,n,r)=>{this.differ.bufferMarkerChange(e.name,n,r,e.affectsData),null===n&&e.on("change",(t,n)=>{this.differ.bufferMarkerChange(e.name,n,e.getRange(),e.affectsData)})})}get graveyard(){return this.getRoot(fs)}createRoot(t="$root",e="main"){if(this.roots.get(e))throw new de.b("model-document-createRoot-name-exists: Root with specified name already exists.",this,{name:e});const n=new Zo(this,t,e);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(){return Array.from(this.roots,t=>t.rootName).filter(t=>t!=fs)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=Ae(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const t of this.roots)if(t!==this.graveyard)return t;return this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=this.model,n=e.schema,r=e.createPositionFromPath(t,[0]);return n.getNearestSelectionRange(r)||e.createRange(r)}_validateSelectionRange(t){return gs(t.start)&&gs(t.end)}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(this.selection.refresh(),e=n(t))break}while(e)}}function gs(t){const e=t.textNode;if(e){const n=e.data,r=t.offset-e.startOffset;return!hs(n,r)&&!ds(n,r)}return!0}Te(ps,ye);class ms{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){return this._markers.has(t)}get(t){return this._markers.get(t)||null}_set(t,e,n=!1,r=!1){const i=t instanceof bs?t.name:t,o=this._markers.get(i);if(o){const t=o.getRange();let s=!1;return t.isEqual(e)||(o._attachLiveRange(zi.fromRange(e)),s=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,s=!0),"boolean"==typeof r&&r!=o.affectsData&&(o._affectsData=r,s=!0),s&&this.fire("update:"+i,o,t,e),o}const s=zi.fromRange(e),a=new bs(i,s,n,r);return this._markers.set(i,a),this.fire("update:"+i,a,null,e),a}_remove(t){const e=t instanceof bs?t.name:t,n=this._markers.get(e);return!!n&&(this._markers.delete(e),this.fire("update:"+e,n,n.getRange(),null),this._destroyMarker(n),!0)}_refresh(t){const e=t instanceof bs?t.name:t,n=this._markers.get(e);if(!n)throw new de.b("markercollection-refresh-marker-not-exists: Marker with provided name does not exists.",this);const r=n.getRange();this.fire("update:"+e,n,r,r,n.managedUsingOperations,n.affectsData)}*getMarkersAtPosition(t){for(const e of this)e.getRange().containsPosition(t)&&(yield e)}*getMarkersIntersectingRange(t){for(const e of this)null!==e.getRange().getIntersection(t)&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}Te(ms,ye);class bs{constructor(t,e,n,r){this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new de.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new de.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._affectsData}getStart(){if(!this._liveRange)throw new de.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new de.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new de.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.toRange()}is(t){return"marker"==t||"model:marker"==t}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Te(bs,ye);class vs extends Di{constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new de.b("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",t);(function(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&(function(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}).call(this,n)},{priority:"low"})}).call(this)}detach(){this.stopListening()}is(t){return"livePosition"==t||"model:livePosition"==t||super.is(t)}toPosition(){return new Di(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}Te(vs,ye);class ys{constructor(t,e,n){this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(t,e){t=Array.from(t);for(let n=0;n<t.length;n++)this._handleNode(t[n],{isFirst:0===n&&e.isFirst,isLast:n===t.length-1&&e.isLast});this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}getSelectionRange(){return this.nodeToSelect?Pi._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Pi(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t,e){this.schema.isObject(t)?this._handleObject(t,e):this._checkAndSplitToAllowedPosition(t,e)?(this._insert(t),this._mergeSiblingsOf(t,e)):this._handleDisallowedNode(t,e)}_handleObject(t,e){this._checkAndSplitToAllowedPosition(t)?this._insert(t):this._tryAutoparagraphing(t,e)}_handleDisallowedNode(t,e){t.is("element")?this.handleNodes(t.getChildren(),e):this._tryAutoparagraphing(t,e)}_insert(t){if(!this.schema.checkChild(this.position,t))throw new de.b("insertcontent-wrong-position: Given node cannot be inserted on the given position.",this,{node:t,position:this.position});const e=vs.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this.writer.insert(t,this.position),this.position=e.toPosition(),e.detach(),this.nodeToSelect=this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?t:null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=vs.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=vs.fromPosition(t,"toNext"))}_mergeSiblingsOf(t,e){if(!(t instanceof Ti))return;const n=this._canMergeLeft(t,e),r=this._canMergeRight(t,e),i=vs._createBefore(t);i.stickiness="toNext";const o=vs._createAfter(t);if(o.stickiness="toNext",n){const t=vs.fromPosition(this.position);t.stickiness="toNext",this._affectedStart.isEqual(i)&&(this._affectedStart.detach(),this._affectedStart=vs._createAt(i.nodeBefore,"end","toPrevious")),this.writer.merge(i),i.isEqual(this._affectedEnd)&&e.isLast&&(this._affectedEnd.detach(),this._affectedEnd=vs._createAt(i.nodeBefore,"end","toNext")),this.position=t.toPosition(),t.detach()}if(r){if(!this.position.isEqual(o))throw new de.b("insertcontent-invalid-insertion-position",this);this.position=Di._createAt(o.nodeBefore,"end");const t=vs.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(o)&&(this._affectedEnd.detach(),this._affectedEnd=vs._createAt(o.nodeBefore,"end","toNext")),this.writer.merge(o),o.getShiftedBy(-1).isEqual(this._affectedStart)&&e.isFirst&&(this._affectedStart.detach(),this._affectedStart=vs._createAt(o.nodeBefore,0,"toPrevious")),this.position=t.toPosition(),t.detach()}(n||r)&&this._filterAttributesOf.push(this.position.parent),i.detach(),o.detach()}_canMergeLeft(t,e){const n=t.previousSibling;return e.isFirst&&n instanceof Ti&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(n,t)}_canMergeRight(t,e){const n=t.nextSibling;return e.isLast&&n instanceof Ti&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(t,n)}_tryAutoparagraphing(t,e){const n=this.writer.createElement("paragraph");this._getAllowedIn(n,this.position.parent)&&this.schema.checkChild(n,t)&&(n._appendChild(t),this._handleNode(n,e))}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(t,this.position.parent);if(!e)return!1;for(;e!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){const t=this.position.parent;this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===e&&this.writer.remove(t)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const t=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}}return!0}_getAllowedIn(t,e){return this.schema.checkChild(e,t)?e:e.parent?this._getAllowedIn(t,e.parent):null}}function ws(t,e,n){const r=t.createElement("paragraph");t.insert(r,e),_s(t,n,t.createPositionAt(r,0))}function _s(t,e,n){e instanceof Hi?t.setSelection(n):e.setTo(n)}const ks=' ,.?!:;"-()';function Cs(t,e){if("text"==e.type)return"word"===t.unit?function(t,e){let n=t.position.textNode;if(n){let r=t.position.offset-n.startOffset;for(;!Es(n.data,r,e)&&!Ss(n,r,e);){t.next();const i=e?t.position.nodeAfter:t.position.nodeBefore;if(i&&i.is("text")){const r=i.data.charAt(e?0:i.data.length-1);ks.includes(r)||(t.next(),n=t.position.textNode)}r=t.position.offset-n.startOffset}}return t.position}(t.walker,t.isForward):function(t,e){const n=t.position.textNode;if(n){const r=n.data;let i=t.position.offset-n.startOffset;for(;hs(r,i)||"character"==e&&ds(r,i);)t.next(),i=t.position.offset-n.startOffset}return t.position}(t.walker,t.unit);if(e.type==(t.isForward?"elementStart":"elementEnd")){if(t.schema.isObject(e.item))return Di._createAt(e.item,t.isForward?"after":"before");if(t.schema.checkChild(e.nextPosition,"$text"))return e.nextPosition}else{if(t.schema.isLimit(e.item))return void t.walker.skip(()=>!0);if(t.schema.checkChild(e.nextPosition,"$text"))return e.nextPosition}}function Es(t,e,n){return ks.includes(t.charAt(e+(n?0:-1)))}function Ss(t,e,n){return e===(n?t.endOffset:0)}function Ts(t,e){const n=[];Array.from(t.getItems({direction:"backward"})).map(t=>e.createRangeOn(t)).filter(e=>(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))).forEach(t=>{n.push(t.start.parent),e.remove(t)}),n.forEach(t=>{let n=t;for(;n.parent&&n.isEmpty;){const t=e.createRangeOn(n);n=n.parent,e.remove(t)}})}function xs(t,e){return t.isCollapsed?function(t,e){const n=t.start,r=e.getNearestSelectionRange(n);if(!r)return null;const i=r.start;return n.isEqual(i)?null:i.nodeAfter&&e.isLimit(i.nodeAfter)?new Pi(i,Di._createAfter(i.nodeAfter)):new Pi(i)}(t,e):function(t,e){const n=t.start,r=t.end,i=e.checkChild(n,"$text"),o=e.checkChild(r,"$text"),s=e.getLimitElement(n),a=e.getLimitElement(r);if(s===a){if(i&&o)return null;if(function(t,e,n){const r=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),i=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return r||i}(n,r,e)){const t=n.nodeAfter&&e.isObject(n.nodeAfter)?null:e.getNearestSelectionRange(n,"forward"),i=r.nodeBefore&&e.isObject(r.nodeBefore)?null:e.getNearestSelectionRange(r,"backward");return new Pi(t?t.start:n,i?i.start:r)}}const l=s&&!s.is("rootElement"),u=a&&!a.is("rootElement");if(l||u){const t=n.nodeAfter&&r.nodeBefore&&n.nodeAfter.parent===r.nodeBefore.parent,i=l&&(!t||!Is(n.nodeAfter,e)),o=u&&(!t||!Is(r.nodeBefore,e));let c=n,h=r;return i&&(c=Di._createBefore(As(s,e))),o&&(h=Di._createAfter(As(a,e))),new Pi(c,h)}return null}(t,e)}function As(t,e){let n=t,r=n;for(;e.isLimit(r)&&r.parent;)n=r,r=r.parent;return n}function Is(t,e){return t&&e.isObject(t)}class Ds{constructor(){this.markers=new ms,this.document=new ps(this),this.schema=new go,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,e)=>{e[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$marker"),this.schema.addChildCheck((t,e)=>{if("$marker"===e.name)return!0}),function(t){t.document.registerPostFixer(e=>(function(t,e){const n=e.document.selection,r=e.schema,i=[];let o=!1;for(const s of n.getRanges()){const t=xs(s,r);t?(i.push(t),o=!0):i.push(s)}if(o){let e=i;i.length>1&&(e=[new Pi(i[0].start,i[i.length-1].end)]),t.setSelection(e,{backward:n.isBackward})}})(e,t))}(this)}change(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new No,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(t){de.b.rethrowUnexpectedError(t,this)}}enqueueChange(t,e){try{"string"==typeof t?t=new No(t):"function"==typeof t&&(e=t,t=new No),this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(t){de.b.rethrowUnexpectedError(t,this)}}applyOperation(t){t._execute()}insertContent(t,e,n){return function(t,e,n,r){return t.change(i=>{let o;const s=(o=n?n instanceof Fi||n instanceof Hi?n:i.createSelection(n,r):t.document.selection).getFirstPosition();o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0});const a=new ys(t,i,s);let l;l=e.is("documentFragment")?e.getChildren():[e],a.handleNodes(l,{isFirst:!0,isLast:!0});const u=a.getSelectionRange();u&&(o instanceof Hi?i.setSelection(u):o.setTo(u));const c=a.getAffectedRange()||t.createRange(s);return a.destroy(),c})}(this,t,e,n)}deleteContent(t,e){!function(t,e,n={}){if(e.isCollapsed)return;const r=e.getFirstRange();if("$graveyard"==r.root.rootName)return;const i=t.schema;t.change(t=>{if(!n.doNotResetEntireContent&&function(t,e){const n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;const r=e.getFirstRange();return r.start.parent!=r.end.parent&&t.checkChild(n,"paragraph")}(i,e))return void function(t,e){const n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),ws(t,t.createPositionAt(n,0),e)}(t,e);const o=r.start,s=vs.fromPosition(r.end,"toNext");if(r.start.isTouching(r.end)||t.remove(r),n.leaveUnmerged||(function t(e,n,r){const i=n.parent,o=r.parent;if(i!=o&&!e.model.schema.isLimit(i)&&!e.model.schema.isLimit(o)&&function(t,e,n){const r=new Pi(t,e);for(const i of r.getWalker())if(n.isLimit(i.item))return!1;return!0}(n,r,e.model.schema)){for(n=e.createPositionAfter(i),(r=e.createPositionBefore(o)).isEqual(n)||e.insert(o,n),e.merge(n);r.parent.isEmpty;){const t=r.parent;r=e.createPositionBefore(t),e.remove(t)}t(e,n,r)}}(t,o,s),i.removeDisallowedAttributes(o.parent.getChildren(),t)),_s(t,e,o),function(t,e){const n=t.checkChild(e,"$text"),r=t.checkChild(e,"paragraph");return!n&&r}(i,o)){const r=i.getNearestSelectionRange(o);n.doNotAutoparagraph&&r?_s(t,e,r):ws(t,o,e)}s.detach()})}(this,t,e)}modifySelection(t,e){!function(t,e,n={}){const r=t.schema,i="backward"!=n.direction,o=n.unit?n.unit:"character",s=new xi({boundaries:function(t,e){const n=Di._createAt(t.root,e?"end":0);return e?new Pi(t,n):new Pi(n,t)}(e.focus,i),singleCharacters:!0,direction:i?"forward":"backward"}),a={walker:s,schema:r,isForward:i,unit:o};let l;for(;l=s.next();){if(l.done)return;const n=Cs(a,l.value);if(n)return void(e instanceof Hi?t.change(t=>{t.setSelectionFocus(n)}):e.setFocus(n))}}(this,t,e)}getSelectedContent(t){return function(t,e){return t.change(t=>{const n=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return n;const i=r.start.root,o=r.start.getCommonPath(r.end),s=i.getNodeByPath(o);let a;const l=(a=r.start.parent==r.end.parent?r:t.createRange(t.createPositionAt(s,r.start.path[o.length]),t.createPositionAt(s,r.end.path[o.length]+1))).end.offset-a.start.offset;for(const e of a.getItems({shallow:!0}))e.is("textProxy")?t.appendText(e.data,e.getAttributes(),n):t.append(e._clone(!0),n);if(a!=r){const e=r._getTransformedByMove(a.start,t.createPositionAt(n,0),l)[0],i=t.createRange(t.createPositionAt(n,0),e.start);Ts(t.createRange(e.end,t.createPositionAt(n,"end")),t),Ts(i,t)}return n})}(this,t)}hasContent(t,e){const n=t instanceof Ti?Pi._createIn(t):t;if(n.isCollapsed)return!1;for(const i of this.markers.getMarkersIntersectingRange(n))if(i.affectsData)return!0;const{ignoreWhitespaces:r=!1}=e||{};for(const i of n.getItems())if(i.is("textProxy")){if(!r)return!0;if(-1!==i.data.search(/\S/))return!0}else if(this.schema.isObject(i))return!0;return!1}createPositionFromPath(t,e,n){return new Di(t,e,n)}createPositionAt(t,e){return Di._createAt(t,e)}createPositionAfter(t){return Di._createAfter(t)}createPositionBefore(t){return Di._createBefore(t)}createRange(t,e){return new Pi(t,e)}createRangeIn(t){return Pi._createIn(t)}createRangeOn(t){return Pi._createOn(t)}createSelection(t,e,n){return new Fi(t,e,n)}createBatch(t){return new No(t)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){this._currentWriter=new ts(this,this._pendingChanges[0].batch);const e=this._pendingChanges[0].callback(this._currentWriter);t.push(e),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),t}}Te(Ds,Xe);class Ps{constructor(){this._listener=Object.create(vr)}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this._listener.fire("_keydown:"+In(e),e)})}set(t,e,n={}){const r=Dn(t);this._listener.listenTo(this._listener,"_keydown:"+r,(t,n)=>{e(n,()=>{n.preventDefault(),n.stopPropagation(),t.stop()}),t.return=!0},{priority:n.priority})}press(t){return!!this._listener.fire("_keydown:"+In(t),t)}destroy(){this._listener.stopListening()}}class Os extends Ps{constructor(t){super(),this.editor=t}set(t,e,n={}){if("string"==typeof e){const t=e;e=(e,n)=>{this.editor.execute(t),n()}}super.set(t,e,n)}}class Ns{constructor(t){const e=this.constructor.builtinPlugins;this.config=new ce(t,this.constructor.defaultConfig),this.config.define("plugins",e),this.plugins=new ao(this,e),this.commands=new lo;const n=this.config.get("language")||{};this.locale=new co({uiLanguage:"string"==typeof n?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.set("isReadOnly",!1),this.model=new Ds,this.data=new Io(this.model),this.editing=new so(this.model),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Do([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Os(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const t=this.config,e=t.get("plugins")||[],n=t.get("removePlugins")||[],r=t.get("extraPlugins")||[];return this.plugins.init(e.concat(r),n)}destroy(){let t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(t=>this.once("ready",t))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()})}execute(...t){try{this.commands.execute(...t)}catch(t){de.b.rethrowUnexpectedError(t,this)}}}Te(Ns,Xe);var Rs={setData(t){this.data.set(t)},getData(t){return this.data.get(t)}},Ms={updateSourceElement(){if(!this.sourceElement)throw new de.b("editor-missing-sourceelement: Cannot update the source element of a detached editor.",this);!function(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}(this.sourceElement,this.data.get())}};class Ls{getHtml(t){const e=document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML}}class Fs{constructor(){this._domParser=new DOMParser,this._domConverter=new pr({blockFillerMode:"nbsp"}),this._htmlWriter=new Ls}toData(t){const e=this._domConverter.viewToDom(t,document);return this._htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this._domConverter.domToView(e)}_toDom(t){const e=this._domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),r=e.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return n}}class js{constructor(t){this.editor=t,this._components=new Map}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){if(this.has(t))throw new de.b("componentfactory-item-exists: The item already exists in the component factory.",this,{name:t});this._components.set(Bs(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new de.b("componentfactory-item-missing: The required component is not registered in the factory.",this,{name:t});return this._components.get(Bs(t)).callback(this.editor.locale)}has(t){return this._components.has(Bs(t))}}function Bs(t){return String(t).toLowerCase()}class Vs{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(t){if(this._elements.has(t))throw new de.b("focusTracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>this._focus(t),{useCapture:!0}),this.listenTo(t,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}Te(Vs,vr),Te(Vs,Xe);class Us{constructor(t){this.editor=t,this.componentFactory=new js(t),this.focusTracker=new Vs,this._editableElementsMap=new Map,this.listenTo(t.editing.view.document,"layoutChanged",()=>this.update())}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}Te(Us,ye),n(14);const zs=new WeakMap;function qs(t){const{view:e,element:n,text:r,isDirectHost:i=!0}=t,o=e.document;zs.has(o)||(zs.set(o,new Map),o.registerPostFixer(t=>Hs(o,t))),zs.get(o).set(n,{text:r,isDirectHost:i}),e.change(t=>Hs(o,t))}function Hs(t,e){const n=zs.get(t);let r=!1;for(const[i,o]of n)$s(e,i,o)&&(r=!0);return r}function $s(t,e,n){const{text:r,isDirectHost:i}=n,o=i?e:function(t){if(1===e.childCount){const t=t.getChild(0);if(t.is("element")&&!t.is("uiElement"))return t}return null}();let s=!1;return!!o&&(n.hostElement=o,o.getAttribute("data-placeholder")!==r&&(t.setAttribute("data-placeholder",r,o),s=!0),function(t){const e=t.document;if(!e)return!1;const n=!Array.from(t.getChildren()).some(t=>!t.is("uiElement"));if(!e.isFocused&&n)return!0;const r=e.selection.anchor;return!(!n||!r||r.parent===t)}(o)?function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0)}(t,o)&&(s=!0):function(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0)}(t,o)&&(s=!0),s)}class Ws{constructor(){this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}class Js extends Us{constructor(t,e){super(t),this.view=e,this._toolbarConfig=function(t){return Array.isArray(t)?{items:t}:t?Object.assign({items:[]},t):{items:[]}}(t.config.get("toolbar")),this._elementReplacer=new Ws}get element(){return this.view.element}init(t){const e=this.view,n=this.editor.editing.view,r=e.editable,i=n.document.getRoot();r.name=i.rootName,e.render();const o=r.element;this.setEditableElement(r.name,o),this.focusTracker.add(o),e.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(o),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.detachDomRoot(t.editable.name),t.destroy(),super.destroy()}_initToolbar(){const t=this.editor,e=this.view,n=t.editing.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,this._toolbarConfig.viewportTopOffset&&(e.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),e.toolbar.fillFromConfig(this._toolbarConfig.items,this.componentFactory),function({origin:t,originKeystrokeHandler:e,originFocusTracker:n,toolbar:r,beforeFocus:i,afterBlur:o}){n.add(r.element),e.set("Alt+F10",(t,e)=>{n.isFocused&&!r.focusTracker.isFocused&&(i&&i(),r.focus(),e())}),r.keystrokes.set("Esc",(e,n)=>{r.focusTracker.isFocused&&(t.focus(),o&&o(),n())})}({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:e.toolbar})}_initPlaceholder(){const t=this.editor,e=t.editing.view,n=e.document.getRoot(),r=t.sourceElement,i=t.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&qs({view:e,element:n,text:i,isDirectHost:!1})}}class Gs extends mn{constructor(t){super({idProperty:"viewUid"}),this.on("add",(t,e,n)=>{e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}),this.on("remove",(t,e)=>{e.element&&this._parentElement&&e.element.remove()}),this.locale=t,this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t}delegate(...t){if(!t.length||!function(t){return t.every(t=>"string"==typeof t)}(t))throw new de.b("ui-viewcollection-delegate-wrong-events: All event names must be strings.",this);return{to:e=>{for(const n of this)for(const r of t)n.delegate(r).to(e);this.on("add",(n,r)=>{for(const i of t)r.delegate(i).to(e)}),this.on("remove",(n,r)=>{for(const i of t)r.stopDelegating(i,e)})}}}}const Qs="http://www.w3.org/1999/xhtml";class Ks{constructor(t){Object.assign(this,oa(ia(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new de.b("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){yield*function*t(e){if(e.children)for(const n of e.children)ca(n)?yield n:ha(n)&&(yield*t(n))}(this)}static bind(t,e){return{to:(n,r)=>new Xs({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:r}),if:(n,r,i)=>new Zs({observable:t,emitter:e,attribute:n,valueIfTrue:r,callback:i})}}static extend(t,e){if(t._isRendered)throw new de.b("template-extend-render: Attempting to extend a template which has already been rendered.",[this,t]);!function t(e,n){if(n.attributes&&(e.attributes||(e.attributes={}),la(e.attributes,n.attributes)),n.eventListeners&&(e.eventListeners||(e.eventListeners={}),la(e.eventListeners,n.eventListeners)),n.text&&e.text.push(...n.text),n.children&&n.children.length){if(e.children.length!=n.children.length)throw new de.b("ui-template-extend-children-mismatch: The number of children in extended definition does not match.",e);let r=0;for(const i of n.children)t(e.children[r++],i)}}(t,oa(ia(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new de.b('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.',this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||Qs,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),ta(this.text)?this._bindToObservable({schema:this.text,updater:function(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){let e,n,r,i;if(!this.attributes)return;const o=t.node,s=t.revertData;for(e in this.attributes)if(r=o.getAttribute(e),n=this.attributes[e],s&&(s.attributes[e]=r),i=T(n[0])&&n[0].ns?n[0].ns:null,ta(n)){const a=i?n[0].value:n;s&&fa(e)&&a.unshift(r),this._bindToObservable({schema:a,updater:na(o,e,i),data:t})}else"style"==e&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],t):(s&&r&&fa(e)&&n.unshift(r),ua(n=n.map(t=>t&&t.value||t).reduce((t,e)=>t.concat(e),[]).reduce(aa,""))||o.setAttributeNS(i,e,n))}_renderStyleAttribute(t,e){const n=e.node;for(const r in t){const i=t[r];ta(i)?this._bindToObservable({schema:[i],updater:ra(n,r),data:e}):n.style[r]=i}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,r=t.isApplying;let i=0;for(const o of this.children)if(da(o)){if(!r){o.setParent(e);for(const t of o)n.appendChild(t.element)}}else if(ca(o))r||(o.isRendered||o.render(),n.appendChild(o.element));else if(sr(o))n.appendChild(o);else if(r){const e={children:[],bindings:[],attributes:{}};t.revertData.children.push(e),o._renderNode({node:n.childNodes[i++],isApplying:!0,revertData:e})}else n.appendChild(o.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map(n=>{const[r,i]=e.split("@");return n.activateDomEventListener(r,i,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const r=n.revertData;ea(t,e,n);const i=t.filter(t=>!ua(t)).filter(t=>t.observable).map(r=>r.activateAttributeListener(t,e,n));r&&r.bindings.push(i)}_revertTemplateFromNode(t,e){for(const n of e.bindings)for(const t of n)t();if(e.text)t.textContent=e.text;else{for(const n in e.attributes){const r=e.attributes[n];null===r?t.removeAttribute(n):t.setAttribute(n,r)}for(let n=0;n<e.children.length;++n)this._revertTemplateFromNode(t.childNodes[n],e.children[n])}}}Te(Ks,ye);class Ys{constructor(t){Object.assign(this,t)}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const r=()=>ea(t,e,n);return this.emitter.listenTo(this.observable,"change:"+this.attribute,r),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,r)}}}class Xs extends Ys{activateDomEventListener(t,e,n){const r=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,r),()=>{this.emitter.stopListening(n.node,t,r)}}}class Zs extends Ys{getValue(t){return!ua(super.getValue(t))&&(this.valueIfTrue||!0)}}function ta(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(ta):t instanceof Ys)}function ea(t,e,{node:n}){let r=function(t,e){return t.map(t=>t instanceof Ys?t.getValue(e):t)}(t,n);ua(r=1==t.length&&t[0]instanceof Zs?r[0]:r.reduce(aa,""))?e.remove():e.set(r)}function na(t,e,n){return{set(r){t.setAttributeNS(n,e,r)},remove(){t.removeAttributeNS(n,e)}}}function ra(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function ia(t){return le(t,t=>{if(t&&(t instanceof Ys||ha(t)||ca(t)||da(t)))return t})}function oa(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){Array.isArray(t.text)||(t.text=[t.text])}(t),t.on&&(t.eventListeners=function(t){for(const e in t)sa(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(const e in t)t[e].value&&(t[e].value=[].concat(t[e].value)),sa(t,e)}(t.attributes);const e=[];if(t.children)if(da(t.children))e.push(t.children);else for(const n of t.children)ha(n)||ca(n)||sr(n)?e.push(n):e.push(new Ks(n));t.children=e}return t}function sa(t,e){Array.isArray(t[e])||(t[e]=[t[e]])}function aa(t,e){return ua(e)?t:ua(t)?e:`${t} ${e}`}function la(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function ua(t){return!t&&0!==t}function ca(t){return t instanceof pa}function ha(t){return t instanceof Ks}function da(t){return t instanceof Gs}function fa(t){return"class"==t||"style"==t}n(16);class pa{constructor(t){this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new mn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ks.bind(this,this)}createCollection(){const t=new Gs;return this._viewCollections.add(t),t}registerChild(t){Ne(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){Ne(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new Ks(t)}extendTemplate(t){Ks.extend(this.template,t)}render(){if(this.isRendered)throw new de.b("ui-view-render-already-rendered: This View has already been rendered.",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}Te(pa,vr),Te(pa,Xe),n(18);class ga extends pa{constructor(t){super(t),this.body=this.createCollection()}render(){super.render(),this._renderBodyCollection()}destroy(){return this._bodyCollectionContainer.remove(),super.destroy()}_renderBodyCollection(){const t=this._bodyCollectionContainer=new Ks({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this.body}).render();document.body.appendChild(t)}}n(20);class ma extends pa{constructor(t){super(t),this.set("text"),this.set("for");const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],for:e.to("for")},children:[{text:e.to("text")}]})}}class ba extends ga{constructor(t){super(t);const e=ge();this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":`ck-editor__aria-label_${e}`},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(t){const e=this.t,n=new ma;return n.text=e("bi"),n.extendTemplate({attributes:{id:`ck-editor__aria-label_${t}`,class:"ck-voice-label"}}),n}}class va extends pa{constructor(t,e,n){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=e}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const t=this._editingView;function e(e){t.change(n=>{const r=t.document.getRoot(e.name);n.addClass(e.isFocused?"ck-focused":"ck-blurred",r),n.removeClass(e.isFocused?"ck-blurred":"ck-focused",r)})}t.isRenderingInProgress?function n(r){t.once("change:isRenderingInProgress",(t,i,o)=>{o?n(r):e(r)})}(this):e(this)}}class ya extends va{constructor(t,e,n){super(t,e,n),this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView,e=this.t;t.change(n=>{const r=t.document.getRoot(this.name);n.setAttribute("aria-label",e("bu",[this.name]),r)})}}function wa(t){return e=>e+t}n(22);const _a=wa("px");class ka extends pa{constructor(t){super(t);const e=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new Ks({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",t=>t?"block":"none"),height:e.to("isSticky",t=>t?_a(this._panelRect.height):null)}}}).render(),this._contentPanel=new Ks({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",e.if("isSticky","ck-sticky-panel__content_sticky"),e.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",t=>t?_a(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:e.to("_hasViewportTopOffset",t=>t?_a(this.viewportTopOffset):null),bottom:e.to("_isStickyToTheLimiter",t=>t?_a(this.limiterBottomOffset):null),marginLeft:e.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(cr.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const t=this._panelRect=this._contentPanel.getBoundingClientRect();let e;this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:_a(-cr.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}class Ca{constructor(t){if(Object.assign(this,t),t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(const r of n)t.keystrokeHandler.set(r,(t,n)=>{this[e](),n()})}}get first(){return this.focusables.find(Ea)||null}get last(){return this.focusables.filter(Ea).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,n)=>{const r=e.element===this.focusTracker.focusedElement;return r&&(t=n),r}),t)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){t&&t.focus()}_getFocusableItem(t){const e=this.current,n=this.focusables.length;if(!n)return null;if(null===e)return this[1===t?"first":"last"];let r=(e+n+t)%n;do{const e=this.focusables.get(r);if(Ea(e))return e;r=(r+n+t)%n}while(r!==e);return null}}function Ea(t){return!(!t.focus||"none"==cr.window.getComputedStyle(t.element).display)}class Sa extends pa{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}const Ta=100;class xa{constructor(t){this._callback=t,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(t){this._elements.add(t),1===this._elements.size&&this._startPeriodicCheck()}unobserve(t){this._elements.delete(t),this._previousRects.delete(t),this._elements.size||this._stopPeriodicCheck()}disconnect(){this._elements.forEach(t=>this.unobserve(t))}_startPeriodicCheck(){const t=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(t,Ta)};this.listenTo(cr.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()}),t()}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const t=[];for(const e of this._elements)this._hasRectChanged(e)&&t.push({target:e,contentRect:this._previousRects.get(e)});t.length&&this._callback(t)}_hasRectChanged(t){if(!t.ownerDocument.body.contains(t))return!1;const e=new ai(t),n=this._previousRects.get(t),r=!n||!n.isEqual(e);return this._previousRects.set(t,e),r}}Te(xa,vr);class Aa extends pa{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",t=>`ck-dropdown__panel_${t}`),e.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:e.to(t=>t.preventDefault())}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const t=this.children.last;"function"==typeof t.focusLast?t.focusLast():t.focus()}}}function Ia({element:t,target:e,positions:n,limiter:r,fitInViewport:i}){x(e)&&(e=e()),x(r)&&(r=r());const o=function(t){for(;t&&"html"!=t.tagName.toLowerCase();){if("static"!=cr.window.getComputedStyle(t).position)return t;t=t.parentElement}return null}(t.parentElement),s=new ai(t),a=new ai(e);let l,u;if(r||i){const t=r&&new ai(r).getVisible(),e=i&&new ai(cr.window);[u,l]=function(t,e,n,r,i){let o,s,a=0,l=0;const u=n.getArea();return t.some(t=>{const[c,h]=Da(t,e,n);let d,f;if(r)if(i){const t=r.getIntersection(i);d=t?t.getIntersectionArea(h):0}else d=r.getIntersectionArea(h);function p(){l=f,a=d,o=h,s=c}return i&&(f=i.getIntersectionArea(h)),i&&!r?f>l&&p():!i&&r?d>a&&p():f>l&&d>=a?p():f>=l&&d>a&&p(),d===u}),o?[s,o]:null}(n,a,s,t,e)||Da(n[0],a,s)}else[u,l]=Da(n[0],a,s);let{left:c,top:h}=Pa(l);if(o){const t=Pa(new ai(o)),e=oi(o);c-=t.left,h-=t.top,c+=o.scrollLeft,h+=o.scrollTop,c-=e.left,h-=e.top}return{left:c,top:h,name:u}}function Da(t,e,n){const{left:r,top:i,name:o}=t(e,n);return[o,n.clone().moveTo(r,i)]}function Pa({left:t,top:e}){const{scrollX:n,scrollY:r}=cr.window;return{left:t+n,top:e+r}}n(24);class Oa extends pa{constructor(t,e,n){super(t);const r=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("panelPosition","auto"),this.focusTracker=new Vs,this.keystrokes=new Ps,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",t=>!t)]},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",()=>{this.isOpen&&(this.panelView.position="auto"===this.panelPosition?Oa._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelPosition)}),this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);const t=(t,e)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,e())};this.keystrokes.set("arrowdown",(t,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())}),this.keystrokes.set("arrowright",(t,e)=>{this.isOpen&&e()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:e,northEast:n,northWest:r}=Oa.defaultPanelPositions;return"ltr"===this.locale.uiLanguageDirection?[t,e,n,r]:[e,t,r,n]}}Oa.defaultPanelPositions={southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.bottom-e.height,left:t.left-e.width+t.width,name:"nw"})},Oa._getOptimalPosition=Ia,n(26);class Na extends pa{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),e=t.getAttribute("viewBox");for(e&&(this.viewBox=e),this.element.innerHTML="";t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}n(28);class Ra extends pa{constructor(t){super(t),this.set("text",""),this.set("position","s");const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",e.to("position",t=>"ck-tooltip_"+t),e.if("text","ck-hidden",t=>!t.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:e.to("text")}]}]})}}n(30);class Ma extends pa{constructor(t){super(t);const e=this.bindTemplate,n=ge();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(n),this.iconView=new Na,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",e.to("class"),e.if("isEnabled","ck-disabled",t=>!t),e.if("isVisible","ck-hidden",t=>!t),e.to("isOn",t=>t?"ck-on":"ck-off"),e.if("withText","ck-button_with-text")],type:e.to("type",t=>t||"button"),tabindex:e.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${n}`,"aria-disabled":e.if("isEnabled",!0,t=>!t),"aria-pressed":e.to("isOn",t=>!!this.isToggleable&&String(t))},children:this.children,on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(t=>{this.isEnabled?this.fire("execute"):t.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView)}focus(){this.element.focus()}_createTooltipView(){const t=new Ra;return t.bind("text").to(this,"_tooltipString"),t.bind("position").to(this,"tooltipPosition"),t}_createLabelView(t){const e=new pa;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:`ck-editor__aria-label_${t}`},children:[{text:this.bindTemplate.to("label")}]}),e}_getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=function(t){return Sn.isMac?Pn(t).map(t=>xn[t.toLowerCase()]||t).reduce((t,e)=>t.slice(-1)in Tn?t+e:t+"+"+e):t}(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}var La='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class Fa extends Ma{constructor(t){super(t),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Na;return t.content=La,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}n(32);class ja extends pa{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new Vs,this.keystrokes=new Ps,this._focusCycler=new Ca({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class Ba extends pa{constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}class Va extends pa{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}n(34);class Ua extends Ma{constructor(t){super(t),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new pa;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}function za({emitter:t,activator:e,callback:n,contextElements:r}){t.listenTo(document,"mousedown",(t,{target:i})=>{if(e()){for(const t of r)if(t.contains(i))return;n()}})}function qa(t,e=Fa){const n=new e(t),r=new Aa(t),i=new Oa(t,n,r);return n.bind("isEnabled").to(i),n instanceof Fa?n.bind("isOn").to(i,"isOpen"):n.arrowView.bind("isOn").to(i,"isOpen"),function(t){(function(t){t.on("render",()=>{za({emitter:t,activator:()=>t.isOpen,callback:()=>{t.isOpen=!1},contextElements:[t.element]})})})(t),function(t){t.on("execute",e=>{e.source instanceof Ua||(t.isOpen=!1)})}(t),function(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isOpen&&(t.panelView.focus(),n())}),t.keystrokes.set("arrowup",(e,n)=>{t.isOpen&&(t.panelView.focusLast(),n())})}(t)}(i),i}function Ha(t,e){const n=t.locale,r=t.listView=new ja(n);r.items.bindTo(e).using(({type:t,model:e})=>{if("separator"===t)return new Va(n);if("button"===t||"switchbutton"===t){const r=new Ba(n);let i;return(i="button"===t?new Ma(n):new Ua(n)).bind(...Object.keys(e)).to(e),i.delegate("execute").to(r),r.children.add(i),r}}),t.panelView.children.add(r),r.items.delegate("execute").to(t)}n(36),n(38);var $a='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>\n';n(40);class Wa extends pa{constructor(t,e){super(t);const n=this.bindTemplate,r=this.t;this.options=e||{},this.set("ariaLabel",r("bo")),this.items=this.createCollection(),this.focusTracker=new Vs,this.keystrokes=new Ps,this.set("class"),this.itemsView=new Ja(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection(),this._focusCycler=new Ca({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar",n.to("class")],role:"toolbar","aria-label":n.to("ariaLabel")},children:this.children,on:{mousedown:function(t){return t.bindTemplate.to(e=>{e.target===t.element&&e.preventDefault()})}(this)}}),this._behavior=this.options.shouldGroupWhenFull?new Qa(this):new Ga(this)}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,e){t.map(t=>{"|"==t?this.items.add(new Sa):e.has(t)?this.items.add(e.create(t)):console.warn(Object(de.a)("toolbarview-item-unavailable: The requested toolbar item is unavailable."),{name:t})})}}class Ja extends pa{constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Ga{constructor(t){const e=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using(t=>t),t.focusables.bindTo(t.items).using(t=>t),t.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Qa{constructor(t){this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,t.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),t.children.on("add",this._updateFocusCycleableItems.bind(this)),t.children.on("remove",this._updateFocusCycleableItems.bind(this)),t.items.on("add",(t,e,n)=>{n>this.ungroupedItems.length?this.groupedItems.add(e,n-this.ungroupedItems.length):this.ungroupedItems.add(e,n),this._updateGrouping()}),t.items.on("remove",(t,e,n)=>{n>this.ungroupedItems.length?this.groupedItems.remove(e):this.ungroupedItems.remove(e),this._updateGrouping()}),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(t){this.viewElement=t.element,this._enableGroupingOnResize()}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.disconnect()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new ai(t.lastChild),r=new ai(t);if(!this.cachedPadding){const n=cr.window.getComputedStyle(t);this.cachedPadding=Number.parseInt(n["ltr"===e?"paddingRight":"paddingLeft"])}return"ltr"===e?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=function(t){return"function"==typeof cr.window.ResizeObserver?new cr.window.ResizeObserver(t):new xa(t)}(([e])=>{t&&t===e.contentRect.width||(this._updateGrouping(),t=e.contentRect.width)}),this.resizeObserver.observe(this.viewElement),this._updateGrouping()}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Sa),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=qa(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",function(t,e){const n=t.locale,r=n.t,i=t.toolbarView=new Wa(n);i.set("ariaLabel",r("bq")),t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),[].map(t=>i.items.add(t)),t.panelView.children.add(i),i.items.delegate("execute").to(t)}(n),n.buttonView.set({label:e("bp"),tooltip:!0,icon:$a}),n.toolbarView.items.bindTo(this.groupedItems).using(t=>t),n}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}n(42);class Ka extends ba{constructor(t,e){super(t),this.stickyPanel=new ka(t),this.toolbar=new Wa(t,{shouldGroupWhenFull:!0}),this.editable=new ya(t,e)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Ya extends Ns{constructor(t,e){super(e),ue(t)&&(this.sourceElement=t),this.data.processor=new Fs,this.model.document.createRoot(),this.ui=new Js(this,new Ka(this.locale,this.editing.view)),function(t){if(!x(t.updateSourceElement))throw new de.b("attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.",t);const e=t.sourceElement;if(e&&"textarea"===e.tagName.toLowerCase()&&e.form){let n;const r=e.form,i=()=>t.updateSourceElement();x(r.submit)&&(n=r.submit,r.submit=()=>{i(),n.apply(r)}),r.addEventListener("submit",i),t.on("destroy",()=>{r.removeEventListener("submit",i),n&&(r.submit=n)})}}(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,e={}){return new Promise(n=>{const r=new this(t,e);n(r.initPlugins().then(()=>r.ui.init(ue(t)?t:null)).then(()=>{if(!ue(t)&&e.initialData)throw new de.b("editor-create-initial-data: The config.initialData option cannot be used together with initial data passed in Editor.create().",null);const n=e.initialData||function(t){return ue(t)?function(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML}(t):t}(t);return r.data.init(n)}).then(()=>r.fire("ready")).then(()=>r))})}}Te(Ya,Rs),Te(Ya,Ms);class Xa{constructor(t){this.editor=t}destroy(){this.stopListening()}}Te(Xa,Xe);class Za{constructor(t){this.files=function(t){const e=t.files?Array.from(t.files):[],n=t.items?Array.from(t.items):[];return e.length?e:n.filter(t=>"file"===t.kind).map(t=>t.getAsFile())}(t),this._native=t}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}}class tl extends Vr{constructor(t){super(t);const e=this.document;function n(t,n){n.preventDefault();const r=n.dropRange?[n.dropRange]:Array.from(e.selection.getRanges()),i=new pe(e,"clipboardInput");e.fire(i,{dataTransfer:n.dataTransfer,targetRanges:r}),i.stop.called&&n.stopPropagation()}this.domEventType=["paste","copy","cut","drop","dragover"],this.listenTo(e,"paste",n,{priority:"low"}),this.listenTo(e,"drop",n,{priority:"low"})}onDomEvent(t){const e={dataTransfer:new Za(t.clipboardData?t.clipboardData:t.dataTransfer)};"drop"==t.type&&(e.dropRange=function(t,e){const n=e.target.ownerDocument,r=e.clientX,i=e.clientY;let o;return n.caretRangeFromPoint&&n.caretRangeFromPoint(r,i)?o=n.caretRangeFromPoint(r,i):e.rangeParent&&((o=n.createRange()).setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?t.domConverter.domRangeToView(o):t.document.selection.getFirstRange()}(this.view,t)),this.fire(t.type,t,e)}}const el=["figcaption","li"];class nl extends Xa{static get pluginName(){return"Clipboard"}init(){const t=this.editor,e=t.model.document,n=t.editing.view,r=n.document;function i(n,i){const o=i.dataTransfer;i.preventDefault();const s=t.data.toView(t.model.getSelectedContent(e.selection));r.fire("clipboardOutput",{dataTransfer:o,content:s,method:n.name})}this._htmlDataProcessor=new Fs,n.addObserver(tl),this.listenTo(r,"clipboardInput",e=>{t.isReadOnly&&e.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(t,e)=>{const r=e.dataTransfer;let i="";r.getData("text/html")?i=function(t){return r.getData("text/html").replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>1==e.length?" ":e)}():r.getData("text/plain")&&(i=function(t){return(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>-1&&(t=`<p>${t}</p>`),t}(r.getData("text/plain"))),i=this._htmlDataProcessor.toView(i),this.fire("inputTransformation",{content:i,dataTransfer:r}),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(t,e)=>{if(!e.content.isEmpty){const t=this.editor.model,n=this.editor.data.toModel(e.content,"$clipboardHolder");if(0==n.childCount)return;t.insertContent(n)}},{priority:"low"}),this.listenTo(r,"copy",i,{priority:"low"}),this.listenTo(r,"cut",(e,n)=>{t.isReadOnly?n.preventDefault():i(e,n)},{priority:"low"}),this.listenTo(r,"clipboardOutput",(n,r)=>{r.content.isEmpty||(r.dataTransfer.setData("text/html",this._htmlDataProcessor.toData(r.content)),r.dataTransfer.setData("text/plain",function t(e){let n="";if(e.is("text")||e.is("textProxy"))n=e.data;else if(e.is("img")&&e.hasAttribute("alt"))n=e.getAttribute("alt");else{let r=null;for(const i of e.getChildren()){const e=t(i);r&&(r.is("containerElement")||i.is("containerElement"))&&(el.includes(r.name)||el.includes(i.name)?n+="\n":n+="\n\n"),n+=e,r=i}}return n}(r.content))),"cut"==r.method&&t.model.deleteContent(e.selection)},{priority:"low"})}}class rl{constructor(t){this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"}),this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",il,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",il),this.refresh())}execute(){}destroy(){this.stopListening()}}function il(t){t.return=!1,t.stop()}function*ol(t,e){for(const n of e)n&&t.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}Te(rl,Xe);class sl extends rl{execute(){const t=this.editor.model,e=t.document;t.change(n=>{!function(t,e,n,r){const i=n.isCollapsed,o=n.getFirstRange(),s=o.start.parent,a=o.end.parent;if(r.isLimit(s)||r.isLimit(a))i||s!=a||t.deleteContent(n);else if(i){const t=ol(e.model.schema,n.getAttributes());al(e,o.start),e.setSelectionAttribute(t)}else{const r=!(o.start.isAtStart&&o.end.isAtEnd),i=s==a;t.deleteContent(n,{leaveUnmerged:r}),r&&(i?al(e,n.focus):e.setSelection(a,0))}}(this.editor.model,n,e.selection,t.schema),this.fire("afterExecute",{writer:n})})}}function al(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}class ll extends _r{constructor(t){super(t);const e=this.document;e.on("keydown",(t,n)=>{if(this.isEnabled&&n.keyCode==An.enter){let r;e.once("enter",t=>r=t,{priority:"highest"}),e.fire("enter",new Br(e,n.domEvent,{isSoft:n.shiftKey})),r&&r.stop.called&&t.stop()}})}observe(){}}class ul extends Xa{static get pluginName(){return"Enter"}init(){const t=this.editor,e=t.editing.view,n=e.document;e.addObserver(ll),t.commands.add("enter",new sl(t)),this.listenTo(n,"enter",(n,r)=>{r.preventDefault(),r.isSoft||(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"})}}class cl extends rl{execute(){const t=this.editor.model,e=t.document;t.change(n=>{!function(t,e,n){const r=n.isCollapsed,i=n.getFirstRange(),o=i.end.parent,s=i.start.parent==o;if(r){const r=ol(t.schema,n.getAttributes());hl(e,i.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(r)}else{const r=!(i.start.isAtStart&&i.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:r}),s?hl(e,n.focus):r&&e.setSelection(o,0)}}(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;const n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;const r=e.getFirstRange(),i=r.start.parent,o=r.end.parent;return!dl(i,t)&&!dl(o,t)||i===o}(t.schema,t.document.selection)}}function hl(t,e){const n=t.createElement("softBreak");t.insert(n,e),t.setSelection(n,"after")}function dl(t,e){return!t.is("rootElement")&&(e.isLimit(t)||dl(t.parent,e))}class fl extends Xa{static get pluginName(){return"ShiftEnter"}init(){const t=this.editor,e=t.conversion,n=t.editing.view,r=n.document;t.model.schema.register("softBreak",{allowWhere:"$text",isInline:!0}),e.for("upcast").elementToElement({model:"softBreak",view:"br"}),e.for("downcast").elementToElement({model:"softBreak",view:(t,e)=>e.createEmptyElement("br")}),n.addObserver(ll),t.commands.add("shiftEnter",new cl(t)),this.listenTo(r,"enter",(e,r)=>{r.preventDefault(),r.isSoft&&(t.execute("shiftEnter"),n.scrollToTheSelection())},{priority:"low"})}}class pl{constructor(t,e=20){this.model=t,this.size=0,this.limit=e,this.isLocked=!1,this._changeCallback=(t,e)=>{"transparent"!=e.type&&e!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(t){this.size+=t,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t){this.isLocked&&!t||(this._batch=null,this.size=0)}}class gl extends rl{constructor(t,e){super(t),this._buffer=new pl(t.model,e),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const e=this.editor.model,n=e.document,r=t.text||"",i=r.length,o=t.range||n.selection.getFirstRange(),s=t.resultRange;e.enqueueChange(this._buffer.batch,t=>{const a=o.isCollapsed;this._buffer.lock(),e.deleteContent(e.createSelection(o)),r&&e.insertContent(t.createText(r,n.selection.getAttributes()),o.start),s?t.setSelection(s):a&&t.setSelection(o.start.getShiftedBy(i)),this._buffer.unlock(),this._buffer.input(i),this._batches.add(this._buffer.batch)})}}const ml=[In("arrowUp"),In("arrowRight"),In("arrowDown"),In("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let Op=112;Op<=135;Op++)ml.push(Op);function bl(t){if(t.newChildren.length-t.oldChildren.length!=1)return;const e=function(t,e){const n=[];let r,i=0;return t.forEach(t=>{"equal"==t?(o(),i++):"insert"==t?(s("insert")?r.values.push(e[i]):(o(),r={type:"insert",index:i,values:[e[i]]}),i++):s("delete")?r.howMany++:(o(),r={type:"delete",index:i,howMany:1})}),o(),n;function o(){r&&(n.push(r),r=null)}function s(t){return r&&r.type==t}}(rr(t.oldChildren,t.newChildren,vl),t.newChildren);if(e.length>1)return;const n=e[0];return n.values[0]&&n.values[0].is("text")?n:void 0}function vl(t,e){return t&&t.is("text")&&e&&e.is("text")?t.data===e.data:t===e}class yl{constructor(t){this.editor=t,this.editing=this.editor.editing}handle(t,e){if(function(t){if(0==t.length)return!1;for(const e of t)if("children"===e.type&&!bl(e))return!0;return!1}(t))this._handleContainerChildrenMutations(t,e);else for(const n of t)this._handleTextMutation(n,e),this._handleTextNodeInsertion(n)}_handleContainerChildrenMutations(t,e){const n=function(t){const e=t.map(t=>t.node).reduce((t,e)=>t.getCommonAncestor(e,{includeSelf:!0}));if(e)return e.getAncestors({includeSelf:!0,parentFirst:!0}).find(t=>t.is("containerElement")||t.is("rootElement"))}(t);if(!n)return;const r=this.editor.editing.view.domConverter.mapViewToDom(n),i=new pr,o=this.editor.data.toModel(i.domToView(r)).getChild(0),s=this.editor.editing.mapper.toModelElement(n);if(!s)return;const a=Array.from(o.getChildren()),l=Array.from(s.getChildren()),u=a[a.length-1],c=l[l.length-1];u&&u.is("softBreak")&&c&&!c.is("softBreak")&&a.pop();const h=this.editor.model.schema;if(!wl(a,h)||!wl(l,h))return;const d=a.map(t=>t.is("text")?t.data:"@").join("").replace(/\u00A0/g," "),f=l.map(t=>t.is("text")?t.data:"@").join("").replace(/\u00A0/g," ");if(f===d)return;const p=rr(f,d),{firstChangeAt:g,insertions:m,deletions:b}=_l(p);let v=null;e&&(v=this.editing.mapper.toModelRange(e.getFirstRange()));const y=d.substr(g,m),w=this.editor.model.createRange(this.editor.model.createPositionAt(s,g),this.editor.model.createPositionAt(s,g+b));this.editor.execute("input",{text:y,range:w,resultRange:v})}_handleTextMutation(t,e){if("text"!=t.type)return;const n=t.newText.replace(/\u00A0/g," "),r=t.oldText.replace(/\u00A0/g," ");if(r===n)return;const i=rr(r,n),{firstChangeAt:o,insertions:s,deletions:a}=_l(i);let l=null;e&&(l=this.editing.mapper.toModelRange(e.getFirstRange()));const u=this.editing.view.createPositionAt(t.node,o),c=this.editing.mapper.toModelPosition(u),h=this.editor.model.createRange(c,c.getShiftedBy(a)),d=n.substr(o,s);this.editor.execute("input",{text:d,range:h,resultRange:l})}_handleTextNodeInsertion(t){if("children"!=t.type)return;const e=bl(t),n=this.editing.view.createPositionAt(t.node,e.index),r=this.editing.mapper.toModelPosition(n);this.editor.execute("input",{text:e.values[0].data.replace(/\u00A0/g," "),range:this.editor.model.createRange(r)})}}function wl(t,e){return t.every(t=>e.isInline(t))}function _l(t){let e=null,n=null;for(let o=0;o<t.length;o++)"equal"!=t[o]&&(e=null===e?o:e,n=o);let r=0,i=0;for(let o=e;o<=n;o++)"insert"!=t[o]&&r++,"delete"!=t[o]&&i++;return{insertions:i,deletions:r,firstChangeAt:e}}class kl extends Xa{static get pluginName(){return"Input"}init(){const t=this.editor,e=new gl(t,t.config.get("typing.undoStep")||20);t.commands.add("input",e),function(t){let e=null;const n=t.model,r=t.editing.view,i=t.commands.get("input");function o(t){const o=n.document,a=r.document.isComposing,l=e&&e.isEqual(o.selection);e=null,i.isEnabled&&(function(t){return!!t.ctrlKey||ml.includes(t.keyCode)}(t)||o.selection.isCollapsed||a&&229===t.keyCode||!a&&229===t.keyCode&&l||s())}function s(){const t=i.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}r.document.on(Sn.isAndroid?"beforeinput":"keydown",(t,e)=>o(e),{priority:"lowest"}),r.document.on("compositionstart",function(){const t=n.document,e=1!==t.selection.rangeCount||t.selection.getFirstRange().isFlat;t.selection.isCollapsed||e||s()},{priority:"lowest"}),r.document.on("compositionend",()=>{e=n.createSelection(n.document.selection)},{priority:"lowest"})}(t),function(t){t.editing.view.document.on("mutations",(e,n,r)=>{new yl(t).handle(n,r)})}(t)}isInput(t){return this.editor.commands.get("input")._batches.has(t)}}class Cl extends rl{constructor(t,e){super(t),this.direction=e,this._buffer=new pl(t.model,t.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(t={}){const e=this.editor.model,n=e.document;e.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const i=r.createSelection(t.selection||n.selection),o=i.isCollapsed;if(i.isCollapsed&&e.modifySelection(i,{direction:this.direction,unit:t.unit}),this._shouldEntireContentBeReplacedWithParagraph(t.sequence||1))return void this._replaceEntireContentWithParagraph(r);if(i.isCollapsed)return;let s=0;i.getFirstRange().getMinimalFlatRanges().forEach(t=>{s+=fn(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),e.deleteContent(i,{doNotResetEntireContent:o}),this._buffer.input(s),r.setSelection(i),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const e=this.editor.model,n=e.document.selection,r=e.schema.getLimitElement(n);if(!n.isCollapsed||!n.containsEntireContent(r))return!1;if(!e.schema.checkChild(r,"paragraph"))return!1;const i=r.getChild(0);return!i||"paragraph"!==i.name}_replaceEntireContentWithParagraph(t){const e=this.editor.model,n=e.schema.getLimitElement(e.document.selection),r=t.createElement("paragraph");t.remove(t.createRangeIn(n)),t.insert(r,n),t.setSelection(r,0)}}class El extends _r{constructor(t){super(t);const e=t.document;let n=0;function r(t,n,r){let i;e.once("delete",t=>i=t,{priority:Number.POSITIVE_INFINITY}),e.fire("delete",new Br(e,n,r)),i&&i.stop.called&&t.stop()}e.on("keyup",(t,e)=>{e.keyCode!=An.delete&&e.keyCode!=An.backspace||(n=0)}),e.on("keydown",(t,e)=>{const i={};if(e.keyCode==An.delete)i.direction="forward",i.unit="character";else{if(e.keyCode!=An.backspace)return;i.direction="backward",i.unit="codePoint"}i.unit=(Sn.isMac?e.altKey:e.ctrlKey)?"word":i.unit,i.sequence=++n,r(t,e.domEvent,i)}),Sn.isAndroid&&e.on("beforeinput",(e,n)=>{if("deleteContentBackward"!=n.domEvent.inputType)return;const i={unit:"codepoint",direction:"backward",sequence:1},o=n.domTarget.ownerDocument.defaultView.getSelection();o.anchorNode==o.focusNode&&o.anchorOffset+1!=o.focusOffset&&(i.selectionToRemove=t.domConverter.domSelectionToView(o)),r(e,n.domEvent,i)})}observe(){}}class Sl extends Xa{static get pluginName(){return"Delete"}init(){const t=this.editor,e=t.editing.view,n=e.document;if(e.addObserver(El),t.commands.add("forwardDelete",new Cl(t,"forward")),t.commands.add("delete",new Cl(t,"backward")),this.listenTo(n,"delete",(n,r)=>{const i={unit:r.unit,sequence:r.sequence};if(r.selectionToRemove){const e=t.model.createSelection(),n=[];for(const i of r.selectionToRemove.getRanges())n.push(t.editing.mapper.toModelRange(i));e.setTo(n),i.selection=e}t.execute("forward"==r.direction?"forwardDelete":"delete",i),r.preventDefault(),e.scrollToTheSelection()}),Sn.isAndroid){let t=null;this.listenTo(n,"delete",(e,n)=>{const r=n.domTarget.ownerDocument.defaultView.getSelection();t={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}},{priority:"lowest"}),this.listenTo(n,"keyup",(e,n)=>{if(t){const e=n.domTarget.ownerDocument.defaultView.getSelection();e.collapse(t.anchorNode,t.anchorOffset),e.extend(t.focusNode,t.focusOffset),t=null}})}}}class Tl extends Xa{static get requires(){return[kl,Sl]}static get pluginName(){return"Typing"}}class xl extends Ro{get type(){return"noop"}clone(){return new xl(this.baseVersion)}getReversed(){return new xl(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const Al=new Map;function Il(t,e,n){let r=Al.get(t);r||(r=new Map,Al.set(t,r)),r.set(e,n)}function Dl(t){return[t]}function Pl(t,e,n={}){const r=function(t,e){const n=Al.get(t);return n&&n.has(e)?n.get(e):Dl}(t.constructor,e.constructor);try{return r(t=t.clone(),e,n)}catch(t){throw t}}function Ol(t,e,n){t=t.slice(),e=e.slice();const r=new Nl(n.document,n.useRelations,n.forceWeakRemove);r.setOriginalOperations(t),r.setOriginalOperations(e);const i=r.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:i};const o=new WeakMap;for(const l of t)o.set(l,0);const s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;for(;a<t.length;){const n=t[a],i=o.get(n);if(i==e.length){a++;continue}const s=e[i],l=Pl(n,s,r.getContext(n,s,!0)),u=Pl(s,n,r.getContext(s,n,!1));r.updateRelation(n,s),r.setOriginalOperations(l,n),r.setOriginalOperations(u,s);for(const t of l)o.set(t,i+u.length);t.splice(a,1,...l),e.splice(i,1,...u)}if(n.padWithNoOps){const n=t.length-s.originalOperationsACount,r=e.length-s.originalOperationsBCount;Ml(t,r-n),Ml(e,n-r)}return Rl(t,s.nextBaseVersionB),Rl(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:i}}class Nl{constructor(t,e,n=!1){this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const r of t)this.originalOperations.set(r,n||r)}updateRelation(t,e){switch(t.constructor){case Wo:switch(e.constructor){case Yo:t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter");break;case Wo:t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter")}break;case Xo:switch(e.constructor){case Yo:t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");break;case Wo:(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))&&this._setRelation(t,e,"splitBefore")}break;case Yo:switch(e.constructor){case Yo:t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement");break;case Xo:t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource")}break;case Go:{const n=t.newRange;if(!n)return;switch(e.constructor){case Wo:{const r=Pi._createFromPositionAndShift(e.sourcePosition,e.howMany),i=r.containsPosition(n.start)||r.start.isEqual(n.start),o=r.containsPosition(n.end)||r.end.isEqual(n.end);!i&&!o||r.containsRange(n)||this._setRelation(t,e,{side:i?"left":"right",path:i?n.start.path.slice():n.end.path.slice()});break}case Yo:{const r=n.start.isEqual(e.targetPosition),i=n.start.isEqual(e.deletionPosition),o=n.end.isEqual(e.deletionPosition),s=n.end.isEqual(e.sourcePosition);(r||i||o||s)&&this._setRelation(t,e,{wasInLeftElement:r,wasStartBeforeMergedElement:i,wasEndBeforeMergedElement:o,wasInRightElement:s});break}}break}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),r=this._history.getUndoneOperation(n);if(!r)return null;const i=this.originalOperations.get(t),o=this._relations.get(i);return o&&o.get(r)||null}_setRelation(t,e,n){const r=this.originalOperations.get(t),i=this.originalOperations.get(e);let o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(i,n)}}function Rl(t,e){for(const n of t)n.baseVersion=e++}function Ml(t,e){for(let n=0;n<e;n++)t.push(new xl(0))}function Ll(t,e,n){const r=t.nodes.getNode(0).getAttribute(e);if(r==n)return null;const i=new Pi(t.position,t.position.getShiftedBy(t.howMany));return new Ho(i,e,r,n,0)}function Fl(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function jl(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=new Wo(i.start,i.end.offset-i.start.offset,e,0);n.push(o);for(let e=r+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return n}Il(Ho,Ho,(t,e,n)=>{if(t.key===e.key){const r=t.range.getDifference(e.range).map(e=>new Ho(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&n.aIsStrong&&r.push(new Ho(i,e.key,e.newValue,t.newValue,0)),0==r.length?[new xl(0)]:r}return[t]}),Il(Ho,Jo,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const n=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new Ho(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const r=Ll(e,t.key,t.oldValue);r&&n.unshift(r)}return n}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),Il(Ho,Yo,(t,e)=>{const n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(Pi._createFromPositionAndShift(e.graveyardPosition,1));const r=t.range._getTransformedByMergeOperation(e);return r.isCollapsed||n.push(r),n.map(e=>new Ho(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Il(Ho,Wo,(t,e)=>(function(t,e){const n=Pi._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=null,i=[];n.containsRange(t,!0)?r=t:t.start.hasSameParentAs(n.start)?(i=t.getDifference(n),r=t.getIntersection(n)):i=[t];const o=[];for(let s of i){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);const t=e.getMovedRangeStart(),n=s.start.hasSameParentAs(t);s=s._getTransformedByInsertion(t,e.howMany,n),o.push(...s)}return r&&o.push(r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o})(t.range,e).map(e=>new Ho(e,t.key,t.oldValue,t.newValue,t.baseVersion))),Il(Ho,Xo,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const n=t.clone();return n.range=new Pi(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,n]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),Il(Jo,Ho,(t,e)=>{const n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const r=Ll(t,e.key,e.newValue);r&&n.push(r)}return n}),Il(Jo,Jo,(t,e,n)=>t.position.isEqual(e.position)&&n.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(e),[t])),Il(Jo,Wo,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Il(Jo,Xo,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),Il(Jo,Yo,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),Il(Go,Jo,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),Il(Go,Go,(t,e,n)=>{if(t.name==e.name){if(!n.aIsStrong)return[new xl(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),Il(Go,Yo,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),Il(Go,Wo,(t,e,n)=>{if(t.oldRange&&(t.oldRange=Pi._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(n.abRelation){const r=Pi._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if("left"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.start.path=n.abRelation.path,t.newRange.end=r.end,[t];if("right"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=r.start,t.newRange.end.path=n.abRelation.path,[t]}t.newRange=Pi._createFromRanges(t.newRange._getTransformedByMoveOperation(e))}return[t]}),Il(Go,Xo,(t,e,n)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){const r=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?t.newRange.start=Di._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!n.abRelation.wasInLeftElement&&(t.newRange.start=Di._createAt(e.moveTargetPosition)),t.newRange.end=t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasInRightElement?Di._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?Di._createAt(e.insertionPosition):r.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),Il(Yo,Jo,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),Il(Yo,Yo,(t,e,n)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(n.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),t.sourcePosition=new Di(e.graveyardPosition.root,n),t.howMany=0,[t]}return[new xl(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){const r="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!r||(!r||i)&&n.aIsStrong){const n=e.targetPosition._getTransformedByMergeOperation(e),r=t.targetPosition._getTransformedByMergeOperation(e);return[new Wo(n,t.howMany,r,0)]}return[new xl(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&n.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Il(Yo,Wo,(t,e,n)=>{const r=Pi._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!n.bWasUndone&&!n.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.sourcePosition)?[new xl(0)]:(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),Il(Yo,Xo,(t,e,n)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){const r=0!=e.howMany,i=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(r||i||"mergeTargetNotMoved"==n.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t]}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==n.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),Il(Wo,Jo,(t,e)=>{const n=Pi._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=n.start,t.howMany=n.end.offset-n.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),Il(Wo,Wo,(t,e,n)=>{const r=Pi._createFromPositionAndShift(t.sourcePosition,t.howMany),i=Pi._createFromPositionAndShift(e.sourcePosition,e.howMany);let o,s=n.aIsStrong,a=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?a=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(a=!1),o=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Fl(t,e)&&Fl(e,t))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),jl([r],o);if(i.containsPosition(t.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),jl([r],o);const l=xe(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),jl([r],o);"remove"!=t.type||"remove"==e.type||n.aWasUndone||n.forceWeakRemove?"remove"==t.type||"remove"!=e.type||n.bWasUndone||n.forceWeakRemove||(s=!1):s=!0;const u=[],c=r.getDifference(i);for(const d of c){d.start=d.start._getTransformedByDeletion(e.sourcePosition,e.howMany),d.end=d.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const t="same"==xe(d.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=d._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,t);u.push(...n)}const h=r.getIntersection(i);return null!==h&&s&&(h.start=h.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.end=h.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===u.length?u.push(h):1==u.length?i.start.isBefore(r.start)||i.start.isEqual(r.start)?u.unshift(h):u.push(h):u.splice(1,0,h)),0===u.length?[new xl(t.baseVersion)]:jl(u,o)}),Il(Wo,Xo,(t,e,n)=>{let r=t.targetPosition.clone();t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(r=t.targetPosition._getTransformedBySplitOperation(e));const i=Pi._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=r,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new Pi(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),jl([new Pi(i.start,e.splitPosition),t],r)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==n.abRelation&&(r=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==n.abRelation&&(r=t.targetPosition);const o=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const r=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&r&&!n.aWasUndone&&o.push(Pi._createFromPositionAndShift(e.insertionPosition,1))}return jl(o,r)}),Il(Wo,Yo,(t,e,n)=>{const r=Pi._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition))if("remove"!=t.type||n.forceWeakRemove){if(1==t.howMany)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new xl(0)]}else if(!n.aWasUndone){const n=[];let r=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(n.push(new Wo(t.sourcePosition,t.howMany-1,t.targetPosition,0)),r=r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),s=new Wo(r,1,o,0),a=s.getMovedRangeStart().path.slice();a.push(0);const l=new Di(s.targetPosition.root,a);i=i._getTransformedByMove(r,o,1);const u=new Wo(i,e.howMany,l,0);return n.push(s),n.push(u),n}const i=Pi._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),Il(Qo,Jo,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),Il(Qo,Yo,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),Il(Qo,Wo,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Il(Qo,Qo,(t,e,n)=>{if(t.position.isEqual(e.position)){if(!n.aIsStrong)return[new xl(0)];t.oldName=e.newName}return[t]}),Il(Qo,Xo,(t,e)=>"same"!=xe(t.position.path,e.splitPosition.getParentPath())||e.graveyardPosition?(t.position=t.position._getTransformedBySplitOperation(e),[t]):[t,new Qo(t.position.getShiftedBy(1),t.oldName,t.newName,0)]),Il(Ko,Ko,(t,e,n)=>{if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new xl(0)];t.oldValue=e.newValue}return[t]}),Il(Xo,Jo,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=Xo.getInsertionPosition(t.splitPosition),[t])),Il(Xo,Yo,(t,e,n)=>{if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const r=new Di(e.graveyardPosition.root,n),i=Xo.getInsertionPosition(new Di(e.graveyardPosition.root,n)),o=new Xo(r,0,null,0);return o.insertionPosition=i,t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Xo.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Xo.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Il(Xo,Wo,(t,e,n)=>{const r=Pi._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=r.start.isEqual(t.graveyardPosition)||r.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&i){const n=t.splitPosition._getTransformedByMoveOperation(e),r=t.graveyardPosition._getTransformedByMoveOperation(e),i=r.path.slice();i.push(0);const o=new Di(r.root,i);return[new Wo(n,t.howMany,o,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}return t.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.splitPosition)?(t.howMany-=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Xo.getInsertionPosition(t.splitPosition),[t]):!t.splitPosition.isEqual(e.targetPosition)||"insertAtSource"!=n.baRelation&&"splitBefore"!=n.abRelation?(e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.insertionPosition=t.graveyardPosition?t.insertionPosition._getTransformedByMoveOperation(e):Xo.getInsertionPosition(t.splitPosition),[t]):(t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Xo.getInsertionPosition(t.splitPosition),[t])}),Il(Xo,Xo,(t,e,n)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new xl(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new xl(0)];if("splitBefore"==n.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const r="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName;if(i&&!r||(!r||i)&&n.aIsStrong){const n=[];return e.howMany&&n.push(new Wo(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&n.push(new Wo(t.splitPosition,t.howMany,t.moveTargetPosition,0)),n}return[new xl(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.baRelation){const n=e.insertionPosition.path.slice();n.push(0);const r=new Di(e.insertionPosition.root,n);return[t,new Wo(t.insertionPosition,1,r,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Xo.getInsertionPosition(t.splitPosition),[t]});class Bl extends rl{constructor(t){super(t),this._stack=[],this._createdBatches=new WeakSet,this.refresh()}refresh(){this.isEnabled=this._stack.length>0}addBatch(t){const e=this.editor.model.document.selection,n={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,e,n){const r=this.editor.model,i=r.document,o=[];for(const s of t){const t=Vl(s,n).find(t=>t.start.root!=i.graveyard);t&&o.push(t)}o.length&&r.change(t=>{t.setSelection(o,{backward:e})})}_undo(t,e){const n=this.editor.model,r=n.document;this._createdBatches.add(e);const i=t.operations.slice().filter(t=>t.isDocumentOperation);i.reverse();for(const o of i){const t=Array.from(r.history.getOperations(o.baseVersion+1)),i=Ol([o.getReversed()],t,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const s of i)e.addOperation(s),n.applyOperation(s),r.history.setOperationAsUndone(o,s)}}}function Vl(t,e){const n=t.getTransformedByOperations(e);n.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let r=1;r<n.length;r++){const t=n[r-1],e=n[r];t.end.isTouching(e.start)&&(t.end=e.end,n.splice(r,1),r--)}return n}class Ul extends Bl{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],r=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(r,()=>{this._undo(n.batch,r);const t=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,t),this.fire("revert",n.batch,r)}),this.refresh()}}class zl extends Bl{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(e,()=>{const n=this.editor.model.document.history.getOperations(t.batch.operations[t.batch.operations.length-1].baseVersion+1);this._restoreSelection(t.selection.ranges,t.selection.isBackward,n),this._undo(t.batch,e)}),this.refresh()}}class ql extends Xa{static get pluginName(){return"UndoEditing"}constructor(t){super(t),this._batchRegistry=new WeakSet}init(){const t=this.editor;this._undoCommand=new Ul(t),this._redoCommand=new zl(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(t,e)=>{const n=e[0];if(!n.isDocumentOperation)return;const r=n.batch,i=this._redoCommand._createdBatches.has(r),o=this._undoCommand._createdBatches.has(r);this._batchRegistry.has(r)||"transparent"==r.type&&!i&&!o||(i?this._undoCommand.addBatch(r):o||(this._undoCommand.addBatch(r),this._redoCommand.clearStack()),this._batchRegistry.add(r))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,e,n)=>{this._redoCommand.addBatch(n)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}}var Hl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',$l='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class Wl extends Xa{init(){const t=this.editor,e=t.locale,n=t.t,r="ltr"==e.uiLanguageDirection?Hl:$l,i="ltr"==e.uiLanguageDirection?$l:Hl;this._addButton("undo",n("bj"),"CTRL+Z",r),this._addButton("redo",n("bk"),"CTRL+Y",i)}_addButton(t,e,n,r){const i=this.editor;i.ui.componentFactory.add(t,o=>{const s=i.commands.get(t),a=new Ma(o);return a.set({label:e,icon:r,keystroke:n,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",()=>i.execute(t)),a})}}class Jl extends Xa{static get requires(){return[ql,Wl]}static get pluginName(){return"Undo"}}class Gl extends Xa{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new mn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if("string"!=typeof t)throw new de.b("pendingactions-add-invalid-message: The message must be a string.",this);const e=Object.create(Xe);return e.set("message",t),this._actions.add(e),this.hasAny=!0,e}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}class Ql{constructor(){const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const e=this._reader;return this.total=t.size,new Promise((n,r)=>{e.onload=()=>{const t=e.result;this._data=t,n(t)},e.onerror=()=>{r("error")},e.onabort=()=>{r("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}}Te(Ql,Xe);class Kl extends Xa{static get pluginName(){return"FileRepository"}static get requires(){return[Gl]}init(){this.loaders=new mn,this.loaders.on("add",()=>this._updatePendingAction()),this.loaders.on("remove",()=>this._updatePendingAction()),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return console.warn(Object(de.a)("filerepository-no-upload-adapter: Upload adapter is not defined.")),null;const e=new Yl(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then(t=>{this._loadersMap.set(t,e)}).catch(()=>{}),e.on("change:uploaded",()=>{let t=0;for(const e of this.loaders)t+=e.uploaded;this.uploaded=t}),e.on("change:uploadTotal",()=>{let t=0;for(const e of this.loaders)e.uploadTotal&&(t+=e.uploadTotal);this.uploadTotal=t}),e}destroyLoader(t){const e=t instanceof Yl?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach((t,n)=>{t===e&&this._loadersMap.delete(n)})}_updatePendingAction(){const t=this.editor.plugins.get(Gl);if(this.loaders.length){if(!this._pendingAction){const e=this.editor.t,n=t=>`${e("ay")} ${parseInt(t)}%.`;this._pendingAction=t.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else t.remove(this._pendingAction),this._pendingAction=null}}Te(Kl,Xe);class Yl{constructor(t,e){this.id=ge(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new Ql,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new de.b("filerepository-read-wrong-status: You cannot call read if the status is different than idle.",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if("reading"!==this.status)throw this.status;return this.status="idle",t}).catch(t=>{if("aborted"===t)throw this.status="aborted","aborted";throw this.status="error",this._reader.error?this._reader.error:t})}upload(){if("idle"!=this.status)throw new de.b("filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{if("aborted"===this.status)throw"aborted";throw this.status="error",t})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==t?this._reader.abort():"uploading"==t&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const e={};return e.promise=new Promise((n,r)=>{e.rejecter=r,e.isFulfilled=!1,t.then(t=>{e.isFulfilled=!0,n(t)}).catch(t=>{e.isFulfilled=!0,r(t)})}),e}}Te(Yl,Xe);const Xl="ckCsrfToken",Zl=40,tu="abcdefghijklmnopqrstuvwxyz0123456789";class eu extends Xa{static get requires(){return[Kl]}static get pluginName(){return"CKFinderUploadAdapter"}init(){const t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(Kl).createUploadAdapter=e=>new nu(e,t,this.editor.t))}}class nu{constructor(t,e,n){this.loader=t,this.url=e,this.t=n}upload(){return this.loader.file.then(t=>new Promise((e,n)=>{this._initRequest(),this._initListeners(e,n,t),this._sendRequest(t)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const t=this.xhr=new XMLHttpRequest;t.open("POST",this.url,!0),t.responseType="json"}_initListeners(t,e,n){const r=this.xhr,i=this.loader,o=(0,this.t)("a")+` ${n.name}.`;r.addEventListener("error",()=>e(o)),r.addEventListener("abort",()=>e()),r.addEventListener("load",()=>{const n=r.response;if(!n||!n.uploaded)return e(n&&n.error&&n.error.message?n.error.message:o);t({default:n.url})}),r.upload&&r.upload.addEventListener("progress",t=>{t.lengthComputable&&(i.uploadTotal=t.total,i.uploaded=t.loaded)})}_sendRequest(t){const e=new FormData;e.append("upload",t),e.append("ckCsrfToken",function(){let t=function(t){t=t.toLowerCase();const e=document.cookie.split(";");for(const n of e){const e=n.split("=");if(decodeURIComponent(e[0].trim().toLowerCase())===t)return decodeURIComponent(e[1])}return null}(Xl);return t&&t.length==Zl||function(t,e){document.cookie=encodeURIComponent(Xl)+"="+encodeURIComponent(e)+";path=/"}(0,t=function(t){let e="";const n=new Uint8Array(Zl);window.crypto.getRandomValues(n);for(let r=0;r<n.length;r++){const t=tu.charAt(n[r]%tu.length);e+=Math.random()>.5?t.toUpperCase():t}return e}()),t}()),this.xhr.send(e)}}class ru{static get pluginName(){return"BlockAutoformatEditing"}constructor(t,e,n){let r,i=null;"function"==typeof n?r=n:(i=t.commands.get(n),r=()=>{t.execute(n)}),t.model.document.on("change",(n,o)=>{if(i&&!i.isEnabled)return;if("transparent"==o.type)return;const s=Array.from(t.model.document.differ.getChanges()),a=s[0];if(1!=s.length||"insert"!==a.type||"$text"!=a.name||1!=a.length)return;const l=a.position.textNode||a.position.nodeAfter;if(!l.parent.is("paragraph"))return;const u=e.exec(l.data);u&&t.model.enqueueChange(t=>{const e=t.createPositionAt(l.parent,0),n=t.createPositionAt(l.parent,u[0].length),i=new zi(e,n);!1!==r({match:u})&&t.remove(i),i.detach()})})}}class iu{static get pluginName(){return"InlineAutoformatEditing"}constructor(t,e,n){let r,i,o,s;e instanceof RegExp?r=e:o=e,"string"==typeof n?i=n:s=n,o=o||(t=>{let e;const n=[],i=[];for(;null!==(e=r.exec(t))&&!(e&&e.length<4);){let{index:t,1:r,2:o,3:s}=e;const a=[t+=e[0].length-(r+o+s).length,t+r.length],l=[t+r.length+o.length,t+r.length+o.length+s.length];n.push(a),n.push(l),i.push([t+r.length,t+r.length+o.length])}return{remove:n,format:i}}),s=s||((e,n)=>{const r=t.model.schema.getValidRanges(n,i);for(const t of r)e.setAttribute(i,!0,t);e.removeSelectionAttribute(i)}),t.model.document.on("change",(e,n)=>{if("transparent"==n.type)return;const r=t.model,i=r.document.selection;if(!i.isCollapsed)return;const a=Array.from(r.document.differ.getChanges()),l=a[0];if(1!=a.length||"insert"!==l.type||"$text"!=l.name||1!=l.length)return;const u=i.focus,c=u.parent,{text:h,range:d}=function(t,e){let n=t.start;return{text:Array.from(t.getItems()).reduce((t,r)=>r.is("text")||r.is("textProxy")?t+r.data:(n=e.createPositionAfter(r),""),""),range:e.createRange(n,t.end)}}(r.createRange(r.createPositionAt(c,0),u),r),f=o(h),p=ou(d.start,f.format,r),g=ou(d.start,f.remove,r);p.length&&g.length&&r.enqueueChange(t=>{if(!1!==s(t,p))for(const e of g.reverse())t.remove(e)})})}}function ou(t,e,n){return e.filter(t=>void 0!==t[0]&&void 0!==t[1]).map(e=>n.createRange(t.getShiftedBy(e[0]),t.getShiftedBy(e[1])))}function su(t,e){return(n,r)=>{if(!t.commands.get(e).isEnabled)return!1;const i=t.model.schema.getValidRanges(r,e);for(const t of i)n.setAttribute(e,!0,t);n.removeSelectionAttribute(e)}}class au extends rl{constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,r=void 0===t.forceValue?!this.value:t.forceValue;e.change(t=>{if(n.isCollapsed)r?t.setSelectionAttribute(this.attributeKey,!0):t.removeSelectionAttribute(this.attributeKey);else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i)r?t.setAttribute(this.attributeKey,r,e):t.removeAttribute(this.attributeKey,e)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const r of n.getRanges())for(const t of r.getItems())if(e.checkAttribute(t,this.attributeKey))return t.hasAttribute(this.attributeKey);return!1}}const lu="bold";class uu extends Xa{static get pluginName(){return"BoldEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:lu}),t.model.schema.setAttributeProperties(lu,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:lu,view:"strong",upcastAlso:["b",t=>{const e=t.getStyle("font-weight");return e?"bold"==e||Number(e)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),t.commands.add(lu,new au(t,lu)),t.keystrokes.set("CTRL+B",lu)}}var cu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>';const hu="bold";class du extends Xa{init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(hu,n=>{const r=t.commands.get(hu),i=new Ma(n);return i.set({label:e("d"),icon:cu,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",()=>t.execute(hu)),i})}}const fu="italic";class pu extends Xa{static get pluginName(){return"ItalicEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:fu}),t.model.schema.setAttributeProperties(fu,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:fu,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(fu,new au(t,fu)),t.keystrokes.set("CTRL+I",fu)}}var gu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const mu="italic";class bu extends Xa{init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(mu,n=>{const r=t.commands.get(mu),i=new Ma(n);return i.set({label:e("al"),icon:gu,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",()=>t.execute(mu)),i})}}function vu(t){const e=t.next();return e.done?null:e.value}class yu extends rl{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.schema,r=Array.from(e.document.selection.getSelectedBlocks()),i=void 0===t.forceValue?!this.value:t.forceValue;e.change(t=>{if(i){const e=r.filter(t=>wu(t)||ku(n,t));this._applyQuote(t,e)}else this._removeQuote(t,r.filter(wu))})}_getValue(){const t=vu(this.editor.model.document.selection.getSelectedBlocks());return!(!t||!wu(t))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.schema,e=vu(this.editor.model.document.selection.getSelectedBlocks());return!!e&&ku(t,e)}_removeQuote(t,e){_u(t,e).reverse().forEach(e=>{if(e.start.isAtStart&&e.end.isAtEnd)return void t.unwrap(e.start.parent);if(e.start.isAtStart){const n=t.createPositionBefore(e.start.parent);return void t.move(e,n)}e.end.isAtEnd||t.split(e.end);const n=t.createPositionAfter(e.end.parent);t.move(e,n)})}_applyQuote(t,e){const n=[];_u(t,e).reverse().forEach(e=>{let r=wu(e.start);r||(r=t.createElement("blockQuote"),t.wrap(e,r)),n.push(r)}),n.reverse().reduce((e,n)=>e.nextSibling==n?(t.merge(t.createPositionAfter(e)),e):n)}}function wu(t){return"blockQuote"==t.parent.name?t.parent:null}function _u(t,e){let n,r=0;const i=[];for(;r<e.length;){const o=e[r],s=e[r+1];n||(n=t.createPositionBefore(o)),s&&o.nextSibling==s||(i.push(t.createRange(n,t.createPositionAfter(o))),n=null),r++}return i}function ku(t,e){const n=t.checkChild(e.parent,"blockQuote"),r=t.checkChild(["$root","blockQuote"],e);return n&&r}class Cu extends Xa{static get pluginName(){return"BlockQuoteEditing"}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new yu(t)),e.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.addChildCheck((t,e)=>{if(t.endsWith("blockQuote")&&"blockQuote"==e.name)return!1}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(n=>{const r=t.model.document.differ.getChanges();for(const t of r)if("insert"==t.type){const r=t.position.nodeAfter;if(!r)continue;if(r.is("blockQuote")&&r.isEmpty)return n.remove(r),!0;if(r.is("blockQuote")&&!e.checkChild(t.position,r))return n.unwrap(r),!0;if(r.is("element")){const t=n.createRangeIn(r);for(const r of t.getItems())if(r.is("blockQuote")&&!e.checkChild(n.createPositionBefore(r),r))return n.unwrap(r),!0}}else if("remove"==t.type){const e=t.position.parent;if(e.is("blockQuote")&&e.isEmpty)return n.remove(e),!0}return!1})}afterInit(){const t=this.editor.commands.get("blockQuote");this.listenTo(this.editor.editing.view.document,"enter",(e,n)=>{const r=this.editor.model.document,i=r.selection.getLastPosition().parent;r.selection.isCollapsed&&i.isEmpty&&t.value&&(this.editor.execute("blockQuote"),this.editor.editing.view.scrollToTheSelection(),n.preventDefault(),e.stop())})}}var Eu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>';n(44);class Su extends Xa{init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("blockQuote",n=>{const r=t.commands.get("blockQuote"),i=new Ma(n);return i.set({label:e("n"),icon:Eu,tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",()=>t.execute("blockQuote")),i})}}var Tu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>';class xu extends Xa{static get pluginName(){return"CKFinderUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("ckfinder",n=>{const r=t.commands.get("ckfinder"),i=new Ma(n);return i.set({label:e("e"),icon:Tu,tooltip:!0}),i.bind("isEnabled").to(r),i.on("execute",()=>{t.execute("ckfinder"),t.editing.view.focus()}),i})}}class Au extends _r{constructor(t){super(t),this._observedElements=new Set}observe(t,e){this.document.getRoot(e).on("change:children",(e,n)=>{this.view.once("render",()=>this._updateObservedElements(t,n))})}_updateObservedElements(t,e){if(!e.is("element")||e.is("attributeElement"))return;const n=this.view.domConverter.mapViewToDom(e);if(n){for(const t of n.querySelectorAll("img"))this._observedElements.has(t)||(this.listenTo(t,"load",(t,e)=>this._fireEvents(e)),this._observedElements.add(t));for(const e of this._observedElements)t.contains(e)||(this.stopListening(e),this._observedElements.delete(e))}}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}destroy(){this._observedElements.clear(),super.destroy()}}function Iu(t){return n=>{n.on(`attribute:${t}:image`,e)};function e(t,e,n){if(!n.consumable.consume(e.item,t.name))return;const r=n.writer,i=n.mapper.toViewElement(e.item).getChild(0);null!==e.attributeNewValue?r.setAttribute(e.attributeKey,e.attributeNewValue,i):r.removeAttribute(e.attributeKey,i)}}class Du{constructor(){this._stack=[]}add(t,e){const n=this._stack,r=n[0];this._insertDescriptor(t);const i=n[0];r===i||Pu(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:e})}remove(t,e){const n=this._stack,r=n[0];this._removeDescriptor(t);const i=n[0];r===i||Pu(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t.id);if(Pu(t,e[n]))return;n>-1&&e.splice(n,1);let r=0;for(;e[r]&&Ou(e[r],t);)r++;e.splice(r,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t);n>-1&&e.splice(n,1)}}function Pu(t,e){return t&&e&&t.priority==e.priority&&Nu(t.classes)==Nu(e.classes)}function Ou(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&Nu(t.classes)>Nu(e.classes)}function Nu(t){return Array.isArray(t)?t.sort().join(","):t}Te(Du,ye);var Ru='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const Mu="ck-widget",Lu="ck-widget_selected";function Fu(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}function ju(t,e,n={}){return Sn.isEdge||e.setAttribute("contenteditable","false",t),e.addClass(Mu,t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=zu,n.label&&function(t,e,n){n.setCustomProperty("widgetLabel",e,t)}(t,n.label,e),n.hasSelectionHandle&&function(t,e){const n=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(t){const e=this.toDomElement(t),n=new Na;return n.set("content",Ru),n.render(),e.appendChild(n.element),e});e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handle"],t)}(t,e),function(t,e,n,r){const i=new Du;i.on("change:top",(e,i)=>{i.oldDescriptor&&r(t,i.oldDescriptor,i.writer),i.newDescriptor&&n(t,i.newDescriptor,i.writer)}),e.setCustomProperty("addHighlight",(t,e,n)=>i.add(e,n),t),e.setCustomProperty("removeHighlight",(t,e,n)=>i.remove(e,n),t)}(t,e,(t,e,n)=>n.addClass(r(e.classes),t),(t,e,n)=>n.removeClass(r(e.classes),t)),t;function r(t){return Array.isArray(t)?t:[t]}}function Bu(t){const e=t.getCustomProperty("widgetLabel");return e?"function"==typeof e?e():e:""}function Vu(t,e){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),Sn.isEdge||(e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",(n,r,i)=>{e.setAttribute("contenteditable",i?"false":"true",t)})),t.on("change:isFocused",(n,r,i)=>{i?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t)}),t}function Uu(t,e){const n=t.getSelectedElement();if(n&&e.schema.isBlock(n))return e.createPositionAfter(n);const r=t.getSelectedBlocks().next().value;if(r){if(r.isEmpty)return e.createPositionAt(r,0);const n=e.createPositionAfter(r);return t.focus.isTouching(n)?n:e.createPositionBefore(r)}return t.focus}function zu(){return null}function qu(t){const e=t.getSelectedElement();return e&&function(t){return!!t.getCustomProperty("image")&&Fu(t)}(e)?e:null}function Hu(t){return!!t&&t.is("image")}function $u(t,e,n={}){const r=t.createElement("image",n),i=Uu(e.document.selection,e);e.insertContent(r,i),r.parent&&t.setSelection(r,"on")}function Wu(t){const e=t.schema,n=t.document.selection;return function(t,e,n){const r=function(t,e){const n=Uu(t,e).parent;return n.isEmpty&&!n.is("$root")?n.parent:n}(t,n);return e.checkChild(r,"image")}(n,e,t)&&!function(t,e){const n=t.getSelectedElement();return n&&e.isObject(n)}(n,e)&&[...n.focus.getAncestors()].every(t=>!t.is("image"))}class Ju extends rl{refresh(){this.isEnabled=Wu(this.editor.model)}execute(t){const e=this.editor.model;e.change(n=>{const r=Array.isArray(t.source)?t.source:[t.source];for(const t of r)$u(n,e,{src:t})})}}class Gu extends Xa{static get pluginName(){return"ImageEditing"}init(){const t=this.editor,e=t.model.schema,n=t.t,r=t.conversion;t.editing.view.addObserver(Au),e.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),r.for("dataDowncast").elementToElement({model:"image",view:(t,e)=>Qu(e)}),r.for("editingDowncast").elementToElement({model:"image",view:(t,e)=>(function(t,e,n){return e.setCustomProperty("image",!0,t),ju(t,e,{label:function(){const e=t.getChild(0).getAttribute("alt");return e?`${e} ${n}`:n}})})(Qu(e),e,n("m"))}),r.for("downcast").add(Iu("src")).add(Iu("alt")).add(function(){return e=>{e.on("attribute:srcset:image",t)};function t(t,e,n){if(!n.consumable.consume(e.item,t.name))return;const r=n.writer,i=n.mapper.toViewElement(e.item).getChild(0);if(null===e.attributeNewValue){const t=e.attributeOldValue;t.data&&(r.removeAttribute("srcset",i),r.removeAttribute("sizes",i),t.width&&r.removeAttribute("width",i))}else{const t=e.attributeNewValue;t.data&&(r.setAttribute("srcset",t.data,i),r.setAttribute("sizes","100vw",i),t.width&&r.setAttribute("width",t.width,i))}}}()),r.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:(t,e)=>e.createElement("image",{src:t.getAttribute("src")})}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:t=>{const e={data:t.getAttribute("srcset")};return t.hasAttribute("width")&&(e.width=t.getAttribute("width")),e}}}).add(function(){return e=>{e.on("element:figure",t)};function t(t,e,n){if(!n.consumable.test(e.viewItem,{name:!0,classes:"image"}))return;const r=Array.from(e.viewItem.getChildren()).find(t=>t.is("img"));if(!r||!r.hasAttribute("src")||!n.consumable.test(r,{name:!0}))return;const i=n.convertItem(r,e.modelCursor),o=vu(i.modelRange.getItems());o&&(n.convertChildren(e.viewItem,n.writer.createPositionAt(o,0)),e.modelRange=i.modelRange,e.modelCursor=i.modelCursor)}}()),t.commands.add("imageInsert",new Ju(t))}}function Qu(t){const e=t.createEmptyElement("img"),n=t.createContainerElement("figure",{class:"image"});return t.insert(t.createPositionAt(n,0),e),n}function Ku(t,e,n){return n.createRange(Yu(t,e,!0,n),Yu(t,e,!1,n))}function Yu(t,e,n,r){let i=t.textNode||(n?t.nodeBefore:t.nodeAfter),o=null;for(;i&&i.getAttribute("linkHref")==e;)o=i,i=n?i.previousSibling:i.nextSibling;return o?r.createPositionAt(o,n?"before":"after"):t}class Xu extends rl{constructor(t){super(t),this.manualDecorators=new mn}restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute("linkHref");for(const n of this.manualDecorators)n.value=this._getDecoratorStateFromModel(n.id);this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"linkHref")}execute(t,e={}){const n=this.editor.model,r=n.document.selection,i=[],o=[];for(const s in e)e[s]?i.push(s):o.push(s);n.change(e=>{if(r.isCollapsed){const s=r.getFirstPosition();if(r.hasAttribute("linkHref")){const a=Ku(s,r.getAttribute("linkHref"),n);e.setAttribute("linkHref",t,a),i.forEach(t=>{e.setAttribute(t,!0,a)}),o.forEach(t=>{e.removeAttribute(t,a)}),e.setSelection(a)}else if(""!==t){const o=_i(r.getAttributes());o.set("linkHref",t),i.forEach(t=>{o.set(t,!0)});const a=e.createText(t,o);n.insertContent(a,s),e.setSelection(e.createRangeOn(a))}}else{const s=n.schema.getValidRanges(r.getRanges(),"linkHref");for(const n of s)e.setAttribute("linkHref",t,n),i.forEach(t=>{e.setAttribute(t,!0,n)}),o.forEach(t=>{e.removeAttribute(t,n)})}})}_getDecoratorStateFromModel(t){return this.editor.model.document.selection.getAttribute(t)||!1}}class Zu extends rl{refresh(){this.isEnabled=this.editor.model.document.selection.hasAttribute("linkHref")}execute(){const t=this.editor.model,e=t.document.selection,n=this.editor.commands.get("link");t.change(r=>{const i=e.isCollapsed?[Ku(e.getFirstPosition(),e.getAttribute("linkHref"),t)]:e.getRanges();for(const t of i)if(r.removeAttribute("linkHref",t),n)for(const e of n.manualDecorators)r.removeAttribute(e.id,t)})}}var tc=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ec=function(t){return tc.test(t)},nc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rc="\\ud83c[\\udffb-\\udfff]",ic="[^\\ud800-\\udfff]",oc="(?:\\ud83c[\\udde6-\\uddff]){2}",sc="[\\ud800-\\udbff][\\udc00-\\udfff]",ac="(?:"+nc+"|"+rc+")?",lc="[\\ufe0e\\ufe0f]?"+ac+"(?:\\u200d(?:"+[ic,oc,sc].join("|")+")[\\ufe0e\\ufe0f]?"+ac+")*",uc="(?:"+[ic+nc+"?",nc,oc,sc,"[\\ud800-\\udfff]"].join("|")+")",cc=RegExp(rc+"(?="+rc+")|"+uc+lc,"g"),hc=i?i.prototype:void 0,dc=hc?hc.toString:void 0,fc=function(t){t=null==t?"":function t(e){if("string"==typeof e)return e;if(it(e))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(e,t)+"";if(qr(e))return dc?dc.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}(t);var e=ec(t)?function(t){return ec(t)?function(t){return t.match(cc)||[]}(t):function(t){return t.split("")}(t)}(t):void 0,n=e?e[0]:t.charAt(0),r=e?function(t,e,n){var r=t.length;return function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}(t,1,n=void 0===n?r:n)}(e).join(""):t.slice(1);return n.toUpperCase()+r};const pc=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,gc=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;function mc(t,e){const n=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,n),n}function bc(t){return function(t){return t.replace(pc,"").match(gc)}(t=String(t))?t:"#"}class vc{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(t=>this._definitions.add(t)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(t,e,n)=>{if(!n.consumable.test(e.item,"attribute:linkHref"))return;const r=n.writer,i=r.document.selection;for(const o of this._definitions){const t=r.createAttributeElement("a",o.attributes,{priority:5});r.setCustomProperty("link",!0,t),o.callback(e.attributeNewValue)?e.item.is("selection")?r.wrap(i.getFirstRange(),t):r.wrap(n.mapper.toViewRange(e.range),t):r.unwrap(n.mapper.toViewRange(e.range),t)}},{priority:"high"})}}}class yc{constructor({id:t,label:e,attributes:n}){this.id=t,this.set("value"),this.label=e,this.attributes=n}}Te(yc,Xe);class wc{constructor(t,e,n){this.model=t,this.attribute=n,this._modelSelection=t.document.selection,this._overrideUid=null,this._isNextGravityRestorationSkipped=!1,e.listenTo(this._modelSelection,"change:range",(t,e)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!e.directChange&&_c(this._modelSelection.getFirstPosition(),n)||this._restoreGravity())})}handleForwardMovement(t,e){const n=this.attribute;if(!(this._isGravityOverridden||t.isAtStart&&this._hasSelectionAttribute))return Ec(t,n)&&this._hasSelectionAttribute?(this._preventCaretMovement(e),this._removeSelectionAttribute(),!0):kc(t,n)?(this._preventCaretMovement(e),this._overrideGravity(),!0):Cc(t,n)&&this._hasSelectionAttribute?(this._preventCaretMovement(e),this._overrideGravity(),!0):void 0}handleBackwardMovement(t,e){const n=this.attribute;return this._isGravityOverridden?Ec(t,n)&&this._hasSelectionAttribute?(this._preventCaretMovement(e),this._restoreGravity(),this._removeSelectionAttribute(),!0):(this._preventCaretMovement(e),this._restoreGravity(),t.isAtStart&&this._removeSelectionAttribute(),!0):Ec(t,n)&&!this._hasSelectionAttribute?(this._preventCaretMovement(e),this._setSelectionAttributeFromTheNodeBefore(t),!0):t.isAtEnd&&Cc(t,n)?this._hasSelectionAttribute?void(Sc(t,n)&&(this._skipNextAutomaticGravityRestoration(),this._overrideGravity())):(this._preventCaretMovement(e),this._setSelectionAttributeFromTheNodeBefore(t),!0):t.isAtStart?this._hasSelectionAttribute?(this._removeSelectionAttribute(),this._preventCaretMovement(e),!0):void 0:void(Sc(t,n)&&(this._skipNextAutomaticGravityRestoration(),this._overrideGravity()))}get _isGravityOverridden(){return!!this._overrideUid}get _hasSelectionAttribute(){return this._modelSelection.hasAttribute(this.attribute)}_overrideGravity(){this._overrideUid=this.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.model.change(t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}_preventCaretMovement(t){t.preventDefault()}_removeSelectionAttribute(){this.model.change(t=>{t.removeSelectionAttribute(this.attribute)})}_setSelectionAttributeFromTheNodeBefore(t){const e=this.attribute;this.model.change(n=>{n.setSelectionAttribute(this.attribute,t.nodeBefore.getAttribute(e))})}_skipNextAutomaticGravityRestoration(){this._isNextGravityRestorationSkipped=!0}}function _c(t,e){return kc(t,e)||Cc(t,e)}function kc(t,e){const{nodeBefore:n,nodeAfter:r}=t,i=!!n&&n.hasAttribute(e);return!!r&&r.hasAttribute(e)&&(!i||n.getAttribute(e)!==r.getAttribute(e))}function Cc(t,e){const{nodeBefore:n,nodeAfter:r}=t,i=!!n&&n.hasAttribute(e),o=!!r&&r.hasAttribute(e);return i&&(!o||n.getAttribute(e)!==r.getAttribute(e))}function Ec(t,e){const{nodeBefore:n,nodeAfter:r}=t,i=!!n&&n.hasAttribute(e);if(r&&r.hasAttribute(e)&&i)return r.getAttribute(e)!==n.getAttribute(e)}function Sc(t,e){return _c(t.getShiftedBy(-1),e)}n(46);const Tc="ck-link_selected",xc="automatic",Ac="manual",Ic=/^(https?:)?\/\//;class Dc extends Xa{static get pluginName(){return"LinkEditing"}constructor(t){super(t),t.config.define("link",{addTargetToExternalLinks:!1})}init(){const t=this.editor,e=t.locale;t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:mc}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(t,e)=>mc(bc(t),e)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:t=>t.getAttribute("href")}}),t.commands.add("link",new Xu(t)),t.commands.add("unlink",new Zu(t));const n=function(t,e){const n={"Open in a new tab":t("az"),Downloadable:t("ba")};return e.forEach(t=>(t.label&&n[t.label]&&(t.label=n[t.label]),t)),e}(t.t,function(t){const e=[];if(t)for(const[n,r]of Object.entries(t)){const t=Object.assign({},r,{id:`link${fc(n)}`});e.push(t)}return e}(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(t=>t.mode===xc)),this._enableManualDecorators(n.filter(t=>t.mode===Ac)),function({view:t,model:e,emitter:n,attribute:r,locale:i}){const o=new wc(e,n,r),s=e.document.selection;n.listenTo(t.document,"keydown",(t,e)=>{if(!s.isCollapsed)return;if(e.shiftKey||e.altKey||e.ctrlKey)return;const n=e.keyCode==An.arrowright,r=e.keyCode==An.arrowleft;if(!n&&!r)return;const a=s.getFirstPosition(),l=i.contentLanguageDirection;let u;(u="ltr"===l&&n||"rtl"===l&&r?o.handleForwardMovement(a,e):o.handleBackwardMovement(a,e))&&t.stop()},{priority:me.get("high")+1})}({view:t.editing.view,model:t.model,emitter:this,attribute:"linkHref",locale:e}),this._setupLinkHighlight()}_enableAutomaticDecorators(t){const e=this.editor,n=new vc;e.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:xc,callback:t=>Ic.test(t),attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(t),n.length&&e.conversion.for("downcast").add(n.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,n=e.commands.get("link").manualDecorators;t.forEach(t=>{e.model.schema.extend("$text",{allowAttributes:t.id}),n.add(new yc(t)),e.conversion.for("downcast").attributeToElement({model:t.id,view:(e,r)=>{if(e){const e=n.get(t.id).attributes,i=r.createAttributeElement("a",e,{priority:5});return r.setCustomProperty("link",!0,i),i}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:n.get(t.id).attributes},model:{key:t.id}})})}_setupLinkHighlight(){const t=this.editor,e=t.editing.view,n=new Set;e.document.registerPostFixer(e=>{const r=t.model.document.selection;let i=!1;if(r.hasAttribute("linkHref")){const o=Ku(r.getFirstPosition(),r.getAttribute("linkHref"),t.model),s=t.editing.mapper.toViewRange(o);for(const t of s.getItems())t.is("a")&&!t.hasClass(Tc)&&(e.addClass(Tc,t),n.add(t),i=!0)}return i}),t.conversion.for("editingDowncast").add(t=>{function r(){e.change(t=>{for(const e of n.values())t.removeClass(Tc,e),n.delete(e)})}t.on("insert",r,{priority:"highest"}),t.on("remove",r,{priority:"highest"}),t.on("attribute",r,{priority:"highest"}),t.on("selection",r,{priority:"highest"})})}}class Pc extends Xa{static get pluginName(){return"Notification"}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){this.fire(`show:${t.type}`+(t.namespace?`:${t.namespace}`:""),{message:t.message,type:t.type,title:t.title||""})}}class Oc extends rl{constructor(t){super(t),this.stopListening(this.editor.model.document,"change"),this.listenTo(this.editor.model.document,"change",()=>this.refresh(),{priority:"low"})}refresh(){const t=this.editor.commands.get("imageInsert"),e=this.editor.commands.get("link");this.isEnabled=t.isEnabled||e.isEnabled}execute(){const t=this.editor,e=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=e&&"modal"!=e)throw new de.b('ckfinder-unknown-openerMethod: The openerMethod config option must by "popup" or "modal".',t);const n=this.editor.config.get("ckfinder.options")||{};n.chooseFiles=!0;const r=n.onInit;n.language||(n.language=t.locale.uiLanguage),n.onInit=e=>{r&&r(e),e.on("files:choose",n=>{const r=n.data.files.toArray(),i=r.filter(t=>!t.isImage()),o=r.filter(t=>t.isImage());for(const e of i)t.execute("link",e.getUrl());const s=[];for(const t of o){const n=t.getUrl();s.push(n||e.request("file:getProxyUrl",{file:t}))}s.length&&Nc(t,s)}),e.on("file:choose:resizedImage",e=>{const n=e.data.resizedUrl;if(n)Nc(t,[n]);else{const e=t.plugins.get("Notification"),n=t.locale.t;e.showWarning(n("at"),{title:n("au"),namespace:"ckfinder"})}})},window.CKFinder[e](n)}}function Nc(t,e){if(t.commands.get("imageInsert").isEnabled)t.execute("imageInsert",{source:e});else{const e=t.plugins.get("Notification"),n=t.locale.t;e.showWarning(n("av"),{title:n("aw"),namespace:"ckfinder"})}}class Rc extends Xa{static get pluginName(){return"CKFinderEditing"}static get requires(){return[Pc,Gu,Dc]}init(){const t=this.editor;t.commands.add("ckfinder",new Oc(t))}}const Mc=/^data:(\S*?);base64,/;class Lc{constructor(t,e,n){if(!t)throw new de.b("fileuploader-missing-file: File must be provided as the first argument",null);if(!e)throw new de.b("fileuploader-missing-token: Token must be provided as the second argument.",null);if(!n)throw new de.b("fileuploader-missing-api-address: Api address must be provided as the third argument.",null);this.file=function(t){if("string"!=typeof t)return!1;const e=t.match(Mc);return!(!e||!e.length)}(t)?function(t,e=512){try{const n=t.match(Mc)[1],r=atob(t.replace(Mc,"")),i=[];for(let t=0;t<r.length;t+=e){const n=r.slice(t,t+e),o=new Array(n.length);for(let t=0;t<n.length;t++)o[t]=n.charCodeAt(t);i.push(new Uint8Array(o))}return new Blob(i,{type:n})}catch(t){throw new de.b("fileuploader-decoding-image-data-error: Problem with decoding Base64 image data.",null)}}(t):t,this._token=e,this._apiAddress=n}onProgress(t){return this.on("progress",(e,n)=>t(n)),this}onError(t){return this.once("error",(e,n)=>t(n)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const t=new XMLHttpRequest;t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t}_attachXHRListeners(){const t=this,e=this.xhr;function n(e){return()=>t.fire("error",e)}e.addEventListener("error",n("Network Error")),e.addEventListener("abort",n("Abort")),e.upload&&e.upload.addEventListener("progress",t=>{t.lengthComputable&&this.fire("progress",{total:t.total,uploaded:t.loaded})}),e.addEventListener("load",()=>{const t=e.status,n=e.response;if(t<200||t>299)return this.fire("error",n.message||n.error)})}_sendRequest(){const t=new FormData,e=this.xhr;return t.append("file",this.file),new Promise((n,r)=>{e.addEventListener("load",()=>{const t=e.status,i=e.response;return t<200||t>299?r(i.message?new de.b("fileuploader-uploading-data-failed: Uploading file failed.",this,{message:i.message}):i.error):n(i)}),e.addEventListener("error",()=>r(new Error("Network Error"))),e.addEventListener("abort",()=>r(new Error("Abort"))),e.send(t)})}}Te(Lc,ye);const Fc={refreshInterval:36e5,autoRefresh:!0};class jc{constructor(t,e=Fc){if(!t)throw new de.b("token-missing-token-url: A `tokenUrl` must be provided as the first constructor argument.",this);this.set("value",e.initValue),this._refresh="function"==typeof t?t:()=>(function(t){return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",t),r.addEventListener("load",()=>{const t=r.status,i=r.response;return t<200||t>299?n(new de.b("token-cannot-download-new-token: Cannot download new token from the provided url.",null)):e(i)}),r.addEventListener("error",()=>n(new Error("Network Error"))),r.addEventListener("abort",()=>n(new Error("Abort"))),r.send()})})(t),this._options=Object.assign({},Fc,e)}init(){return new Promise((t,e)=>{this._options.autoRefresh&&this._startRefreshing(),this.value?t(this):this._refreshToken().then(t).catch(e)})}_refreshToken(){return this._refresh().then(t=>this.set("value",t)).then(()=>this)}destroy(){this._stopRefreshing()}_startRefreshing(){this._refreshInterval=setInterval(()=>this._refreshToken(),this._options.refreshInterval)}_stopRefreshing(){clearInterval(this._refreshInterval)}static create(t,e=Fc){return new jc(t,e).init()}}Te(jc,Xe);class Bc extends Xa{static get pluginName(){return"CloudServices"}init(){const t=this.editor.config.get("cloudServices")||{};for(const e in t)this[e]=t[e];if(this.tokenUrl)return this.token=new Bc.Token(this.tokenUrl),this.token.init();this.token=null}}Bc.Token=jc;class Vc extends Xa{static get requires(){return[Kl,Bc]}init(){const t=this.editor,e=t.plugins.get(Bc),n=e.token;n&&(this._uploadGateway=new Vc._UploadGateway(n,e.uploadUrl),t.plugins.get(Kl).createUploadAdapter=t=>new Uc(this._uploadGateway,t))}}class Uc{constructor(t,e){this.uploadGateway=t,this.loader=e}upload(){return this.loader.file.then(t=>(this.fileUploader=this.uploadGateway.upload(t),this.fileUploader.on("progress",(t,e)=>{this.loader.uploadTotal=e.total,this.loader.uploaded=e.uploaded}),this.fileUploader.send()))}abort(){this.fileUploader.abort()}}Vc._UploadGateway=class{constructor(t,e){if(!t)throw new de.b("uploadgateway-missing-token: Token must be provided.",null);if(!e)throw new de.b("uploadgateway-missing-api-address: Api address must be provided.",null);this._token=t,this._apiAddress=e}upload(t){return new Lc(t,this._token,this._apiAddress)}};class zc extends Vr{constructor(t){super(t),this.domEventType="mousedown"}onDomEvent(t){this.fire(t.type,t)}}n(48);const qc=Dn("Ctrl+A");class Hc extends Xa{static get pluginName(){return"Widget"}init(){const t=this.editor.editing.view,e=t.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(t,e,n)=>{this._clearPreviouslySelectedWidgets(n.writer);const r=n.writer,i=r.document.selection,o=i.getSelectedElement();let s=null;for(const a of i.getRanges())for(const t of a){const e=t.item;Fu(e)&&!$c(e,s)&&(r.addClass(Lu,e),this._previouslySelected.add(e),s=e,e==o&&r.setSelection(i.getRanges(),{fake:!0,label:Bu(o)}))}},{priority:"low"}),t.addObserver(zc),this.listenTo(e,"mousedown",(...t)=>this._onMousedown(...t)),this.listenTo(e,"keydown",(...t)=>this._onKeydown(...t),{priority:"high"}),this.listenTo(e,"delete",(t,e)=>{this._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop())},{priority:"high"})}_onMousedown(t,e){const n=this.editor,r=n.editing.view,i=r.document;let o=e.target;if(function(t){for(;t;){if(t.is("editableElement")&&!t.is("rootElement"))return!0;if(Fu(t))return!1;t=t.parent}return!1}(o)){if(Sn.isSafari&&e.domEvent.detail>=3){const t=n.editing.mapper.toModelElement(o);this.editor.model.change(n=>{e.preventDefault(),n.setSelection(t,"in")})}return}if(!Fu(o)&&!(o=o.findAncestor(Fu)))return;e.preventDefault(),i.isFocused||r.focus();const s=n.editing.mapper.toModelElement(o);this._setSelectionOverElement(s)}_onKeydown(t,e){const n=e.keyCode,r=n==An.arrowdown||n==An["ltr"===this.editor.locale.contentLanguageDirection?"arrowright":"arrowleft"];let i=!1;n!=An.arrowright&&n!=An.arrowleft&&n!=An.arrowup&&n!=An.arrowdown?In(e)!=qc?n===An.enter&&(i=this._handleEnterKey(e.shiftKey)):i=this._selectAllNestedEditableContent()||this._selectAllContent():i=this._handleArrowKeys(r),i&&(e.preventDefault(),t.stop())}_handleDelete(t){if(this.editor.isReadOnly)return;const e=this.editor.model.document.selection;if(!e.isCollapsed)return;const n=this._getObjectElementNextToSelection(t);return n?(this.editor.model.change(t=>{let r=e.anchor.parent;for(;r.isEmpty;){const e=r;r=e.parent,t.remove(e)}this._setSelectionOverElement(n)}),!0):void 0}_handleArrowKeys(t){const e=this.editor.model,n=e.schema,r=e.document.selection,i=r.getSelectedElement();if(i&&n.isObject(i)){const i=t?r.getLastPosition():r.getFirstPosition(),o=n.getNearestSelectionRange(i,t?"forward":"backward");return o&&e.change(t=>{t.setSelection(o)}),!0}if(!r.isCollapsed)return;const o=this._getObjectElementNextToSelection(t);return o&&n.isObject(o)?(this._setSelectionOverElement(o),!0):void 0}_handleEnterKey(t){const e=this.editor.model,n=e.document.selection.getSelectedElement();if(function(t,e){return t&&e.isObject(t)&&!e.isInline(t)}(n,e.schema))return e.change(r=>{let i=r.createPositionAt(n,t?"before":"after");const o=r.createElement("paragraph");if(e.schema.isBlock(n.parent)){const t=e.schema.findAllowedParent(i,o);i=r.split(i,t).position}r.insert(o,i),r.setSelection(o,"in")}),!0}_selectAllNestedEditableContent(){const t=this.editor.model,e=t.document.selection,n=t.schema.getLimitElement(e);return e.getFirstRange().root!=n&&(t.change(t=>{t.setSelection(t.createRangeIn(n))}),!0)}_selectAllContent(){const t=this.editor.model,e=this.editor.editing,n=e.view.document.selection.getSelectedElement();if(n&&Fu(n)){const r=e.mapper.toModelElement(n.parent);return t.change(t=>{t.setSelection(t.createRangeIn(r))}),!0}return!1}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(t){const e=this.editor.model,n=e.schema,r=e.createSelection(e.document.selection);e.modifySelection(r,{direction:t?"forward":"backward"});const i=t?r.focus.nodeBefore:r.focus.nodeAfter;return i&&n.isObject(i)?i:null}_clearPreviouslySelectedWidgets(t){for(const e of this._previouslySelected)t.removeClass(Lu,e);this._previouslySelected.clear()}}function $c(t,e){return!!e&&Array.from(t.getAncestors()).includes(e)}class Wc extends rl{refresh(){const t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Hu(t),this.value=!(!Hu(t)||!t.hasAttribute("alt"))&&t.getAttribute("alt")}execute(t){const e=this.editor.model,n=e.document.selection.getSelectedElement();e.change(e=>{e.setAttribute("alt",t.newValue,n)})}}class Jc extends Xa{static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Wc(this.editor))}}n(50);class Gc extends pa{constructor(t,e){super(t);const n=`ck-input-${ge()}`,r=`ck-status-${ge()}`;this.set("label"),this.set("value"),this.set("isReadOnly",!1),this.set("errorText",null),this.set("infoText",null),this.labelView=this._createLabelView(n),this.inputView=this._createInputView(e,n,r),this.statusView=this._createStatusView(r),this.bind("_statusText").to(this,"errorText",this,"infoText",(t,e)=>t||e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-input",this.bindTemplate.if("isReadOnly","ck-disabled")]},children:[this.labelView,this.inputView,this.statusView]})}_createLabelView(t){const e=new ma(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}_createInputView(t,e,n){const r=new t(this.locale,n);return r.id=e,r.ariaDescribedById=n,r.bind("value").to(this),r.bind("isReadOnly").to(this),r.bind("hasError").to(this,"errorText",t=>!!t),r.on("input",()=>{this.errorText=null}),r}_createStatusView(t){const e=new pa(this.locale),n=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-input__status",n.if("errorText","ck-labeled-input__status_error"),n.if("_statusText","ck-hidden",t=>!t)],id:t,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),e}select(){this.inputView.select()}focus(){this.inputView.focus()}}n(52);class Qc extends pa{constructor(t){super(t),this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById");const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),"aria-invalid":e.if("hasError",!0),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to("input")}})}render(){super.render();const t=t=>{this.element.value=t||0===t?t:""};t(this.value),this.on("change:value",(e,n,r)=>{t(r)})}select(){this.element.select()}focus(){this.element.focus()}}function Kc({view:t}){t.listenTo(t.element,"submit",(e,n)=>{n.preventDefault(),t.fire("submit")},{useCapture:!0})}var Yc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Xc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';n(54);class Zc extends pa{constructor(t){super(t);const e=this.locale.t;this.focusTracker=new Vs,this.keystrokes=new Ps,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(e("bf"),Yc,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(e("bg"),Xc,"ck-button-cancel","cancel"),this._focusables=new Gs,this._focusCycler=new Ca({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Kc({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)})}_createButton(t,e,n,r){const i=new Ma(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}_createLabeledInputView(){const t=this.locale.t,e=new Gc(this.locale,Qc);return e.label=t("cd"),e.inputView.placeholder=t("cd"),e}}n(56);const th=wa("px"),eh=cr.document.body;class nh extends pa{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",t=>`ck-balloon-panel_${t}`),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",th),left:e.to("left",th)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();const e=nh.defaultPositions,n=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast],limiter:eh,fitInViewport:!0},t),r=nh._getOptimalPosition(n),i=parseInt(r.left),o=parseInt(r.top);Object.assign(this,{top:o,left:i,position:r.name})}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){this.attachTo(t);const e=rh(t.target),n=t.limiter?rh(t.limiter):eh;this.listenTo(cr.document,"scroll",(r,i)=>{const o=i.target,s=e&&o.contains(e),a=n&&o.contains(n);!s&&!a&&e&&n||this.attachTo(t)},{useCapture:!0}),this.listenTo(cr.window,"resize",()=>{this.attachTo(t)})}_stopPinning(){this.stopListening(cr.document,"scroll"),this.stopListening(cr.window,"resize")}}function rh(t){return ue(t)?t:ii(t)?t.commonAncestorContainer:"function"==typeof t?rh(t()):null}function ih(t,e){return t.top-e.height-nh.arrowVerticalOffset}function oh(t){return t.bottom+nh.arrowVerticalOffset}nh.arrowHorizontalOffset=25,nh.arrowVerticalOffset=10,nh._getOptimalPosition=Ia,nh.defaultPositions={northArrowSouth:(t,e)=>({top:ih(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"}),northArrowSouthEast:(t,e)=>({top:ih(t,e),left:t.left+t.width/2-e.width+nh.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(t,e)=>({top:ih(t,e),left:t.left+t.width/2-nh.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouth:(t,e)=>({top:ih(t,e),left:t.left-e.width/2,name:"arrow_s"}),northWestArrowSouthWest:(t,e)=>({top:ih(t,e),left:t.left-nh.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthEast:(t,e)=>({top:ih(t,e),left:t.left-e.width+nh.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouth:(t,e)=>({top:ih(t,e),left:t.right-e.width/2,name:"arrow_s"}),northEastArrowSouthEast:(t,e)=>({top:ih(t,e),left:t.right-e.width+nh.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(t,e)=>({top:ih(t,e),left:t.right-nh.arrowHorizontalOffset,name:"arrow_sw"}),southArrowNorth:(t,e)=>({top:oh(t),left:t.left+t.width/2-e.width/2,name:"arrow_n"}),southArrowNorthEast:(t,e)=>({top:oh(t),left:t.left+t.width/2-e.width+nh.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:(t,e)=>({top:oh(t),left:t.left+t.width/2-nh.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorth:(t,e)=>({top:oh(t),left:t.left-e.width/2,name:"arrow_n"}),southWestArrowNorthWest:(t,e)=>({top:oh(t),left:t.left-nh.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthEast:(t,e)=>({top:oh(t),left:t.left-e.width+nh.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorth:(t,e)=>({top:oh(t),left:t.right-e.width/2,name:"arrow_n"}),southEastArrowNorthEast:(t,e)=>({top:oh(t),left:t.right-e.width+nh.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:(t,e)=>({top:oh(t),left:t.right-nh.arrowHorizontalOffset,name:"arrow_nw"})};var sh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z" /></svg>\n',ah='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>\n';n(58),n(60);const lh=wa("px");class uh extends Xa{static get pluginName(){return"ContextualBalloon"}constructor(t){super(t),this.positionLimiter=()=>{const t=this.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null},this.set("visibleView",null),this.view=new nh(t.locale),t.ui.view.body.add(this.view),t.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this.hasView(t.view))throw new de.b("contextualballoon-add-view-exist: Cannot add configuration of the same view twice.",[this,t]);const e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));const n=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),n.set(t.view,t),this._viewToStack.set(t.view,n),n===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new de.b("contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.",[this,t]);const e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack.delete(this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(t){this.visibleStack=t;const e=this._idToStack.get(t);if(!e)throw new de.b("contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(e=>e[1]===t)[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]))}_createRotatorView(){const t=new ch(this.editor.locale),e=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>!e&&t>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(t,n)=>{if(n<2)return"";const r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return e("bl",[r,n])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new hh(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>!e&&t>=2?Math.min(t-1,2):0),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:e="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=e,this.view.withArrow=n,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}_getBalloonPosition(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&!t.limiter&&(t=Object.assign({},t,{limiter:this.positionLimiter})),t}}class ch extends pa{constructor(t){super(t);const e=t.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Vs,this.buttonPrevView=this._createButtonView(e("bm"),sh),this.buttonNextView=this._createButtonView(e("bn"),ah),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",t=>t?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,e){const n=new Ma(this.locale);return n.set({label:t,icon:e,tooltip:!0}),n}}class hh extends pa{constructor(t,e){super(t);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=e,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",t=>t?"":"ck-hidden")],style:{top:n.to("top",lh),left:n.to("left",lh),width:n.to("width",lh),height:n.to("height",lh)}},children:this.content}),this.on("change:numberOfPanels",(t,e,n,r)=>{n>r?this._addPanels(n-r):this._removePanels(r-n),this.updatePosition()})}_addPanels(t){for(;t--;){const t=new pa;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(t){for(;t--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:e}=this._balloonPanelView,{width:n,height:r}=new ai(this._balloonPanelView.element);Object.assign(this,{top:t,left:e,width:n,height:r})}}}var dh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>';function fh(t){const e=t.editing.view,n=nh.defaultPositions;return{target:e.domConverter.viewToDom(e.document.selection.getSelectedElement()),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]}}class ph extends Xa{static get requires(){return[uh]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("imageTextAlternative",n=>{const r=t.commands.get("imageTextAlternative"),i=new Ma(n);return i.set({label:e("bv"),icon:dh,tooltip:!0}),i.bind("isEnabled").to(r,"isEnabled"),this.listenTo(i,"execute",()=>this._showForm()),i})}_createForm(){const t=this.editor,e=t.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new Zc(t.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.inputView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(t,e)=>{this._hideForm(!0),e()}),this.listenTo(t.ui,"update",()=>{qu(e.selection)?this._isVisible&&function(t){const e=t.plugins.get("ContextualBalloon");if(qu(t.editing.view.document.selection)){const n=fh(t);e.updatePosition(n)}}(t):this._hideForm(!0)}),za({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const t=this.editor,e=t.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._isInBalloon||this._balloon.add({view:this._form,position:fh(t)}),n.value=n.inputView.element.value=e.value||"",this._form.labeledInput.select()}_hideForm(t){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class gh extends Xa{static get requires(){return[Jc,ph]}static get pluginName(){return"ImageTextAlternative"}}n(62);class mh extends Xa{static get requires(){return[Gu,Hc,gh]}static get pluginName(){return"Image"}}class bh extends pa{constructor(t){super(t),this.buttonView=new Ma(t),this._fileInputView=new vh(t),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class vh extends pa{constructor(t){super(t),this.set("acceptedType"),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var yh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';function wh(t){const e=t.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function _h(t){return new Promise((e,n)=>{const r=t.getAttribute("src");fetch(r).then(t=>t.blob()).then(t=>{const i=function(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}(t,r),o=function(t,e,n){try{return new File([t],e,{type:n})}catch(t){return null}}(t,`image.${i.replace("image/","")}`,i);o?e(o):n()}).catch(n)})}class kh extends Xa{init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("imageUpload",n=>{const r=new bh(n),i=t.commands.get("imageUpload"),o=t.config.get("image.upload.types"),s=wh(o);return r.set({acceptedType:o.map(t=>`image/${t}`).join(","),allowMultipleFiles:!0}),r.buttonView.set({label:e("s"),icon:yh,tooltip:!0}),r.buttonView.bind("isEnabled").to(i),r.on("done",(e,n)=>{const r=Array.from(n).filter(t=>s.test(t.type));r.length&&t.execute("imageUpload",{file:r})}),r})}}var Ch='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>';n(64),n(66),n(68);class Eh extends Xa{constructor(t){super(t),this.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent(Ch)}init(){this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",(...t)=>this.uploadStatusChange(...t))}uploadStatusChange(t,e,n){const r=this.editor,i=e.item,o=i.getAttribute("uploadId");if(!n.consumable.consume(e.item,t.name))return;const s=r.plugins.get(Kl),a=o?e.attributeNewValue:null,l=this.placeholder,u=r.editing.mapper.toViewElement(i),c=n.writer;if("reading"==a)return Sh(u,c),void Th(l,u,c);if("uploading"==a){const t=s.loaders.get(o);return Sh(u,c),void(t?(xh(u,c),function(t,e,n,r){const i=function(t){const e=t.createUIElement("div",{class:"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e}(e);e.insert(e.createPositionAt(t,"end"),i),n.on("change:uploadedPercent",(t,e,n)=>{r.change(t=>{t.setStyle("width",n+"%",i)})})}(u,c,t,r.editing.view),function(t,e,n){if(n.data){const t=u.getChild(0);e.setAttribute("src",n.data,t)}}(0,c,t)):Th(l,u,c))}"complete"==a&&s.loaders.get(o)&&!Sn.isEdge&&function(t,e,n){const r=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),r),setTimeout(()=>{n.change(t=>t.remove(t.createRangeOn(r)))},3e3)}(u,c,r.editing.view),Ih(u,c,"progressBar"),xh(u,c),c.removeClass("ck-appear",u)}}function Sh(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t)}function Th(t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);const r=e.getChild(0);r.getAttribute("src")!==t&&n.setAttribute("src",t,r),Ah(e,"placeholder")||n.insert(n.createPositionAfter(r),function(t){const e=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e}(n))}function xh(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),Ih(t,e,"placeholder")}function Ah(t,e){for(const n of t.getChildren())if(n.getCustomProperty(e))return n}function Ih(t,e,n){const r=Ah(t,n);r&&e.remove(e.createRangeOn(r))}class Dh{createDocumentFragment(t){return new Rn(t)}createElement(t,e,n){return new Le(t,e,n)}createText(t){return new De(t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const r=n.getChildIndex(t);return this.removeChildren(r,1,n),this.insertChild(r,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new Le(t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){w(t)&&void 0===n&&(n=e),n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return cn._createAt(t,e)}createPositionAfter(t){return cn._createAfter(t)}createPositionBefore(t){return cn._createBefore(t)}createRange(t,e){return new hn(t,e)}createRangeOn(t){return hn._createOn(t)}createRangeIn(t){return hn._createIn(t)}createSelection(t,e,n){return new pn(t,e,n)}}class Ph extends rl{refresh(){this.isEnabled=Wu(this.editor.model)}execute(t){const e=this.editor,n=e.model,r=e.plugins.get(Kl);n.change(e=>{const i=Array.isArray(t.file)?t.file:[t.file];for(const t of i)Oh(e,n,r,t)})}}function Oh(t,e,n,r){const i=n.createLoader(r);i&&$u(t,e,{uploadId:i.id})}class Nh extends Xa{static get requires(){return[Kl,Pc,nl]}static get pluginName(){return"ImageUploadEditing"}constructor(t){super(t),t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}})}init(){const t=this.editor,e=t.model.document,n=t.model.schema,r=t.conversion,i=t.plugins.get(Kl),o=wh(t.config.get("image.upload.types"));n.extend("image",{allowAttributes:["uploadId","uploadStatus"]}),t.commands.add("imageUpload",new Ph(t)),r.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",(e,n)=>{if(function(t){return Array.from(t.types).includes("text/html")&&""!==t.getData("text/html")}(n.dataTransfer))return;const r=Array.from(n.dataTransfer.files).filter(t=>!!t&&o.test(t.type)),i=n.targetRanges.map(e=>t.editing.mapper.toModelRange(e));t.model.change(n=>{n.setSelection(i),r.length&&(e.stop(),t.model.enqueueChange("default",()=>{t.execute("imageUpload",{file:r})}))})}),this.listenTo(t.plugins.get(nl),"inputTransformation",(e,n)=>{const r=Array.from(t.editing.view.createRangeIn(n.content)).filter(t=>(function(t){return!(!t.is("element","img")||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g))})(t.item)&&!t.item.getAttribute("uploadProcessed")).map(t=>({promise:_h(t.item),imageElement:t.item}));if(!r.length)return;const o=new Dh;for(const t of r){o.setAttribute("uploadProcessed",!0,t.imageElement);const e=i.createLoader(t.promise);e&&(o.setAttribute("src","",t.imageElement),o.setAttribute("uploadId",e.id,t.imageElement))}}),t.editing.view.document.on("dragover",(t,e)=>{e.preventDefault()}),e.on("change",()=>{const n=e.differ.getChanges({includeChangesInGraveyard:!0});for(const e of n)if("insert"==e.type&&"$text"!=e.name){const n=e.position.nodeAfter,r="$graveyard"==e.position.root.rootName;for(const e of Rh(t,n)){const t=e.getAttribute("uploadId");if(!t)continue;const n=i.loaders.get(t);n&&(r?n.abort():"idle"==n.status&&this._readAndUpload(n,e))}}})}_readAndUpload(t,e){const n=this.editor,r=n.model,i=n.locale.t,o=n.plugins.get(Kl),s=n.plugins.get(Pc);return r.enqueueChange("transparent",t=>{t.setAttribute("uploadStatus","reading",e)}),t.read().then(()=>{const i=t.upload();if(Sn.isSafari){const t=n.editing.mapper.toViewElement(e).getChild(0);n.editing.view.once("render",()=>{if(!t.parent)return;const e=n.editing.view.domConverter.mapViewToDom(t.parent);if(!e)return;const r=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=r})}return r.enqueueChange("transparent",t=>{t.setAttribute("uploadStatus","uploading",e)}),i}).then(t=>{r.enqueueChange("transparent",n=>{n.setAttributes({uploadStatus:"complete",src:t.default},e),this._parseAndSetSrcsetAttributeOnImage(t,e,n)}),a()}).catch(n=>{if("error"!==t.status&&"aborted"!==t.status)throw n;"error"==t.status&&n&&s.showWarning(n,{title:i("aq"),namespace:"upload"}),a(),r.enqueueChange("transparent",t=>{t.remove(e)})});function a(){r.enqueueChange("transparent",t=>{t.removeAttribute("uploadId",e),t.removeAttribute("uploadStatus",e)}),o.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,e,n){let r=0;const i=Object.keys(t).filter(t=>{const e=parseInt(t,10);if(!isNaN(e))return r=Math.max(r,e),!0}).map(e=>`${t[e]} ${e}w`).join(", ");""!=i&&n.setAttribute("srcset",{data:i,width:r},e)}}function Rh(t,e){return Array.from(t.model.createRangeOn(e)).filter(t=>t.item.is("image")).map(t=>t.item)}class Mh extends Xa{static get pluginName(){return"ImageUpload"}static get requires(){return[Nh,kh,Eh]}}class Lh extends rl{refresh(){const t=this.editor.model,e=vu(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("paragraph"),this.isEnabled=!!e&&Fh(e,t.schema)}execute(t={}){const e=this.editor.model,n=e.document;e.change(r=>{const i=(t.selection||n.selection).getSelectedBlocks();for(const t of i)!t.is("paragraph")&&Fh(t,e.schema)&&r.rename(t,"paragraph")})}}function Fh(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class jh extends Xa{static get pluginName(){return"Paragraph"}init(){const t=this.editor,e=t.model,n=t.data;t.commands.add("paragraph",new Lh(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(t,e)=>jh.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null,converterPriority:"low"}),n.upcastDispatcher.on("element",(t,e,n)=>{n.consumable.test(e.viewItem,{name:e.viewItem.name})&&Vh(e.viewItem,e.modelCursor,n.schema)&&Object.assign(e,Bh(e.viewItem,e.modelCursor,n))},{priority:"low"}),n.upcastDispatcher.on("text",(t,e,n)=>{e.modelRange||Vh(e.viewItem,e.modelCursor,n.schema)&&Object.assign(e,Bh(e.viewItem,e.modelCursor,n))},{priority:"lowest"}),e.document.registerPostFixer(t=>this._autoparagraphEmptyRoots(t)),t.data.on("ready",()=>{e.enqueueChange("transparent",t=>this._autoparagraphEmptyRoots(t))},{priority:"lowest"})}_autoparagraphEmptyRoots(t){const e=this.editor.model;for(const n of e.document.getRootNames()){const r=e.document.getRoot(n);if(r.isEmpty&&"$graveyard"!=r.rootName&&e.schema.checkChild(r,"paragraph"))return t.insertElement("paragraph",r),!0}}}function Bh(t,e,n){const r=n.writer.createElement("paragraph");return n.writer.insert(r,e),n.convertItem(t,n.writer.createPositionAt(r,0))}function Vh(t,e,n){const r=n.createContext(e);return!!n.checkChild(r,"paragraph")&&!!n.checkChild(r.push("paragraph"),t)}jh.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);class Uh extends rl{constructor(t,e){super(t),this.modelElements=e}refresh(){const t=vu(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(e=>zh(t,e,this.editor.model.schema))}execute(t){const e=this.editor.model,n=e.document,r=t.value;e.change(t=>{const i=Array.from(n.selection.getSelectedBlocks()).filter(t=>zh(t,r,e.schema));for(const e of i)e.is(r)||t.rename(e,r)})}}function zh(t,e,n){return n.checkChild(t.parent,e)&&!n.isObject(t)}const qh="paragraph";class Hh extends Xa{static get pluginName(){return"HeadingEditing"}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[jh]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const r of e)r.model!==qh&&(t.model.schema.register(r.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(r),n.push(r.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new Uh(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(e,r)=>{const i=t.model.document.selection.getFirstPosition().parent;n.some(t=>i.is(t.model))&&!i.is(qh)&&0===i.childCount&&r.writer.rename(i,qh)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:me.get("low")+1})}}class $h{constructor(t,e){e&&Je(this,e),t&&this.set(t)}}Te($h,Xe),n(10);class Wh extends Xa{init(){const t=this.editor,e=t.t,n=function(t){const e=t.t,n={Paragraph:e("bw"),"Heading 1":e("bx"),"Heading 2":e("by"),"Heading 3":e("bz"),"Heading 4":e("ca"),"Heading 5":e("cb"),"Heading 6":e("cc")};return t.config.get("heading.options").map(t=>{const e=n[t.title];return e&&e!=t.title&&(t.title=e),t})}(t),r=e("f"),i=e("g");t.ui.componentFactory.add("heading",e=>{const o={},s=new mn,a=t.commands.get("heading"),l=t.commands.get("paragraph"),u=[a];for(const t of n){const e={type:"button",model:new $h({label:t.title,class:t.class,withText:!0})};"paragraph"===t.model?(e.model.bind("isOn").to(l,"value"),e.model.set("commandName","paragraph"),u.push(l)):(e.model.bind("isOn").to(a,"value",e=>e===t.model),e.model.set({commandName:"heading",commandValue:t.model})),s.add(e),o[t.model]=t.title}const c=qa(e);return Ha(c,s),c.buttonView.set({isOn:!1,withText:!0,tooltip:i}),c.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),c.bind("isEnabled").toMany(u,"isEnabled",(...t)=>t.some(t=>t)),c.buttonView.bind("label").to(a,"value",l,"value",(t,e)=>{const n=t||e&&"paragraph";return o[n]?o[n]:r}),this.listenTo(c,"execute",e=>{t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus()}),c})}}function Jh(t){for(const e of t.getChildren())if(e&&e.is("caption"))return e;return null}function Gh(t){const e=t.parent;return"figcaption"==t.name&&e&&"figure"==e.name&&e.hasClass("image")?{name:!0}:null}class Qh extends Xa{static get pluginName(){return"ImageCaptionEditing"}init(){const t=this.editor,e=t.editing.view,n=t.data,r=t.editing,i=t.t;t.model.schema.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),t.model.document.registerPostFixer(t=>this._insertMissingModelCaptionElement(t)),t.conversion.for("upcast").elementToElement({view:Gh,model:"caption"}),n.downcastDispatcher.on("insert:caption",Kh(t=>t.createContainerElement("figcaption"),!1));const o=function(t,e){return n=>{const r=n.createEditableElement("figcaption");return n.setCustomProperty("imageCaption",!0,r),qs({view:t,element:r,text:e}),Vu(r,n)}}(e,i("ar"));r.downcastDispatcher.on("insert:caption",Kh(o)),r.downcastDispatcher.on("insert",this._fixCaptionVisibility(t=>t.item),{priority:"high"}),r.downcastDispatcher.on("remove",this._fixCaptionVisibility(t=>t.position.parent),{priority:"high"}),e.document.registerPostFixer(t=>this._updateCaptionVisibility(t))}_updateCaptionVisibility(t){const e=this.editor.editing.mapper,n=this._lastSelectedCaption;let r;const i=this.editor.model.document.selection,o=i.getSelectedElement();if(o&&o.is("image")){const t=Jh(o);r=e.toViewElement(t)}const s=Yh(i.getFirstPosition().parent);if(s&&(r=e.toViewElement(s)),r)return n?n===r?Zh(r,t):(Xh(n,t),this._lastSelectedCaption=r,Zh(r,t)):(this._lastSelectedCaption=r,Zh(r,t));if(n){const e=Xh(n,t);return this._lastSelectedCaption=null,e}return!1}_fixCaptionVisibility(t){return(e,n,r)=>{const i=Yh(t(n)),o=r.writer;if(i){const t=this.editor.editing.mapper.toViewElement(i);t&&(i.childCount?o.removeClass("ck-hidden",t):o.addClass("ck-hidden",t))}}}_insertMissingModelCaptionElement(t){const e=this.editor.model,n=e.document.differ.getChanges(),r=[];for(const i of n)if("insert"==i.type&&"$text"!=i.name){const t=i.position.nodeAfter;if(t.is("image")&&!Jh(t)&&r.push(t),!t.is("image")&&t.childCount)for(const n of e.createRangeIn(t).getItems())n.is("image")&&!Jh(n)&&r.push(n)}for(const i of r)t.appendElement("caption",i);return!!r.length}}function Kh(t,e=!0){return(n,r,i)=>{const o=r.item;if((o.childCount||e)&&Hu(o.parent)){if(!i.consumable.consume(r.item,"insert"))return;const e=i.mapper.toViewElement(r.range.start.parent),n=t(i.writer),s=i.writer;o.childCount||s.addClass("ck-hidden",n),function(t,e,n,r){const i=r.writer.createPositionAt(n,"end");r.writer.insert(i,t),r.mapper.bindElements(e,t)}(n,r.item,e,i)}}}function Yh(t){const e=t.getAncestors({includeSelf:!0}).find(t=>"caption"==t.name);return e&&e.parent&&"image"==e.parent.name?e:null}function Xh(t,e){return!t.childCount&&!t.hasClass("ck-hidden")&&(e.addClass("ck-hidden",t),!0)}function Zh(t,e){return!!t.hasClass("ck-hidden")&&(e.removeClass("ck-hidden",t),!0)}n(71);class td extends rl{constructor(t,e){super(t),this.defaultStyle=!1,this.styles=e.reduce((t,e)=>(t[e.name]=e,e.isDefault&&(this.defaultStyle=e.name),t),{})}refresh(){const t=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=Hu(t),t)if(t.hasAttribute("imageStyle")){const e=t.getAttribute("imageStyle");this.value=!!this.styles[e]&&e}else this.value=this.defaultStyle;else this.value=!1}execute(t){const e=t.value,n=this.editor.model,r=n.document.selection.getSelectedElement();n.change(t=>{this.styles[e].isDefault?t.removeAttribute("imageStyle",r):t.setAttribute("imageStyle",e,r)})}}function ed(t,e){for(const n of e)if(n.name===t)return n}var nd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>',rd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>',id='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>',od='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>';const sd={full:{name:"full",title:"Full size image",icon:nd,isDefault:!0},side:{name:"side",title:"Side image",icon:od,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:rd,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:id,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:od,className:"image-style-align-right"}},ad={full:nd,left:rd,right:od,center:id};function ld(t=[]){return t.map(ud)}function ud(t){if("string"==typeof t){const e=t;sd[e]?t=Object.assign({},sd[e]):(console.warn(Object(de.a)("image-style-not-found: There is no such image style of given name."),{name:e}),t={name:e})}else if(sd[t.name]){const e=sd[t.name],n=Object.assign({},t);for(const r in e)t.hasOwnProperty(r)||(n[r]=e[r]);t=n}return"string"==typeof t.icon&&ad[t.icon]&&(t.icon=ad[t.icon]),t}class cd extends Xa{static get pluginName(){return"ImageStyleEditing"}init(){const t=this.editor,e=t.model.schema,n=t.data,r=t.editing;t.config.define("image.styles",["full","side"]);const i=ld(t.config.get("image.styles"));e.extend("image",{allowAttributes:"imageStyle"});const o=function(t){return(e,n,r)=>{if(!r.consumable.consume(n.item,e.name))return;const i=ed(n.attributeNewValue,t),o=ed(n.attributeOldValue,t),s=r.mapper.toViewElement(n.item),a=r.writer;o&&a.removeClass(o.className,s),i&&a.addClass(i.className,s)}}(i);r.downcastDispatcher.on("attribute:imageStyle:image",o),n.downcastDispatcher.on("attribute:imageStyle:image",o),n.upcastDispatcher.on("element:figure",function(t){const e=i.filter(t=>!t.isDefault);return(t,n,r)=>{if(!n.modelRange)return;const i=n.viewItem,o=vu(n.modelRange.getItems());if(r.schema.checkAttribute(o,"imageStyle"))for(const s of e)r.consumable.consume(i,{classes:s.className})&&r.writer.setAttribute("imageStyle",s.name,o)}}(),{priority:"low"}),t.commands.add("imageStyle",new td(t,i))}}n(73);class hd extends Xa{static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Full size image":t("h"),"Side image":t("i"),"Left aligned image":t("j"),"Centered image":t("k"),"Right aligned image":t("l")}}init(){const t=function(t,e){for(const n of t)e[n.title]&&(n.title=e[n.title]);return t}(ld(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles);for(const e of t)this._createButton(e)}_createButton(t){const e=this.editor;e.ui.componentFactory.add(`imageStyle:${t.name}`,n=>{const r=e.commands.get("imageStyle"),i=new Ma(n);return i.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(r,"isEnabled"),i.bind("isOn").to(r,"value",e=>e===t.name),this.listenTo(i,"execute",()=>e.execute("imageStyle",{value:t.name})),i})}}class dd extends Xa{static get requires(){return[uh]}static get pluginName(){return"WidgetToolbarRepository"}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const e=t.plugins.get("BalloonToolbar");this.listenTo(e,"show",e=>{(function(t){const e=t.getSelectedElement();return!(!e||!Fu(e))})(t.editing.view.document.selection)&&e.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values())t.view.destroy()}register(t,{ariaLabel:e,items:n,getRelatedElement:r,balloonClassName:i="ck-toolbar-container"}){const o=this.editor,s=o.t,a=new Wa(o.locale);if(a.ariaLabel=e||s("ax"),this._toolbarDefinitions.has(t))throw new de.b("widget-toolbar-duplicated: Toolbar with the given id was already added.",this,{toolbarId:t});a.fillFromConfig(n,o.ui.componentFactory),this._toolbarDefinitions.set(t,{view:a,getRelatedElement:r,balloonClassName:i})}_updateToolbarsVisibility(){let t=0,e=null,n=null;for(const r of this._toolbarDefinitions.values()){const i=r.getRelatedElement(this.editor.editing.view.document.selection);if(this.editor.ui.focusTracker.isFocused)if(i){const o=i.getAncestors().length;o>t&&(t=o,e=i,n=r)}else this._isToolbarInBalloon(r)&&this._hideToolbar(r);else this._isToolbarVisible(r)&&this._hideToolbar(r)}n&&this._showToolbar(n,e)}_hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,e){this._isToolbarVisible(t)?fd(this.editor,e):this._isToolbarInBalloon(t)||(this._balloon.add({view:t.view,position:pd(this.editor,e),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const t of this._toolbarDefinitions.values())if(this._isToolbarVisible(t)){const e=t.getRelatedElement(this.editor.editing.view.document.selection);fd(this.editor,e)}}))}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function fd(t,e){const n=t.plugins.get("ContextualBalloon"),r=pd(t,e);n.updatePosition(r)}function pd(t,e){const n=nh.defaultPositions;return{target:t.editing.view.domConverter.mapViewToDom(e),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]}}class gd extends rl{constructor(t){super(t),this._childCommands=[]}refresh(){}execute(...t){this._getFirstEnabledCommand().execute(t)}registerChildCommand(t){this._childCommands.push(t),t.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){return this._childCommands.find(t=>t.isEnabled)}}class md extends Xa{static get pluginName(){return"IndentEditing"}init(){const t=this.editor;t.commands.add("indent",new gd(t)),t.commands.add("outdent",new gd(t))}}var bd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5z"/><path d="M1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>\n',vd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5z"/><path d="M4.368 6.95L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>\n';class yd extends Xa{static get pluginName(){return"IndentUI"}init(){const t=this.editor,e=t.locale,n=t.t,r="ltr"==e.uiLanguageDirection?bd:vd,i="ltr"==e.uiLanguageDirection?vd:bd;this._defineButton("indent",n("q"),r),this._defineButton("outdent",n("r"),i)}_defineButton(t,e,n){const r=this.editor;r.ui.componentFactory.add(t,i=>{const o=r.commands.get(t),s=new Ma(i);return s.set({label:e,icon:n,tooltip:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),this.listenTo(s,"execute",()=>r.execute(t)),s})}}class wd extends Vr{constructor(t){super(t),this.domEventType="click"}onDomEvent(t){this.fire(t.type,t)}}n(75);class _d extends pa{constructor(t,e=[]){super(t);const n=t.t;this.focusTracker=new Vs,this.keystrokes=new Ps,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("bf"),Yc,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("bg"),Xc,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(e),this.children=this._createFormChildren(e),this._focusables=new Gs,this._focusCycler=new Ca({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const r=["ck","ck-link-form"];e.length&&r.push("ck-link-form_layout-vertical"),this.setTemplate({tag:"form",attributes:{class:r,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((t,e)=>(t[e.name]=e.isOn,t),{})}render(){super.render(),Kc({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const t=this.locale.t,e=new Gc(this.locale,Qc);return e.label=t("bh"),e.inputView.placeholder="https://example.com",e}_createButton(t,e,n,r){const i=new Ma(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}_createManualDecoratorSwitches(t){const e=this.createCollection();for(const n of t){const t=new Ua(this.locale);t.set({name:n.id,label:n.label,withText:!0}),t.bind("isOn").to(n,"value"),t.on("execute",()=>{n.set("value",!t.isOn)}),e.add(t)}return e}_createFormChildren(t){const e=this.createCollection();if(e.add(this.urlInputView),t.length){const t=new pa;t.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(t=>({tag:"li",children:[t],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),e.add(t)}return e.add(this.saveButtonView),e.add(this.cancelButtonView),e}}var kd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',Cd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>';n(77);class Ed extends pa{constructor(t){super(t);const e=t.t;this.focusTracker=new Vs,this.keystrokes=new Ps,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(e("bb"),kd,"unlink"),this.editButtonView=this._createButton(e("bc"),Cd,"edit"),this.set("href"),this._focusables=new Gs,this._focusCycler=new Ca({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createButton(t,e,n){const r=new Ma(this.locale);return r.set({label:t,icon:e,tooltip:!0}),r.delegate("execute").to(this,n),r}_createPreviewButton(){const t=new Ma(this.locale),e=this.bindTemplate,n=this.t;return t.set({withText:!0,tooltip:n("bd")}),t.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:e.to("href",t=>t&&bc(t)),target:"_blank"}}),t.bind("label").to(this,"href",t=>t||n("be")),t.bind("isEnabled").to(this,"href",t=>!!t),t.template.tag="a",t.template.eventListeners={},t}}var Sd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const Td="Ctrl+K";class xd extends Xa{static get requires(){return[uh]}static get pluginName(){return"LinkUI"}init(){const t=this.editor;t.editing.view.addObserver(wd),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=t.plugins.get(uh),this._createToolbarLinkButton(),this._enableUserBalloonInteractions()}destroy(){super.destroy(),this.formView.destroy()}_createActionsView(){const t=this.editor,e=new Ed(t.locale),n=t.commands.get("link"),r=t.commands.get("unlink");return e.bind("href").to(n,"value"),e.editButtonView.bind("isEnabled").to(n),e.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(e,"edit",()=>{this._addFormView()}),this.listenTo(e,"unlink",()=>{t.execute("unlink"),this._hideUI()}),e.keystrokes.set("Esc",(t,e)=>{this._hideUI(),e()}),e.keystrokes.set(Td,(t,e)=>{this._addFormView(),e()}),e}_createFormView(){const t=this.editor,e=t.commands.get("link"),n=new _d(t.locale,e.manualDecorators);return n.urlInputView.bind("value").to(e,"value"),n.urlInputView.bind("isReadOnly").to(e,"isEnabled",t=>!t),n.saveButtonView.bind("isEnabled").to(e),this.listenTo(n,"submit",()=>{t.execute("link",n.urlInputView.inputView.element.value,n.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(n,"cancel",()=>{this._closeFormView()}),n.keystrokes.set("Esc",(t,e)=>{this._closeFormView(),e()}),n}_createToolbarLinkButton(){const t=this.editor,e=t.commands.get("link"),n=t.t;t.keystrokes.set(Td,(t,n)=>{n(),e.isEnabled&&this._showUI(!0)}),t.ui.componentFactory.add("link",t=>{const r=new Ma(t);return r.isEnabled=!0,r.label=n("as"),r.icon=Sd,r.keystroke=Td,r.tooltip=!0,r.isToggleable=!0,r.bind("isEnabled").to(e,"isEnabled"),r.bind("isOn").to(e,"value",t=>!!t),this.listenTo(r,"execute",()=>this._showUI(!0)),r})}_enableUserBalloonInteractions(){this.listenTo(this.editor.editing.view.document,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),this.editor.keystrokes.set("Tab",(t,e)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),e())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,e)=>{this._isUIVisible&&(this._hideUI(),e())}),za({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this._isFormInPanel)return;const t=this.editor.commands.get("link");this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.select(),this.formView.urlInputView.inputView.element.value=t.value||""}_closeFormView(){const t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),void 0!==t.value?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus())}_showUI(t=!1){this.editor.commands.get("link").isEnabled&&(this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI())}_hideUI(){if(!this._isUIInPanel)return;const t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView)}_startUpdatingUI(){const t=this.editor,e=t.editing.view.document;let n=this._getSelectedLinkElement(),r=o();const i=()=>{const t=this._getSelectedLinkElement(),e=o();n&&!t||!n&&e!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=t,r=e};function o(){return e.selection.focus.getAncestors().reverse().find(t=>t.is("element"))}this.listenTo(t.ui,"update",i),this.listenTo(this._balloon,"change:visibleView",i)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document,n=this._getSelectedLinkElement();return{target:n?t.domConverter.mapViewToDom(n):t.domConverter.viewRangeToDom(e.selection.getFirstRange())}}_getSelectedLinkElement(){const t=this.editor.editing.view,e=t.document.selection;if(e.isCollapsed)return Ad(e.getFirstPosition());{const n=e.getFirstRange().getTrimmed(),r=Ad(n.start),i=Ad(n.end);return r&&r==i&&t.createRangeIn(r).getTrimmed().isEqual(n)?r:null}}}function Ad(t){return t.getAncestors().find(t=>(function(t){return t.is("attributeElement")&&!!t.getCustomProperty("link")})(t))}class Id extends rl{constructor(t,e){super(t),this.type=e}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,e=Array.from(t.document.selection.getSelectedBlocks()).filter(e=>Pd(e,t.schema)),n=!0===this.value;t.change(t=>{if(n){let n=e[e.length-1].nextSibling,r=Number.POSITIVE_INFINITY,i=[];for(;n&&"listItem"==n.name&&0!==n.getAttribute("listIndent");){const t=n.getAttribute("listIndent");t<r&&(r=t),i.push({element:n,listIndent:t-r}),n=n.nextSibling}i=i.reverse();for(const e of i)t.setAttribute("listIndent",e.listIndent,e.element)}if(!n){let t=Number.POSITIVE_INFINITY;for(const n of e)n.is("listItem")&&n.getAttribute("listIndent")<t&&(t=n.getAttribute("listIndent"));Dd(e,!0,t=0===t?1:t),Dd(e,!1,t)}for(const r of e.reverse())n&&"listItem"==r.name?t.rename(r,"paragraph"):n||"listItem"==r.name?n||"listItem"!=r.name||r.getAttribute("listType")==this.type||t.setAttribute("listType",this.type,r):(t.setAttributes({listType:this.type,listIndent:0},r),t.rename(r,"listItem"))})}_getValue(){const t=vu(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("listItem")&&t.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.schema,e=vu(this.editor.model.document.selection.getSelectedBlocks());return!!e&&Pd(e,t)}}function Dd(t,e,n){const r=e?t[0]:t[t.length-1];if(r.is("listItem")){let i=r[e?"previousSibling":"nextSibling"],o=r.getAttribute("listIndent");for(;i&&i.is("listItem")&&i.getAttribute("listIndent")>=n;)o>i.getAttribute("listIndent")&&(o=i.getAttribute("listIndent")),i.getAttribute("listIndent")==o&&t[e?"unshift":"push"](i),i=i[e?"previousSibling":"nextSibling"]}}function Pd(t,e){return e.checkChild(t.parent,"listItem")&&!e.isObject(t)}class Od extends rl{constructor(t,e){super(t),this._indentBy="forward"==e?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;let e=Array.from(t.document.selection.getSelectedBlocks());t.change(t=>{const n=e[e.length-1];let r=n.nextSibling;for(;r&&"listItem"==r.name&&r.getAttribute("listIndent")>n.getAttribute("listIndent");)e.push(r),r=r.nextSibling;this._indentBy<0&&(e=e.reverse());for(const i of e){const e=i.getAttribute("listIndent")+this._indentBy;e<0?t.rename(i,"paragraph"):t.setAttribute("listIndent",e,i)}})}_checkEnabled(){const t=vu(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("listItem"))return!1;if(this._indentBy>0){const e=t.getAttribute("listIndent"),n=t.getAttribute("listType");let r=t.previousSibling;for(;r&&r.is("listItem")&&r.getAttribute("listIndent")>=e;){if(r.getAttribute("listIndent")==e)return r.getAttribute("listType")==n;r=r.previousSibling}return!1}return!0}}function Nd(t,e,n,r){const i=e.parent,o=n.mapper,s=n.writer;let a=o.toViewPosition(r.createPositionBefore(t));const l=Ld(t.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:t.getAttribute("listIndent")}),u=t.previousSibling;if(l&&l.getAttribute("listIndent")==t.getAttribute("listIndent")){const t=o.toViewElement(l);a=s.breakContainer(s.createPositionAfter(t))}else a=o.toViewPosition(u&&"listItem"==u.name?r.createPositionAt(u,"end"):r.createPositionBefore(t));if(a=Md(a),s.insert(a,i),u&&"listItem"==u.name){const t=o.toViewElement(u),n=s.createRange(s.createPositionAt(t,0),a).getWalker({ignoreElementEnd:!0});for(const r of n)if(r.item.is("li")){const t=s.breakContainer(s.createPositionBefore(r.item)),i=r.item.parent,o=s.createPositionAt(e,"end");Rd(s,o.nodeBefore,o.nodeAfter),s.move(s.createRangeOn(i),o),n.position=t}}else{const n=i.nextSibling;if(n&&(n.is("ul")||n.is("ol"))){let r=null;for(const e of n.getChildren()){const n=o.toModelElement(e);if(!(n&&n.getAttribute("listIndent")>t.getAttribute("listIndent")))break;r=e}r&&(s.breakContainer(s.createPositionAfter(r)),s.move(s.createRangeOn(r.parent),s.createPositionAt(e,"end")))}}Rd(s,i,i.nextSibling),Rd(s,i.previousSibling,i)}function Rd(t,e,n){return!e||!n||"ul"!=e.name&&"ol"!=e.name?null:e.name!=n.name||e.getAttribute("class")!==n.getAttribute("class")?null:t.mergeContainers(t.createPositionAfter(e))}function Md(t){return t.getLastMatchingPosition(t=>t.item.is("uiElement"))}function Ld(t,e){const n=!!e.sameIndent,r=!!e.smallerIndent,i=e.listIndent;let o=t;for(;o&&"listItem"==o.name;){const t=o.getAttribute("listIndent");if(n&&i==t||r&&i>t)return o;o=o.previousSibling}return null}function Fd(t,e,n,r){t.ui.componentFactory.add(e,i=>{const o=t.commands.get(e),s=new Ma(i);return s.set({label:n,icon:r,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>t.execute(e)),s})}function jd(){const t=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||t?0:Ve.call(this)}function Bd(t){return(e,n,r)=>{const i=r.consumable;if(!i.test(n.item,"insert")||!i.test(n.item,"attribute:listType")||!i.test(n.item,"attribute:listIndent"))return;i.consume(n.item,"insert"),i.consume(n.item,"attribute:listType"),i.consume(n.item,"attribute:listIndent");const o=n.item;Nd(o,function(t,e){const n=e.mapper,r=e.writer,i="numbered"==t.getAttribute("listType")?"ol":"ul",o=function(t){const e=r.createContainerElement("li");return e.getFillerOffset=jd,e}(),s=r.createContainerElement(i,null);return r.insert(r.createPositionAt(s,0),o),n.bindElements(t,o),o}(o,r),r,t)}}function Vd(t,e,n){if(!n.consumable.consume(e.item,"attribute:listType"))return;const r=n.mapper.toViewElement(e.item),i=n.writer;i.breakContainer(i.createPositionBefore(r)),i.breakContainer(i.createPositionAfter(r)),i.rename("numbered"==e.attributeNewValue?"ol":"ul",r.parent)}function Ud(t,e,n){const r=n.mapper.toViewElement(e.item).parent,i=n.writer;Rd(i,r,r.nextSibling),Rd(i,r.previousSibling,r);for(const o of e.item.getChildren())n.consumable.consume(o,"insert")}function zd(t,e,n){if("listItem"!=e.item.name){let t=n.mapper.toViewPosition(e.range.start);const r=n.writer,i=[];for(;("ul"==t.parent.name||"ol"==t.parent.name)&&"li"==(t=r.breakContainer(t)).parent.name;){const e=t,n=r.createPositionAt(t.parent,"end");if(!e.isEqual(n)){const t=r.remove(r.createRange(e,n));i.push(t)}t=r.createPositionAfter(t.parent)}if(i.length>0){for(let e=0;e<i.length;e++){const n=t.nodeBefore;if(t=r.insert(t,i[e]).end,e>0){const e=Rd(r,n,n.nextSibling);e&&e.parent==n&&t.offset--}}Rd(r,t.nodeBefore,t.nodeAfter)}}}function qd(t,e,n){const r=n.mapper.toViewPosition(e.position);Rd(n.writer,r.nodeBefore,r.nodeAfter)}function Hd(t,e,n){if(n.consumable.consume(e.viewItem,{name:!0})){const t=n.writer,r=t.createElement("listItem"),i=function(t){let e=0,n=t.parent;for(;n;){if(n.is("li"))e++;else{const t=n.previousSibling;t&&t.is("li")&&e++}n=n.parent}return e}(e.viewItem);t.setAttribute("listIndent",i,r),t.setAttribute("listType",e.viewItem.parent&&"ol"==e.viewItem.parent.name?"numbered":"bulleted",r);const o=n.splitToAllowedParent(r,e.modelCursor);if(!o)return;t.insert(r,o.position);const s=function(t,e,n){const{writer:r,schema:i}=n;let o=r.createPositionAfter(t);for(const s of e)if("ul"==s.name||"ol"==s.name)o=n.convertItem(s,o).modelCursor;else{const e=n.convertItem(s,r.createPositionAt(t,"end")),a=e.modelRange.start.nodeAfter;a&&a.is("element")&&!i.checkChild(t,a.name)&&(t=e.modelCursor.parent.is("listItem")?e.modelCursor.parent:Qd(e.modelCursor),o=r.createPositionAfter(t))}return o}(r,e.viewItem.getChildren(),n);e.modelRange=t.createRange(e.modelCursor,s),e.modelCursor=o.cursorParent?t.createPositionAt(o.cursorParent,0):e.modelRange.end}}function $d(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){const t=Array.from(e.viewItem.getChildren());for(const e of t)!e.is("li")&&!Yd(e)&&e._remove()}}function Wd(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){if(0===e.viewItem.childCount)return;const t=[...e.viewItem.getChildren()];let n=!1,r=!0;for(const e of t)n&&!Yd(e)&&e._remove(),e.is("text")?(r&&(e._data=e.data.replace(/^\s+/,"")),e.nextSibling&&!Yd(e.nextSibling)||(e._data=e.data.replace(/\s+$/,""))):Yd(e)&&(n=!0),r=!1}}function Jd(t){return(e,n)=>{if(n.isPhantom)return;const r=n.modelPosition.nodeBefore;if(r&&r.is("listItem")){const e=n.mapper.toViewElement(r),i=e.getAncestors().find(Yd),o=t.createPositionAt(e,0).getWalker();for(const t of o){if("elementStart"==t.type&&t.item.is("li")){n.viewPosition=t.previousPosition;break}if("elementEnd"==t.type&&t.item==i){n.viewPosition=t.nextPosition;break}}}}}function Gd(t,[e,n]){let r,i=e.is("documentFragment")?e.getChild(0):e;if(r=n?this.createSelection(n):this.document.selection,i&&i.is("listItem")){const t=r.getFirstPosition();let e=null;if(t.parent.is("listItem")?e=t.parent:t.nodeBefore&&t.nodeBefore.is("listItem")&&(e=t.nodeBefore),e){const t=e.getAttribute("listIndent");if(t>0)for(;i&&i.is("listItem");)i._setAttribute("listIndent",i.getAttribute("listIndent")+t),i=i.nextSibling}}}function Qd(t){const e=new xi({startPosition:t});let n;do{n=e.next()}while(!n.value.item.is("listItem"));return n.value.item}function Kd(t,e,n,r,i,o){const s=Ld(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:t,foo:"b"}),a=i.mapper,l=i.writer,u=s?s.getAttribute("listIndent"):null;let c;if(s)if(u==t){const t=a.toViewElement(s).parent;c=l.createPositionAfter(t)}else{const t=o.createPositionAt(s,"end");c=a.toViewPosition(t)}else c=n;c=Md(c);for(const h of[...r.getChildren()])Yd(h)&&(c=l.move(l.createRangeOn(h),c).end,Rd(l,h,h.nextSibling),Rd(l,h.previousSibling,h))}function Yd(t){return t.is("ol")||t.is("ul")}class Xd extends Xa{static get pluginName(){return"ListEditing"}static get requires(){return[jh]}init(){const t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const e=t.data,n=t.editing;t.model.document.registerPostFixer(e=>(function(t,e){const n=t.document.differ.getChanges(),r=new Map;let i=!1;for(const l of n)if("insert"==l.type&&"listItem"==l.name)o(l.position);else if("insert"==l.type&&"listItem"!=l.name){if("$text"!=l.name){const n=l.position.nodeAfter;n.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",n),i=!0),n.hasAttribute("listType")&&(e.removeAttribute("listType",n),i=!0);for(const e of Array.from(t.createRangeIn(n)).filter(t=>t.item.is("listItem")))o(e.previousPosition)}o(l.position.getShiftedBy(l.length))}else"remove"==l.type&&"listItem"==l.name?o(l.position):"attribute"==l.type&&"listIndent"==l.attributeKey?o(l.range.start):"attribute"==l.type&&"listType"==l.attributeKey&&o(l.range.start);for(const l of r.values())s(l),a(l);return i;function o(t){const e=t.nodeBefore;if(e&&e.is("listItem")){let n=e;if(r.has(n))return;for(;n.previousSibling&&n.previousSibling.is("listItem");)if(r.has(n=n.previousSibling))return;r.set(t.nodeBefore,n)}else{const e=t.nodeAfter;e&&e.is("listItem")&&r.set(e,e)}}function s(t){let n=0,r=null;for(;t&&t.is("listItem");){const o=t.getAttribute("listIndent");if(o>n){let s;null===r?(r=o-n,s=n):(r>o&&(r=o),s=o-r),e.setAttribute("listIndent",s,t),i=!0}else r=null,n=t.getAttribute("listIndent")+1;t=t.nextSibling}}function a(t){let n=[],r=null;for(;t&&t.is("listItem");){const o=t.getAttribute("listIndent");if(r&&r.getAttribute("listIndent")>o&&(n=n.slice(0,o+1)),0!=o)if(n[o]){const r=n[o];t.getAttribute("listType")!=r&&(e.setAttribute("listType",r,t),i=!0)}else n[o]=t.getAttribute("listType");r=t,t=t.nextSibling}}})(t.model,e)),n.mapper.registerViewToModelLength("li",Zd),e.mapper.registerViewToModelLength("li",Zd),n.mapper.on("modelToViewPosition",Jd(n.view)),n.mapper.on("viewToModelPosition",function(t){return(e,n)=>{const r=n.viewPosition,i=r.parent,o=n.mapper;if("ul"==i.name||"ol"==i.name){if(r.isAtEnd){const e=o.toModelElement(r.nodeBefore),i=o.getModelLength(r.nodeBefore);n.modelPosition=t.createPositionBefore(e).getShiftedBy(i)}else{const e=o.toModelElement(r.nodeAfter);n.modelPosition=t.createPositionBefore(e)}e.stop()}else if("li"==i.name&&r.nodeBefore&&("ul"==r.nodeBefore.name||"ol"==r.nodeBefore.name)){const s=o.toModelElement(i);let a=1,l=r.nodeBefore;for(;l&&Yd(l);)a+=o.getModelLength(l),l=l.previousSibling;n.modelPosition=t.createPositionBefore(s).getShiftedBy(a),e.stop()}}}(t.model)),e.mapper.on("modelToViewPosition",Jd(n.view)),n.downcastDispatcher.on("insert",zd,{priority:"high"}),n.downcastDispatcher.on("insert:listItem",Bd(t.model)),e.downcastDispatcher.on("insert",zd,{priority:"high"}),e.downcastDispatcher.on("insert:listItem",Bd(t.model)),n.downcastDispatcher.on("attribute:listType:listItem",Vd,{priority:"high"}),n.downcastDispatcher.on("attribute:listType:listItem",Ud,{priority:"low"}),n.downcastDispatcher.on("attribute:listIndent:listItem",function(t){return(e,n,r)=>{if(!r.consumable.consume(n.item,"attribute:listIndent"))return;const i=r.mapper.toViewElement(n.item),o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));const s=i.parent,a=s.previousSibling,l=o.createRangeOn(s);o.remove(l),a&&a.nextSibling&&Rd(o,a,a.nextSibling),Kd(n.attributeOldValue+1,n.range.start,l.start,i,r,t),Nd(n.item,i,r,t);for(const t of n.item.getChildren())r.consumable.consume(t,"insert")}}(t.model)),n.downcastDispatcher.on("remove:listItem",function(t){return(e,n,r)=>{const i=r.mapper.toViewPosition(n.position).getLastMatchingPosition(t=>!t.item.is("li")).nodeAfter,o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));const s=i.parent,a=s.previousSibling,l=o.createRangeOn(s),u=o.remove(l);a&&a.nextSibling&&Rd(o,a,a.nextSibling),Kd(r.mapper.toModelElement(i).getAttribute("listIndent")+1,n.position,l.start,i,r,t);for(const t of o.createRangeIn(u).getItems())r.mapper.unbindViewElement(t);e.stop()}}(t.model)),n.downcastDispatcher.on("remove",qd,{priority:"low"}),e.upcastDispatcher.on("element:ul",$d,{priority:"high"}),e.upcastDispatcher.on("element:ol",$d,{priority:"high"}),e.upcastDispatcher.on("element:li",Wd,{priority:"high"}),e.upcastDispatcher.on("element:li",Hd),t.model.on("insertContent",Gd,{priority:"high"}),t.commands.add("numberedList",new Id(t,"numbered")),t.commands.add("bulletedList",new Id(t,"bulleted")),t.commands.add("indentList",new Od(t,"forward")),t.commands.add("outdentList",new Od(t,"backward"));const r=n.view.document;this.listenTo(r,"enter",(t,e)=>{const n=this.editor.model.document,r=n.selection.getLastPosition().parent;n.selection.isCollapsed&&"listItem"==r.name&&r.isEmpty&&(this.editor.execute("outdentList"),e.preventDefault(),t.stop())}),this.listenTo(r,"delete",(t,e)=>{if("backward"!==e.direction)return;const n=this.editor.model.document.selection;if(!n.isCollapsed)return;const r=n.getFirstPosition();if(!r.isAtStart)return;const i=r.parent;"listItem"===i.name&&(i.previousSibling&&"listItem"===i.previousSibling.name||(this.editor.execute("outdentList"),e.preventDefault(),t.stop()))},{priority:"high"});const i=t=>(e,n)=>{this.editor.commands.get(t).isEnabled&&(this.editor.execute(t),n())};t.keystrokes.set("Tab",i("indentList")),t.keystrokes.set("Shift+Tab",i("outdentList"))}afterInit(){const t=this.editor.commands,e=t.get("indent"),n=t.get("outdent");e&&e.registerChildCommand(t.get("indentList")),n&&n.registerChildCommand(t.get("outdentList"))}}function Zd(t){let e=1;for(const n of t.getChildren())if("ul"==n.name||"ol"==n.name)for(const t of n.getChildren())e+=Zd(t);return e}var tf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',ef='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';class nf extends Xa{init(){const t=this.editor.t;Fd(this.editor,"numberedList",t("o"),tf),Fd(this.editor,"bulletedList",t("p"),ef)}}function rf(t,e){return t=>{t.on("attribute:url:media",n)};function n(n,r,i){if(!i.consumable.consume(r.item,n.name))return;const o=r.attributeNewValue,s=i.writer,a=i.mapper.toViewElement(r.item);s.remove(s.createRangeIn(a));const l=t.getMediaViewElement(s,o,e);s.insert(s.createPositionAt(a,0),l)}}function of(t,e,n,r){const i=t.createContainerElement("figure",{class:"media"});return i.getFillerOffset=lf,t.insert(t.createPositionAt(i,0),e.getMediaViewElement(t,n,r)),i}function sf(t){const e=t.getSelectedElement();return e&&e.is("media")?e:null}function af(t,e,n){t.change(r=>{const i=r.createElement("media",{url:e});t.insertContent(i,n),r.setSelection(i,"on")})}function lf(){return null}class uf extends rl{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema,r=e.getFirstPosition(),i=sf(e);let o=r.parent;o!=o.root&&(o=o.parent),this.value=i?i.getAttribute("url"):null,this.isEnabled=n.checkChild(o,"media")}execute(t){const e=this.editor.model,n=e.document.selection,r=sf(n);if(r)e.change(e=>{e.setAttribute("url",t,r)});else{const r=Uu(n,e);af(e,t,r)}}}var cf='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const hf="0 0 64 42";class df{constructor(t,e){const n=e.providers,r=e.extraProviders||[],i=new Set(e.removeProviders),o=n.concat(r).filter(t=>{const e=t.name;return e?!i.has(e):(console.warn(Object(de.a)("media-embed-no-provider-name: The configured media provider has no name and cannot be used."),{provider:t}),!1)});this.locale=t,this.providerDefinitions=o}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new ff(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html;let r=e.url;Array.isArray(r)||(r=[r]);for(const e of r){const r=this._getUrlMatches(t,e);if(r)return new ff(this.locale,t,r,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let r=t.replace(/^https?:\/\//,"");return(n=r.match(e))?n:(n=(r=r.replace(/^www\./,"")).match(e))||null}}class ff{constructor(t,e,n,r){this.url=this._getValidUrl(e),this._t=t.t,this._match=n,this._previewRenderer=r}getViewElement(t,e){const n={};if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const r=this._getPreviewHtml(e);return t.createUIElement("div",n,function(t){const e=this.toDomElement(t);return e.innerHTML=r,e})}return this.url&&(n.url=this.url),t.createEmptyElement("oembed",n)}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new Ra,e=new Na;return t.text=this._t("Open media in new tab"),e.content=cf,e.viewBox=hf,new Ks({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},t]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}n(79);class pf extends Xa{static get pluginName(){return"MediaEmbedEditing"}constructor(t){super(t),t.config.define("mediaEmbed",{providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:t=>'<div style="position: relative; padding-bottom: 100%; height: 0; ">'+`<iframe src="https://www.dailymotion.com/embed/video/${t[1]}" `+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>'},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;">'+`<iframe src="https://open.spotify.com/embed/${t[1]}" `+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>'},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:t=>'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">'+`<iframe src="https://www.youtube.com/embed/${t[1]}" `+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>'},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">'+`<iframe src="https://player.vimeo.com/video/${t[1]}" `+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new df(t.locale,t.config.get("mediaEmbed"))}init(){const t=this.editor,e=t.model.schema,n=t.t,r=t.conversion,i=t.config.get("mediaEmbed.previewsInData"),o=this.registry;t.commands.add("mediaEmbed",new uf(t)),e.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),r.for("dataDowncast").elementToElement({model:"media",view:(t,e)=>{const n=t.getAttribute("url");return of(e,o,n,{renderMediaPreview:n&&i})}}),r.for("dataDowncast").add(rf(o,{renderMediaPreview:i})),r.for("editingDowncast").elementToElement({model:"media",view:(t,e)=>{const r=t.getAttribute("url");return function(t,e,n){return e.setCustomProperty("media",!0,t),ju(t,e,{label:n})}(of(e,o,r,{renderForEditingView:!0}),e,n("ap"))}}),r.for("editingDowncast").add(rf(o,{renderForEditingView:!0})),r.for("upcast").elementToElement({view:{name:"oembed",attributes:{url:!0}},model:(t,e)=>{const n=t.getAttribute("url");if(o.hasMedia(n))return e.createElement("media",{url:n})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(t,e)=>{const n=t.getAttribute("data-oembed-url");if(o.hasMedia(n))return e.createElement("media",{url:n})}})}}const gf=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=]+$/;class mf extends Xa{static get requires(){return[nl,Jl]}static get pluginName(){return"AutoMediaEmbed"}constructor(t){super(t),this._timeoutId=null,this._positionToInsert=null}init(){const t=this.editor,e=t.model.document;this.listenTo(t.plugins.get(nl),"inputTransformation",()=>{const t=e.selection.getFirstRange(),n=vs.fromPosition(t.start);n.stickiness="toPrevious";const r=vs.fromPosition(t.end);r.stickiness="toNext",e.once("change:data",()=>{this._embedMediaBetweenPositions(n,r),n.detach(),r.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",()=>{this._timeoutId&&(cr.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(t,e){const n=this.editor,r=n.plugins.get(pf).registry,i=new zi(t,e),o=i.getWalker({ignoreElementEnd:!0});let s="";for(const a of o)a.item.is("textProxy")&&(s+=a.item.data);(s=s.trim()).match(gf)&&r.hasMedia(s)&&n.commands.get("mediaEmbed").isEnabled&&(this._positionToInsert=vs.fromPosition(t),this._timeoutId=cr.window.setTimeout(()=>{n.model.change(t=>{let e;this._timeoutId=null,t.remove(i),"$graveyard"!==this._positionToInsert.root.rootName&&(e=this._positionToInsert),af(n.model,s,e),this._positionToInsert.detach(),this._positionToInsert=null})},100))}}n(81);class bf extends pa{constructor(t,e){super(e);const n=e.t;this.focusTracker=new Vs,this.keystrokes=new Ps,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("bf"),Yc,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("bg"),Xc,"ck-button-cancel","cancel"),this._focusables=new Gs,this._focusCycler=new Ca({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),Kc({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element);const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",(t,e)=>{e.stopPropagation()},{priority:"high"})}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.inputView.element.value.trim()}set url(t){this.urlInputView.inputView.element.value=t.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const t=this.locale.t,e=new Gc(this.locale,Qc),n=e.inputView;return this._urlInputViewInfoDefault=t("br"),this._urlInputViewInfoTip=t("bs"),e.label=t("bt"),e.infoText=this._urlInputViewInfoDefault,n.placeholder="https://example.com",n.on("input",()=>{e.infoText=n.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault}),e}_createButton(t,e,n,r){const i=new Ma(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}}var vf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18.68 2.53c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.08c0-.58-.01-.55.6-.55h17.38zM15.77 14.5v-10H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 6.677a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V6.676z"/></svg>';class yf extends Xa{static get requires(){return[pf]}static get pluginName(){return"MediaEmbedUI"}init(){const t=this.editor,e=t.commands.get("mediaEmbed"),n=t.plugins.get(pf).registry;this.form=new bf(function(t,e){return[e=>{if(!e.url.length)return t("an")},n=>{if(!e.hasMedia(n.url))return t("ao")}]}(t.t,n),t.locale),t.ui.componentFactory.add("mediaEmbed",n=>{const r=qa(n);return this._setUpDropdown(r,this.form,e,t),this._setUpForm(this.form,r,e),r})}_setUpDropdown(t,e,n){const r=this.editor,i=r.t,o=t.buttonView;function s(){r.editing.view.focus(),t.isOpen=!1}t.bind("isEnabled").to(n),t.panelView.children.add(e),o.set({label:i("am"),icon:vf,tooltip:!0}),o.on("open",()=>{e.url=n.value||"",e.urlInputView.select(),e.focus()},{priority:"low"}),t.on("submit",()=>{e.isValid()&&(r.execute("mediaEmbed",e.url),s())}),t.on("change:isOpen",()=>e.resetFormStatus()),t.on("cancel",()=>s())}_setUpForm(t,e,n){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(n,"value"),t.urlInputView.bind("isReadOnly").to(n,"isEnabled",t=>!t),t.saveButtonView.bind("isEnabled").to(n)}}function wf(t){const e={},n=t.getStyle("mso-list");return n&&(e.id=parseInt(n.match(/(^|\s+)l(\d+)/i)[2]),e.order=parseInt(n.match(/\s*lfo(\d+)/i)[1]),e.indent=parseInt(n.match(/\s*level(\d+)/i)[1])),e}n(83);const _f=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class kf{isActive(t){return _f.test(t)}execute(t){const e=new Dh;!function(t,e){for(const n of t.getChildren())if(n.is("b")&&"normal"===n.getStyle("font-weight")){const r=t.getChildIndex(n);e.remove(n),e.insertChild(r,n.getChildren(),t)}}(t.content,e),function(t,e){for(const n of e.createRangeIn(t)){const t=n.item;if(t.is("li")){const n=t.getChild(0);n.is("p")&&e.unwrapElement(n)}}}(t.content,e)}}function Cf(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>1===e.length?" ":Array(e.length+1).join("\xa0 ").substr(0,e.length))}function Ef(t){return btoa(t.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}const Sf=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Tf=/xmlns:o="urn:schemas-microsoft-com/i;class xf{isActive(t){return Sf.test(t)||Tf.test(t)}execute(t){const{body:e,stylesString:n}=function(t){const e=new DOMParser,n=function(t){return Cf(Cf(t)).replace(/(<span style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g,"$1$2").replace(/<span style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xa0</").replace(/ <o:p><\/o:p>/g,"\xa0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>(\s*[\r\n]\s*)</g,"><")}(function(t){const e=t.match(/<\/body>(.*?)(<\/html>|$)/);return e&&e[1]&&(t=t.slice(0,e.index)+t.slice(e.index).replace(e[1],"")),t}(t=t.replace(/<!--\[if gte vml 1]>/g,""))),r=e.parseFromString(n,"text/html");r.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t.childNodes[0].data.length;t.innerHTML=Array(e+1).join("\xa0 ").substr(0,e)});const i=r.body.innerHTML,o=function(t){const e=new pr({blockFillerMode:"nbsp"}),n=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return e.domToView(n)}(r),s=function(t){const e=[],n=[],r=Array.from(t.getElementsByTagName("style"));for(const i of r)i.sheet&&i.sheet.cssRules&&i.sheet.cssRules.length&&(e.push(i.sheet),n.push(i.innerHTML));return{styles:e,stylesString:n.join(" ")}}(r);return{body:o,bodyString:i,styles:s.styles,stylesString:s.stylesString}}(t.dataTransfer.getData("text/html"));(function(t,e){if(!t.childCount)return;const n=new Dh,r=function(t,e){const n=e.createRangeIn(t),r=new Re({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),i=[];for(const o of n)if("elementStart"===o.type&&r.match(o.item)){const t=wf(o.item);i.push({element:o.item,id:t.id,order:t.order,indent:t.indent})}return i}(t,n);if(!r.length)return;let i=null;r.forEach((t,o)=>{if(!i||function(t,e){if(r[o-1].id!==e.id)return!0;const n=e.element.previousSibling;return!n||!function(t){return t.is("ol")||t.is("ul")}(n)}(0,t)){const r=function(t,e){const n=/mso-level-number-format:([^;]*);/gi,r=new RegExp(`@list l${t.id}:level${t.indent}\\s*({[^}]*)`,"gi").exec(e);let i="decimal";if(r&&r[1]){const t=n.exec(r[1]);t&&t[1]&&(i=t[1].trim())}return{type:"bullet"!==i&&"image"!==i?"ol":"ul",style:i}}(t,e);i=function(t,e,n){const r=new Le(t.type),i=e.parent.getChildIndex(e);return n.insertChild(i,r,e.parent),r}(r,t.element,n)}const s=function(t,e){return function(t,e){const n=new Re({name:"span",styles:{"mso-list":"Ignore"}}),r=e.createRangeIn(t);for(const i of r)"elementStart"===i.type&&n.match(i.item)&&e.remove(i.item)}(t,e),e.rename("li",t)}(t.element,n);n.appendChild(s,i)})})(e,n),function(t,e){if(!t.childCount)return;const n=new Dh;!function(t,e,n){const r=n.createRangeIn(e),i=new Re({name:"img"}),o=[];for(const s of r)if(i.match(s.item)){const e=s.item,n=e.getAttribute("v:shapes")?e.getAttribute("v:shapes").split(" "):[];n.length&&n.every(e=>t.indexOf(e)>-1)?o.push(e):e.getAttribute("src")||o.push(e)}for(const s of o)n.remove(s)}(function(t,e){const n=e.createRangeIn(t),r=new Re({name:/v:(.+)/}),i=[];for(const o of n){const t=o.item,e=t.previousSibling&&t.previousSibling.name||null;r.match(t)&&t.getAttribute("o:gfxdata")&&"v:shapetype"!==e&&i.push(o.item.getAttribute("id"))}return i}(t,n),t,n),function(t,e){const n=e.createRangeIn(t),r=new Re({name:/v:(.+)/}),i=[];for(const o of n)r.match(o.item)&&i.push(o.item);for(const o of i)e.remove(o)}(t,n);const r=function(t,e){const n=e.createRangeIn(t),r=new Re({name:"img"}),i=[];for(const o of n)r.match(o.item)&&o.item.getAttribute("src").startsWith("file://")&&i.push(o.item);return i}(t,n);r.length&&function(t,e,n){if(t.length===e.length)for(let r=0;r<t.length;r++){const i=`data:${e[r].type};base64,${Ef(e[r].hex)}`;n.setAttribute("src",i,t[r])}}(r,function(t){if(!t)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),r=t.match(n),i=[];if(r)for(const o of r){let t=!1;o.includes("\\pngblip")?t="image/png":o.includes("\\jpegblip")&&(t="image/jpeg"),t&&i.push({hex:o.replace(e,"").replace(/[^\da-fA-F]/g,""),type:t})}return i}(e),n)}(e,t.dataTransfer.getData("text/rtf")),t.content=e}}function Af(t,e){let n=e.parent;for(;n;){if(n.name===t)return n;n=n.parent}}function If(t,e,n,r,i=1){e>i?r.setAttribute(t,e,n):r.removeAttribute(t,n)}function Df(t,e,n={}){const r=t.createElement("tableCell",n);t.insertElement("paragraph",r),t.insert(r,e)}function Pf(t){return e=>{e.on(`element:${t}`,(t,e,n)=>{const r=e.viewItem;if(!n.consumable.test(r,{name:!0}))return;const i=n.writer.createElement("tableCell"),o=n.splitToAllowedParent(i,e.modelCursor);if(!o)return;n.writer.insert(i,o.position),n.consumable.consume(r,{name:!0});const s=n.writer.createPositionAt(i,0);n.convertChildren(r,s),i.childCount||n.writer.insertElement("paragraph",s),e.modelRange=n.writer.createRange(n.writer.createPositionBefore(i),n.writer.createPositionAfter(i)),e.modelCursor=e.modelRange.end})}}function Of(t){let e=0,n=0;const r=Array.from(t.getChildren()).filter(t=>"th"===t.name||"td"===t.name);for(;n<r.length&&"th"===r[n].name;)e+=parseInt(r[n].getAttribute("colspan")||1),n++;return e}class Nf{constructor(t,e={}){this.table=t,this.startRow=e.startRow||0,this.endRow="number"==typeof e.endRow?e.endRow:void 0,this.includeSpanned=!!e.includeSpanned,this.column="number"==typeof e.column?e.column:void 0,this._skipRows=new Set,this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const t=this.table.getChild(this._row);if(!t||this._isOverEndRow())return{done:!0};let e,n,r;if(this._isSpanned(this._row,this._column))e=this._getSpanned(this._row,this._column),n=!this.includeSpanned||this._shouldSkipRow()||this._shouldSkipColumn(),r=this._formatOutValue(e,this._column,!0);else{if(!(e=t.getChild(this._cellIndex)))return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next();const i=parseInt(e.getAttribute("colspan")||1),o=parseInt(e.getAttribute("rowspan")||1);(i>1||o>1)&&this._recordSpans(this._row,this._column,o,i,e),this._nextCellAtColumn=this._column+i,n=this._shouldSkipRow()||this._shouldSkipColumn(),r=this._formatOutValue(e,this._column,!1,o,i)}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,n?this.next():r}skipRow(t){this._skipRows.add(t)}_isOverEndRow(){return void 0!==this.endRow&&this._row>this.endRow}_formatOutValue(t,e,n,r=1,i=1){return{done:!1,value:{cell:t,row:this._row,column:e,isSpanned:n,rowspan:r,colspan:i,cellIndex:this._cellIndex}}}_shouldSkipRow(){const t=this._row<this.startRow,e=this._skipRows.has(this._row);return t||e}_shouldSkipColumn(){return void 0!==this.column&&this.column!=this._column}_isSpanned(t,e){return!!this._spannedCells.has(t)&&this._spannedCells.get(t).has(e)}_getSpanned(t,e){return this._spannedCells.get(t).get(e)}_recordSpans(t,e,n,r,i){for(let o=e+1;o<=e+r-1;o++)this._markSpannedCell(t,o,i);for(let o=t+1;o<t+n;o++)for(let t=e;t<=e+r-1;t++)this._markSpannedCell(o,t,i)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}}function Rf(t){return!!t.getCustomProperty("table")&&Fu(t)}function Mf(t){const e=t.getSelectedElement();return e&&Rf(e)?e:null}function Lf(t){const e=Af("table",t.getFirstPosition());return e&&Rf(e.parent)?e.parent:null}function Ff(t={}){return e=>e.on("insert:table",(e,n,r)=>{const i=n.item;if(!r.consumable.consume(i,"insert"))return;r.consumable.consume(i,"attribute:headingRows:table"),r.consumable.consume(i,"attribute:headingColumns:table");const o=t&&t.asWidget,s=r.writer.createContainerElement("figure",{class:"table"}),a=r.writer.createContainerElement("table");let l;r.writer.insert(r.writer.createPositionAt(s,0),a),o&&(l=function(t,e){return e.setCustomProperty("table",!0,t),ju(t,e,{hasSelectionHandle:!0})}(s,r.writer));const u=new Nf(i),c={headingRows:i.getAttribute("headingRows")||0,headingColumns:i.getAttribute("headingColumns")||0},h=new Map;for(const f of u){const{row:e,cell:n}=f,o=Gf(Jf(e,c),a,r),s=i.getChild(e),l=h.get(e)||$f(s,e,o,r);h.set(e,l),r.consumable.consume(n,"insert"),Hf(f,c,r.writer.createPositionAt(l,"end"),r,t)}const d=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(i,o?l:s),r.writer.insert(d,o?l:s)})}function jf(t={}){return e=>e.on("insert:tableRow",(e,n,r)=>{const i=n.item;if(!r.consumable.consume(i,"insert"))return;const o=i.parent,s=Xf(r.mapper.toViewElement(o)),a=o.getChildIndex(i),l=new Nf(o,{startRow:a,endRow:a}),u={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},c=new Map;for(const h of l){const e=Gf(Jf(a,u),s,r),n=c.get(a)||$f(i,a,e,r);c.set(a,n),r.consumable.consume(h.cell,"insert"),Hf(h,u,r.writer.createPositionAt(n,"end"),r,t)}})}function Bf(t={}){return e=>e.on("insert:tableCell",(e,n,r)=>{const i=n.item;if(!r.consumable.consume(i,"insert"))return;const o=i.parent,s=o.parent,a=s.getChildIndex(o),l=new Nf(s,{startRow:a,endRow:a}),u={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0};for(const c of l)if(c.cell===i){const e=r.mapper.toViewElement(o);return void Hf(c,u,r.writer.createPositionAt(e,o.getChildIndex(i)),r,t)}})}function Vf(t={}){const e=!!t.asWidget;return t=>t.on("attribute:headingRows:table",(t,n,r)=>{const i=n.item;if(!r.consumable.consume(n.item,t.name))return;const o=Xf(r.mapper.toViewElement(i)),s=n.attributeOldValue,a=n.attributeNewValue;if(a>s){const t=Array.from(i.getChildren()).filter(({index:t})=>l(t,s-1,a));Yf(t,Gf("thead",o,r),r,"end");for(const n of t)for(const t of n.getChildren())zf(t,"th",r,e);Kf("tbody",o,r)}else{Yf(Array.from(i.getChildren()).filter(({index:t})=>l(t,a-1,s)).reverse(),Gf("tbody",o,r),r,0);const t=new Nf(i,{startRow:a?a-1:a,endRow:s-1}),n={headingRows:i.getAttribute("headingRows")||0,headingColumns:i.getAttribute("headingColumns")||0};for(const i of t)qf(i,n,r,e);Kf("thead",o,r)}function l(t,e,n){return t>e&&t<n}})}function Uf(t={}){const e=!!t.asWidget;return t=>t.on("attribute:headingColumns:table",(t,n,r)=>{const i=n.item;if(!r.consumable.consume(n.item,t.name))return;const o={headingRows:i.getAttribute("headingRows")||0,headingColumns:i.getAttribute("headingColumns")||0},s=n.attributeOldValue,a=n.attributeNewValue,l=(s>a?s:a)-1;for(const u of new Nf(i))u.column>l||qf(u,o,r,e)})}function zf(t,e,n,r){const i=n.writer,o=n.mapper.toViewElement(t);if(!o)return;let s;r?(s=Vu(i.createEditableElement(e,o.getAttributes()),i),i.insert(i.createPositionAfter(o),s),i.move(i.createRangeIn(o),i.createPositionAt(s,0)),i.remove(i.createRangeOn(o))):s=i.rename(e,o),n.mapper.unbindViewElement(o),n.mapper.bindElements(t,s)}function qf(t,e,n,r){const{cell:i}=t,o=Wf(t,e),s=n.mapper.toViewElement(i);s&&s.name!==o&&zf(i,o,n,r)}function Hf(t,e,n,r,i){const o=i&&i.asWidget,s=Wf(t,e),a=o?Vu(r.writer.createEditableElement(s),r.writer):r.writer.createContainerElement(s),l=t.cell,u=l.getChild(0),c=1===l.childCount&&"paragraph"===u.name;if(r.writer.insert(n,a),c&&![...u.getAttributeKeys()].length){const t=l.getChild(0),e=r.writer.createPositionAt(a,"end");if(r.consumable.consume(t,"insert"),i.asWidget){const n=r.writer.createContainerElement("span");r.mapper.bindElements(t,n),r.writer.insert(e,n),r.mapper.bindElements(l,a)}else r.mapper.bindElements(l,a),r.mapper.bindElements(t,a)}else r.mapper.bindElements(l,a)}function $f(t,e,n,r){r.consumable.consume(t,"insert");const i=r.writer.createContainerElement("tr");r.mapper.bindElements(t,i);const o=t.parent.getAttribute("headingRows")||0,s=r.writer.createPositionAt(n,o>0&&e>=o?e-o:e);return r.writer.insert(s,i),i}function Wf(t,e){const{row:n,column:r}=t,{headingColumns:i,headingRows:o}=e;return o&&o>n?"th":i&&i>r?"th":"td"}function Jf(t,e){return t<e.headingRows?"thead":"tbody"}function Gf(t,e,n){return Qf(t,e)||function(t,e,n){const r=n.writer.createContainerElement(t),i=n.writer.createPositionAt(e,"tbody"==t?"end":0);return n.writer.insert(i,r),r}(t,e,n)}function Qf(t,e){for(const n of e.getChildren())if(n.name==t)return n}function Kf(t,e,n){const r=Qf(t,e);r&&0===r.childCount&&n.writer.remove(n.writer.createRangeOn(r))}function Yf(t,e,n,r){for(const i of t){const t=n.mapper.toViewElement(i);t&&n.writer.move(n.writer.createRangeOn(t),n.writer.createPositionAt(e,r))}}function Xf(t){for(const e of t.getChildren())if("table"===e.name)return e}class Zf extends rl{refresh(){const t=this.editor.model,e=t.schema,n=function(t){const e=t.parent;return e===e.root?e:e.parent}(t.document.selection.getFirstPosition());this.isEnabled=e.checkChild(n,"table")}execute(t={}){const e=this.editor.model,n=e.document.selection,r=this.editor.plugins.get("TableUtils"),i=parseInt(t.rows)||2,o=parseInt(t.columns)||2,s=Uu(n,e);e.change(t=>{const n=r.createTable(t,i,o);e.insertContent(n,s),t.setSelection(t.createPositionAt(n.getNodeByPath([0,0,0]),0))})}}class tp extends rl{constructor(t,e={}){super(t),this.order=e.order||"below"}refresh(){const t=Af("table",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),r=Af("tableCell",e.getFirstPosition()).parent,i=r.parent,o=i.getChildIndex(r);n.insertRows(i,{rows:1,at:"below"===this.order?o+1:o})}}class ep extends rl{constructor(t,e={}){super(t),this.order=e.order||"right"}refresh(){const t=Af("table",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),r=Af("tableCell",e.getFirstPosition()),i=r.parent.parent,{column:o}=n.getCellLocation(r);n.insertColumns(i,{columns:1,at:"right"===this.order?o+1:o})}}class np extends rl{constructor(t,e={}){super(t),this.direction=e.direction||"horizontally"}refresh(){const t=Af("tableCell",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t}execute(){const t=Af("tableCell",this.editor.model.document.selection.getFirstPosition()),e="horizontally"===this.direction,n=this.editor.plugins.get("TableUtils");e?n.splitCellHorizontally(t,2):n.splitCellVertically(t,2)}}class rp extends rl{constructor(t,e){super(t),this.direction=e.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}execute(){const t=this.editor.model,e=Af("tableCell",t.document.selection.getFirstPosition()),n=this.value,r=this.direction;t.change(t=>{const i="right"==r||"down"==r,o=i?e:n,s=i?n:e,a=s.parent;!function(t,e,n){ip(t)||(ip(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end"))),n.remove(t)}(s,o,t);const l=this.isHorizontal?"colspan":"rowspan",u=parseInt(e.getAttribute(l)||1),c=parseInt(n.getAttribute(l)||1);t.setAttribute(l,u+c,o),t.setSelection(t.createRangeIn(o)),a.childCount||function(t,e){const n=t.parent,r=n.getChildIndex(t);for(const{cell:i,row:o,rowspan:s}of new Nf(n,{endRow:r}))o+s-1>=r&&If("rowspan",s-1,i,e);e.remove(t)}(a,t)})}_getMergeableCell(){const t=Af("tableCell",this.editor.model.document.selection.getFirstPosition());if(!t)return;const e=this.editor.plugins.get("TableUtils"),n=this.isHorizontal?function(t,e,n){const r="right"==e?t.nextSibling:t.previousSibling;if(!r)return;const i="right"==e?t:r,o="right"==e?r:t,{column:s}=n.getCellLocation(i),{column:a}=n.getCellLocation(o);return s+parseInt(i.getAttribute("colspan")||1)===a?r:void 0}(t,this.direction,e):function(t,e){const n=t.parent,r=n.parent,i=r.getChildIndex(n);if("down"==e&&i===r.childCount-1||"up"==e&&0===i)return;const o=parseInt(t.getAttribute("rowspan")||1),s=r.getAttribute("headingRows")||0;if(s&&("down"==e&&i+o===s||"up"==e&&i===s))return;const a=parseInt(t.getAttribute("rowspan")||1),l="down"==e?i+a:i,u=[...new Nf(r,{endRow:l})],c=u.find(e=>e.cell===t).column,h=u.find(({row:t,rowspan:n,column:r})=>r===c&&("down"==e?t===l:l===t+n));return h&&h.cell}(t,this.direction);if(!n)return;const r=this.isHorizontal?"rowspan":"colspan",i=parseInt(t.getAttribute(r)||1);return parseInt(n.getAttribute(r)||1)===i?n:void 0}}function ip(t){return 1==t.childCount&&t.getChild(0).is("paragraph")&&t.getChild(0).isEmpty}class op extends rl{refresh(){const t=Af("tableCell",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t&&t.parent.parent.childCount>1}execute(){const t=this.editor.model,e=Af("tableCell",t.document.selection.getFirstPosition()).parent,n=e.parent,r=n.getChildIndex(e),i=n.getAttribute("headingRows")||0;t.change(t=>{i&&r<=i&&If("headingRows",i-1,n,t,0);const o=[...new Nf(n,{endRow:r})],s=new Map;o.filter(({row:t,rowspan:e})=>t===r&&e>1).forEach(({column:t,cell:e,rowspan:n})=>s.set(t,{cell:e,rowspanToSet:n-1})),o.filter(({row:t,rowspan:e})=>t<=r-1&&t+e>r).forEach(({cell:e,rowspan:n})=>If("rowspan",n-1,e,t));const a=r+1,l=new Nf(n,{includeSpanned:!0,startRow:a,endRow:a});let u;for(const{row:e,column:r,cell:i}of[...l])if(s.has(r)){const{cell:i,rowspanToSet:o}=s.get(r),a=u?t.createPositionAfter(u):t.createPositionAt(n.getChild(e),0);t.move(t.createRangeOn(i),a),If("rowspan",o,i,t),u=i}else u=i;t.remove(e)})}}class sp extends rl{refresh(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),r=Af("tableCell",e.getFirstPosition());this.isEnabled=!!r&&n.getColumns(r.parent.parent)>1}execute(){const t=this.editor.model,e=Af("tableCell",t.document.selection.getFirstPosition()),n=e.parent,r=n.parent,i=r.getAttribute("headingColumns")||0,o=r.getChildIndex(n),s=[...new Nf(r)],a=s.find(t=>t.cell===e).column;t.change(t=>{i&&o<=i&&t.setAttribute("headingColumns",i-1,r);for(const{cell:e,column:n,colspan:r}of s)n<=a&&r>1&&n+r>a?If("colspan",r-1,e,t):n===a&&t.remove(e)})}}class ap extends rl{refresh(){const t=Af("tableCell",this.editor.model.document.selection.getFirstPosition()),e=!!t;this.isEnabled=e,this.value=e&&this._isInHeading(t,t.parent.parent)}execute(t={}){const e=this.editor.model,n=Af("tableCell",e.document.selection.getFirstPosition()).parent,r=n.parent,i=r.getAttribute("headingRows")||0,o=n.index;if(t.forceValue===this.value)return;const s=this.value?o:o+1;e.change(t=>{if(s){const e=function(t,e,n){const r=[],i=new Nf(t,{startRow:e>n?n:0,endRow:e-1});for(const{row:o,rowspan:s,cell:a}of i)s>1&&o+s>e&&r.push(a);return r}(r,s,i);for(const n of e)lp(n,s,t)}If("headingRows",s,r,t,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||0);return!!n&&t.parent.index<n}}function lp(t,e,n){const r=t.parent,i=r.parent,o=e-r.index,s={},a=parseInt(t.getAttribute("rowspan"))-o;a>1&&(s.rowspan=a);const l=parseInt(t.getAttribute("colspan")||1);l>1&&(s.colspan=l);const u=i.getChildIndex(r),c=u+o,h=[...new Nf(i,{startRow:u,endRow:c,includeSpanned:!0})];let d;for(const{row:f,column:p,cell:g,cellIndex:m}of h)if(g===t&&void 0===d&&(d=p),void 0!==d&&d===p&&f===c){const t=i.getChild(f);Df(n,n.createPositionAt(t,m),s)}If("rowspan",o,t,n)}class up extends rl{refresh(){const t=Af("tableCell",this.editor.model.document.selection.getFirstPosition()),e=!!t;this.isEnabled=e,this.value=e&&this._isInHeading(t,t.parent.parent)}execute(t={}){const e=this.editor.model,n=e.document.selection,r=this.editor.plugins.get("TableUtils"),i=Af("tableCell",n.getFirstPosition()),o=i.parent.parent,{column:s}=r.getCellLocation(i);if(t.forceValue===this.value)return;const a=this.value?s:s+1;e.change(t=>{If("headingColumns",a,o,t,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingColumns")||0),r=this.editor.plugins.get("TableUtils"),{column:i}=r.getCellLocation(t);return!!n&&i<n}}class cp extends Xa{static get pluginName(){return"TableUtils"}getCellLocation(t){const e=t.parent,n=e.parent,r=n.getChildIndex(e),i=new Nf(n,{startRow:r,endRow:r});for(const{cell:o,row:s,column:a}of i)if(o===t)return{row:s,column:a}}createTable(t,e,n){const r=t.createElement("table");return hp(t,r,0,e,n),r}insertRows(t,e={}){const n=e.at||0,r=e.rows||1;this.editor.model.change(e=>{const i=t.getAttribute("headingRows")||0;if(i>n&&e.setAttribute("headingRows",i+r,t),0===n||n===t.childCount)return void hp(e,t,n,r,this.getColumns(t));const o=new Nf(t,{endRow:n});let s=0;for(const{row:t,rowspan:a,colspan:l,cell:u}of o)t<n&&t+a>n&&e.setAttribute("rowspan",a+r,u),t===n&&(s+=l);hp(e,t,n,r,s)})}insertColumns(t,e={}){const n=e.at||0,r=e.columns||1;this.editor.model.change(e=>{const i=t.getAttribute("headingColumns");n<i&&e.setAttribute("headingColumns",i+r,t);const o=this.getColumns(t);if(0===n||o===n){for(const i of t.getChildren())dp(r,e,e.createPositionAt(i,n?"end":0));return}const s=new Nf(t,{column:n,includeSpanned:!0});for(const{row:a,cell:l,cellIndex:u}of s){const i=parseInt(l.getAttribute("rowspan")||1),o=parseInt(l.getAttribute("colspan")||1);if(l.index!==n&&o>1){if(e.setAttribute("colspan",o+r,l),s.skipRow(a),i>1)for(let t=a+1;t<a+i;t++)s.skipRow(t)}else{const n=e.createPositionAt(t.getChild(a),u);dp(r,e,n)}}})}splitCellVertically(t,e=2){const n=this.editor.model,r=t.parent.parent,i=parseInt(t.getAttribute("rowspan")||1),o=parseInt(t.getAttribute("colspan")||1);n.change(n=>{if(o>1){const{newCellsSpan:r,updatedSpan:s}=fp(o,e);If("colspan",s,t,n);const a={};r>1&&(a.colspan=r),i>1&&(a.rowspan=i),dp(o>e?e-1:o-1,n,n.createPositionAfter(t),a)}if(o<e){const s=e-o,a=[...new Nf(r)],{column:l}=a.find(({cell:e})=>e===t),u=a.filter(({cell:e,colspan:n,column:r})=>e!==t&&r===l||r<l&&r+n>l);for(const{cell:t,colspan:e}of u)n.setAttribute("colspan",e+s,t);const c={};i>1&&(c.rowspan=i),dp(s,n,n.createPositionAfter(t),c);const h=r.getAttribute("headingColumns")||0;h>l&&If("headingColumns",h+s,r,n)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,r=t.parent,i=r.parent,o=i.getChildIndex(r),s=parseInt(t.getAttribute("rowspan")||1),a=parseInt(t.getAttribute("colspan")||1);n.change(n=>{if(s>1){const r=[...new Nf(i,{startRow:o,endRow:o+s-1,includeSpanned:!0})],{newCellsSpan:l,updatedSpan:u}=fp(s,e);If("rowspan",u,t,n);const{column:c}=r.find(({cell:e})=>e===t),h={};l>1&&(h.rowspan=l),a>1&&(h.colspan=a);for(const{column:t,row:e,cellIndex:s}of r)e>=o+u&&t===c&&(e+o+u)%l==0&&dp(1,n,n.createPositionAt(i.getChild(e),s),h)}if(s<e){const r=e-s,l=[...new Nf(i,{startRow:0,endRow:o})];for(const{cell:e,rowspan:i,row:s}of l)e!==t&&s+i>o&&n.setAttribute("rowspan",i+r,e);const u={};a>1&&(u.colspan=a),hp(n,i,o+1,r,1,u);const c=i.getAttribute("headingRows")||0;c>o&&If("headingRows",c+r,i,n)}})}getColumns(t){return[...t.getChild(0).getChildren()].reduce((t,e)=>t+parseInt(e.getAttribute("colspan")||1),0)}}function hp(t,e,n,r,i,o={}){for(let s=0;s<r;s++){const r=t.createElement("tableRow");t.insert(r,e,n),dp(i,t,t.createPositionAt(r,"end"),o)}}function dp(t,e,n,r={}){for(let i=0;i<t;i++)Df(e,n,r)}function fp(t,e){if(t<e)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(t/e);return{newCellsSpan:n,updatedSpan:t-n*e+n}}function pp(t,e){let n=!1;const r=function(t){const e=parseInt(t.getAttribute("headingRows")||0),n=t.childCount,r=[];for(const{row:i,rowspan:o,cell:s}of new Nf(t)){if(o<2)continue;const t=i<e?e:n;i+o>t&&r.push({cell:s,rowspan:t-i})}return r}(t);if(r.length){n=!0;for(const t of r)If("rowspan",t.rowspan,t.cell,e,1)}return n}function gp(t,e){let n=!1;const r=function(t){const e={};for(const{row:n}of new Nf(t,{includeSpanned:!0}))e[n]||(e[n]=0),e[n]+=1;return e}(t),i=r[0];if(!Object.values(r).every(t=>t===i)){const i=Object.values(r).reduce((t,e)=>e>t?e:t,0);for(const[o,s]of Object.entries(r)){const r=i-s;if(r){for(let n=0;n<r;n++)Df(e,e.createPositionAt(t.getChild(o),"end"));n=!0}}}return n}function mp(t){const e=t.attributeKey;return"attribute"===t.type&&("headingRows"===e||"colspan"===e||"rowspan"===e)}function bp(t,e){let n=!1;for(const r of t.getChildren())n=vp(r,e)||n;return n}function vp(t,e){let n=!1;for(const r of t.getChildren())n=yp(r,e)||n;return n}function yp(t,e){if(0==t.childCount)return e.insertElement("paragraph",t),!0;const n=Array.from(t.getChildren()).filter(t=>t.is("text"));for(const r of n)e.wrap(e.createRangeOn(r),"paragraph");return!!n.length}function wp(t){return!(!t.position||!t.position.parent.is("tableCell"))&&("insert"==t.type&&"$text"==t.name||"remove"==t.type)}function _p(t,e){if(!Array.from(t.getChildren()).some(t=>t.is("paragraph")))return!1;if("attribute"==e){const e=Array.from(t.getChild(0).getAttributeKeys()).length;return 1===t.childCount&&e<2}return t.childCount<=("insert"==e?2:1)}n(85);class kp extends Xa{static get pluginName(){return"TableEditing"}init(){const t=this.editor,e=t.model,n=e.schema,r=t.conversion;n.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isLimit:!0,isObject:!0,isBlock:!0}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0}),n.extend("$block",{allowIn:"tableCell"}),n.addChildCheck((t,e)=>{if("table"==e.name&&Array.from(t.getNames()).includes("table"))return!1}),r.for("upcast").add(t=>{t.on("element:table",(t,e,n)=>{const r=e.viewItem;if(!n.consumable.test(r,{name:!0}))return;const{rows:i,headingRows:o,headingColumns:s}=function(t){const e={headingRows:0,headingColumns:0},n=[],r=[];let i;for(const o of Array.from(t.getChildren()))if("tbody"===o.name||"thead"===o.name||"tfoot"===o.name){"thead"!==o.name||i||(i=o);const t=Array.from(o.getChildren()).filter(t=>t.is("element","tr"));for(const o of t)if("thead"===o.parent.name&&o.parent===i)e.headingRows++,n.push(o);else{r.push(o);const t=Of(o);t>e.headingColumns&&(e.headingColumns=t)}}return e.rows=[...n,...r],e}(r),a={};s&&(a.headingColumns=s),o&&(a.headingRows=o);const l=n.writer.createElement("table",a),u=n.splitToAllowedParent(l,e.modelCursor);if(u){if(n.writer.insert(l,u.position),n.consumable.consume(r,{name:!0}),i.length)i.forEach(t=>n.convertItem(t,n.writer.createPositionAt(l,"end")));else{const t=n.writer.createElement("tableRow");n.writer.insert(t,n.writer.createPositionAt(l,"end")),Df(n.writer,n.writer.createPositionAt(t,"end"))}e.modelRange=n.writer.createRange(n.writer.createPositionBefore(l),n.writer.createPositionAfter(l)),e.modelCursor=u.cursorParent?n.writer.createPositionAt(u.cursorParent,0):e.modelRange.end}})}),r.for("editingDowncast").add(Ff({asWidget:!0})),r.for("dataDowncast").add(Ff()),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("editingDowncast").add(jf({asWidget:!0})),r.for("dataDowncast").add(jf()),r.for("downcast").add(t=>t.on("remove:tableRow",(t,e,n)=>{t.stop();const r=n.writer,i=n.mapper,o=i.toViewPosition(e.position).getLastMatchingPosition(t=>!t.item.is("tr")).nodeAfter,s=o.parent,a=r.createRangeOn(o),l=r.remove(a);for(const u of r.createRangeIn(l).getItems())i.unbindViewElement(u);s.childCount||r.remove(r.createRangeOn(s))},{priority:"higher"})),r.for("upcast").add(Pf("td")),r.for("upcast").add(Pf("th")),r.for("editingDowncast").add(Bf({asWidget:!0})),r.for("dataDowncast").add(Bf()),r.attributeToAttribute({model:"colspan",view:"colspan"}),r.attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("editingDowncast").add(Uf({asWidget:!0})),r.for("dataDowncast").add(Uf()),r.for("editingDowncast").add(Vf({asWidget:!0})),r.for("dataDowncast").add(Vf()),t.commands.add("insertTable",new Zf(t)),t.commands.add("insertTableRowAbove",new tp(t,{order:"above"})),t.commands.add("insertTableRowBelow",new tp(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new ep(t,{order:"left"})),t.commands.add("insertTableColumnRight",new ep(t,{order:"right"})),t.commands.add("removeTableRow",new op(t)),t.commands.add("removeTableColumn",new sp(t)),t.commands.add("splitTableCellVertically",new np(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new np(t,{direction:"horizontally"})),t.commands.add("mergeTableCellRight",new rp(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new rp(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new rp(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new rp(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new up(t)),t.commands.add("setTableRowHeader",new ap(t)),function(t){t.document.registerPostFixer(e=>(function(t,e){const n=e.document.differ.getChanges();let r=!1;const i=new Set;for(const o of n){let e;"table"==o.name&&"insert"==o.type&&(e=o.position.nodeAfter),"tableRow"!=o.name&&"tableCell"!=o.name||(e=Af("table",o.position)),mp(o)&&(e=Af("table",o.range.start)),e&&!i.has(e)&&(r=pp(e,t)||r,r=gp(e,t)||r,i.add(e))}return r})(e,t))}(e),function(t){t.document.registerPostFixer(()=>(function(t){const e=t.document.differ,n=new Set;for(const r of e.getChanges()){const t="insert"==r.type||"remove"==r.type?r.position.parent:r.range.start.parent;t.is("tableCell")&&_p(t,r.type)&&n.add(t)}if(n.size){for(const t of n.values())e.refreshItem(t);return!0}return!1})(t))}(e),function(t){t.document.registerPostFixer(e=>(function(t,e){const n=e.document.differ.getChanges();let r=!1;for(const i of n)"insert"==i.type&&"table"==i.name&&(r=bp(i.position.nodeAfter,t)||r),"insert"==i.type&&"tableRow"==i.name&&(r=vp(i.position.nodeAfter,t)||r),"insert"==i.type&&"tableCell"==i.name&&(r=yp(i.position.nodeAfter,t)||r),wp(i)&&(r=yp(i.position.parent,t)||r);return r})(e,t))}(e),this.editor.keystrokes.set("Tab",(...t)=>this._handleTabOnSelectedTable(...t),{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"})}static get requires(){return[cp]}_handleTabOnSelectedTable(t,e){const n=this.editor,r=n.model.document.selection;if(!r.isCollapsed&&1===r.rangeCount&&r.getFirstRange().isFlat){const t=r.getSelectedElement();if(!t||!t.is("table"))return;e(),n.model.change(e=>{e.setSelection(e.createRangeIn(t.getChild(0).getChild(0)))})}}_getTabHandler(t){const e=this.editor;return(n,r)=>{const i=Af("tableCell",e.model.document.selection.getFirstPosition());if(!i)return;r();const o=i.parent,s=o.parent,a=s.getChildIndex(o),l=o.getChildIndex(i),u=0===l;if(!t&&u&&0===a)return;const c=l===o.childCount-1;if(t&&a===s.childCount-1&&c&&(e.execute("insertTableRowBelow"),a===s.childCount-1))return;let h;if(t&&c){const t=s.getChild(a+1);h=t.getChild(0)}else if(!t&&u){const t=s.getChild(a-1);h=t.getChild(t.childCount-1)}else h=o.getChild(l+(t?1:-1));e.model.change(t=>{t.setSelection(t.createRangeIn(h))})}}}n(87);class Cp extends pa{constructor(t){super(t);const e=this.bindTemplate;this.items=this.createCollection(),this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(t,e)=>`${e} \xd7 ${t}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},children:this.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:e.to("label")}]}],on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(()=>{this.fire("execute")})}});for(let n=0;n<100;n++){const t=new Ep;t.on("over",()=>{const t=Math.floor(n/10),e=n%10;this.set("rows",t+1),this.set("columns",e+1)}),this.items.add(t)}this.on("change:columns",()=>{this._highlightGridBoxes()}),this.on("change:rows",()=>{this._highlightGridBoxes()})}focus(){}focusLast(){}_highlightGridBoxes(){const t=this.rows,e=this.columns;this.items.map((n,r)=>{const i=Math.floor(r/10)<t&&r%10<e;n.set("isOn",i)})}}class Ep extends pa{constructor(t){super(t);const e=this.bindTemplate;this.set("isOn",!1),this.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",e.if("isOn","ck-on")]},on:{mouseover:e.to("over")}})}}var Sp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',Tp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',xp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',Ap='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class Ip extends Xa{init(){const t=this.editor,e=this.editor.t,n="ltr"===t.locale.contentLanguageDirection;t.ui.componentFactory.add("insertTable",n=>{const r=t.commands.get("insertTable"),i=qa(n);i.bind("isEnabled").to(r),i.buttonView.set({icon:Sp,label:e("t"),tooltip:!0});const o=new Cp(n);return i.panelView.children.add(o),o.delegate("execute").to(i),i.buttonView.on("open",()=>{o.rows=0,o.columns=0}),i.on("execute",()=>{t.execute("insertTable",{rows:o.rows,columns:o.columns}),t.editing.view.focus()}),i}),t.ui.componentFactory.add("tableColumn",t=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("u"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:e("v")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:e("w")}},{type:"button",model:{commandName:"removeTableColumn",label:e("x")}}];return this._prepareDropdown(e("y"),Tp,r,t)}),t.ui.componentFactory.add("tableRow",t=>{const n=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("z"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowBelow",label:e("aa")}},{type:"button",model:{commandName:"insertTableRowAbove",label:e("ab")}},{type:"button",model:{commandName:"removeTableRow",label:e("ac")}}];return this._prepareDropdown(e("ad"),xp,n,t)}),t.ui.componentFactory.add("mergeTableCells",t=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("ae")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:e("af")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("ag")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:e("ah")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("ai")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("aj")}}];return this._prepareDropdown(e("ak"),Ap,r,t)})}_prepareDropdown(t,e,n,r){const i=this.editor,o=qa(r),s=[],a=new mn;for(const l of n)Dp(l,i,s,a);return Ha(o,a),o.buttonView.set({label:t,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(s,"isEnabled",(...t)=>t.some(t=>t)),this.listenTo(o,"execute",t=>{i.execute(t.source.commandName),i.editing.view.focus()}),o}}function Dp(t,e,n,r){const i=t.model=new $h(t.model),{commandName:o,bindIsOn:s}=t.model;if("separator"!==t.type){const t=e.commands.get(o);n.push(t),i.set({commandName:o}),i.bind("isEnabled").to(t),s&&i.bind("isOn").to(t,"value")}i.set({withText:!0}),r.add(t)}n(89),n.d(e,"default",function(){return Pp});class Pp extends Ya{}Pp.builtinPlugins=[class extends Xa{static get requires(){return[nl,ul,fl,Tl,Jl]}static get pluginName(){return"Essentials"}},eu,class extends Xa{static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats()}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&new ru(this.editor,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&new ru(this.editor,/^1[.|)]\s$/,"numberedList")}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const t=su(this.editor,"bold");new iu(this.editor,/(\*\*)([^*]+)(\*\*)$/g,t),new iu(this.editor,/(__)([^_]+)(__)$/g,t)}if(t.get("italic")){const t=su(this.editor,"italic");new iu(this.editor,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,t),new iu(this.editor,/(?:^|[^_])(_)([^_]+)(_)$/g,t)}if(t.get("code")){const t=su(this.editor,"code");new iu(this.editor,/(`)([^`]+)(`)$/g,t)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(e=>{const n=new RegExp(`^(#{${e[7]}})\\s$`);new ru(this.editor,n,()=>{if(!t.isEnabled)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&new ru(this.editor,/^>\s$/,"blockQuote")}},class extends Xa{static get requires(){return[uu,du]}static get pluginName(){return"Bold"}},class extends Xa{static get requires(){return[pu,bu]}static get pluginName(){return"Italic"}},class extends Xa{static get requires(){return[Cu,Su]}static get pluginName(){return"BlockQuote"}},class extends Xa{static get pluginName(){return"CKFinder"}static get requires(){return[Rc,xu,eu]}},class extends Xa{static get requires(){return[Vc,mh,Mh]}static get pluginName(){return"EasyImage"}},class extends Xa{static get requires(){return[Hh,Wh]}static get pluginName(){return"Heading"}},mh,class extends Xa{static get requires(){return[Qh]}static get pluginName(){return"ImageCaption"}},class extends Xa{static get requires(){return[cd,hd]}static get pluginName(){return"ImageStyle"}},class extends Xa{static get requires(){return[dd]}static get pluginName(){return"ImageToolbar"}afterInit(){const t=this.editor,e=t.t;t.plugins.get(dd).register("image",{ariaLabel:e("b"),items:t.config.get("image.toolbar")||[],getRelatedElement:qu})}},Mh,class extends Xa{static get pluginName(){return"Indent"}static get requires(){return[md,yd]}},class extends Xa{static get requires(){return[Dc,xd]}static get pluginName(){return"Link"}},class extends Xa{static get requires(){return[Xd,nf]}static get pluginName(){return"List"}},class extends Xa{static get requires(){return[pf,yf,mf,Hc]}static get pluginName(){return"MediaEmbed"}},jh,class extends Xa{static get pluginName(){return"PasteFromOffice"}static get requires(){return[nl]}init(){const t=this.editor,e=[];e.push(new xf),e.push(new kf),t.plugins.get("Clipboard").on("inputTransformation",(t,n)=>{if(n.isTransformedWithPasteFromOffice)return;const r=n.dataTransfer.getData("text/html"),i=e.find(t=>t.isActive(r));i&&(i.execute(n),n.isTransformedWithPasteFromOffice=!0)},{priority:"high"})}},class extends Xa{static get requires(){return[kp,Ip,Hc]}static get pluginName(){return"Table"}},class extends Xa{static get requires(){return[dd]}static get pluginName(){return"TableToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(dd),r=t.config.get("table.contentToolbar"),i=t.config.get("table.tableToolbar");r&&n.register("tableContent",{ariaLabel:e("c"),items:r,getRelatedElement:Lf}),i&&n.register("table",{ariaLabel:e("c"),items:i,getRelatedElement:Mf})}}],Pp.defaultConfig={toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","indent","outdent","|","imageUpload","blockQuote","insertTable","mediaEmbed","undo","redo"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}]).default},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))}}class s extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"1XSQ":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SVse"),o=n("3N8a");class s extends o.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var a=n("IjjT");class l extends a.a{}const u=new l(s);var c=n("HDdC");n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d});const h=new r.r("angularfire2.realtimeDatabaseURL");class d{constructor(t,e){this.zone=t,this.platformId=e}schedule(...t){return this.zone.runGuarded(function(){return u.schedule.apply(u,t)})}keepUnstableUntilFirst(t){return Object(i.x)(this.platformId)?new c.a(e=>{const n=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(t=>{"scheduled"===r.state&&r.invoke(),e.next(t)},t=>{"scheduled"===r.state&&r.invoke(),e.error(t)},()=>{"scheduled"===r.state&&r.invoke(),e.complete()})}):t}runOutsideAngular(t){return new c.a(e=>this.zone.runOutsideAngular(()=>t.subscribe(t=>this.zone.run(()=>e.next(t)),t=>this.zone.run(()=>e.error(t)),()=>this.zone.run(()=>e.complete()))))}}},"1iah":function(t,e,n){"use strict";n.d(e,"a",function(){return a});const r=(t,e,n)=>{t.style.setProperty(e,n)},i=(t,e)=>{t.style.removeProperty(e)},o=[],s=(t=[],e)=>{if(void 0!==e){const n=Array.isArray(e)?e:[e];return[...t,...n]}return t},a=()=>{let t,e,n,a,l,u,c,h,d,f,p,g,m,b=[],v=[],y=[],w=!1,_={},k=[],C=[],E={},S=0,T=!1,x=!1,A=!0,I=!1,D=!0;const P=[],O=[],N=[],R=[],M=[],L=[],F=[],j=[],B=[],V=[],U="function"==typeof window.Animation,z=()=>V,q=()=>{W(),J()},H=(t,e)=>((e&&e.oneTimeCallback?O:P).push({callback:t,opts:e}),m),$=()=>(P.length=0,O.length=0,m),W=()=>{U?(z().forEach(t=>{t.cancel()}),V.length=0):N.forEach(t=>{i(t,"animation-name"),i(t,"animation-duration"),i(t,"animation-timing-function"),i(t,"animation-iteration-count"),i(t,"animation-delay"),i(t,"animation-play-state"),i(t,"animation-fill-mode"),i(t,"animation-direction")})},J=()=>{M.forEach(t=>{t.parentNode.removeChild(t)}),M.length=0},G=()=>void 0!==l?l:c?c.getFill():void 0,Q=()=>void 0!==d?d:void 0!==u?u:c?c.getDirection():void 0,K=()=>T?"linear":void 0!==n?n:c?c.getEasing():void 0,Y=()=>x?0:void 0!==f?f:void 0!==e?e:c?c.getDuration():void 0,X=()=>void 0!==a?a:c?c.getIterations():void 0,Z=()=>void 0!==p?p:void 0!==t?t:c?c.getDelay():void 0,tt=()=>{0!==S&&0==--S&&((()=>{at(),j.forEach(t=>{t()}),B.forEach(t=>{t()}),(()=>{const t=k,e=C,n=E;N.forEach(i=>{const o=i.classList;o.add(...t),o.remove(...e);for(const t in n)n.hasOwnProperty(t)&&r(i,t,n[t])})})();const t=A;P.forEach(e=>{e.callback(t,m)}),O.forEach(e=>{e.callback(t,m)}),O.length=0,D=!0,I=!0})(),c&&c.animationFinish())},et=(t=!0)=>{L.forEach(t=>{t()}),F.forEach(t=>{t()}),(()=>{const t=v,e=y,n=_;N.forEach(i=>{const o=i.classList;o.add(...t),o.remove(...e);for(const t in n)n.hasOwnProperty(t)&&r(i,t,n[t])})})(),b.length>0&&(U?(N.forEach(t=>{const e=t.animate(b,{delay:Z(),duration:Y(),easing:K(),iterations:X(),fill:G(),direction:Q()});e.pause(),V.push(e)}),z().length>0&&(V[0].onfinish=()=>{tt()})):((t=!0)=>{J(),N.forEach(e=>{if(b.length>0){const n=((t=[])=>t.map(t=>{const e=t.offset,n=[];for(const r in t)t.hasOwnProperty(r)&&"offset"!==r&&n.push(`${r}: ${t[r]};`);return`${100*e}% { ${n.join(" ")} }`}).join(" "))(b),i=((t,e,n)=>{const r=(t=>{const e=t.getRootNode();return e.head||e})(n),i=r.querySelector("#"+t);if(i)return i;const o=(n.ownerDocument||document).createElement("style");return o.id=t,o.innerHTML=`@keyframes ${t} { ${e} } @keyframes ${t}-alt { ${e} }`,r.appendChild(o),o})(g=(t=>{let e=o.indexOf(t);return e<0&&(e=o.push(t)-1),`ion-animation-${e}`})(n),n,e);M.push(i),r(e,"animation-duration",void 0!==Y()?`${Y()}ms`:null),r(e,"animation-timing-function",K()||null),r(e,"animation-delay",void 0!==Z()?`${Z()}ms`:null),r(e,"animation-fill-mode",G()||null),r(e,"animation-direction",Q()||null);const s=void 0!==X()?X()===1/0?"infinite":X().toString():null;r(e,"animation-iteration-count",s),r(e,"animation-play-state","paused"),t&&r(e,"animation-name",`${i.id}-alt`),requestAnimationFrame(()=>{r(e,"animation-name",i.id||null)})}})})(t)),w=!0},nt=t=>{if(t=Math.min(Math.max(t,0),.999),U)z().forEach(e=>{e.currentTime=e.effect.getComputedTiming().delay+Y()*t,e.pause()});else{const e=`-${(Z()||0)+Y()*t}ms`;N.forEach(t=>{b.length>0&&(r(t,"animation-delay",e),r(t,"animation-play-state","paused"))})}},rt=(t=!0)=>{N.forEach(e=>{requestAnimationFrame(()=>{r(e,"animation-name",g||null),r(e,"animation-duration",void 0!==Y()?`${Y()}ms`:null),r(e,"animation-timing-function",K()||null),r(e,"animation-delay",void 0!==Z()?`${Z()}ms`:null),r(e,"animation-fill-mode",G()||null),r(e,"animation-direction",Q()||null);const n=void 0!==X()?X()===1/0?"infinite":X().toString():null;r(e,"animation-iteration-count",n),t&&r(e,"animation-name",`${g}-alt`),requestAnimationFrame(()=>{r(e,"animation-name",g||null)})})})},it=(t=!1,e=!0)=>(t&&R.forEach(e=>{e.update(t)}),U?z().forEach(t=>{t.effect.updateTiming({delay:Z(),duration:Y(),easing:K(),iterations:X(),fill:G(),direction:Q()})}):rt(e),m),ot=()=>{w&&(U?z().forEach(t=>{t.pause()}):N.forEach(t=>{r(t,"animation-play-state","paused")}))},st=()=>{h=void 0,tt()},at=()=>{h&&clearTimeout(h)},lt=()=>(w||et(),I&&(U?nt(0):rt(),I=!1),D&&(S=R.length+1,D=!1),R.forEach(t=>{t.play()}),U?(z().forEach(t=>{t.play()}),0!==b.length&&0!==N.length||tt()):(()=>{if(at(),N.forEach(t=>{b.length>0&&requestAnimationFrame(()=>{r(t,"animation-play-state","running")})}),0===b.length||0===N.length)tt();else{const t=Z()||0,e=Y()||0;h=setTimeout(st,t+e+100),((t,e)=>{let n;const r={passive:!0},o=e=>{t===e.target&&(n&&n(),at(),requestAnimationFrame(()=>{N.forEach(t=>{i(t,"animation-duration"),i(t,"animation-delay"),i(t,"animation-play-state")}),requestAnimationFrame(()=>{tt()})}))};t&&(t.addEventListener("webkitAnimationEnd",o,r),t.addEventListener("animationend",o,r),n=()=>{t.removeEventListener("webkitAnimationEnd",o,r),t.removeEventListener("animationend",o,r)})})(N[0])}})(),m),ut=(t,e)=>{const n=b[0];if(null==n||void 0!==n.offset&&0!==n.offset){const n={offset:0};n[t]=e,b=[n,...b]}else n[t]=e;return m};return m={parentAnimation:c,elements:N,childAnimations:R,animationFinish:tt,from:ut,to:(t,e)=>{const n=b[b.length-1];if(null==n||void 0!==n.offset&&1!==n.offset){const n={offset:1};n[t]=e,b=[...b,n]}else n[t]=e;return m},fromTo:(t,e,n)=>ut(t,e).to(t,n),parent:t=>(c=t,m),play:lt,playAsync:()=>new Promise(t=>(H(t,{oneTimeCallback:!0}),lt(),m)),playSync:()=>(x=!0,H(()=>x=!1,{oneTimeCallback:!0}),lt(),m),pause:()=>(R.forEach(t=>{t.pause()}),ot(),m),stop:()=>(R.forEach(t=>{t.stop()}),w&&(q(),w=!1),m),destroy:()=>(q(),N.length=0,R.length=0,$(),w=!1,D=!0,R.forEach(t=>{t.destroy()}),m),keyframes:t=>(b=t,m),addAnimation:t=>{if(null!=t){const e=m,n=t;if(n.length>=0)for(const t of n)t.parent(e),R.push(t);else t.parent(e),R.push(t)}return m},addElement:t=>{if(null!=t)if(1===t.nodeType)N.push(t);else if(t.length>=0)for(let e=0;e<t.length;e++)N.push(t[e]);else console.error("Invalid addElement value");return m},update:it,fill:t=>(l=t,it(!0),m),direction:t=>(u=t,it(!0),m),iterations:t=>(a=t,it(!0),m),duration:t=>(e=t,it(!0),m),easing:t=>(n=t,it(!0),m),delay:e=>(t=e,it(!0),m),getWebAnimations:z,getKeyframes:()=>b,getFill:G,getDirection:Q,getDelay:Z,getIterations:X,getEasing:K,getDuration:Y,afterAddRead:t=>(j.push(t),m),afterAddWrite:t=>(B.push(t),m),afterClearStyles:(t=[])=>{for(const e of t)E[e]="";return m},afterStyles:(t={})=>(E=t,m),afterRemoveClass:t=>(C=s(C,t),m),afterAddClass:t=>(k=s(k,t),m),beforeAddRead:t=>(L.push(t),m),beforeAddWrite:t=>(F.push(t),m),beforeClearStyles:(t=[])=>{for(const e of t)_[e]="";return m},beforeStyles:(t={})=>(_=t,m),beforeRemoveClass:t=>(y=s(y,t),m),beforeAddClass:t=>(v=s(v,t),m),onFinish:H,clearOnFinish:$,progressStart:(t=!1)=>(R.forEach(e=>{e.progressStart(t)}),ot(),T=t,w?(it(),nt(0)):et(),m),progressStep:t=>(R.forEach(e=>{e.progressStep(t)}),void 0!==Y()&&nt(t),m),progressEnd:(t,e,n)=>(T=!1,R.forEach(r=>{r.progressEnd(t,e,n)}),void 0!==n&&(f=n),I=!1,A=t,t?U||(p=e*Y()*-1,it(!1,!1)):(d="reverse"===Q()?"normal":"reverse",U?(it(),nt(1-e)):(p=(1-e)*Y()*-1,it(!1,!1))),H(()=>{A=!0,f=void 0,d=void 0,p=void 0},{oneTimeCallback:!0}),c||lt(),m)}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"2qqB":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n("ZZ/e"),n("4kQV");var r=n("eIep");n("VMA6");class i{constructor(t,e,n,i,o){this.reviewService=t,this.campService=e,this.navParams=n,this.popoverCtrl=i,this.modalCtrl=o,this.camp$=this.navParams.get("camp"),this.isTrail=this.camp$.pipe(Object(r.a)(t=>this.campService.isTrail(t)))}ngOnInit(){}submitReview(t){this.reviewService.submitReview(t),this.reviewService.submitReviewPhotos(t,this.reviewImgs),this.exitPopover()}onPhotoUrlsChange(t){this.reviewImgs=t}exitPopover(){this.popoverCtrl.dismiss(),this.modalCtrl.dismiss()}cancel(){this.popoverCtrl.dismiss()}}},"3N8a":function(t,e,n){"use strict";var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}n.d(e,"a",function(){return o});class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"4I5i":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},"4kQV":function(t,e,n){"use strict";var r=n("ajt+"),i=n("itXk"),o=n("LRne"),s=n("5+tZ"),a=n("lJxs"),l=n("mrSG");class u{constructor(t,e){this.reviewID=t.id,this.preUploadedImgs=e}uploadPhotos(t){return l.__awaiter(this,void 0,void 0,function*(){if(this.preUploadedImgs&&0!=this.preUploadedImgs.length){const e=yield Promise.all(t.uploadAllPhotos(this.preUploadedImgs));t.updateObjectAtPath(`reviews/review-imgs/${this.reviewID}`,e)}})}}var c=n("VMA6"),h=n("8Y7J");n.d(e,"a",function(){return d});let d=(()=>{class t{constructor(t,e){this.db=t,this.campService=e}getByCampID(t){try{return this.getAllCampReviewIds(t).pipe(Object(s.a)(t=>{let e=[];return e=t.map(t=>this.getByID(t)),Object(i.a)(e)}))}catch(e){throw new Error(e)}}getByUserID(t){throw new Error("Method not implemented.")}getByID(t){return this.db.getObjectValues(`reviews/review-info/${t}`)}getAllReviewPhotos(t){try{return this.getAllCampReviewIds(t).pipe(Object(s.a)(t=>{if(0===t.length)return Object(o.a)([]);let e=[];return e=t.map(t=>this.getReviewPhotos(t)),Object(i.a)(e)}),Object(a.a)(t=>this.flatten(t)))}catch(e){throw new Error(e)}}flatten(t,e=[]){for(let n=0,r=t.length;n<r;n++){const r=t[n];Array.isArray(r)?this.flatten(r,e):e.push(r)}return e}submitReview(t){t.submitReview(this.db)}submitReviewPhotos(t,e){new u(t,e).uploadPhotos(this.db)}getAverageRating(t,e){return this.getAllReviewRatings(t,e).pipe(Object(a.a)(t=>{if(0===t.length)return 0;let e=0;return t.forEach(t=>e+=t),e/t.length}))}getAllReviewRatings(t,e){try{return this.getAllCampReviewIds(t).pipe(Object(s.a)(t=>{if(0===t.length)return Object(o.a)([]);let n=[];return n=t.map(t=>this.getReviewInfo(t,e)),Object(i.a)(n)}))}catch(n){throw new Error(n)}}getReviewInfo(t,e){return this.db.getObjectValues(`reviews/review-info/${t}/${e}`)}getReviewPhotos(t){return this.db.getObjectValues(`reviews/review-imgs/${t}`)}getAllCampReviewIds(t){return this.db.getObjectValues(`reviews/review-by-campID/${t}`).pipe(Object(a.a)(t=>t?Object.keys(t):[]))}}return t.ngInjectableDef=h.Wb({factory:function(){return new t(h.Xb(r.a),h.Xb(c.a))},token:t,providedIn:"root"}),t})()},"4pTB":function(t,e){},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function l(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(l((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new u(t,n)))}class u{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,t,e,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"60Yi":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("zgos");n.d(e,"a",function(){return c});var a=r.vb({encapsulation:0,styles:[[""]],data:{}});function l(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,6,"ion-content",[],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,4,"ion-list",[],null,null,null,i.Y,i.r)),r.wb(3,49152,null,0,o.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(4,0,null,0,2,"ion-item",[],null,null,null,i.W,i.p)),r.wb(5,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Closest"]))],null,null)}function u(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-sort-popover",[],null,null,null,l,a)),r.wb(1,114688,null,0,s.a,[],null,null)],function(t,e){t(e,1,0)},null)}var c=r.tb("app-sort-popover",s.a,u,{},{},[])},"69p7":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("SVse"),l=n("Ovnn"),u=n("ajt+");n.d(e,"a",function(){return m});var c=r.vb({encapsulation:0,styles:[[""]],data:{}});function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,12,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(2,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(4,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Enter URL:"])),(t()(),r.xb(6,0,null,0,6,"ion-input",[["formControlName","url"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,8)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,8)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(7,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(8,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(10,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(12,16384,null,0,s.i,[[4,s.h]],null,null)],function(t,e){t(e,7,0,"text"),t(e,10,0,"url")},function(t,e){t(e,6,0,r.Jb(e,12).ngClassUntouched,r.Jb(e,12).ngClassTouched,r.Jb(e,12).ngClassPristine,r.Jb(e,12).ngClassDirty,r.Jb(e,12).ngClassValid,r.Jb(e,12).ngClassInvalid,r.Jb(e,12).ngClassPending)})}function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,5,"ion-item",[],null,null,null,i.W,i.p)),r.wb(2,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(4,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Upload image:"])),(t()(),r.xb(6,0,null,0,0,"input",[["accept",".png,.jpg"],["type","file"]],null,[[null,"change"]],function(t,e,n){var r=!0;return"change"===e&&(r=!1!==t.component.onFileChange(n)&&r),r},null,null))],null,null)}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.submit(i.isOnLocalImageInput())&&r),r},i.I,i.b)),r.wb(2,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"]},null),(t()(),r.Rb(-1,0,["Submit"])),(t()(),r.xb(4,0,null,null,2,"ion-button",[["color","danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cancel()&&r),r},i.I,i.b)),r.wb(5,49152,null,0,o.i,[r.i,r.n,r.B],{color:[0,"color"],type:[1,"type"]},null),(t()(),r.Rb(-1,0,["Cancel"]))],function(t,e){t(e,2,0,!e.component.myForm.valid),t(e,5,0,"danger","button")},null)}function p(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,28,"form",[["novalidate",""],["padding",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Jb(t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,2).onReset()&&i),i},null,null)),r.wb(1,16384,null,0,s.s,[],null,null),r.wb(2,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},null),r.Ob(2048,null,s.a,null,[s.d]),r.wb(4,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(5,0,null,null,17,"ion-item",[],null,null,null,i.W,i.p)),r.wb(6,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(7,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(8,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Choose upload type:"])),(t()(),r.xb(10,0,null,0,12,"ion-select",[["formControlName","isOnLocalImageInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,12)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,12)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(11,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(12,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(14,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(16,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(17,0,null,0,2,"ion-select-option",[],null,null,null,i.db,i.x)),r.wb(18,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["From Computer"])),(t()(),r.xb(20,0,null,0,2,"ion-select-option",[],null,null,null,i.db,i.x)),r.wb(21,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["From URL"])),(t()(),r.mb(16777216,null,null,1,null,h)),r.wb(24,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,d)),r.wb(26,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,f)),r.wb(28,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.myForm),t(e,14,0,"isOnLocalImageInput"),t(e,18,0,!0),t(e,21,0,!1),t(e,24,0,!1===n.isOnLocalImageInput()),t(e,26,0,!0===n.isOnLocalImageInput()),t(e,28,0,null!=n.isOnLocalImageInput())},function(t,e){t(e,0,0,r.Jb(e,4).ngClassUntouched,r.Jb(e,4).ngClassTouched,r.Jb(e,4).ngClassPristine,r.Jb(e,4).ngClassDirty,r.Jb(e,4).ngClassValid,r.Jb(e,4).ngClassInvalid,r.Jb(e,4).ngClassPending),t(e,10,0,r.Jb(e,16).ngClassUntouched,r.Jb(e,16).ngClassTouched,r.Jb(e,16).ngClassPristine,r.Jb(e,16).ngClassDirty,r.Jb(e,16).ngClassValid,r.Jb(e,16).ngClassInvalid,r.Jb(e,16).ngClassPending)})}function g(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-photo-adder-modal",[],null,null,null,p,c)),r.wb(1,114688,null,0,l.a,[s.b,o.Fb,o.Hb,u.a],null,null)],function(t,e){t(e,1,0)},null)}var m=r.tb("app-photo-adder-modal",l.a,g,{},{},[])},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),s=n("mrSG"),a=n("zVF4"),l=n("x7I3"),u=i.SDK_VERSION,c=new o.Logger("@firebase/firestore"),h=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function d(){return c.logLevel===o.LogLevel.DEBUG?h.DEBUG:c.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function f(t){switch(t){case h.DEBUG:c.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:c.logLevel=o.LogLevel.ERROR;break;case h.SILENT:c.logLevel=o.LogLevel.SILENT;break;default:c.error("Firestore ("+u+"): Invalid value passed to `setLogLevel`")}}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(c.logLevel<=o.LogLevel.DEBUG){var i=n.map(m);c.debug.apply(c,["Firestore ("+u+") ["+t+"]: "+e].concat(i))}}function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(c.logLevel<=o.LogLevel.ERROR){var r=e.map(m);c.error.apply(c,["Firestore ("+u+"): "+t].concat(r))}}function m(t){if("string"==typeof t)return t;var e=y.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function b(t){var e="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+t;throw g(e),new Error(e)}function v(t,e){t||b(e)}var y=function(){function t(){}return t.setPlatform=function(e){t.platform&&b("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||b("Platform not set"),t.platform},t}();function w(){return y.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(e,t),e}(Error);function C(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new k(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){return void 0!==t?t:e}function T(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function x(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function I(t,e){if(0!==e.length)throw new k(_.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+W(e.length,"argument")+".")}function D(t,e,n){if(e.length!==n)throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function P(t,e,n){if(e.length<n)throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function O(t,e,n,r){if(e.length<n||e.length>r)throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+W(e.length,"argument")+".")}function N(t,e,n,r){B(t,e,$(n)+" argument",r)}function R(t,e,n,r){void 0!==r&&N(t,e,n,r)}function M(t,e,n,r){B(t,e,n+" option",r)}function L(t,e,n,r){void 0!==r&&M(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var l=a[s];if(l===r)return;o.push(U(l))}var u=U(r);throw new k(_.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function j(t,e,n,r){if(!e.some(function(t){return t===r}))throw new k(_.INVALID_ARGUMENT,"Invalid value "+U(r)+" provided to function "+t+"() for its "+$(n)+" argument. Acceptable values: "+e.join(", "))}function B(t,e,n,r){if(!("object"===e?V(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=U(r);throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function V(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function U(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":b("Unknown wrong type: "+typeof t)}function z(t,e,n){if(void 0===n)throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+$(e)+" argument, but it was undefined.")}function q(t,e,n){x(e,function(e,r){if(n.indexOf(e)<0)throw new k(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function H(t,e,n,r){var i=U(r);return new k(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+$(n)+" argument to be a "+e+", but it was: "+i)}function $(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function W(t,e){return t+" "+e+(1===t?"":"s")}var J=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function G(t,e){return t<e?-1:t>e?1:0}function Q(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function K(t){return t+"\0"}function Y(){if("undefined"==typeof Uint8Array)throw new k(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function X(){if(!y.getPlatform().base64Available)throw new k(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Z=function(){function t(t){X(),this._binaryString=t}return t.fromBase64String=function(e){D("Blob.fromBase64String",arguments,1),N("Blob.fromBase64String","string",1,e),X();try{var n=y.getPlatform().atob(e);return new t(n)}catch(r){throw new k(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},t.fromUint8Array=function(e){if(D("Blob.fromUint8Array",arguments,1),Y(),!(e instanceof Uint8Array))throw H("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join("");return new t(n)},t.prototype.toBase64=function(){return D("Blob.toBase64",arguments,0),X(),y.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){D("Blob.toUint8Array",arguments,0),Y();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return G(this._binaryString,t._binaryString)},t}(),tt=C(Z,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),et=function(){return function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),nt="(default)",rt=function(){function t(t,e){this.projectId=t,this.database=e||nt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===nt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return G(this.projectId,t.projectId)||G(this.database,t.database)},t}(),it=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),ot=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&b("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&b("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return v(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new k(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(ot),at=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return at.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new k(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new k(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new k(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(ot),ut=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===st.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return st.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new st(e.slice()))},t.fromPathString=function(e){return new t(st.fromString(e))},t.EMPTY=new t(new st([])),t}(),ct=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}(),ht=function(t){return t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction",t}({}),dt=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new k(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ft=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(t){}):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var i=dt.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&b("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){v(t===ht.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==ht.All&&i.timerId===t)break}return e.drain()})},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),pt="\x01",gt="\x01",mt="\x10",bt="\x11";function vt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=wt(e)),e=yt(t.get(n),e);return wt(e)}function yt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=pt+mt;break;case pt:n+=pt+bt;break;default:n+=o}}return n}function wt(t){return t+pt+gt}function _t(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===pt&&t.charAt(1)===gt,"Non-empty path "+t+" had length 2"),st.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(pt,o);switch((s<0||s>n)&&b('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case gt:var a=t.substring(o,s),l=void 0;0===i.length?l=a:(l=i+=a,i=""),r.push(l);break;case mt:i+=t.substring(o,s),i+="\0";break;case bt:i+=t.substring(o,s+1);break;default:b('Invalid encoded resource path: "'+t+'"')}o=s+2}return new st(r)}var kt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new k(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new k(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new k(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new k(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?G(this.nanoseconds,t.nanoseconds):G(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),Ct=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new kt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new kt(0,0)),t}(),Et=function(){function t(t,e){this.comparator=t,this.root=e||Tt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new St(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new St(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new St(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new St(this.root,t,this.comparator,!0)},t}(),St=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Tt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw b("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw b("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw b("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),xt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw b("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw b("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw b("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw b("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw b("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Tt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Tt.EMPTY=new xt;var At=function(){function t(t){this.comparator=t,this.data=new Et(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new It(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new It(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),It=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Dt=new Et(ut.comparator);function Pt(){return Dt}function Ot(){return Pt()}var Nt=new Et(ut.comparator);function Rt(){return Nt}var Mt=new Et(ut.comparator);function Lt(){return Mt}var Ft=new At(ut.comparator);function jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ft,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var Bt=new At(G);function Vt(){return Bt}var Ut=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},jt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Q(this.mutations,t.mutations)&&Q(this.baseMutations,t.baseMutations)},t}(),zt=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Lt(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),qt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&b("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Ht=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gt(t).iterate({index:Ne.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Jt(n),Kt(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Jt(e),Kt(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Qt(t),s=Gt(t);return s.add({}).next(function(a){v("number"==typeof a,"Auto-generated key is not a number");var l=new Ut(a,e,n,r),u=i.serializer.toDbMutationBatch(i.userId,l);i.documentKeysByBatchId[a]=l.keys();for(var c=[],h=0,d=r;h<d.length;h++){var f=d[h],p=Re.key(i.userId,f.key.path,a);c.push(s.put(u)),c.push(o.put(p,Re.PLACEHOLDER)),c.push(i.indexManager.addToCollectionParentIndex(t,f.key.path.popLast()))}return qt.waitFor(c).next(function(){return l})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Gt(t).get(e).next(function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?qt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gt(t).iterate({index:Ne.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(v(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gt(t).iterate({index:Ne.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gt(t).loadAll(Ne.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Re.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Qt(t).iterate({range:i},function(r,i,s){var a=r[0],l=r[2],u=_t(r[1]);if(a===n.userId&&e.path.isEqual(u))return Gt(t).get(l).next(function(t){if(!t)throw b("Dangling document-mutation reference found: "+r+" which points to "+l);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+l),o.push(n.serializer.fromDbMutationBatch(t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new At(G),i=[];return e.forEach(function(e){var o=Re.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Qt(t).iterate({range:s},function(t,i,o){var s=t[0],a=t[2],l=_t(t[1]);s===n.userId&&e.path.isEqual(l)?r=r.add(a):o.done()});i.push(a)}),qt.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=Re.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new At(G);return Qt(t).iterate({range:s},function(t,e,o){var s=t[0],l=t[2],u=_t(t[1]);s===n.userId&&r.isPrefixOf(u)?u.length===i&&(a=a.add(l)):o.done()}).next(function(){return n.lookupMutationBatches(t,a)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Gt(t).get(e).next(function(t){if(null===t)throw b("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),qt.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Wt(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),qt.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return qt.resolve();var r=IDBKeyRange.lowerBound(Re.prefixForUser(e.userId)),i=[];return Qt(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=_t(t[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return $t(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Kt(t).get(this.userId).next(function(t){return t||new Oe(e.userId,-1,"")})},t}();function $t(t,e,n){var r=Re.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Qt(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Wt(t,e,n){var r=t.store(Ne.store),i=t.store(Re.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=r.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(l.next(function(){v(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var u=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],f=Re.key(e,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return qt.waitFor(o).next(function(){return u})}function Jt(t){return t instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Gt(t){return cn.getStore(t,Ne.store)}function Qt(t){return cn.getStore(t,Re.store)}function Kt(t){return cn.getStore(t,Oe.store)}var Yt=1,Xt=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),Zt=function(){function t(t,e){this.generatorId=t,v((t&Yt)===t,"Generator ID "+t+" contains more than "+Yt+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Yt,t},t.prototype.after=function(t){return this.seek(t+(1<<Yt)),this.next()},t.prototype.seek=function(t){v((t&Yt)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(Xt.QueryCache,2)},t.forSyncEngine=function(){return new t(Xt.SyncEngine)},t}(),te="SimpleDb",ee=function(){function t(e){this.db=e,12.2===t.getIOSVersion(a.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return v(t.isAvailable(),"IndexedDB not supported in current environment."),p(te,"Opening database:",e),new qt(function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onblocked=function(){o(new k(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new k(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){p(te,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new re(s.transaction);r.createOrUpgrade(n,i,t.oldVersion,Ae).next(function(){p(te,"Database upgrade to version "+Ae+" complete")})}}).toPromise()},t.delete=function(t){return p(te,"Removing database:",t),oe(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var e=a.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){var r=re.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),qt.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),ne=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return oe(this.dbCursor.delete())},t}(),re=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new ct,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=ae(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(p(te,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new ie(e)},t}(),ie=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p(te,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(p(te,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),oe(n)},t.prototype.add=function(t){return p(te,"ADD",this.store.name,t,t),oe(this.store.add(t))},t.prototype.get=function(t){var e=this;return oe(this.store.get(t)).next(function(n){return void 0===n&&(n=null),p(te,"GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return p(te,"DELETE",this.store.name,t),oe(this.store.delete(t))},t.prototype.count=function(){return p(te,"COUNT",this.store.name),oe(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){p(te,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new qt(function(n,r){e.onerror=function(t){var e=ae(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new qt(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ne(i),s=e(i.primaryKey,i.value,o);if(s instanceof qt){var a=s.catch(function(t){return o.done(),qt.reject(t)});n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return qt.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function oe(t){return new qt(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ae(t.target.error);n(e)}})}var se=!1;function ae(t){var e=ee.getIOSVersion(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new k("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return se||(se=!0,setTimeout(function(){throw r},0)),r}}return t}var le=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Zt.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Ct.fromTimestamp(new kt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return he(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ue(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ue(t).iterate(function(s,a){var l=r.serializer.fromDbTarget(a);l.sequenceNumber<=e&&void 0===n[l.targetId]&&(i++,o.push(r.removeQueryData(t,l)))}).next(function(){return qt.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return ue(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return ce(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,cn.getStore(n,Ue.store)).put(Ue.key,e);var n},t.prototype.saveQueryData=function(t,e){return ue(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ue(t).iterate({range:i,index:Be.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=de(t);return e.forEach(function(e){var s=vt(e.path);i.push(o.put(new Ve(n,s))),i.push(r.referenceDelegate.addReference(t,e))}),qt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=de(t);return qt.forEach(e,function(e){var o=vt(e.path);return qt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=de(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=de(t),i=jt();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=_t(t[1]),o=new ut(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=vt(e.path),r=IDBKeyRange.bound([n],[K(n)],!1,!0),i=0;return de(t).iterate({index:Ve.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return ue(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function ue(t){return cn.getStore(t,Be.store)}function ce(t){return ee.getStore(t,Ue.store).get(Ue.key).next(function(t){return v(null!==t,"Missing metadata row."),t})}function he(t){return ce(t).next(function(t){return t.highestListenSequenceNumber})}function de(t){return cn.getStore(t,Ve.store)}var fe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ut.comparator(t.key,e.key)},t}(),pe=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n)||this;return s.data=r,s.proto=o,s.hasLocalMutations=!!i.hasLocalMutations,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return s.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):b("Trying to compare documents on fields that don't exist")},e}(fe),ge=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fe),me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(fe),be=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){x(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return A(this.inner)},t}(),ve=function(){function t(){this.changes=new be(function(t){return t.toString()}),this.changesApplied=!1}return t.prototype.addEntry=function(t){this.assertNotApplied(),this.changes.set(t.key,t)},t.prototype.removeEntry=function(t){this.assertNotApplied(),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?qt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},t}(),ye="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",we=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=ee.getStore(t,He.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntry=function(t,e,n){var r=this;return ke(t).put(Ee(e),n).next(function(){r.indexManager.addToCollectionParentIndex(t,e.path.popLast())})},t.prototype.removeEntry=function(t,e){var n=ke(t),r=Ee(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.setMetadata(t,i).next(function(){if(r.keepDocumentChangeLog)return Ce(t).put({changes:r.serializer.toDbResourcePaths(e)})})})},t.prototype.getEntry=function(t,e){var n=this;return ke(t).get(Ee(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return ke(t).get(Ee(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Se(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Ot();return this.forEachDbEntry(t,e,function(t,e){r=r.insert(t,e?n.serializer.fromDbRemoteDocument(e):null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=Ot(),i=new Et(ut.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,Se(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return qt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ke(t).iterate({range:r},function(t,e,r){for(var s=ut.fromSegments(t);o&&ut.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Rt(),i=e.path.length+1,o=e.path.toArray(),s=IDBKeyRange.lowerBound(o);return ke(t).iterate({range:s},function(t,o,s){if(t.length===i){var a=n.serializer.fromDbRemoteDocument(o);e.path.isPrefixOf(a.key.path)?a instanceof pe&&e.matches(a)&&(r=r.insert(a.key,a)):s.done()}}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=jt(),r=Pt(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=Ce(t);return s.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(s).next(function(){return qt.reject(new k(_.DATA_LOSS,ye))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new ge(n,Ct.forDeletedDoc());r=r.insert(n,e)}))}),qt.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Ce(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return _e(t).get(je.key).next(function(t){return v(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return _e(t).put(je.key,e)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n.documentSizes=new be(function(t){return t.toString()}),n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=jt();return this.changes.forEach(function(o,s){var a=e.documentSizes.get(o);if(v(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){var l=e.documentCache.serializer.toDbRemoteDocument(s),u=Se(l);r+=u-a,n.push(e.documentCache.addEntry(t,o,l))}else r-=a,n.push(e.documentCache.removeEntry(t,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(t,i,r)),qt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},e}(ve),t}();function _e(t){return cn.getStore(t,je.store)}function ke(t){return cn.getStore(t,Fe.store)}function Ce(t){return cn.getStore(t,He.store)}function Ee(t){return t.path.toArray()}function Se(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw b("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Te=function(){function t(){this.collectionParentIndex=new xe}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),qt.resolve()},t.prototype.getCollectionParents=function(t,e){return qt.resolve(this.collectionParentIndex.getEntries(e))},t}(),xe=function(){function t(){this.index={}}return t.prototype.add=function(t){v(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new At(st.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.getEntries=function(t){return(this.index[t]||new At(st.comparator)).toArray()},t}(),Ae=8,Ie=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=Ae,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(Pe.store)}(t),function(t){t.createObjectStore(Oe.store,{keyPath:Oe.keyPath}),t.createObjectStore(Ne.store,{keyPath:Ne.keyPath,autoIncrement:!0}).createIndex(Ne.userMutationsIndex,Ne.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Re.store)}(t),qe(t),function(t){t.createObjectStore(Fe.store)}(t));var o=qt.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ve.store),t.deleteObjectStore(Be.store),t.deleteObjectStore(Ue.store)}(t),qe(t)),o=o.next(function(){return function(t){var e=t.store(Ue.store),n=new Ue(0,0,Ct.MIN.toTimestamp(),0);return e.put(Ue.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Ne.store).loadAll().next(function(n){t.deleteObjectStore(Ne.store),t.createObjectStore(Ne.store,{keyPath:Ne.keyPath,autoIncrement:!0}).createIndex(Ne.userMutationsIndex,Ne.userMutationsKeyPath,{unique:!0});var r=e.store(Ne.store),i=n.map(function(t){return r.put(t)});return qt.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore($e.store,{keyPath:$e.keyPath})}(t),function(t){t.createObjectStore(He.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(je.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Fe.store).iterate(function(t,n){e+=Se(n)}).next(function(){var n=new je(e);return t.store(je.store).put(je.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Oe.store),r=t.store(Ne.store);return n.loadAll().next(function(n){return qt.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Ne.userMutationsIndex,i).next(function(r){return qt.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return Wt(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ve.store),n=t.store(Fe.store);return he(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new st(n),s=function(t){return[0,vt(t)]}(o);r.push(e.get(s).next(function(n){return n?qt.resolve():function(n){return e.put(new Ve(0,vt(n),t))}(o)}))}).next(function(){return qt.waitFor(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ze.store,{keyPath:ze.keyPath});var n=e.store(ze.store),r=new xe,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:vt(i)})}};return e.store(Fe.store).iterate({keysOnly:!0},function(t,e){var n=new st(t);return i(n.popLast())}).next(function(){return e.store(Re.store).iterate({keysOnly:!0},function(t,e){var n=_t(t[1]);return i(n.popLast())})})},t}(),De=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),Pe=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),Oe=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Ne=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Re=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vt(e)]},t.key=function(t,e,n){return[t,vt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Me=function(){return function(t,e){this.path=t,this.readTime=e}}(),Le=function(){return function(t,e){this.path=t,this.version=e}}(),Fe=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),je=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Be=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Ve=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Ue=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),ze=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function qe(t){t.createObjectStore(Ve.store,{keyPath:Ve.keyPath}).createIndex(Ve.documentTargetsIndex,Ve.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Be.store,{keyPath:Be.keyPath}).createIndex(Be.queryTargetsIndexName,Be.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ue.store)}var He=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),$e=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),We=[Oe.store,Ne.store,Re.store,Fe.store,Be.store,Pe.store,Ue.store,Ve.store].concat([$e.store,He.store]).concat([je.store]).concat([ze.store]),Je=function(){function t(){this.collectionParentsCache=new xe}return t.prototype.addToCollectionParentIndex=function(t,e){if(v(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(e)){v(e.length>=1,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return Ge(t).put({collectionId:n,parent:vt(r)})}return qt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[K(e),""],!1,!0);return Ge(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(_t(o.parent))}return n})},t}();function Ge(t){return cn.getStore(t,ze.store)}var Qe=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),Ke=function(){function t(t,e,n,r,i,o){void 0===i&&(i=Ct.MIN),void 0===o&&(o=w()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Ye=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ut.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ge(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ut.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new me(e,n)):b("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof pe){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new Fe(null,null,e,i=t.hasCommittedMutations)}if(t instanceof ge){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new Fe(null,new Me(n,r),null,i)}return t instanceof me?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new Fe(new Le(n,r),null,null,!0)):b("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new De(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new kt(t.seconds,t.nanoseconds);return Ct.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Ne(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=kt.fromMillis(t.localWriteTimeMs);return new Ut(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(vt(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=jt(),n=0,r=t;n<r.length;n++)e=e.add(new ut(_t(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Ke(e,t.targetId,Qe.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){v(Qe.Listen===t.purpose,"Only queries with purpose "+Qe.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new Be(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function Xe(t,e){var n=t[1],r=e[1],i=G(t[0],e[0]);return 0===i?G(n,r):i}var Ze=function(){function t(t){this.maxElements=t,this.buffer=new At(Xe),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xe(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),tn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),nn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==en.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ht.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(hn)})},t}(),rn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return qt.resolve(it.INVALID);var r=new Ze(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===en.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),qt.resolve(tn)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),tn):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,s,a,l,u=this,c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>u.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.maximumSequenceNumbersToCollect+" from "+e),r=u.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),u.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),u.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),u.removeOrphanedDocuments(t,n)}).next(function(t){return l=Date.now(),d()<=h.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(l-a)+"ms\nTotal Duration: "+(l-c)+"ms"),qt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),on="IndexedDbPersistence",sn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",an="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",ln="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",un=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return s.__extends(e,t),e}(function(){return function(){}}()),cn=function(){function t(e,n,r,i,o,s,a){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=a,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new k(_.UNIMPLEMENTED,ln);if(this.referenceDelegate=new pn(this,s),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Ye(o),this.document=r.document,this.allowTabSynchronization=void 0!==a,this.queryCache=new le(this.referenceDelegate,this.serializer),this.indexManager=new Je,this.remoteDocumentCache=new we(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new k(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof un)return ee.getStore(t.simpleDbTransaction,e);throw b("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,a){return s.__awaiter(this,void 0,void 0,function(){var l;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(l=new t(e,n,r,i,o,a)).start()];case 1:return s.sent(),[2,l]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,a,l){return s.__awaiter(this,void 0,void 0,function(){var u;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(u=new t(e,n,r,i,o,a,l)).start()];case 1:return s.sent(),[2,u]}})})},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),ee.openOrCreate(this.dbName,Ae,new Ie(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()}).then(function(){return t.simpleDb.runTransaction("readonly",[Ue.store],function(e){return he(e).next(function(e){t.listenSequence=new it(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",We,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener(function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",We,function(e){return fn(e).put(new $e(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return dn(t).get(Pe.key).next(function(t){return qt.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return fn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,$e.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return qt.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ht.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return dn(t).get(Pe.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new k(_.FAILED_PRECONDITION,an);return!1}}return!(!e.networkEnabled||!e.inForeground)||fn(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&p(on,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Pe.store,$e.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[$e.store],function(e){return fn(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},t.clearPersistence=function(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return t.isAvailable()?[4,ee.delete(e+t.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),Ht.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return p(on,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",We,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw g("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new k(_.FAILED_PRECONDITION,sn);return n(new un(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new un(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return dn(t).get(Pe.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new k(_.FAILED_PRECONDITION,an)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new Pe(this.clientId,this.allowTabSynchronization,Date.now());return dn(t).put(Pe.key,e)},t.isAvailable=function(){return ee.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=dn(t);return n.get(Pe.key).next(function(t){return e.isLocalClient(t)?(p(on,"Releasing primary lease."),n.delete(Pe.key)):qt.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(g("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return p(on,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return g(on,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){g("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function hn(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===sn}(t))throw t;return p(on,"Unexpectedly lost primary lease"),[2]})})}function dn(t){return t.store(Pe.store)}function fn(t){return t.store($e.store)}var pn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new rn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return gn(t,e)},t.prototype.removeReference=function(t,e){return gn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return gn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?qt.resolve(!0):function(t,e){var n=!1;return Kt(t).iterateSerial(function(r){return $t(t,r,e).next(function(t){return t&&(n=!0),qt.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,function(s,a){if(a<=e){var l=n.isPinned(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),de(t).delete([0,vt(s.path)])})});i.push(l)}}).next(function(){return qt.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return gn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=de(t),i=it.INVALID;return r.iterate({index:Ve.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==it.INVALID&&e(new ut(_t(n)),i),i=s,n=o):i=it.INVALID}).next(function(){i!==it.INVALID&&e(new ut(_t(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function gn(t,e){return de(t).put(function(t,e){return new Ve(0,vt(t.path),e)}(e,t.currentSequenceNumber))}var mn=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),bn=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),vn=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(bn.Estimate,n);case"previous":return new t(bn.Previous,n);case"none":case void 0:return new t(bn.Default,n);default:return b("fromSnapshotOptions() called with invalid options.")}},t}(),yn=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),G(this.typeOrder,t.typeOrder)},t}(),wn=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=mn.NullValue,e.internalValue=null,e}return s.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(yn),_n=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.BooleanValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?G(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(yn),kn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.NumberValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(yn);function Cn(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var En=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Cn(this.internalValue,t.internalValue)},e}(kn),Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Cn(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(kn),Tn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.StringValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?G(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(yn),xn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.TimestampValue,n}return s.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof An?-1:this.defaultCompareTo(t)},e}(yn),An=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=mn.TimestampValue,r}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===bn.Estimate?new xn(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===bn.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof xn?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(yn),In=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.BlobValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(yn),Dn=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=mn.RefValue,r}return s.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ut.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(yn),Pn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.GeoPointValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(yn),On=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.ObjectValue,n}return s.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=G(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return G(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e?n.internalValue.get(t):null}),n},e.prototype.fieldMask=function(){var t=new At(lt.comparator);return this.internalValue.forEach(function(n,r){var i=new lt([n]);if(r instanceof e){var o=r.fieldMask().fields;o.isEmpty()?t=t.add(i):o.forEach(function(e){t=t.add(i.child(e))})}else t=t.add(i)}),Rn.fromSet(t)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Et(G)),e}(yn),Nn=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=mn.ArrayValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return G(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},e}(yn),Rn=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new At(lt.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Mn=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Ln=function(){return function(t,e){this.version=t,this.transformResults=e}}(),Fn=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),jn=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof pe&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof pe:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Bn=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof pe?t.version:Ct.MIN},t}(),Vn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=Fn.Set,i}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation."),new pe(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Bn.getPostMutationVersion(t);return new pe(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Bn),Un=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Fn.Patch,o}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new me(this.key,e.version);var n=this.patchDocument(t);return new pe(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Bn.getPostMutationVersion(t),i=this.patchDocument(t);return new pe(this.key,r,i,{hasLocalMutations:!0})},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof pe?t.data:On.EMPTY)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}}),t},e}(Bn),zn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Fn.Transform,r.precondition=jn.exists(!0),r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new me(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new pe(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data,i);return new pe(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof pe?t.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(e=null==e?On.EMPTY.set(i.field,s):e.set(i.field,s))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Q(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof pe,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof pe&&(s=t.field(i.field)),n.push(o.applyToRemoteDocument(s,e[r]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,l=null;e instanceof pe&&(l=e.field(s.field)),null===l&&n instanceof pe&&(l=n.field(s.field)),r.push(a.applyToLocalView(l,t))}return r},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(Bn),qn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Fn.Delete,r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new ge(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ge(this.key,Ct.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Bn),Hn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Ot();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Pt();return i.forEach(function(t,e){e||(e=new ge(t,Ct.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ut(e)).next(function(t){var e=Rt();return t instanceof pe&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;v(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,i=Rt();return this.indexManager.getCollectionParents(t,r).next(function(o){return qt.forEach(o,function(o){var s=e.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(t,s).next(function(t){t.forEach(function(t,e){i=i.insert(t,e)})})}).next(function(){return i})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return i.addMissingBaseDocuments(t,r=e,n).next(function(t){n=t;for(var e=0,i=r;e<i.length;e++)for(var o=i[e],s=0,a=o.mutations;s<a.length;s++){var l=a[s],u=l.key,c=n.get(u),h=l.applyToLocalView(c,c,o.localWriteTime);n=h instanceof pe?n.insert(u,h):n.remove(u)}})}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=jt(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var l=a[s];l instanceof Un&&null===n.get(l.key)&&(r=r.add(l.key))}var u=n;return this.remoteDocumentCache.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof pe&&(u=u.insert(t,e))}),u})},t}(),$n=function(){function t(){this.refsByKey=new At(Wn.compareByKey),this.refsByTarget=new At(Wn.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Wn(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Wn(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ut.EMPTY,r=new Wn(n,t),i=new Wn(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ut.EMPTY,n=new Wn(e,t),r=new Wn(e,t+1),i=jt();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Wn(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Wn=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ut.comparator(t.key,e.key)||G(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return G(t.targetOrBatchId,e.targetOrBatchId)||ut.comparator(t.key,e.key)},t}(),Jn=function(){function t(t,e){this.persistence=t,this.localViewReferences=new $n,this.queryDataByTarget={},v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Hn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Hn(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],s=jt(),a=0,l=r;a<l.length;a++){i.push((f=l[a]).batchId);for(var u=0,c=f.mutations;u<c.length;u++)s=s.add(c[u].key)}for(var h=0,d=t;h<d.length;h++){var f;o.push((f=d[h]).batchId);for(var p=0,g=f.mutations;p<g.length;p++)s=s.add(g[p].key)}return e.localDocuments.getDocuments(n,s).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this,n=kt.now(),r=t.reduce(function(t,e){return t.add(e.key)},jt());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return e.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],s=0,a=t;s<a.length;s++){var l=a[s],u=l.extractBaseValue(r.get(l.key));null!=u&&o.push(new Un(l.key,u,u.fieldMask(),jn.exists(!0)))}return e.mutationQueue.addMutationBatch(i,n,o,t).next(function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}})})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):qt.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer(),i=e.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=[];T(e.targetChanges,function(e,r){var a=n.queryDataByTarget[e];if(a){s.push(n.queryCache.removeMatchingKeys(o,r.removedDocuments,e).next(function(){return n.queryCache.addMatchingKeys(o,r.addedDocuments,e)}));var l=r.resumeToken;if(l.length>0){var u=a.copy({resumeToken:l,snapshotVersion:i});n.queryDataByTarget[e]=u,t.shouldPersistQueryData(a,u,r)&&s.push(n.queryCache.updateQueryData(o,u))}}});var a=Pt(),l=jt();if(e.documentUpdates.forEach(function(t,e){l=l.add(t)}),s.push(r.getEntries(o,l).next(function(t){e.documentUpdates.forEach(function(i,l){var u=t.get(i);null==u||l.version.compareTo(u.version)>0||0===l.version.compareTo(u.version)&&u.hasPendingWrites?(r.addEntry(l),a=a.insert(i,l)):l instanceof ge&&l.version.isEqual(Ct.MIN)?(r.removeEntry(i),a=a.insert(i,l)):p("LocalStore","Ignoring outdated watch update for ",i,". Current version:",u.version," Watch version:",l.version),e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!i.isEqual(Ct.MIN)){var u=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(t){return v(i.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+i+" < "+t),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,i)});s.push(u)}return qt.waitFor(s).next(function(){return r.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,a)})})},t.shouldPersistQueryData=function(t,e,n){return v(e.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return qt.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),qt.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,qt.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new Ke(t,i,Qe.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return v(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction("Release query",e?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,t).next(function(i){v(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,s=n.queryDataByTarget[o],a=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?qt.resolve():qt.forEach(a,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,s)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=qt.resolve();return o.forEach(function(r){s=s.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,s=e.docVersions.get(r);v(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),s.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Gn=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new At(Wn.compareByKey)}return t.prototype.checkEmpty=function(t){return qt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,qt.resolve()},t.prototype.getLastStreamToken=function(t){return qt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,qt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Ut(i,e,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var l=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Wn(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast())}return qt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return qt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),qt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return qt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return qt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return qt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Wn(e,0),i=new Wn(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),qt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new At(G);return e.forEach(function(t){var e=new Wn(t,0),i=new Wn(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),qt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;ut.isDocumentKey(i)||(i=i.child(""));var o=new Wn(new ut(i),0),s=new At(G);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)},o),qt.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return qt.forEach(e.mutations,function(i){var o=new Wn(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Wn(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return qt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),qt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),Qn=function(){function t(t){this.persistence=t,this.queries=new be(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Ct.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new $n,this.targetCount=0,this.targetIdGenerator=Zt.forQueryCache()}return t.prototype.getTargetCount=function(t){return qt.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),qt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return qt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return qt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,qt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),qt.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,qt.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),qt.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,qt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=e&&!n[a.targetId]&&(r.queries.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),qt.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return qt.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return qt.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return b("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),qt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),qt.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),qt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return qt.resolve(n)},t.prototype.containsKey=function(t,e){return qt.resolve(this.references.containsKey(e))},t}(),Kn=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new Et(ut.comparator),this.newDocumentChanges=jt(),this.size=0}return t.prototype.addEntry=function(t,e){var n=e.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(e);return this.docs=this.docs.insert(n,{maybeDocument:e,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return qt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ot();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),qt.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Rt(),r=new ut(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;s instanceof pe&&e.matches(s)&&(n=n.insert(s.key,s))}return qt.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return qt.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=Pt();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new ge(t,Ct.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=jt(),qt.resolve(n)},t.prototype.newChangeBuffer=function(){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return qt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i?n.push(e.documentCache.addEntry(t,i)):e.documentCache.removeEntry(r)}),qt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(ve),t}(),Yn=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new it(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Qn(this),this.indexManager=new Te,this.remoteDocumentCache=new Kn(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new tr(t,new Ye(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new Zn(t)})},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Gn(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Xn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return qt.or((n=this.mutationQueues,r=[],x(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),Xn=function(){return function(t){this.currentSequenceNumber=t}}(),Zn=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw b("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),qt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),qt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),qt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qt.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(t){t||n.removeEntry(r)})}).next(function(){return e._orphanedDocuments=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return qt.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return qt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),tr=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new be(function(t){return vt(t.path)}),this.garbageCollector=new rn(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return qt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return qt.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?qt.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,function(i){return n.isPinned(t,i,e).next(function(t){t||(r++,o.removeEntry(i))})}).next(function(){return o.apply(t)}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qt.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw b("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return qt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return qt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return qt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),er=Number,nr=er.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),rr=er.MAX_SAFE_INTEGER||Math.pow(2,53)-1,ir=er.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function or(t){return null==t}function sr(t){return ir(t)&&t<=rr&&t>=nr}var ar=1e3,lr=1.5,ur=6e4,cr=function(){function t(t,e,n,r,i){void 0===n&&(n=ar),void 0===r&&(r=lr),void 0===i&&(i=ur),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),hr=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),dr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=hr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new cr(t,e)}return t.prototype.isStarted=function(){return this.state===hr.Starting||this.state===hr.Open||this.state===hr.Backoff},t.prototype.isOpen=function(){return this.state===hr.Open},t.prototype.start=function(){this.state!==hr.Error?(v(this.state===hr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(hr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=hr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.isOpen()?[2,this.close(hr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===hr.Error||or(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==hr.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(g(e.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===hr.Initial,"Must be in initial state to auth"),this.state=hr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new k(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;v(this.state===hr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return v(e.state===hr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=hr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;v(this.state===hr.Error,"Should only perform backoff when in Error state"),this.state=hr.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return v(this.state===hr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=hr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),p("PersistentStream","close with error: "+t),this.stream=null,this.close(hr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),fr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,ht.ListenStreamConnectionBackoff,ht.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return s.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(dr),pr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,ht.WriteStreamConnectionBackoff,ht.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s.lastStreamToken=w(),s}return s.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(dr),gr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new pr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new fr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Pt();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),mr=function(){function t(t){this.datastore=t,this.readVersions=Lt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new k(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach(function(t){t instanceof ge||t instanceof pe?n.recordVersion(t):b("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new qn(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach(function(e){t=t.remove(e.key)}),!t.isEmpty())throw new k(_.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof pe)e=t.version;else{if(!(t instanceof ge))throw b("Document in a transaction was a "+t.constructor.name);e=Ct.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new k(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?jn.updateTime(e):jn.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(Ct.forDeletedDoc()))throw new k(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(e)}return jn.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}(),br=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),vr=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),yr=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=br.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(br.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ht.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,v(t.state===br.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(br.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===br.Online?(this.setAndBroadcast(br.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(br.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===br.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(e),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),wr=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function _r(t){switch(t){case _.OK:return b("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return b("Unknown status code: "+t)}}function kr(t){if(void 0===t)return g("GRPC error has no .code"),_.UNKNOWN;switch(t){case wr.OK:return _.OK;case wr.CANCELLED:return _.CANCELLED;case wr.UNKNOWN:return _.UNKNOWN;case wr.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case wr.INTERNAL:return _.INTERNAL;case wr.UNAVAILABLE:return _.UNAVAILABLE;case wr.UNAUTHENTICATED:return _.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case wr.NOT_FOUND:return _.NOT_FOUND;case wr.ALREADY_EXISTS:return _.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return _.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case wr.ABORTED:return _.ABORTED;case wr.OUT_OF_RANGE:return _.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return _.UNIMPLEMENTED;case wr.DATA_LOSS:return _.DATA_LOSS;default:return b("Unknown status code: "+t)}}function Cr(t){if(void 0===t)return wr.OK;switch(t){case _.OK:return wr.OK;case _.CANCELLED:return wr.CANCELLED;case _.UNKNOWN:return wr.UNKNOWN;case _.DEADLINE_EXCEEDED:return wr.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return wr.RESOURCE_EXHAUSTED;case _.INTERNAL:return wr.INTERNAL;case _.UNAVAILABLE:return wr.UNAVAILABLE;case _.UNAUTHENTICATED:return wr.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return wr.INVALID_ARGUMENT;case _.NOT_FOUND:return wr.NOT_FOUND;case _.ALREADY_EXISTS:return wr.ALREADY_EXISTS;case _.PERMISSION_DENIED:return wr.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return wr.FAILED_PRECONDITION;case _.ABORTED:return wr.ABORTED;case _.OUT_OF_RANGE:return wr.OUT_OF_RANGE;case _.UNIMPLEMENTED:return wr.UNIMPLEMENTED;case _.DATA_LOSS:return wr.DATA_LOSS;default:return b("Unknown status code: "+t)}}var Er=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ut.comparator(e.key,n.key)}:function(t,e){return ut.comparator(t.key,e.key)},this.keyedMap=Rt(),this.sortedSet=new Et(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Sr=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Tr=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),xr=function(){function t(){this.changeMap=new Et(ut.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Sr.Added&&n.type===Sr.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Sr.Metadata&&n.type!==Sr.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Sr.Modified&&n.type===Sr.Modified?this.changeMap=this.changeMap.insert(e,{type:Sr.Modified,doc:t.doc}):t.type===Sr.Modified&&n.type===Sr.Added?this.changeMap=this.changeMap.insert(e,{type:Sr.Added,doc:t.doc}):t.type===Sr.Removed&&n.type===Sr.Added?this.changeMap=this.changeMap.remove(e):t.type===Sr.Removed&&n.type===Sr.Modified?this.changeMap=this.changeMap.insert(e,{type:Sr.Removed,doc:n.doc}):t.type===Sr.Added&&n.type===Sr.Removed?this.changeMap=this.changeMap.insert(e,{type:Sr.Modified,doc:t.doc}):b("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ar=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Sr.Added,doc:t})}),new t(e,n,Er.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ir=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Dr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Ct.MIN,i,Vt(),Pt(),jt())},t}(),Dr=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(w(),n,jt(),jt(),jt())},t}(),Pr=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),Or=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),Nr=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Rr=function(){return function(t,e,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Mr=function(){function t(){this.pendingResponses=0,this.documentChanges=jr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=jt(),e=jt(),n=jt();return this.documentChanges.forEach(function(r,i){switch(i){case Sr.Added:t=t.add(r);break;case Sr.Modified:e=e.add(r);break;case Sr.Removed:n=n.add(r);break;default:b("Encountered invalid change type: "+i)}}),new Dr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=jr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Lr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Pt(),this.pendingDocumentTargetMapping=Fr(),this.pendingTargetResets=new At(G)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof pe?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ge&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Nr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Nr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Nr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Nr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Nr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:b("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):T(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ut(i.path);this.removeDocumentFromTarget(e,o,new ge(o,Ct.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};T(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var s=new ut(o.query.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(r,s)||e.removeDocumentFromTarget(r,s,new ge(s,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=jt();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Qe.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ir(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pt(),this.pendingDocumentTargetMapping=Fr(),this.pendingTargetResets=new At(G),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Sr.Modified:Sr.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Sr.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Mr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new At(G),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.queryDataForActiveTarget(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Mr,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Fr(){return new Et(ut.comparator)}function jr(){return new Et(ut.comparator)}var Br="RemoteStore",Vr=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return s.__awaiter(o,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Br,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new yr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(br.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(br.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(p(Br,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return p(Br,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(br.Unknown),[2]}})})},t.prototype.listen=function(t){v(!E(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(E(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),A(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(br.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Lr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!A(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){return T(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(br.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(br.Online),t instanceof Rr&&t.state===Nr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Pr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Or?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof Rr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Ct.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(Ct.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return T(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:w()}),e.sendUnwatchRequest(t);var r=new Ke(n.query,t,Qe.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return E(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(hn)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=zt.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return _r(t.code)?(p(Br,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(hn)]):[2]})})},t.prototype.handleWriteError=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){return _r(i=t.code)&&i!==_.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new mr(this.datastore)},t.prototype.restartNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(br.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},t.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Br,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(br.Unknown),e.label=4;case 4:return[2]}})})},t}(),Ur=function(){function t(t,e){if(D("GeoPoint",arguments,2),N("GeoPoint","number",1,t),N("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new k(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new k(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return G(this._lat,t._lat)||G(this._long,t._long)},t}(),zr=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[ti]:[new Zr(t),ti];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Yr.ASCENDING)===Yr.ASCENDING?ti:ei)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof $r)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";or(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),or(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!or(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof $r&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof $r&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return ut.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):ut.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),qr=function(){return function(){}}(),Hr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return b("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),$r=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return s.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===Hr.IN?(v(r instanceof Nn,"Comparing on key with IN, but filter value not an ArrayValue"),v(r.internalValue.every(function(t){return t instanceof Dn}),"Comparing on key with IN, but an array value was not a RefValue"),new Jr(t,r)):(v(r instanceof Dn,"Comparing on key, but filter value not a RefValue"),v(n!==Hr.ARRAY_CONTAINS&&n!==Hr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Wr(t,n,r));if(r.isEqual(wn.INSTANCE)){if(n!==Hr.EQUAL)throw new k(_.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Sn.NAN)){if(n!==Hr.EQUAL)throw new k(_.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===Hr.ARRAY_CONTAINS?new Gr(t,r):n===Hr.IN?(v(r instanceof Nn,"IN filter has invalid value: "+r.toString()),new Qr(t,r)):n===Hr.ARRAY_CONTAINS_ANY?(v(r instanceof Nn,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Kr(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Hr.LESS_THAN:return t<0;case Hr.LESS_THAN_OR_EQUAL:return t<=0;case Hr.EQUAL:return 0===t;case Hr.GREATER_THAN:return t>0;case Hr.GREATER_THAN_OR_EQUAL:return t>=0;default:return b("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[Hr.LESS_THAN,Hr.LESS_THAN_OR_EQUAL,Hr.GREATER_THAN,Hr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(qr),Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.matches=function(t){var e=ut.comparator(t.key,this.value.key);return this.matchesComparison(e)},e}($r),Jr=function(t){function e(e,n){var r=t.call(this,e,Hr.IN,n)||this;return r.value=n,r}return s.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some(function(e){return t.key.isEqual(e.key)})},e}($r),Gr=function(t){function e(e,n){return t.call(this,e,Hr.ARRAY_CONTAINS,n)||this}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Nn&&e.contains(this.value)},e}($r),Qr=function(t){function e(e,n){var r=t.call(this,e,Hr.IN,n)||this;return r.value=n,r}return s.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}($r),Kr=function(t){function e(e,n){var r=t.call(this,e,Hr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return s.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Nn&&n.internalValue.some(function(t){return e.value.contains(t)})},e}($r),Yr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Xr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Dn,"Bound has a non-key value where the key path is being used."),n=ut.comparator(o.key,e.key);else{var s=e.field(i.field);v(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===Yr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},t}(),Zr=function(){function t(t,e){this.field=t,void 0===e&&(e=Yr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?pe.compareByKey(t,e):pe.compareByField(this.field,t,e);switch(this.dir){case Yr.ASCENDING:return n;case Yr.DESCENDING:return-1*n;default:return b("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ti=new Zr(lt.keyField(),Yr.ASCENDING),ei=new Zr(lt.keyField(),Yr.DESCENDING),ni=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new An(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ri=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=si(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Nn(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Q(e.elements,this.elements)},t}(),ii=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=si(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Nn(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Q(e.elements,this.elements)},t}(),oi=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);return n instanceof En&&this.operand instanceof En?new En(n.internalValue+this.operand.internalValue):new Sn(n.internalValue+this.operand.internalValue)},t.prototype.applyToRemoteDocument=function(t,e){return v(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof kn?t:new En(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function si(t){return t instanceof Nn?t.internalValue.slice():[]}var ai,li,ui=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),ci=((ai={})[Yr.ASCENDING.name]="ASCENDING",ai[Yr.DESCENDING.name]="DESCENDING",ai),hi=((li={})[Hr.LESS_THAN.name]="LESS_THAN",li[Hr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",li[Hr.GREATER_THAN.name]="GREATER_THAN",li[Hr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",li[Hr.EQUAL.name]="EQUAL",li[Hr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",li[Hr.IN.name]="IN",li[Hr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",li),di=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t,e){v(!or(t),e+" is missing")}function pi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):b("can't parse "+t)}var gi=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:kr(t.code);return new k(e,t.message||"")},t.prototype.toInt32Value=function(t){return or(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return or(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=pi(t.seconds||"0");return new kt(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=di.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new kt(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),Ct.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=st.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ut(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?st.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new st(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new st(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof wn)return{nullValue:"NULL_VALUE"};if(t instanceof _n)return{booleanValue:t.value()};if(t instanceof En)return{integerValue:""+t.value()};if(t instanceof Sn){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Tn?{stringValue:t.value()}:t instanceof On?{mapValue:this.toMapValue(t)}:t instanceof Nn?{arrayValue:this.toArrayValue(t)}:t instanceof xn?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Pn?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof In?{bytesValue:this.toBytes(t.value())}:t instanceof Dn?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:b("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return wn.INSTANCE;if("booleanValue"in t)return _n.of(t.booleanValue);if("integerValue"in t)return new En(pi(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Sn.NAN;if("Infinity"===t.doubleValue)return Sn.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Sn.NEGATIVE_INFINITY}return new Sn(t.doubleValue)}if("stringValue"in t)return new Tn(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t)return fi(t.arrayValue,"arrayValue"),new Nn((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if("timestampValue"in t)return fi(t.timestampValue,"timestampValue"),new xn(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t)return fi(t.geoPointValue,"geoPointValue"),new Pn(new Ur(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){fi(t.bytesValue,"bytesValue");var n=this.fromBlob(t.bytesValue);return new In(n)}if("referenceValue"in t){fi(t.referenceValue,"referenceValue");var r=this.fromResourceName(t.referenceValue),i=new rt(r.get(1),r.get(3)),o=new ut(this.extractLocalPathFromResourceName(r));return new Dn(i,o)}return b("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new pe(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=On.EMPTY;return x(t,function(t,r){n=n.set(new lt([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){v(!!t.found,"Tried to deserialize a found document from a missing document."),fi(t.found.name,"doc.found.name"),fi(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new pe(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ge(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):b("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Nr.Added:return"ADD";case Nr.Current:return"CURRENT";case Nr.NoChange:return"NO_CHANGE";case Nr.Removed:return"REMOVE";case Nr.Reset:return"RESET";default:return b("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Or)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Pr){var e;if(t.newDoc instanceof pe)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof ge)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Rr){var n=void 0;return t.cause&&(n={code:Cr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return b("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e;if("targetChange"in t){fi(t.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=t.targetChange.resumeToken||this.emptyByteString(),o=t.targetChange.cause,s=o&&this.fromRpcStatus(o);e=new Rr(n,r,i,s||null)}else if("documentChange"in t){fi(t.documentChange,"documentChange"),fi(t.documentChange.document,"documentChange.name"),fi(t.documentChange.document.name,"documentChange.document.name"),fi(t.documentChange.document.updateTime,"documentChange.document.updateTime");var a=t.documentChange,l=this.fromName(a.document.name),u=this.fromVersion(a.document.updateTime),c=this.fromFields(a.document.fields||{}),h=new pe(l,u,c,{},a.document);e=new Pr(a.targetIds||[],a.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){fi(t.documentDelete,"documentDelete"),fi(t.documentDelete.document,"documentDelete.document");var d=t.documentDelete;l=this.fromName(d.document),u=d.readTime?this.fromVersion(d.readTime):Ct.forDeletedDoc(),h=new ge(l,u),e=new Pr([],d.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){fi(t.documentRemove,"documentRemove"),fi(t.documentRemove.document,"documentRemove");var f=t.documentRemove;l=this.fromName(f.document),e=new Pr([],f.removedTargetIds||[],l,null)}else{if(!("filter"in t))return b("Unknown change type "+JSON.stringify(t));fi(t.filter,"filter"),fi(t.filter.targetId,"filter.targetId");var p=t.filter,g=new ui(p.count||0);e=new Or(p.targetId,g)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Nr.NoChange:"ADD"===t?Nr.Added:"REMOVE"===t?Nr.Removed:"CURRENT"===t?Nr.Current:"RESET"===t?Nr.Reset:b("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return Ct.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ct.MIN:e.readTime?this.fromVersion(e.readTime):Ct.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Vn)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof qn)e={delete:this.toName(t.key)};else if(t instanceof Un)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof zn))return b("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):jn.NONE;if(t.update){fi(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Un(r,i,o,n)}return new Vn(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new qn(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new zn(r,s)}return b("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:b("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?jn.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?jn.exists(t.exists):jn.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new Ln(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof ni)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ri)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ii)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof oi)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw b("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=ni.instance;else if("appendMissingElements"in t)n=new ri((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)}));else if("removeAllFromArray"in t)n=new ii((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)}));else if("increment"in t){var r=this.fromValue(t.increment);v(r instanceof kn,"NUMERIC_ADD transform requires a NumberValue"),n=new oi(r)}else b("Unknown transform proto: "+JSON.stringify(t));var i=lt.fromServerFormat(t.fieldPath);return new Mn(i,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return v(1===e,"DocumentsTarget contained other than 1 document: "+e),zr.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var l=null;n.limit&&(l=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new zr(e,i,a,s,l,u,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Qe.Listen:return null;case Qe.ExistenceFilterMismatch:return"existence-filter-mismatch";case Qe.LimboResolution:return"limbo-document";default:return b("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof $r?e.toUnaryOrFieldFilter(t):b("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):b("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Xr(r,n)},t.prototype.toDirection=function(t){return ci[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Yr.ASCENDING;case"DESCENDING":return Yr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return hi[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Hr.EQUAL;case"GREATER_THAN":return Hr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Hr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Hr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Hr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Hr.ARRAY_CONTAINS;case"IN":return Hr.IN;case"ARRAY_CONTAINS_ANY":return Hr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return b("Unspecified operator");default:return b("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return lt.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Zr(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return $r.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===Hr.EQUAL){if(t.value.isEqual(Sn.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(wn.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return $r.create(e,Hr.EQUAL,Sn.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return $r.create(n,Hr.EQUAL,wn.INSTANCE);case"OPERATOR_UNSPECIFIED":return b("Unspecified filter");default:return b("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return lt.fromServerFormat(t)});return Rn.fromArray(e)},t}(),mi=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),bi=function(){function t(t){this.syncEngine=t,this.queries=new be(function(t){return t.canonicalId()}),this.onlineState=br.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new mi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return s.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,s=i.listeners;o<s.length;o++)s[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),vi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=br.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Sr.Metadata&&e.push(i)}t=new Ar(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==br.Offline?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===br.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Ar.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),yi=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=jt(),i=jt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Sr.Added:r=r.add(a.doc.key);break;case Sr.Removed:i=i.add(a.doc.key)}}return new t(e,r,i)},t}(),wi=function(){return function(t){this.key=t}}(),_i=function(){return function(t){this.key=t}}(),ki=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=jt(),this.mutatedKeys=jt(),this.documentSet=new Er(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new xr,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var u=i.get(t),c=e instanceof pe?e:null;c&&(v(t.isEqual(c.key),"Mismatching keys found in document changes: "+t+" != "+c.key),c=n.query.matches(c)?c:null);var h=!!u&&n.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||n.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(r.track({type:Sr.Metadata,doc:c}),f=!0):n.shouldWaitForSyncedDocument(u,c)||(r.track({type:Sr.Modified,doc:c}),f=!0,l&&n.query.docComparator(c,l)>0&&(a=!0)):!u&&c?(r.track({type:Sr.Added,doc:c}),f=!0):u&&!c&&(r.track({type:Sr.Removed,doc:u}),f=!0,l&&(a=!0)),f&&(c?(s=s.add(c),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;s.size>this.query.limit;){var u=s.last();s=s.delete(u.key),o=o.delete(u.key),r.track({type:Sr.Removed,doc:u})}return v(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Sr.Added:return 1;case Sr.Modified:case Sr.Metadata:return 2;case Sr.Removed:return 0;default:return b("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Tr.Synced:Tr.Local,l=a!==this.syncState;return this.syncState=a,0!==o.length||l?{snapshot:new Ar(this.query,t.documentSet,i,o,t.mutatedKeys,a===Tr.Local,l,!1),limboChanges:s}:{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===br.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new xr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=jt(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new _i(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new wi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=jt();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Ar.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Tr.Local)},t}(),Ci=5,Ei=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=Ci,this.backoff=new cr(this.asyncQueue,ht.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){var t,e,n=this;return s.__generator(this,function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.handleTransactionError(t)})})}).catch(function(t){n.handleTransactionError(t)}),[2]})})})},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!or(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(g){return this.deferred.reject(g),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return e.runWithBackOff(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_r(e)}return!1},t}(),Si=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Ti=function(){return function(t){this.key=t,this.receivedDocument=!1}}(),xi=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new be(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Et(ut.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new $n,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Zt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=br.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=s.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(i),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,l,u,c;return s.__generator(this,function(s){switch(s.label){case 0:return[4,this.localStore.executeQuery(n=t.query)];case 1:return r=s.sent(),[4,this.localStore.remoteDocumentKeys(t.targetId)];case 2:return i=s.sent(),o=new ki(n,i),a=o.computeDocChanges(r),l=Dr.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&this.onlineState!==br.Offline),v(0===(u=o.applyChanges(a,!0===this.isPrimary,l)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new Si(n,t.targetId,o),this.queryViewsByQuery.set(n,c),this.queryViewsByTarget[t.targetId]=c,[2,u.snapshot]}})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t.query)];case 1:return e=i.sent(),[4,this.localStore.remoteDocumentKeys(t.targetId)];case 2:return n=i.sent(),r=t.view.synchronizeWithPersistedState(e,n),this.isPrimary&&this.updateTrackedLimbos(t.targetId,r.limboChanges),[2,r]}})})},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(hn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},t.prototype.runTransaction=function(t,e,n){new Ei(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),x(t.targetChanges,function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,hn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===vr.RemoteStore||!this.isPrimary&&e===vr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,l,u=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new Et(ut.comparator)).insert(r,new ge(r,Ct.forDeletedDoc())),o=jt().add(r),a=new Ir(Ct.MIN,{},new At(G),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return v(!!(l=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(l.query,!1).then(function(){return u.removeAndCleanupQuery(l)}).catch(hn)];case 2:s.sent(),this.syncEngineListener.onWatchError(l.query,e),s.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(p("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):b("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e=t.batch.batchId,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,hn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.rejectFailedWrite=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,hn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.registerPendingWritesCallback=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}})})},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach(function(t){t.resolve()}),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach(function(e){e.forEach(function(e){e.reject(new k(_.CANCELLED,t))})}),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Et(G)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof wi?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof _i?(p("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):b("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){p("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=zr.atPath(e.path);this.limboResolutionsByTarget[n]=new Ti(e),this.remoteStore.listen(new Ke(r,n,Qe.LimboResolution,it.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(s,a){i.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var i=a.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[a.targetId]);if(o.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var s=yi.fromSnapshot(a.targetId,i.snapshot);r.push(s)}}))}),[4,Promise.all(i)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return s.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,l=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],a=Promise.resolve(),T(this.queryViewsByTarget,function(t,e){l.sharedClientState.isLocalQueryTarget(t)?o.push(t):a=a.then(function(){return l.unlisten(e.query)}),l.remoteStore.unlisten(e.targetId)}),[4,a]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;T(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Et(ut.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,l,u,c;return s.__generator(this,function(s){switch(s.label){case 0:e=[],n=[],r=0,i=t,s.label=1;case 1:return r<i.length?(a=void 0,(l=this.queryViewsByTarget[o=i[r]])?[4,this.localStore.releaseQuery(l.query,!0)]:[3,5]):[3,11];case 2:return s.sent(),[4,this.localStore.allocateQuery(l.query)];case 3:return a=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(l)];case 4:return(u=s.sent()).snapshot&&n.push(u.snapshot),[3,9];case 5:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return v(!!(c=s.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(c)];case 7:return a=s.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:s.sent(),s.label=9;case 9:e.push(a),s.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,e]}})})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r,i,o,a,l;return s.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return p("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,11];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return s.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=s.sent(),i=Ir.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return s.sent(),[3,11];case 4:return(u=o=s.sent()).code!==_.DATA_LOSS||u.message!==ye?[3,6]:(a=[],T(this.queryViewsByTarget,function(t){return a.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)]);case 5:return s.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return this.removeAndCleanupQuery(l=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(l.query,!0)];case 9:return s.sent(),this.syncEngineListener.onWatchError(l.query,n),[3,11];case 10:b("Unexpected target state: "+e),s.label=11;case 11:return[2]}var u})})},t.prototype.applyActiveTargetsChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,l,u,c,h,d=this;return s.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(v(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return s.__generator(this,function(n){switch(n.label){case 0:return(e=l.queryViewsByTarget[t])?[4,l.localStore.releaseQuery(e.query,!1).then(function(){d.remoteStore.unlisten(t),d.removeAndCleanupQuery(e)}).catch(hn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},l=this,u=0,c=e,f.label=7;case 7:return u<c.length?[5,a(h=c[u])]:[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?jt().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:jt()},t}(),Ai=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Ii="SharedClientState",Di="firestore_clients",Pi="firestore_mutations",Oi="firestore_targets",Ni="firestore_online_state",Ri="firestore_sequence_number",Mi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new k(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(g(Ii,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Li=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new k(r.error.code,r.error.message)),i?new t(e,r.state,o):(g(Ii,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Vt(),s=0;i&&s<r.activeTargetIds.length;++s)i=sr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(g(Ii,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ji=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in br&&"string"==typeof n.clientId?new t(n.clientId,br[n.onlineState]):(g(Ii,"Failed to parse online state: "+e),null)},t}(),Bi=function(){function t(){this.activeTargetIds=Vt()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vi=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new k(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ri+"_"+r,this.activeClients[this.localClientId]=new Bi,this.clientStateKeyRe=new RegExp("^"+Di+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Pi+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Oi+"_"+s+"_(\\d+)$"),this.onlineStateKey=Ni+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,a,l,u,c,h=this;return s.__generator(this,function(s){switch(s.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Fi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(l=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(l),u=0,c=this.earlyEvents;u<c.length;u++)this.handleWebStorageEvent(c[u]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Vt();return x(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Li.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p(Ii,"READ",t,e),e},t.prototype.setItem=function(t,e){p(Ii,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p(Ii,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(p(Ii,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=it.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(r){g(Ii,"Failed to read sequence number from WebStorage",r)}return e}(t.newValue))!==it.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Mi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:br[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Li(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Di+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Oi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Pi+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Fi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Mi.fromWebStorageEntry(new Ai(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Li.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return ji.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(p(Ii,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),Ui=function(){function t(){this.localState=new Bi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Bi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),zi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return en.withCacheSize(this.cacheSizeBytes)},t}(),qi=function(){return function(){}}(),Hi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=J.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotShutdown();var n=new ct,r=new ct,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof zi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof k?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotShutdown=function(){if(this.asyncQueue.isShuttingDown)throw new k(_.FAILED_PRECONDITION,"The client has already been shutdown.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=cn.buildStoragePrefix(this.databaseInfo),i=new gi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(s){switch(s.label){case 0:if(e.synchronizeTabs&&!Vi.isAvailable(this.platform))throw new k(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.synchronizeTabs?(this.sharedClientState=new Vi(this.asyncQueue,this.platform,r,this.clientId,t),[4,cn.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return this.sharedClientState=new Ui,[4,cn.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=s.sent(),s.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Yn.createEagerPersistence(this.clientId),this.sharedClientState=new Ui,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return p("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return s.__awaiter(n,void 0,void 0,function(){var n,i,o,a,l=this;return s.__generator(this,function(u){switch(u.label){case 0:return this.localStore=new Jn(this.persistence,t),e&&(this.lruScheduler=new nn(e,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new gr(this.asyncQueue,r,this.credentials,i),a=function(t){return l.syncEngine.applyOnlineStateChange(t,vr.SharedClientState)},this.remoteStore=new Vr(this.localStore,o,this.asyncQueue,function(t){return l.syncEngine.applyOnlineStateChange(t,vr.RemoteStore)},n),this.syncEngine=new xi(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new bi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return u.sent(),[4,this.remoteStore.start()];case 2:return u.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return s.__awaiter(l,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return u.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return s.__awaiter(l,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.shutdown()];case 1:return t.sent(),[2]}})})})];case 4:return u.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotShutdown();var e=new ct;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.registerPendingWritesCallback(e)}),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotShutdown();var i=new vi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.clientShutdown||this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof pe)return t;if(t instanceof ge)return null;throw new k(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=jt(),r=new ki(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this;this.verifyNotShutdown();var n=new ct;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(t.prototype,"clientShutdown",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotShutdown();var n=new ct;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()}),n.promise},t}(),$i=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Wi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new k(_.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+W(1,"element")+".")}();for(var n=0;n<t.length;++n)if(N("FieldPath","string",n,t[n]),0===t[n].length)throw new k(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(lt.keyField().canonicalString()),t}(),Ji=new RegExp("[~\\*/\\[\\]]"),Gi=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),Qi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Ai.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Ki=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.currentUser=Ai.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new k(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Gi(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new Ai(t)},t}(),Yi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Ai.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Xi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Yi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Ai.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zi(t){if(!t)return new Qi;switch(t.type){case"gapi":var e=t.client;return v(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Xi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new k(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function to(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var eo=function(){function t(t){this._methodName=t}return t.delete=function(){return I("FieldValue.delete",arguments),no.instance},t.serverTimestamp=function(){return I("FieldValue.serverTimestamp",arguments),ro.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P("FieldValue.arrayUnion",arguments,1),new io(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P("FieldValue.arrayRemove",arguments,1),new oo(t)},t.increment=function(t){return N("FieldValue.increment","number",1,t),D("FieldValue.increment",arguments,1),new so(t)},t.prototype.isEqual=function(t){return this===t},t}(),no=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return s.__extends(e,t),e.instance=new e,e}(eo),ro=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(e,t),e.instance=new e,e}(eo),io=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return s.__extends(e,t),e}(eo),oo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return s.__extends(e,t),e}(eo),so=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return s.__extends(e,t),e}(eo),ao=C(eo,"Use FieldValue.<field>() instead."),lo=/^__.*__$/,uo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new Un(t,this.data,this.fieldMask,e):new Vn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new zn(t,this.fieldTransforms)),n},t}(),co=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Un(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new zn(t,this.fieldTransforms)),n},t}(),ho=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function fo(t){switch(t){case ho.Set:case ho.MergeSet:case ho.Update:return!0;case ho.Argument:return!1;default:throw b("Unexpected case for UserDataSource: "+t)}}var po=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new k(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(fo(this.dataSource)&&lo.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),go=function(){return function(t,e){this.databaseId=t,this.key=e}}(),mo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new po(ho.Set,t,lt.EMPTY_PATH);vo("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new uo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new po(ho.MergeSet,t,lt.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=new At(lt.comparator),l=0,u=n;l<u.length;l++){var c=u[l],h=void 0;if(c instanceof Wi)h=c._internalPath;else{if("string"!=typeof c)throw b("Expected stringOrFieldPath to be a string or a FieldPath");h=wo(t,c)}if(!r.contains(h))throw new k(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=Rn.fromSet(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=Rn.fromArray(r.fieldMask),o=r.fieldTransforms;return new uo(s,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new po(ho.Update,t,lt.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i=new At(lt.comparator),o=On.EMPTY;x(e,function(e,s){var a=wo(t,e),l=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,l))instanceof no)i=i.add(a);else{var u=n.parseData(s,l);null!=u&&(i=i.add(a),o=o.set(a,u))}});var s=Rn.fromSet(i);return new co(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new po(ho.Update,t,lt.EMPTY_PATH),o=[yo(t,e)],s=[n];if(r.length%2!=0)throw new k(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(yo(t,r[a])),s.push(r[a+1]);var l=new At(lt.comparator),u=On.EMPTY;for(a=0;a<o.length;++a){var c=o[a],h=i.childContextForFieldPath(c),d=this.runPreConverter(s[a],h);if(d instanceof no)l=l.add(c);else{var f=this.parseData(d,h);null!=f&&(l=l.add(c),u=u.set(c,f))}}var p=Rn.fromSet(l);return new co(u,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new po(ho.Argument,t,lt.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=_o(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(bo(t=this.runPreConverter(t,e)))return vo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof eo)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new Et(G);return A(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):x(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new On(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=wn.INSTANCE),n.push(s),r++}return new Nn(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!fo(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof no){if(e.dataSource!==ho.MergeSet)throw e.dataSource===ho.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ro)e.fieldTransforms.push(new Mn(e.path,ni.instance));else if(t instanceof io){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ri(n);e.fieldTransforms.push(new Mn(e.path,r))}else if(t instanceof oo){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ii(n);e.fieldTransforms.push(new Mn(e.path,i))}else if(t instanceof so){var o=this.parseQueryValue("FieldValue.increment",t._operand),s=new oi(o);e.fieldTransforms.push(new Mn(e.path,s))}else b("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return wn.INSTANCE;if("number"==typeof t)return sr(t)?new En(t):new Sn(t);if("boolean"==typeof t)return _n.of(t);if("string"==typeof t)return new Tn(t);if(t instanceof Date)return new xn(kt.fromDate(t));if(t instanceof kt)return new xn(new kt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Ur)return new Pn(t);if(t instanceof Z)return new In(t);if(t instanceof go)return new Dn(t.databaseId,t.key);throw e.createError("Unsupported field value: "+U(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new po(ho.Argument,t,lt.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function bo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof Ur||t instanceof Z||t instanceof go||t instanceof eo)}function vo(t,e,n){if(!bo(n)||!V(n)){var r=U(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function yo(t,e){if(e instanceof Wi)return e._internalPath;if("string"==typeof e)return wo(t,e);throw new k(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function wo(t,e){try{return function(t){if(t.search(Ji)>=0)throw new k(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Wi.bind.apply(Wi,[void 0].concat(t.split("."))))}catch(e){throw new k(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(r){var n=_o(r);throw new k(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function _o(t){return t instanceof Error?t.message:t.toString()}var ko="firestore.googleapis.com",Co=!0,Eo=!0,So=!1,To=en.COLLECTION_DISABLED,xo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new k(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ko,this.ssl=Co}else M("settings","non-empty string","host",t.host),this.host=t.host,L("settings","boolean","ssl",t.ssl),this.ssl=S(t.ssl,Co);if(q("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",t.credentials),this.credentials=t.credentials,L("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=S(t.timestampsInSnapshots,Eo),L("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=en.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==To&&t.cacheSizeBytes<en.MINIMUM_CACHE_SIZE_BYTES)throw new k(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+en.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?So:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Ao=function(){function t(e){var n=this;if(this._firebaseApp=null,this._queue=new ft,this.INTERNAL={delete:function(){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return t.sent(),[2]}})})}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=t.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Ki(r)}else{var i=e;if(!i.projectId)throw new k(_.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new rt(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Qi}this._settings=new xo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(D("Firestore.settings",arguments,1),N("Firestore.settings","object",1,t),E(t,"persistence"))throw new k(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new xo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new k(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Zi(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new k(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=S(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new zi(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=cn.buildStoragePrefix(this.makeDatabaseInfo()),n=new ct;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return s.__awaiter(t,void 0,void 0,function(){var t;return s.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new k(_.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,cn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise},t.prototype._shutdown=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isShutdown",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientShutdown},enumerable:!0,configurable:!0}),t.prototype._waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new qi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new et(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Hi(y.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new mo(function(e){if(e instanceof Po){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new k(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new go(t,e._key)}return e})},t.databaseIdFromApp=function(t){var e=t.options;if(!E(e,"projectId"))throw new k(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new k(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new rt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new k(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return D("Firestore.collection",arguments,1),N("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Fo(st.fromString(t),this)},t.prototype.doc=function(t){return D("Firestore.doc",arguments,1),N("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Po.forPath(st.fromString(t),this)},t.prototype.collectionGroup=function(t){if(D("Firestore.collectionGroup",arguments,1),N("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new k(_.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Mo(new zr(st.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return D("Firestore.runTransaction",arguments,1),N("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Io(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Do(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return b("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(D("Firestore.setLogLevel",arguments,1),N("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(h.DEBUG);break;case"error":f(h.ERROR);break;case"silent":f(h.SILENT);break;default:throw new k(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),Io=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;D("Transaction.get",arguments,1);var n=Uo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return b("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ge)return new No(e._firestore,n._key,null,!1,!1);if(r instanceof pe)return new No(e._firestore,n._key,r,!1,!1);throw b("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){O("Transaction.set",arguments,2,3);var r=Uo("Transaction.set",t,this._firestore),i=(n=jo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Wi?(P("Transaction.update",arguments,3),r=Uo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(D("Transaction.update",arguments,2),r=Uo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){D("Transaction.delete",arguments,1);var e=Uo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Do=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){O("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Uo("WriteBatch.set",t,this._firestore),i=(n=jo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,jn.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Wi?(P("WriteBatch.update",arguments,3),r=Uo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(D("WriteBatch.update",arguments,2),r=Uo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,jn.exists(!0))),this},t.prototype.delete=function(t){D("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Uo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new qn(e._key,jn.NONE)),this},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new k(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Po=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new k(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ut(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(D("DocumentReference.collection",arguments,1),N("DocumentReference.collection","non-empty string",1,t),!t)throw new k(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=st.fromString(t);return new Fo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){O("DocumentReference.set",arguments,1,2);var n=(e=jo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,jn.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Wi?(P("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(D("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,jn.exists(!0)))},t.prototype.delete=function(){return D("DocumentReference.delete",arguments,0),this._firestoreClient.write([new qn(this._key,jn.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];O("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||to(t[i])||(q("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return to(t[i])?n=t[i]:(N("DocumentReference.onSnapshot","function",i,t[i]),R("DocumentReference.onSnapshot","function",i+1,t[i+1]),R("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new $i({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new No(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(zr.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return O("DocumentReference.get",arguments,0,1),Vo("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new No(e.firestore,e._key,t,!0,t instanceof pe&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new k(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new k(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Oo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),No=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return O("DocumentSnapshot.data",arguments,0,1),t=Bo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,vn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(O("DocumentSnapshot.get",arguments,1,2),e=Bo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(yo("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,vn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Po(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Oo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof On)return this.convertObject(t,e);if(t instanceof Nn)return this.convertArray(t,e);if(t instanceof Dn){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Po(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(No),Mo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){if(D("Query.where",arguments,3),z("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var i=["<","<=","==",">=",">","array-contains"];j("Query.where",i,2,n)}var o,s=yo("Query.where",e),a=Hr.fromString(n);if(s.isKeyField()){if(a===Hr.ARRAY_CONTAINS||a===Hr.ARRAY_CONTAINS_ANY)throw new k(_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Hr.IN){this.validateDisjunctiveFilterElements(r,a);for(var l=[],u=0,c=r;u<c.length;u++){var h=c[u];l.push(this.parseDocumentIdValue(h))}o=new Nn(l)}else o=this.parseDocumentIdValue(r)}else a!==Hr.IN&&a!==Hr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),o=this.firestore._dataConverter.parseQueryValue("Query.where",r);var d=$r.create(s,a,o);return this.validateNewFilter(d),new t(this._query.addFilter(d),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(O("Query.orderBy",arguments,1,2),R("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Yr.ASCENDING;else{if("desc"!==n)throw new k(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Yr.DESCENDING}if(null!==this._query.startAt)throw new k(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new k(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=yo("Query.orderBy",e),o=new Zr(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(D("Query.limit",arguments,1),N("Query.limit","number",1,e),e<=0)throw new k(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(z(t,1,e),e instanceof No){if(n.length>0)throw new k(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new k(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Dn(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(a instanceof An)throw new k(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var l=s.field.canonicalString();throw new k(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Xr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new k(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new k(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new k(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(st.fromString(s));if(!ut.isDocumentKey(a))throw new k(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var l=new ut(a);i.push(new Dn(this.firestore._databaseId,l))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new Xr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];O("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||to(t[i])||(q("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),to(t[i])?n=t[i]:(N("Query.onSnapshot","function",i,t[i]),R("Query.onSnapshot","function",i+1,t[i+1]),R("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new $i({next:function(t){e.next&&e.next(new Lo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(t){var e=this;return O("Query.get",arguments,0,1),Vo("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Lo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new k(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new k(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new k(_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(st.fromString(t));if(!ut.isDocumentKey(e))throw new k(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Dn(this.firestore._databaseId,new ut(e))}if(t instanceof Po)return new Dn(this.firestore._databaseId,t._key);throw new k(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+U(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new k(_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new k(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new k(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter(function(t){return Number.isNaN(t)}).length>0)throw new k(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof $r){var e=[Hr.ARRAY_CONTAINS,Hr.ARRAY_CONTAINS_ANY],n=[Hr.IN,Hr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new k(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(t.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(e)),null!=a)throw new k(_.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new k(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Lo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Oo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;O("QuerySnapshot.forEach",arguments,1,2),N("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Mo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(q("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new k(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Ro(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===Sr.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Sr.Metadata}).map(function(e){var r=new Ro(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,s=-1;return e.type!==Sr.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Sr.Removed&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:zo(e.type),doc:r,oldIndex:i,newIndex:s}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Ro(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Lo.prototype.docChanges,t,{get:function(){return function(){throw new k(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Fo=function(t){function e(e,n){var r=t.call(this,zr.atPath(e),n)||this;if(e.length%2!=1)throw new k(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return s.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Po(new ut(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=J.newId()),N("CollectionReference.doc","non-empty string",1,t),""===t)throw new k(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=st.fromString(t);return Po.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){D("CollectionReference.add",arguments,1),N("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Mo);function jo(t,e){if(void 0===e)return{merge:!1};if(q(t,e,["merge","mergeFields"]),L(t,"boolean","merge",e.merge),"mergeFields","a string or a FieldPath",void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+U(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new k(_.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+U(r[o]))}(t,0,0,n,function(t){return"string"==typeof t||t instanceof Wi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new k(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Bo(t,e){return void 0===e?{}:(q(t,e,["serverTimestamps"]),F(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Vo(t,e){R(t,"object",1,e),e&&(q(t,e,["source"]),F(t,0,"source",e.source,["default","server","cache"]))}function Uo(t,e,n){if(e instanceof Po){if(e.firestore!==n)throw new k(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw H(t,"DocumentReference",1,e)}function zo(t){switch(t){case Sr.Added:return"added";case Sr.Modified:case Sr.Metadata:return"modified";case Sr.Removed:return"removed";default:return b("Unknown change type: "+t)}}var qo=C(Ao,"Use firebase.firestore() instead."),Ho=C(Io,"Use firebase.firestore().runTransaction() instead."),$o=C(Do,"Use firebase.firestore().batch() instead."),Wo=C(Po,"Use firebase.firestore().doc() instead."),Jo=C(No),Go=C(Ro),Qo=C(Mo),Ko=C(Lo),Yo=C(Fo,"Use firebase.firestore().collection() instead."),Xo={Firestore:qo,GeoPoint:Ur,Timestamp:kt,Blob:tt,Transaction:Ho,WriteBatch:$o,DocumentReference:Wo,DocumentSnapshot:Jo,Query:Qo,QueryDocumentSnapshot:Go,QuerySnapshot:Ko,CollectionReference:Yo,FieldPath:Wi,FieldValue:ao,setLogLevel:Ao.setLogLevel,CACHE_SIZE_UNLIMITED:To},Zo=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),ts=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),es=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),ns="Connection",rs={BatchGetDocuments:"batchGet",Commit:"commit"},is="gl-js/ fire/"+u,os=function(){function t(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=is},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,s){var a=new l.XhrIo;a.listenOnce(l.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var e=a.getResponseJson();p(ns,"XHR received:",JSON.stringify(e)),o(e);break;case l.ErrorCode.TIMEOUT:p(ns,'RPC "'+t+'" timed out'),s(new k(_.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p(ns,'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=(u=r.status.toLowerCase().replace("_","-"),Object.values(_).indexOf(u)>=0?u:_.UNKNOWN);s(new k(i,r.message))}else s(new k(_.UNKNOWN,"Server responded with status "+a.getStatus()))}else p(ns,'RPC "'+t+'" failed'),s(new k(_.UNAVAILABLE,"Connection failed."));break;default:b('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{p(ns,'RPC "'+t+'" completed.')}var u});var u=JSON.stringify(e);p(ns,"XHR sending: ",i+" "+u);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),a.send(i,"POST",u,c,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),a.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p(ns,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,h=new es({sendFn:function(t){c?p(ns,"Not sending because WebChannel is closed:",t):(u||(p(ns,"Opening WebChannel transport."),s.open(),u=!0),p(ns,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),d=function(t,e){s.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return d(l.WebChannel.EventType.OPEN,function(){c||p(ns,"WebChannel transport opened.")}),d(l.WebChannel.EventType.CLOSE,function(){c||(c=!0,p(ns,"WebChannel transport closed"),h.callOnClose())}),d(l.WebChannel.EventType.ERROR,function(t){c||(c=!0,p(ns,"WebChannel transport errored:",t),h.callOnClose(new k(_.UNAVAILABLE,"The operation could not be completed")))}),d(l.WebChannel.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){p(ns,"WebChannel received error:",n);var r=n.status,i=function(t){var e=wr[r];if(void 0!==e)return kr(e)}(),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new k(i,o)),s.close()}else p(ns,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=rs[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();function ss(t){t.INTERNAL.registerService("firestore",function(t){return new Ao(t)},function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Xo))}y.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new os(t))},t.prototype.newConnectivityMonitor=function(){return ts.isAvailable()?new ts:new Zo},t.prototype.newSerializer=function(t){return new gi(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),ss(i),e.registerFirestore=ss},"6seB":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("8Y7J"),i=(n("lGQG"),n("XNiG")),o=(n("ZZ/e"),n("vkgz")),s=(n("Q+Hy"),n("VMA6"),n("c1j0")),a=n("JYpY");n("ajt+");class l{constructor(t,e,n,o,l){this.authService=t,this.db=e,this.userProfileService=n,this.campService=o,this.modalController=l,this.onChanges=new i.a,this.TrailReviewAttributes=s.b,this.CampReviewAttributes=a.b,this.submitReview=new r.p,this.exitEventEmitter=new r.p}ngOnInit(){this.isEditMode?this.onChanges.pipe(Object(o.a)(t=>{if(t&&t.camp&&(this.isAuth=this.authService.isAuthorized(),this.isTrail$=this.campService.isTrail(t.camp.currentValue),this.isTrail$.subscribe(t=>{this.isTrail=t}),this.isEditMode)){const e=5;this.campReviewToSubmit=new a.a(this.db.uuidv4(),t.camp.currentValue.id,this.authService.getUserId(),e,""),this.trailReviewToSubmit=new s.a(this.db.uuidv4(),t.camp.currentValue.id,this.authService.getUserId(),e,""),this.readyToEdit=Promise.resolve(!0)}})).subscribe():(this.readyToView=Promise.resolve(!0),this.userData$=this.userProfileService.getUserProfile(this.review.userID))}ngOnChanges(t){this.onChanges.next(t)}onRateChange(t){this.reviewToSubmit.rating=t}onCampAttributeRateChange(t,e){this.campReviewToSubmit.setCampAttribute(e,t)}onTrailAttributeRateChange(t,e){this.trailReviewToSubmit.setTrailAttribute(e,t)}onSubmit(){this.submitReview.emit(this.isTrail?this.trailReviewToSubmit:this.campReviewToSubmit)}onLoginButtonClick(){this.exitEventEmitter.emit()}onPhotoUrlsChange(t){console.log(t)}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),l=n("NJ4a");class u extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class c extends u{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(l.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(l.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(l.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(l.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"7zPs":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF");class a{constructor(t){this.fb=t}ngOnInit(){this.myForm=this.fb.group({name:["",s.o.required],description:["",s.o.required],difficulty:["",s.o.required],waterCrossings:["",s.o.required],parking:["",s.o.required],footing:["",s.o.required]})}submit(t){console.log(t)}}n.d(e,"a",function(){return h});var l=r.vb({encapsulation:0,styles:[[""]],data:{}});function u(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,133,"ion-content",[],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,131,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.submit(o.myForm)&&i),i},null,null)),r.wb(3,16384,null,0,s.s,[],null,null),r.wb(4,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.d]),r.wb(6,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(7,0,null,null,126,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(8,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,124,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(10,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,122,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),(t()(),r.xb(14,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Add New Trail"])),(t()(),r.xb(16,0,null,0,113,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(17,0,null,null,112,"ion-list",[],null,null,null,i.Y,i.r)),r.wb(18,49152,null,0,o.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(20,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(21,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(22,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Name"])),(t()(),r.xb(24,0,null,0,6,"ion-input",[["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,26)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,26)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(25,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(26,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(28,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(30,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(31,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(32,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(33,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(34,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Description"])),(t()(),r.xb(36,0,null,0,6,"ion-input",[["formControlName","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,38)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,38)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(37,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(38,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(40,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(42,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(43,0,null,0,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(44,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(45,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(46,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Difficulty"])),(t()(),r.xb(48,0,null,0,15,"ion-select",[["formControlName","difficulty"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,50)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,50)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(49,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(50,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(52,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(54,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(55,0,null,0,2,"ion-select-option",[["value","Easy"]],null,null,null,i.db,i.x)),r.wb(56,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Easy"])),(t()(),r.xb(58,0,null,0,2,"ion-select-option",[["value","Intermediate"]],null,null,null,i.db,i.x)),r.wb(59,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Intermediate"])),(t()(),r.xb(61,0,null,0,2,"ion-select-option",[["value","Extreme"]],null,null,null,i.db,i.x)),r.wb(62,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Extreme"])),(t()(),r.xb(64,0,null,0,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(65,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(66,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(67,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Water Crossings"])),(t()(),r.xb(69,0,null,0,15,"ion-select",[["formControlName","waterCrossings"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,71)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,71)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(70,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(71,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(73,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(75,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(76,0,null,0,2,"ion-select-option",[["value","Puddles"]],null,null,null,i.db,i.x)),r.wb(77,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Puddles"])),(t()(),r.xb(79,0,null,0,2,"ion-select-option",[["value","Streams"]],null,null,null,i.db,i.x)),r.wb(80,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Streams"])),(t()(),r.xb(82,0,null,0,2,"ion-select-option",[["value","Rivers"]],null,null,null,i.db,i.x)),r.wb(83,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Rivers"])),(t()(),r.xb(85,0,null,0,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(86,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(87,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(88,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Parking for Rigs"])),(t()(),r.xb(90,0,null,0,15,"ion-select",[["formControlName","parking"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,92)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,92)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(91,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(92,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(94,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(96,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(97,0,null,0,2,"ion-select-option",[["value","Plenty"]],null,null,null,i.db,i.x)),r.wb(98,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Plenty"])),(t()(),r.xb(100,0,null,0,2,"ion-select-option",[["value","Limited"]],null,null,null,i.db,i.x)),r.wb(101,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Limited"])),(t()(),r.xb(103,0,null,0,2,"ion-select-option",[["value","None"]],null,null,null,i.db,i.x)),r.wb(104,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["None"])),(t()(),r.xb(106,0,null,0,23,"ion-item",[],null,null,null,i.W,i.p)),r.wb(107,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(108,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(109,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Footing"])),(t()(),r.xb(111,0,null,0,18,"ion-select",[["formControlName","footing"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,113)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,113)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(112,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(113,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(115,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(117,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(118,0,null,0,2,"ion-select-option",[["value","Carriage"]],null,null,null,i.db,i.x)),r.wb(119,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Carriage trails"])),(t()(),r.xb(121,0,null,0,2,"ion-select-option",[["value","Sandy"]],null,null,null,i.db,i.x)),r.wb(122,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Sandy Loamy"])),(t()(),r.xb(124,0,null,0,2,"ion-select-option",[["value","Muddy"]],null,null,null,i.db,i.x)),r.wb(125,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Muddy"])),(t()(),r.xb(127,0,null,0,2,"ion-select-option",[["value","Rocky"]],null,null,null,i.db,i.x)),r.wb(128,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Rocky"])),(t()(),r.xb(130,0,null,0,3,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(131,0,null,null,2,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,i.I,i.b)),r.wb(132,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Submit"]))],function(t,e){var n=e.component;t(e,4,0,n.myForm),t(e,25,0,"text"),t(e,28,0,"name"),t(e,37,0,"text"),t(e,40,0,"description"),t(e,52,0,"difficulty"),t(e,56,0,"Easy"),t(e,59,0,"Intermediate"),t(e,62,0,"Extreme"),t(e,73,0,"waterCrossings"),t(e,77,0,"Puddles"),t(e,80,0,"Streams"),t(e,83,0,"Rivers"),t(e,94,0,"parking"),t(e,98,0,"Plenty"),t(e,101,0,"Limited"),t(e,104,0,"None"),t(e,115,0,"footing"),t(e,119,0,"Carriage"),t(e,122,0,"Sandy"),t(e,125,0,"Muddy"),t(e,128,0,"Rocky"),t(e,132,0,n.myForm.invalid,"block","large","submit")},function(t,e){t(e,2,0,r.Jb(e,6).ngClassUntouched,r.Jb(e,6).ngClassTouched,r.Jb(e,6).ngClassPristine,r.Jb(e,6).ngClassDirty,r.Jb(e,6).ngClassValid,r.Jb(e,6).ngClassInvalid,r.Jb(e,6).ngClassPending),t(e,24,0,r.Jb(e,30).ngClassUntouched,r.Jb(e,30).ngClassTouched,r.Jb(e,30).ngClassPristine,r.Jb(e,30).ngClassDirty,r.Jb(e,30).ngClassValid,r.Jb(e,30).ngClassInvalid,r.Jb(e,30).ngClassPending),t(e,36,0,r.Jb(e,42).ngClassUntouched,r.Jb(e,42).ngClassTouched,r.Jb(e,42).ngClassPristine,r.Jb(e,42).ngClassDirty,r.Jb(e,42).ngClassValid,r.Jb(e,42).ngClassInvalid,r.Jb(e,42).ngClassPending),t(e,48,0,r.Jb(e,54).ngClassUntouched,r.Jb(e,54).ngClassTouched,r.Jb(e,54).ngClassPristine,r.Jb(e,54).ngClassDirty,r.Jb(e,54).ngClassValid,r.Jb(e,54).ngClassInvalid,r.Jb(e,54).ngClassPending),t(e,69,0,r.Jb(e,75).ngClassUntouched,r.Jb(e,75).ngClassTouched,r.Jb(e,75).ngClassPristine,r.Jb(e,75).ngClassDirty,r.Jb(e,75).ngClassValid,r.Jb(e,75).ngClassInvalid,r.Jb(e,75).ngClassPending),t(e,90,0,r.Jb(e,96).ngClassUntouched,r.Jb(e,96).ngClassTouched,r.Jb(e,96).ngClassPristine,r.Jb(e,96).ngClassDirty,r.Jb(e,96).ngClassValid,r.Jb(e,96).ngClassInvalid,r.Jb(e,96).ngClassPending),t(e,111,0,r.Jb(e,117).ngClassUntouched,r.Jb(e,117).ngClassTouched,r.Jb(e,117).ngClassPristine,r.Jb(e,117).ngClassDirty,r.Jb(e,117).ngClassValid,r.Jb(e,117).ngClassInvalid,r.Jb(e,117).ngClassPending)})}function c(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-add-trail",[],null,null,null,u,l)),r.wb(1,114688,null,0,a,[s.b],null,null)],function(t,e){t(e,1,0)},null)}var h=r.tb("app-add-trail",a,c,{},{},[])},"8Y7J":function(t,e,n){"use strict";n.d(e,"pb",function(){return Gl}),n.d(e,"qb",function(){return Ql}),n.d(e,"rb",function(){return Kl}),n.d(e,"sb",function(){return Yl}),n.d(e,"ob",function(){return $a}),n.d(e,"nb",function(){return Ca}),n.d(e,"g",function(){return Rl}),n.d(e,"V",function(){return Dl}),n.d(e,"A",function(){return Il}),n.d(e,"X",function(){return Pe}),n.d(e,"bb",function(){return De}),n.d(e,"c",function(){return Ha}),n.d(e,"F",function(){return Ja}),n.d(e,"E",function(){return Ga}),n.d(e,"b",function(){return Qa}),n.d(e,"d",function(){return za}),n.d(e,"e",function(){return qa}),n.d(e,"Z",function(){return $l}),n.d(e,"Q",function(){return _l}),n.d(e,"db",function(){return El}),n.d(e,"w",function(){return Ya}),n.d(e,"f",function(){return Xl}),n.d(e,"p",function(){return Pa}),n.d(e,"o",function(){return yn}),n.d(e,"K",function(){return en}),n.d(e,"L",function(){return tn}),n.d(e,"a",function(){return ht}),n.d(e,"k",function(){return Ma}),n.d(e,"m",function(){return Ra}),n.d(e,"t",function(){return Fa}),n.d(e,"D",function(){return ja}),n.d(e,"G",function(){return La}),n.d(e,"T",function(){return ft}),n.d(e,"R",function(){return oo}),n.d(e,"Wb",function(){return _}),n.d(e,"W",function(){return k}),n.d(e,"Y",function(){return x}),n.d(e,"s",function(){return Z}),n.d(e,"Xb",function(){return J}),n.d(e,"ab",function(){return G}),n.d(e,"r",function(){return R}),n.d(e,"q",function(){return g}),n.d(e,"C",function(){return m}),n.d(e,"M",function(){return v}),n.d(e,"B",function(){return pl}),n.d(e,"H",function(){return ro}),n.d(e,"I",function(){return eo}),n.d(e,"J",function(){return no}),n.d(e,"j",function(){return ol}),n.d(e,"l",function(){return Wi}),n.d(e,"n",function(){return Xi}),n.d(e,"x",function(){return Ki}),n.d(e,"z",function(){return Qi}),n.d(e,"y",function(){return Ll}),n.d(e,"N",function(){return Bl}),n.d(e,"O",function(){return Fl}),n.d(e,"P",function(){return So}),n.d(e,"S",function(){return xo}),n.d(e,"h",function(){return dt}),n.d(e,"i",function(){return wo}),n.d(e,"u",function(){return vo}),n.d(e,"v",function(){return yo}),n.d(e,"U",function(){return Ci}),n.d(e,"cb",function(){return Jl}),n.d(e,"Cb",function(){return Ei}),n.d(e,"gb",function(){return Ka}),n.d(e,"eb",function(){return Y}),n.d(e,"fb",function(){return Ji}),n.d(e,"jb",function(){return Xe}),n.d(e,"kb",function(){return on}),n.d(e,"lb",function(){return Me}),n.d(e,"Ab",function(){return N}),n.d(e,"Fb",function(){return _i}),n.d(e,"Qb",function(){return S}),n.d(e,"Db",function(){return Bi}),n.d(e,"Eb",function(){return ji}),n.d(e,"zb",function(){return Aa}),n.d(e,"yb",function(){return Ia}),n.d(e,"hb",function(){return Ea}),n.d(e,"ib",function(){return Sa}),n.d(e,"Vb",function(){return Ct}),n.d(e,"Zb",function(){return Pi}),n.d(e,"Yb",function(){return Ni}),n.d(e,"Ub",function(){return Ri}),n.d(e,"ac",function(){return Mi}),n.d(e,"mb",function(){return Zl}),n.d(e,"tb",function(){return Ls}),n.d(e,"ub",function(){return Ec}),n.d(e,"vb",function(){return Wo}),n.d(e,"wb",function(){return sa}),n.d(e,"xb",function(){return tu}),n.d(e,"Bb",function(){return ws}),n.d(e,"Gb",function(){return xs}),n.d(e,"Hb",function(){return Ts}),n.d(e,"Ib",function(){return cu}),n.d(e,"Jb",function(){return Js}),n.d(e,"Lb",function(){return aa}),n.d(e,"Ob",function(){return la}),n.d(e,"Kb",function(){return fu}),n.d(e,"Mb",function(){return pu}),n.d(e,"Nb",function(){return du}),n.d(e,"Pb",function(){return ou}),n.d(e,"Rb",function(){return mu}),n.d(e,"Sb",function(){return qo}),n.d(e,"Tb",function(){return yu});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");const l="__annotations__",u="__parameters__",c="__prop__metadata__";function h(t,e,n,r,i){const o=d(e);function s(...t){if(this instanceof s)return o.call(this,...t),this;const e=new s(...t);return function(n){return i&&i(n,...t),(n.hasOwnProperty(l)?n[l]:Object.defineProperty(n,l,{value:[]})[l]).push(e),r&&r(n),n}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s}function d(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}function f(t,e,n){const r=d(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(u)?t[u]:Object.defineProperty(t,u,{value:[]})[u];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}function p(t,e,n,r){const i=d(e);function o(...t){if(this instanceof o)return i.apply(this,t),this;const e=new o(...t);return function(n,i){const o=n.constructor,s=o.hasOwnProperty(c)?o[c]:Object.defineProperty(o,c,{value:{}})[c];s[i]=s.hasOwnProperty(i)&&s[i]||[],s[i].unshift(e),r&&r(n,i,...t)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}const g=f("Inject",t=>({token:t})),m=f("Optional"),b=f("Self"),v=f("SkipSelf");var y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function w(t){for(let e in t)if(t[e]===w)return e;throw Error("Could not find renamed property on target object.")}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}const k=_;function C(t){const e=t[E];return e&&e.token===t?e:null}const E=w({ngInjectableDef:w});function S(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(S).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const T=w({__forward_ref__:w});function x(t){return t.__forward_ref__=x,t.toString=function(){return S(this())},t}function A(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(T)&&e.__forward_ref__===x?e():t}const I="undefined"!=typeof globalThis&&globalThis,D="undefined"!=typeof window&&window,P="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,O="undefined"!=typeof global&&global,N=I||O||D||P;class R{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const M=new R("INJECTOR",-1),L=new Object,F="ngTempTokenPath",j="ngTokenPath",B=/\n/gm,V="\u0275",U="__source",z=w({provide:String,useValue:w});let q,H=void 0;function $(t){const e=H;return H=t,e}function W(t,e=y.Default){if(void 0===H)throw new Error("inject() must be called from an injection context");return null===H?function(t,e,n){const r=C(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&y.Optional)return null;throw new Error(`Injector: NOT_FOUND [${S(t)}]`)}(t,0,e):H.get(t,e&y.Optional?null:void 0,e)}function J(t,e=y.Default){return(q||W)(t,e)}const G=J;class Q{get(t,e=L){if(e===L){const e=new Error(`NullInjectorError: No provider for ${S(t)}!`);throw e.name="NullInjectorError",e}return e}}function K(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==V?t.substr(2):t;let i=S(e);if(e instanceof Array)i=e.map(S).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):S(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(B,"\n  ")}`}const Y=new R("The presence of this token marks an injector as being the root injector."),X=function(t,e,n){return new ot(t,e,n)};let Z=(()=>{class t{static create(t,e){return Array.isArray(t)?X(t,e,""):X(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=L,t.NULL=new Q,t.ngInjectableDef=_({token:t,providedIn:"any",factory:()=>J(M)}),t.__NG_ELEMENT_ID__=-1,t})();const tt=function(t){return t},et=[],nt=tt,rt=function(){return Array.prototype.slice.call(arguments)},it="\u0275";class ot{constructor(t,e=Z.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(Z,{token:Z,fn:tt,deps:et,value:this,useNew:!1}),r.set(M,{token:M,fn:tt,deps:et,value:this,useNew:!1}),function t(e,n){if(n)if((n=A(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw at("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw at("Unexpected provider",n);{let t=A(n.provide);const r=function(t){const e=function(t){let e=et;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,i=A(n[t]);if(i instanceof Array)for(let t=0,e=i;t<e.length;t++){const n=e[t];n instanceof m||n==m?r|=1:n instanceof v||n==v?r&=-3:n instanceof b||n==b?r&=-5:i=n instanceof g?n.token:A(n)}e.push({token:i,options:r})}}else if(t.useExisting)e=[{token:A(t.useExisting),options:6}];else if(!(n||z in t))throw at("'deps' required",t);return e}(t);let n=tt,r=et,i=!1,o=A(t.provide);if(z in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=A(t.useClass);else{if("function"!=typeof o)throw at("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==rt)throw st(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:rt,value:et});r.deps.push({token:t=n,options:6})}const i=e.get(t);if(i&&i.fn==rt)throw st(t);e.set(t,r)}}}(r,t)}get(t,e,n=y.Default){const r=this._records.get(t);try{return function t(e,n,r,i,o,s){try{return function(e,n,r,i,o,s){let a;if(!n||s&y.SkipSelf)s&y.Self||(a=i.get(e,o,y.Default));else{if((a=n.value)==nt)throw Error(it+"Circular dependency");if(a===et){n.value=nt;let e=void 0,o=n.useNew,s=n.fn,l=n.deps,u=et;if(l.length){u=[];for(let e=0;e<l.length;e++){const n=l[e],o=n.options,s=2&o?r.get(n.token):void 0;u.push(t(n.token,s,r,s||4&o?i:Z.NULL,1&o?null:Z.THROW_IF_NOT_FOUND,y.Default))}}n.value=a=o?new s(...u):s.apply(e,u)}}return a}(e,n,r,i,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[F]=a[F]||[]).unshift(e),n&&n.value==nt&&(n.value=et),a}}(t,r,this._records,this.parent,e,n)}catch(i){return function(t,e,n,r){const i=t[F];throw e[U]&&i.unshift(e[U]),t.message=K("\n"+t.message,i,"StaticInjectorError",r),t[j]=i,t[F]=null,t}(i,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(S(n))),`StaticInjector[${t.join(", ")}]`}}function st(t){return at("Cannot mix multi providers and regular providers",t)}function at(t,e){return new Error(K(t,e,"StaticInjectorError"))}const lt="ngDebugContext",ut="ngOriginalError",ct="ngErrorLogger",ht=new R("AnalyzeForEntryComponents"),dt=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),ft=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),pt={},gt=[],mt=w({ngComponentDef:w}),bt=w({ngDirectiveDef:w}),vt=w({ngPipeDef:w});let yt=0;function wt(t){return function(t){return t[mt]||null}(t)||function(t){return t[bt]||null}(t)}function _t(t){return function(t){return t[vt]||null}(t)}function kt(t,e){if(null==t)return pt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Ct=function(t){const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ft.Emulated,id:"c",styles:t.styles||gt,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:()=>{const n=t.directives,o=t.features,s=t.pipes;i.id+=yt++,i.inputs=kt(t.inputs,r),i.outputs=kt(t.outputs),o&&o.forEach(t=>t(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(wt):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(_t):null,e.hasOwnProperty(E)||(e[E]=_({token:e,factory:t.factory}))}},i},Et=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(N))(),St=0,Tt=1,xt=2,At=3,It=4,Dt=6,Pt=7,Ot=9,Nt=11,Rt=12,Mt=13,Lt=14,Ft=18,jt=20,Bt=1,Vt=2,Ut=9,zt="__ngContext__";function qt(t){for(;Array.isArray(t);)t=t[St];return t}function Ht(t){return Array.isArray(t)&&"object"==typeof t[Bt]}function $t(t){return Array.isArray(t)&&!0===t[Bt]}function Wt(t){return Array.isArray(t)&&"number"==typeof t[Bt]}function Jt(t,e){return e[Tt].data[t+jt]}function Gt(t){const e=function(t){return t[zt]}(t);return e?Array.isArray(e)?e:e.lView:null}function Qt(t){t[Ft]=0}function Kt(t,e,n,r){n||Yt(t,e.preOrderHooks,e.preOrderCheckHooks,n,0,void 0!==r?r:null)}function Yt(t,e,n,r,i,o){if(r)return;const s=(3&t[xt])===i?e:n;s&&function(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[Ft]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[Ft]+=65536),(o<i||-1==i)&&(Xt(t,n,e,s),t[Ft]=(4294901760&t[Ft])+s+2),s++}(t,s,i,o),null==o&&(3&t[xt])===i&&3!==i&&(t[xt]&=1023,t[xt]+=1)}function Xt(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[xt]>>10<t[Ft]>>16&&(3&t[xt])===e&&(t[xt]+=1024,o.call(s)):o.call(s)}let Zt=null;function te(t){Zt=t}function ee(){return oe}const ne=1;let re,ie,oe,se=ne,ae=0,le=0;function ue(t=null){Ee!==t&&(Te(null==t?-1:t),se=null==t?0:ne,ae=0,le=0)}function ce(){return se}function he(){return ae}function de(){return re}function fe(t,e){re=t,ie=e}function pe(t=oe){return 4==(4&t[xt])}let ge=null,me=!1;function be(){return me}let ve=-1;function ye(t){ve=t}let we=0;function _e(t){we=t}function ke(t,e){const n=oe;return t&&(ve=t[Tt].bindingStartIndex),re=e,ie=!0,oe=ge=t,n}function Ce(t,e){const n=oe[Tt];if(pe(oe))oe[xt]&=-5;else try{Qt(oe),e&&Yt(oe,n.viewHooks,n.viewCheckHooks,me,2,void 0)}finally{oe[xt]&=-73,oe[Pt]=n.bindingStartIndex}te(null),ke(t,null)}let Ee=-1;function Se(){return Ee}function Te(t){Ee=t,te(null)}let xe=null,Ae=!0,Ie=!1;function De(){return Ie=!0,Ae}function Pe(){if(Ie)throw new Error("Cannot enable prod mode after platform setup.");Ae=!1}class Oe{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const n=(new window.DOMParser).parseFromString(t,"text/html").body;return n.removeChild(n.firstChild),n}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ne=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Re=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Me(t){return(t=String(t)).match(Ne)||t.match(Re)?t:(De()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Le(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Fe(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const je=Le("area,br,col,hr,img,wbr"),Be=Le("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ve=Le("rp,rt"),Ue=Fe(Ve,Be),ze=Fe(je,Fe(Be,Le("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fe(Ve,Le("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ue),qe=Le("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),He=Le("srcset"),$e=Fe(qe,He,Le("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Le("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),We=Le("script,style,template");class Je{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ze.hasOwnProperty(e))return this.sanitizedSomething=!0,!We.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$e.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;qe[o]&&(s=Me(s)),He[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Me(t.trim())).join(", ")),this.buf.push(" ",e,'="',Ke(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ze.hasOwnProperty(e)&&!je.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Ke(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Ge=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qe=/([^\#-~ |!])/g;function Ke(t){return t.replace(/&/g,"&amp;").replace(Ge,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Qe,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ye;function Xe(t,e){let n=null;try{Ye=Ye||new Oe(t);let r=e?String(e):"";n=Ye.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ye.getInertBodyElement(r)}while(r!==o);const s=new Je,a=s.sanitizeChildren(Ze(n)||n);return De()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Ze(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Ze(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const tn=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class en{}const nn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),rn=/^url\(([^)]+)\)$/;function on(t){if(!(t=String(t).trim()))return"";const e=t.match(rn);return e&&Me(e[1])===e[1]||t.match(nn)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(De()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}const sn=9,an=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function ln(t){return!!t.listen}class un{constructor(){this._players=[]}flushPlayers(){for(let t=0;t<this._players.length;t++){const e=this._players[t];e.parent||0!==e.state||e.play()}this._players.length=0}queuePlayer(t){this._players.push(t)}}const cn=0;function hn(t,e,n,r){const i=[t||null,0,[],n||[null,null],r||[null,null],[0,0],[0],[0],null,null];return dn(i,cn),i}function dn(t,e,n=-1,r){const i=t[2],o=2*e,s=o+2;for(let l=i.length;l<s;l+=2)i.push(-1,null);const a=o+0;n>=0&&-1===i[a]&&(i[a]=n,i[o+1]=r||null)}function fn(t,e,n,r,i,o){return o=o||n,i?t[i]=r:t.push(r),!!r&&(r.addEventListener(200,()=>{const e=t.indexOf(r);e&&(e<t[0]?t[e]=null:t.splice(e,1)),r.destroy()}),(e.playerHandler||(e.playerHandler=new un)).queuePlayer(r,o),!0)}function pn(t){const e=t[At];return $t(e)?e[At]:e}function gn(t){return function(t){let e=Ht(t)?t:Gt(t);for(;e&&!(512&e[xt]);)e=pn(e);return e}(t)[Ot]}function mn(t){return t[lt]}function bn(t){return t[ut]}function vn(t,...e){t.error(...e)}class yn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[ct]||vn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?mn(t)?mn(t):this._findContext(bn(t)):null}_findOriginalError(t){let e=bn(t);for(;e&&bn(e);)e=bn(e);return e}}function wn(t){var e;return e=t.replace(/[$@]/g,"_"),`ng-reflect-${t=e.replace(_n,(...t)=>"-"+t[1].toLowerCase())}`}const _n=/([A-Z])/g;function kn(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}const Cn={};function En(t,e,n,r){const i=t[8];if(null!=i){const t=function(t,e){for(let n=1;n<t.length;n+=3)if(t[n+0]>e)return n;return t.length}(i,e);i.splice(t,0,e,n,r)}}class Sn{constructor(t,e){this.fn=t,this.value=e}}function Tn(t,e,n,r){for(let i=n;i<r;i+=4)if(Kn(t,i)===e)return i;return-1}function xn(t,e,n=0){In(t,e,!0,n)}function An(t,e,n=0){In(t,e,!1,n)}function In(t,e,n,r=0){if(function(t,e,n,r){return!t[e?6:7][1+4*n+0]&&(r===Cn||hr(t,e,n)===r)}(t,n,r,e))return;const i=(e=e===Cn?hr(t,n,r):e)instanceof Sn?new or(e,t[0],n?1:2):null,o=i?e.value:e,s=n?1:3;let a,l,u,c=i?s:0,h=!1;(function(t,e,n){const r=t[9];if(i){if(!r||0===s)return!0}else if(!r)return!1;return r[s]!==i})(t)&&(function(t,e,n){let r=t[9]||(t[9]=[5,null,null,null,null]);n>0?r[n]=e:(r.splice(n=r[0],0,e,null),r[0]+=2)}(t,i,s),h=!0);let d=!1;n?("string"==typeof o?(u=o.split(/\s+/),d=!0):u=o?Object.keys(o):gt,a=Vn(t),l=t.length):(a=Un(t),l=Vn(t),u=o?Object.keys(o):gt),function(t,e,n,r,i,o,s,l,u){let c=!1;const h=1+4*e,d=t[u?6:7],f=d[h+1],p=d[h+3];let g=1===d[h+0]||!(d[h+2]||!l),m=0,b=0;const v=!0===s;let y=a,w=o.length;for(;y<f;){const r=Kn(t,y);if(w)for(let i=0;i<o.length;i++){const a=o[i],l=a?u?a:dr(a):null;if(l&&r===l){const r=Qn(t,y),a=sr(t,y),u=!!v||s[l],h=Gn(t,y);ir(h,r,u)&&ur(r,u,a,e)&&(qn(t,y,u),Hn(t,y,n,e),rr(t,h,u)&&(On(t,y,!0),c=!0)),o[i]=null,w--;break}}y+=4}if(w){const r=u?null:lr(t,e);t:for(let a=0;a<o.length;a++){const l=o[a];if(!l)continue;const h=!!v||s[l],d=u?l:dr(l),p=y>=f;for(let r=y;r<i;r+=4)if(Kn(t,r)===d){const i=sr(t,r),o=$n(t,r),s=Qn(t,r),a=Gn(t,r);ur(s,h,i,e)&&(p&&(Zn(t,y,r),m++),ir(a,s,h)&&((null===h||void 0===h&&h!==s)&&(g=!0),qn(t,y,h),(null!==s||rr(t,a,h))&&(On(t,y,!0),c=!0)),i===e&&n===o||Hn(t,y,n,e)),y+=4;continue t}null!=h&&(g=!0,m++,tr(t,p?y:f+4*b,u,d,1|nr(t,d,u,r),h,e,n),b++,i+=4,y+=4,c=!0)}}for(;y<i;){g=!0;const r=Qn(t,y),i=Gn(t,y);sr(t,y),null!=r&&(g=!0),ir(i,r,null)&&(qn(t,y,null),rr(t,i,r)&&(On(t,y,!0),c=!0),Hn(t,y,n,e)),y+=4}(function(t,e,n,r,i,o,s,a){const l=t[n?6:7],u=1+4*e;if(a){const t=i+4*s;for(let e=u+4;e<l.length;e+=4)l[e+1]=t,l[e+0]=1}l[u+0]=0,l[u+1]=i,l[u+2]=r,l[u+3]=s;let c=s;for(let h=1;h<u;h+=4)c+=l[h+3];if(!n){const e=t[6],n=o-e[2];for(let t=1;t<e.length;t+=4)e[t+1]+=n}l[0]=c})(t,e,u,l,f,i,m,g=g||p!==m),c&&Yn(t,!0)}(t,r,c,0,l,u,d||o||pt,e,n),h&&Xn(t,!0)}function Dn(t,e,n,r,i,o,s){n=i&&n?i(e,n,3):n,o||s?(o&&o.setValue(e,n),s&&s.setValue(e,n)):n?(n=n.toString(),ln(r)?r.setStyle(t,e,n,an.DashCase):t.style.setProperty(e,n)):ln(r)?r.removeStyle(t,e,an.DashCase):t.style.removeProperty(e)}function Pn(t,e,n,r,i,o){i||o?(i&&i.setValue(e,n),o&&o.setValue(e,n)):""!==e&&(n?ln(r)?r.addClass(t,e):t.classList.add(e):ln(r)?r.removeClass(t,e):t.classList.remove(e))}function On(t,e,n){const r=e>=10?e+0:e;n?t[r]|=1:t[r]&=-2}function Nn(t,e){return 1==(1&t[e>=10?e+0:e])}function Rn(t,e){return 2==(2&t[e>=10?e+0:e])}function Mn(t,e){return 4==(4&t[e>=10?e+0:e])}function Ln(t,e,n){return 31&t|e<<5|n<<19}function Fn(t,e){const n=jn(e);return(2&e?t[4]:t[3])[n]}function jn(t){return t>>5&16383}function Bn(t){const e=t>>19&16383;return e>=10?e:-1}function Vn(t){return t[6][2]}function Un(t){return t[7][2]}function zn(t,e,n){t[e+1]=n}function qn(t,e,n){t[e+2]=n}function Hn(t,e,n,r){const i=function(t,e){return n<<16|t}(r);t[e+3]=i}function $n(t,e){return t[e+3]>>16&65535}function Wn(t,e){const n=$n(t,e);if(n){const e=t[9];if(e)return e[n]}return null}function Jn(t,e,n){t[1===e?e:e+0]=n}function Gn(t,e){return t[1===e?e:e+0]}function Qn(t,e){return t[e+2]}function Kn(t,e){return t[e+1]}function Yn(t,e){On(t,1,e)}function Xn(t,e){e?t[1]|=8:t[1]&=-9}function Zn(t,e,n){if(e===n)return;const r=Qn(t,e),i=Kn(t,e),o=Gn(t,e),s=$n(t,e),a=sr(t,e);let l=o,u=Gn(t,n);const c=Bn(l);if(c>=0){const e=Gn(t,c);Jn(t,c,Ln(e,jn(e),n))}const h=Bn(u);if(h>=0){const n=Gn(t,h);Jn(t,h,Ln(n,jn(n),e))}qn(t,e,Qn(t,n)),zn(t,e,Kn(t,n)),Jn(t,e,Gn(t,n)),Hn(t,e,$n(t,n),sr(t,n)),qn(t,n,r),zn(t,n,i),Jn(t,n,o),Hn(t,n,s,a)}function tr(t,e,n,r,i,o,s,a){const l=e<t.length;t.splice(e,0,1|i|(n?2:0),r,o,0),Hn(t,e,a,s),l&&function(t,n){for(let r=e+4;r<t.length;r+=4){const e=Bn(Gn(t,r));if(e>0){const n=jn(Gn(t,e));Jn(t,e,Ln((Nn(t,e)?1:0)|(Rn(t,e)?2:0)|(Mn(t,e)?4:0),n,r))}}}(t)}function er(t,e){return null!==t}function nr(t,e,n,r){let i,o=r&&r(e,null,1)?4:0;return n?(o|=2,i=ar(t[4],e)):i=ar(t[3],e),Ln(o,i=i>0?i+1:0,0)}function rr(t,e,n){const r=Fn(t,e);return!r||ir(e,r,n)}function ir(t,e,n){return!(2&t)&&e&&n&&4&t?e.toString()!==n.toString():e!==n}class or{constructor(t,e,n){this._element=e,this._type=n,this._values={},this._dirty=!1,this._factory=t}setValue(t,e){this._values[t]!==e&&(this._values[t]=e,this._dirty=!0)}buildPlayer(t,e){if(this._dirty){const n=this._factory.fn(this._element,this._type,this._values,e,t||null);return this._values={},this._dirty=!1,n}}}function sr(t,e){return 65535&t[e+3]}function ar(t,e){for(let n=2;n<t.length;n+=3)if(t[n]===e)return n;return-1}function lr(t,e){const n=t[2];return n[2*e+1]||n[1]||null}function ur(t,e,n,r){return null==t||(null!=e?r<=n:n===r)}function cr(t){const e=t[4];let n=e[1];if(null===n){n="";for(let t=2;t<e.length;t+=3)e[t+1]&&(n+=(n.length?" ":"")+e[t]);e[1]=n}return n}function hr(t,e,n){return t[e?6:7][1+4*n+2]||null}function dr(t){return t.replace(/[a-z][A-Z]/g,t=>`${t.charAt(0)}-${t.charAt(1).toLowerCase()}`)}function fr(t,e,n,r,i=0){const o=t[n?6:7];if(e>0){const t=1+4*e;for(;o.length<t;)o.push(0,r,null,0)}o.push(0,r,null,i)}let pr,gr=0;function mr(){return gr>0}function br(t){pr=t}function vr(){return pr}const yr="--MAP--";function wr(t,e){t[1]=e}function _r(t){return t[0]}function kr(t,e){return t[e+2]}function Cr(t,e){return 1&t[e+0]}function Er(t,e){return(1&Cr(t,e))>0}function Sr(t,e){return t[e+0]>>1}function Tr(t,e,n){const r=Cr(t,e);t[e+0]=r|n<<1}function xr(t,e){return t[e+1]}function Ar(t,e,n){return t[e+3+n]}function Ir(t,e){return e===t[1]}function Dr(t){!function(t,e){t[0]=e}(t,1|_r(t))}function Pr(t){return(1&_r(t))>0}function Or(t){return 5+t[3]}function Nr(t,e){return(Array.isArray(t)?t[0]:t)!==(Array.isArray(e)?e[0]:e)}function Rr(t){return null!=t&&""!==t}function Mr(t){const e=vr()||t[Mt];return e&&"function"!=typeof e?(br(e),Lr):e}const Lr=(t,e,n)=>{const r=vr();return r?!(2&n)||r.sanitize(tn.STYLE,e):e},Fr=null,jr=1,Br=1,Vr=0,Ur=1;let zr=Ur,qr=Ur,Hr=0,$r=0,Wr=[];function Jr(t,e,n,r,i,o,s,a,l){Pr(t)||(s?function(t,e,n,r,i){Wr.unshift(t,e,n,r,i)}(t,n,r,i,l):(Wr.length&&Gr(),Qr(t,n,r,i,l)));const u=a||Nr(e[i],o);return u&&(e[i]=o),u}function Gr(){let t=0;for(;t<Wr.length;)Qr(Wr[t++],Wr[t++],Wr[t++],Wr[t++],Wr[t++]);Wr.length=0}function Qr(t,e,n,r,i){if(n){let o=!1,s=Or(t);for(;s<t.length;){const a=xr(t,s),l=kr(t,s);if(o=n<=l){n<l&&Kr(t,s,n,i),Yr(t,!1,s,r,e);break}s+=3+a}o||(Kr(t,t.length,n,i),Yr(t,!1,s,r,e))}else Yr(t,!0,2,r,e)}function Kr(t,e,n,r){t.splice(e,0,r?1:0,jr,n,Fr),Tr(t,e,Br)}function Yr(t,e,n,r,i){let o=n+3+xr(t,n);e||o--,"number"==typeof r?(t.splice(o,0,r),t[n+1]++,Tr(t,n,Sr(t,n)|1<<i)):"string"==typeof r&&null==t[o]&&(t[o]=r)}function Xr(t,e,n,r,i,o,s){Wr.length&&Gr();const a=!0===(l=i)?-1:!1===l?0:l;var l;const u=Zr,c=(a&Sr(t,2))>0?1:0;let h=Or(t);for(;h<t.length;){const i=xr(t,h);if(a&Sr(t,h)){let a=!1;const l=kr(t,h),d=i-1,f=Ar(t,h,d);for(let i=0;i<d;i++){const u=Ar(t,h,i),c=r[u];if(Rr(c)){o(e,n,l,s&&Er(t,h)?s(l,c,2):c,u),a=!0;break}}if(u){const i=u(t,e,n,r,o,s,c|(a?4:2),l,f);a=a||i}a||o(e,n,l,f)}h+=3+i}u&&u(t,e,n,r,o,s,c)}let Zr=null;const ti=(t,e,n,r)=>{r?(r=r.toString(),t&&ln(t)?t.setStyle(e,n,r,an.DashCase):e.style.setProperty(n,r)):t&&ln(t)?t.removeStyle(e,n,an.DashCase):e.style.removeProperty(n)},ei=(t,e,n,r)=>{""!==n&&(r?t&&ln(t)?t.addClass(e,n):e.classList.add(n):t&&ln(t)?t.removeClass(e,n):e.classList.remove(n))},ni=(t,e,n,r,i,o,s,a,l)=>{let u=!1;if(xr(t,2)){let c=!0;const h=!a;h&&-2&s&&(c=!1,u=!0),c&&(u=function t(e,n,r,i,o,s,a,l,u,c){let h=!1;if(u<xr(e,2)){const d=Ar(e,2,u),f=i[d];let p=function(t){return t>=oi.length&&oi.push(1),oi[t]}(u);for(;p<f.length;){const g=si(f,p),m=l&&g>l,b=!m&&g===l,v=f[p+1],y=Rr(v);let w=t(e,n,r,i,o,s,m?a:ri(a,y,b),m?l:g,u+1,c);if(m)break;if(!w&&ii(a,b)){const t=b&&!y,e=t?c:v,i=t?d:null;o(n,r,g,s?s(g,e,3):e,i),w=!0}h=w&&b,p+=2}oi[u]=p}return h}(t,e,n,r,i,o,s,a||null,0,l||null)),h&&function(){for(let t=0;t<oi.length;t++)oi[t]=1}()}return u};function ri(t,e,n){let r=t;return e||!n||4&t?(r|=4,r&=-3):(r|=2,r&=-5),r}function ii(t,e){let n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}const oi=[];function si(t,e){return t[e+0]}function ai(t,e,n){t[e+1]=n}const li=(()=>Promise.resolve(null))();function ui(t){const e=t[Tt],n=pe(t);if(e.firstTemplatePass=!1,t[Pt]=e.bindingStartIndex,!n){const n=be();Kt(t,e,n,void 0),function(t){for(let e=t[Lt];null!==e;e=e[It])if(-1===e[Vt]&&$t(e))for(let t=Ut;t<e.length;t++){const n=e[t];hi(n,n[Tt],n[Ot])}}(t),ci(e,t),Qt(t),Yt(t,e.contentHooks,e.contentCheckHooks,n,1,void 0),function(t,e){const n=Se();try{if(t.expandoInstructions){let n=e[Pt]=t.expandoStartIndex;ye(n);let r=-1,i=-1;for(let o=0;o<t.expandoInstructions.length;o++){const s=t.expandoInstructions[o];if("number"==typeof s){if(s<=0){ue(i=-s);const e=t.expandoInstructions[++o];r=n+=sn+e}else n+=s;ye(n)}else null!==s&&(e[Pt]=n,s(2,qt(e[r]),i),se+=1+le,ae=0,le=0),r++}}}finally{ue(n)}}(e,t)}n&&e.staticContentQueries&&ci(e,t),function(t){if(null!=t)for(let e=0;e<t.length;e++)gi(t[e])}(e.components)}function ci(t,e){if(null!=t.contentQueries){_e(0);for(let n=0;n<t.contentQueries.length;n++){const r=t.contentQueries[n];t.data[r].contentQueries(2,e[r],r)}}}function hi(t,e,n){const r=ie,i=de();let o;if(512&t[xt])mi(gn(t));else{let s=!1;try{fe(null,!0),o=ke(t,t[Dt]),Qt(t),fi(t,e.template,pi(t),n),t[Tt].firstTemplatePass=!1,ui(t),s=!0}finally{Ce(o,s),fe(i,r)}}}function di(t,e,n){const r=t[Nt],i=ke(t,t[Dt]),o=!be(),s=pe(t);let a=!1;try{o&&!s&&r.begin&&r.begin(),s&&(n&&fi(t,n,1,e),ui(t),t[xt]&=-5),Qt(t),n&&fi(t,n,2,e),ui(t),a=!0}finally{o&&!s&&r.end&&r.end(),Ce(i,a)}}function fi(t,e,n,r){xe=null;const i=Se();try{ue(null),2&n&&function(t,e){Kt(t,t[Tt],be(),0),Te(0)}(t),e(n,r)}finally{Te(i)}}function pi(t){return pe(t)?1:2}function gi(t){const e=ee(),n=function(n,r){const i=e[t];return Ht(i)?i:i[St]}();(128==(128&n[xt])||pe(e))&&80&n[xt]&&(function(t){const e=t[Tt];for(let n=t.length;n<e.blueprint.length;n++)t[n]=e.blueprint[n]}(n),function(t,e){const n=t[Tt],r=ke(t,t[Dt]),i=n.template,o=pe(t);let s=!1;try{Qt(t),o&&bi(1,n,e),fi(t,i,pi(t),e),ui(t),o&&!n.staticViewQueries||bi(2,n,e),s=!0}finally{Ce(r,s)}}(n,n[Ot]))}function mi(t){for(let e=0;e<t.components.length;e++){const n=t.components[e];di(Gt(n),n)}}function bi(t,e,n){const r=e.viewQuery;r&&(_e(e.viewQueryStartIndex),r(t,n))}function vi(t,e,n){const r=t[Tt];for(let i=0;i<e.length;){const o=e[i++],s=e[i++],a=e[i++],l=t[o],u=r.data[o];u.setInput?u.setInput(l,n,s,a):l[a]=n}}let yi=null;function wi(){if(!yi){const t=N.Symbol;if(t&&t.iterator)yi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(yi=n)}}}return yi}function _i(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function ki(t,e){const n=Ei(t),r=Ei(e);if(n&&r)return function(t,e,n){const r=t[wi()](),i=e[wi()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,ki);{const i=t&&("object"==typeof t||"function"==typeof t),o=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!o)||_i(t,e)}}class Ci{constructor(t){this.wrapped=t}static wrap(t){return new Ci(t)}static unwrap(t){return Ci.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ci}}function Ei(t){return!!Si(t)&&(Array.isArray(t)||!(t instanceof Map)&&wi()in t)}function Si(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ti(t,e){Zr=ni;const n=Se(),r=ee(),i=r[Pt]++;if(t!==Cn){const o=Jt(n,r),s=le>0,a=r[i],l=Nr(a,t),u=function(t,e){const n=Array.isArray(t)?t:[null];n[0]=e||null;for(let s=1;s<n.length;s+=2)ai(n,s,null);let r,i=null,o=!1;if("string"==typeof e?e.length&&(i=e.split(/\s+/),o=!0):(i=e?Object.keys(e):null,r=e),i)t:for(let s=0;s<i.length;s++){const t=i[s],e=!!o||r[t];for(let r=1;r<n.length;r+=2){const i=si(n,r);if(t<=i){i===t?ai(n,r,e):n.splice(r,0,t,e);continue t}}n.push(t,e)}return n}(a,t);if(e)!function(t,e,n,i,o,a,l){const c=Vr;(Jr(t,r,c,null,i,u,s,l,!1)||l)&&($r|=1<<c)}(Ii(o),0,0,i,0,0,l);else{Mr(r);!function(t,e,n,i,o,a,l,c){const h=Vr;(Jr(t,r,h,null,i,u,s,c,!0)||c)&&(Hr|=1<<h)}(Ai(o),0,0,i,0,0,0,l)}}}function xi(){return ce()+he()}function Ai(t){return Di(t,!1)}function Ii(t){return Di(t,!0)}function Di(t,e){let n=e?t.newClasses:t.newStyles;return n||(n=[0,0,1,0,yr],e?t.newClasses=n:t.newStyles=n),n}function Pi(t,e,n){const r=de();r.stylingTemplate||(r.stylingTemplate=hn());const i=Li();i?(mr()&&function(){const t=ee();var e,n;e=Jt(Se(),t),n=xi(),wr(Ii(e),n),wr(Ai(e),n)}(),dn(r.stylingTemplate,i),(r.onElementCreationFns=r.onElementCreationFns||[]).push(()=>{Oi(r,t,e,n,i),function(t,e){let n=t[8];n||(n=t[8]=[cn]),n[0]=e}(r.stylingTemplate,i)})):Oi(r,t,e,n,cn)}function Oi(t,e,n,r,i){!function(t,e,n,r,i){if(16&t[1])return;if(!function(t,e,n,r){const i=t[2],o=2*e;return!(o<i.length&&i[o+0]>=0||(dn(t,e,t[5].length,r),0))}(t,e,0,i))return;r&&(r=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(dr(t[n]));return e}(r));const o=t[5],s=o[1],a=o[0],l=t[6],u=t[7],c=4*a;let h=10+c,d=h+4*s,f=d+c;const p=o.length;o.push(r?r.length:0,n?n.length:0);let g=0;const m=[];if(r&&r.length)for(let P=0;P<r.length;P++){const e=r[P];let n=Tn(t,e,10,h);-1==n&&(n=h+g,g+=4,m.push(e)),o.push(n)}const b=[];if(n&&n.length)for(let P=0;P<n.length;P++){const e=n[P];let r=Tn(t,e,h,d);-1==r?(r=d+g,g+=4,b.push(e)):r+=4*m.length,o.push(r)}let v=2;if(m.length)for(;v<p;){const t=o[v+0],e=o[v+1];if(e){const n=v+2+t;for(let t=n;t<n+e;t++)o[t]+=4*m.length}v+=2+(t+e)}const y=b.length+m.length;for(let P=10;P<t.length;P+=4){const e=P>=d,n=P>=(e?f:h),r=Gn(t,P),i=jn(r);let o=Bn(r);Jn(t,P,Ln(r,i,o+=e?n?4*m.length:0:4*y+4*(n?m.length:0)))}for(let P=0;P<4*m.length;P++)t.splice(f,0,null),t.splice(h,0,null),h++,d++,f+=2;for(let P=0;P<4*b.length;P++)t.splice(d,0,null),t.push(null),d++,f++;const w=t[4],_=t[3];for(let P=0;P<y;P++){const n=P>=m.length,r=n?P-m.length:P,o=n?b[r]:m[r];let l,u;n?(l=f+4*(s+r),u=h+4*(s+r)):(l=d+4*(a+r),u=10+4*(a+r));let c=n?w:_,p=ar(c,o);-1===p?(C=c,E=o,S=!n&&null,T=e,null===(k=null)&&(k=C.length,C.push(null,null,null),C[k+0]=E),C[k+1]=S,C[k+2]=T,p=k+1):p+=1;const g=nr(t,o,n,i||null);Jn(t,u,Ln(g,p,l)),zn(t,u,o),qn(t,u,null),Hn(t,u,0,e),Jn(t,l,Ln(g,p,u)),zn(t,l,o),qn(t,l,null),Hn(t,l,0,e)}var k,C,E,S,T;o[1]=s+b.length,o[0]=a+m.length,l[0]+=b.length,u[0]+=m.length;const x=4*m.length,A=4*b.length,I=u.length;fr(t,e,!1,d+4*a,m.length);for(let P=1;P<I;P+=4)u[P+1]+=A+x;const D=l.length;fr(t,e,!0,f+4*s,b.length);for(let P=1;P<D;P+=4)l[P+1]+=2*x+A;Jn(t,1,Ln(0,0,d))}(t.stylingTemplate,i,e,n,r)}function Ni(t){const e=Se(),n=ee(),r=Fi(e,n),i=Li();if(i)En(r,i,An,[r,t,i]);else{const i=Jt(e,n);if(function(t){return 0!=(16&t.flags)}(i)&&t!==Cn){const e=cr(r),o=(e.length?e+" ":"")+function(t){let e="";if(t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];e+=(r?";":"")+`${i}:${t[i]}`}}return e}(t);vi(n,i.inputs.style,o),t=Cn}An(r,t)}mr()&&function(t){Ti(t,!1)}(t)}function Ri(t){const e=Se(),n=ee(),r=Fi(e,n),i=Li();if(i)En(r,i,xn,[r,t,i]);else{const i=Jt(e,n);if(function(t){return 0!=(8&t.flags)}(i)&&t!==Cn){const e=cr(r),o=(e.length?e+" ":"")+function(t){return t&&"string"!=typeof t&&(t=Object.keys(t).join(" ")),t||""}(t);vi(n,i.inputs.class,o),t=Cn}xn(r,t)}mr()&&function(t){Ti(t,!0)}(t)}function Mi(){const t=Se(),e=Li()||cn,n=ee(),r=3===Jt(t,n).type?n[Rt]:null,i=0!=(8&n[xt]),o=Fi(t,n);gr<2&&function(t,e,n,r,i,o,s=0){let a=0;if(function(t,e){const n=t[8];return!n||n[0]===e}(t,s)&&(function(t){const e=t[8];if(e){for(let t=1;t<e.length;t+=3)e[t+1].apply(this,e[t+2]);e.length=1}}(t),function(t){return Nn(t,1)}(t))){const i=t[0],o=8&t[1],s=Un(t);for(let n=10;n<t.length;n+=4)if(Nn(t,n)){const o=Gn(t,n),a=sr(t,n),l=Kn(t,n),u=Qn(t,n),c=4&o?lr(t,a):null,h=Wn(t,n),d=!!(2&o);let f=u;n<s&&!er(f)&&(f=Qn(t,Bn(o))),er(f)||(f=Fn(t,o)),e&&(!r||f)&&(d?Pn(i,l,!!f,e,null,h):Dn(i,l,f,e,c,null,h)),On(t,n,!1)}if(o){const e=Array.isArray(n)?gn(n):n,o=t[9],s=o[0];for(let t=1;t<s;t+=2){const n=o[t],s=t+1,l=o[s];if(n){const t=n.buildPlayer(l,r);void 0!==t&&(null!=t&&fn(o,e,i,t,s)&&a++,l&&l.destroy())}else l&&l.destroy()}Xn(t,!1)}Yn(t,!1)}return a}(o,r,n,i,0,0,e)>0&&function(t,e){const n=0===t.flags;if(t.flags|=2,n&&t.clean==li){let e;t.clean=new Promise(t=>e=t),t.scheduler(()=>{if(1&t.flags&&(t.flags&=-2,mi(t)),2&t.flags){t.flags&=-3;const e=t.playerHandler;e&&e.flushPlayers()}t.clean=li,e(null)})}}(gn(n)),te(null),mr()&&function(){const t=Se(),e=ee(),n=Jt(t,e),r=function(t,e){return 3===t.type?e[Rt]:null}(n,e),i=function(t,n){let r=e[t+jt],i=e;for(;Array.isArray(r);)i=r,r=r[St];return Wt(i)?i[0]:r}(t),o=xi();!function(t,e,n,r,i){let o=!1;Ir(n,i)&&(!Pr(n)&&Dr(n),$r&&(Xr(n,t,r,e,$r,ei,null),$r=0,!0),qr=Ur)}(r,e,Ii(n),i,o);const s=Mr(e);!function(t,e,n,r,i,o){let s=!1;Ir(n,i)&&(!Pr(n)&&Dr(n),Hr&&(Xr(n,t,r,e,Hr,ti,o),Hr=0,!0),zr=Ur)}(r,e,Ai(n),i,o,s),br(null)}()}function Li(){return ce()+he()}function Fi(t,e){let n=Zt;return n||te(n=function(t,e){let n=t,r=e[n],i=e;for(;Array.isArray(r);)i=r,r=r[St];if(Wt(i))return i;{const o=Jt(t-jt,e).stylingTemplate;return i!==e&&(n=St),i[n]=o?function(t,e){const n=e.slice();for(let r=0;r<10;r++){const t=e[r];Array.isArray(t)&&(n[r]=t.slice())}return n[0]=t,n[1]|=16,n}(r,o):hn(r)}}(t+jt,e)),n}function ji(t){return!!t&&"function"==typeof t.then}function Bi(t){return!!t&&"function"==typeof t.subscribe}class Vi{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class Ui{}class zi{}function qi(t){const e=Error(`No component factory found for ${S(t)}. Did you add it to @NgModule.entryComponents?`);return e[Hi]=t,e}const Hi="ngComponent";class $i{resolveComponentFactory(t){throw qi(t)}}let Wi=(()=>{class t{}return t.NULL=new $i,t})();class Ji{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw qi(t);return new Gi(e,this._ngModule)}}class Gi extends zi{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}class Qi{}class Ki{}function Yi(...t){}let Xi=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Zi(t),t})();const Zi=Yi;class to{}class eo{}const no=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let ro=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>io(),t})();const io=Yi;class oo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const so=new oo("8.1.3");class ao{constructor(){}supports(t){return Ei(t)}create(t){return new uo(t)}}const lo=(t,e)=>e;class uo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||lo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<po(n,r,i)?e:n,s=po(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ei(t))throw new Error(`Error trying to diff '${S(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=this._trackByFn(e,n=t[e]),null!==i&&_i(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),_i(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[wi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&_i(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),_i(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(_i(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(_i(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new co(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new fo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class co{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ho{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&_i(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class fo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ho,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function po(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class go{constructor(){}supports(t){return t instanceof Map||Si(t)}create(){return new mo}}class mo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Si(t)))throw new Error(`Error trying to diff '${S(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new bo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){_i(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class bo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let vo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new v,new m]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=_({token:t,providedIn:"root",factory:()=>new t([new ao])}),t})(),yo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new v,new m]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=_({token:t,providedIn:"root",factory:()=>new t([new go])}),t})(),wo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>_o(),t})();const _o=(...t)=>{},ko=[new go],Co=new vo([new ao]),Eo=new yo(ko);let So=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>To(t,Xi),t})();const To=Yi;let xo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ao(t,Xi),t})();const Ao=Yi;function Io(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Do(n,e),n}(i,t)}function Do(t,e){t[lt]=e,t[ct]=e.logError.bind(e)}function Po(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function Oo(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function No(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Ro(t,e){return t.nodes[e]}function Mo(t,e){return t.nodes[e]}function Lo(t,e){return t.nodes[e]}function Fo(t,e){return t.nodes[e]}function jo(t,e){return t.nodes[e]}const Bo={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Vo=()=>{},Uo=new Map;function zo(t){let e=Uo.get(t);return e||(e=S(t)+"_"+Uo.size,Uo.set(t,e)),e}function qo(t,e,n,r){if(Ci.isWrapped(r)){r=Ci.unwrap(r);const i=t.def.nodes[e].bindingIndex+n,o=Ci.unwrap(t.oldValues[i]);t.oldValues[i]=new Ci(o)}return r}const Ho="$$undefined",$o="$$empty";function Wo(t){return{id:Ho,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Jo=0;function Go(t,e,n,r){return!(!(2&t.state)&&_i(t.oldValues[e.bindingIndex+n],r))}function Qo(t,e,n,r){return!!Go(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Ko(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!ki(i,r)){const o=e.bindings[n].name;throw Io(Bo.createDebugContext(t,e.nodeIndex),`${o}: ${i}`,`${o}: ${r}`,0!=(1&t.state))}}function Yo(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Xo(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Zo(t,e,n,r){try{return Yo(33554432&t.def.nodes[e].flags?Mo(t,e).componentView:t),Bo.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function ts(t){return t.parent?Mo(t.parent,t.parentNodeDef.nodeIndex):null}function es(t){return t.parent?t.parentNodeDef.parent:null}function ns(t,e){switch(201347067&e.flags){case 1:return Mo(t,e.nodeIndex).renderElement;case 2:return Ro(t,e.nodeIndex).renderText}}function rs(t,e){return t?`${t}:${e}`:e}function is(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function os(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ss(t){return 1<<t%32}function as(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=ss(t)):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function ls(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,U,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:zo(n)}})}function us(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===ft.Native?Mo(t,n.renderParent.nodeIndex).renderElement:void 0:e}const cs=new WeakMap;function hs(t){let e=cs.get(t);return e||((e=t(()=>Vo)).factory=t,cs.set(t,e)),e}function ds(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(ns(t,t.def.lastRenderRootNode))),fs(t,e,0,t.def.nodes.length-1,n,r,i)}function fs(t,e,n,r,i,o,s){for(let a=n;a<=r;a++){const n=t.def.nodes[a];11&n.flags&&gs(t,n,e,i,o,s),a+=n.childCount}}function ps(t,e,n,r,i,o){let s=t;for(;s&&!is(s);)s=s.parent;const a=s.parent,l=es(s),u=l.nodeIndex+l.childCount;for(let c=l.nodeIndex+1;c<=u;c++){const t=a.def.nodes[c];t.ngContentIndex===e&&gs(a,t,n,r,i,o),c+=t.childCount}if(!a.parent){const s=t.root.projectableNodes[e];if(s)for(let e=0;e<s.length;e++)ms(t,s[e],n,r,i,o)}}function gs(t,e,n,r,i,o){if(8&e.flags)ps(t,e.ngContent.index,n,r,i,o);else{const s=ns(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&ms(t,s,n,r,i,o),32&e.bindingFlags&&ms(Mo(t,e.nodeIndex).componentView,s,n,r,i,o)):ms(t,s,n,r,i,o),16777216&e.flags){const s=Mo(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<s.length;t++)ds(s[t],n,r,i,o)}1&e.flags&&!e.element.name&&fs(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function ms(t,e,n,r,i,o){const s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}const bs=/^:([^:]+):(.+)$/;function vs(t){if(":"===t[0]){const e=t.match(bs);return[e[1],e[2]]}return["",t]}function ys(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}function ws(t,e,n,r,i,o,s,a,l,u,c,h,d,f,p,g,m,b,v,y){switch(t){case 1:return e+_s(n)+r;case 2:return e+_s(n)+r+_s(i)+o;case 3:return e+_s(n)+r+_s(i)+o+_s(s)+a;case 4:return e+_s(n)+r+_s(i)+o+_s(s)+a+_s(l)+u;case 5:return e+_s(n)+r+_s(i)+o+_s(s)+a+_s(l)+u+_s(c)+h;case 6:return e+_s(n)+r+_s(i)+o+_s(s)+a+_s(l)+u+_s(c)+h+_s(d)+f;case 7:return e+_s(n)+r+_s(i)+o+_s(s)+a+_s(l)+u+_s(c)+h+_s(d)+f+_s(p)+g;case 8:return e+_s(n)+r+_s(i)+o+_s(s)+a+_s(l)+u+_s(c)+h+_s(d)+f+_s(p)+g+_s(m)+b;case 9:return e+_s(n)+r+_s(i)+o+_s(s)+a+_s(l)+u+_s(c)+h+_s(d)+f+_s(p)+g+_s(m)+b+_s(v)+y;default:throw new Error("Does not support more than 9 expressions")}}function _s(t){return null!=t?t.toString():""}const ks=new Object,Cs=zo(Z),Es=zo(M),Ss=zo(Qi);function Ts(t,e,n,r){return n=A(n),{index:-1,deps:ls(r,S(e)),flags:t,token:e,value:n}}function xs(t){const e={},n=[];let r=!1;for(let i=0;i<t.length;i++){const o=t[i];o.token===Y&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[zo(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function As(t,e,n=Z.THROW_IF_NOT_FOUND){const r=$(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const s=e.tokenKey;switch(s){case Cs:case Es:case Ss:return t}const a=t._def.providersByKey[s];let l;if(a){let e=t._providers[a.index];return void 0===e&&(e=t._providers[a.index]=Is(t,a)),e===ks?void 0:e}if((l=C(e.token))&&(i=t,null!=(o=l).providedIn&&(function(t,e){return t._def.modules.indexOf(o.providedIn)>-1}(i)||"root"===o.providedIn&&i._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:e.token},t._providers[n]=ks,t._providers[n]=Is(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{$(r)}var i,o}function Is(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(As(t,n[0]));case 2:return new e(As(t,n[0]),As(t,n[1]));case 3:return new e(As(t,n[0]),As(t,n[1]),As(t,n[2]));default:const i=new Array(r);for(let e=0;e<r;e++)i[e]=As(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(As(t,n[0]));case 2:return e(As(t,n[0]),As(t,n[1]));case 3:return e(As(t,n[0]),As(t,n[1]),As(t,n[2]));default:const i=Array(r);for(let e=0;e<r;e++)i[e]=As(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=As(t,e.deps[0]);break;case 256:n=e.value}return n===ks||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?ks:n}function Ds(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,Rs(n,e),Bo.dirtyParentQueries(r),Os(r),r}function Ps(t,e,n){const r=e?ns(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);ds(n,2,i,o,void 0)}function Os(t){ds(t,3,null,null,void 0)}function Ns(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Rs(t,e){e>=t.length-1?t.pop():t.splice(e,1)}const Ms=new Object;function Ls(t,e,n,r,i,o){return new Fs(t,e,n,r,i,o)}class Fs extends zi{constructor(t,e,n,r,i,o){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=hs(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=Bo.createRootView(t,e||[],n,i,r,Ms),a=Lo(s,o).instance;return n&&s.renderer.setAttribute(Mo(s,0).renderElement,"ng-version",so.full),new js(s,new zs(s),a)}}class js extends Ui{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new Xi(Mo(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Ws(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Bs(t,e,n){return new Vs(t,e,n)}class Vs{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new Xi(this._data.renderElement)}get injector(){return new Ws(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=es(t),t=t.parent;return t?new Ws(t,e):new Ws(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Ds(this._data,t);Bo.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new zs(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;i||t instanceof Gi||(i=o.get(Qi));const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=t,Ns(i,n,r),function(t,e){const n=ts(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(4&n.flags)return;e.parent.def.nodeFlags|=4,n.flags|=4;let r=n.parent;for(;r;)r.childFlags|=4,r=r.parent}(0,e.parentNodeDef)}(e,r),Bo.dirtyParentQueries(r),Ps(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,r){const i=t.viewContainer._embeddedViews,o=i[n];Rs(i,n),null==r&&(r=i.length),Ns(i,r,o),Bo.dirtyParentQueries(o),Os(o),Ps(t,r>0?i[r-1]:null,o)}(this._data,0,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Ds(this._data,t);e&&Bo.destroyView(e)}detach(t){const e=Ds(this._data,t);return e?new zs(e):null}}function Us(t){return new zs(t)}class zs{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return ds(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Yo(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Bo.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Bo.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Bo.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Os(this._view),Bo.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function qs(t,e){return new Hs(t,e)}class Hs extends So{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new zs(Bo.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new Xi(Mo(this._parentView,this._def.nodeIndex).renderElement)}}function $s(t,e){return new Ws(t,e)}class Ws{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Z.THROW_IF_NOT_FOUND){return Bo.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:zo(t)},e)}}function Js(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=Mo(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return Ro(t,n.nodeIndex).renderText;if(20240&n.flags)return Lo(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function Gs(t){return new Qs(t.renderer)}class Qs{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=vs(e),i=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,i),i}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,i]=vs(e);null!=n?this.delegate.setAttribute(t,i,n,r):this.delegate.removeAttribute(t,i,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Ks(t,e,n,r){return new Ys(t,e,n,r)}class Ys{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Is(t,i))}}(this)}get(t,e=Z.THROW_IF_NOT_FOUND,n=y.Default){let r=0;return n&y.SkipSelf?r|=1:n&y.Self&&(r|=4),As(this,{token:t,tokenKey:zo(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Wi)}destroy(){if(this._destroyed)throw new Error(`The ng module ${S(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const e=t._providers[i];if(e&&e!==ks){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const Xs=zo(to),Zs=zo(ro),ta=zo(Xi),ea=zo(xo),na=zo(So),ra=zo(wo),ia=zo(Z),oa=zo(M);function sa(t,e,n,r,i,o,s,a){const l=[];if(s)for(let c in s){const[t,e]=s[c];l[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const u=[];if(a)for(let c in a)u.push({type:1,propName:c,target:null,eventName:a[c]});return ua(t,e|=16384,n,r,i,i,o,l,u)}function aa(t,e,n){return ua(-1,t|=16,null,0,e,e,n)}function la(t,e,n,r,i){return ua(-1,t,e,0,n,r,i)}function ua(t,e,n,r,i,o,s,a,l){const{matchedQueries:u,references:c,matchedQueryIds:h}=as(n);l||(l=[]),a||(a=[]),o=A(o);const d=ls(s,S(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:ys(a),outputs:l,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function ca(t,e){return pa(t,e)}function ha(t,e){let n=t;for(;n.parent&&!is(n);)n=n.parent;return ga(n.parent,es(n),!0,e.provider.value,e.provider.deps)}function da(t,e){const n=ga(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],o=n[i.propName];if(!Bi(o))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(fa(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function fa(t,e,n){return r=>Zo(t,e,n,r)}function pa(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return ga(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(ba(t,e,n,i[0]));case 2:return r(ba(t,e,n,i[0]),ba(t,e,n,i[1]));case 3:return r(ba(t,e,n,i[0]),ba(t,e,n,i[1]),ba(t,e,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=ba(t,e,n,i[r]);return r(...s)}}(t,e.parent,n,r.value,r.deps);case 2048:return ba(t,e.parent,n,r.deps[0]);case 256:return r.value}}function ga(t,e,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(ba(t,e,n,i[0]));case 2:return new r(ba(t,e,n,i[0]),ba(t,e,n,i[1]));case 3:return new r(ba(t,e,n,i[0]),ba(t,e,n,i[1]),ba(t,e,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=ba(t,e,n,i[r]);return new r(...s)}}const ma={};function ba(t,e,n,r,i=Z.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=t;2&r.flags&&(i=null);const s=r.tokenKey;s===ra&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let a=t;for(;a;){if(e)switch(s){case Xs:return Gs(va(a,e,n));case Zs:return va(a,e,n).renderer;case ta:return new Xi(Mo(a,e.nodeIndex).renderElement);case ea:return Mo(a,e.nodeIndex).viewContainer;case na:if(e.element.template)return Mo(a,e.nodeIndex).template;break;case ra:return Us(va(a,e,n));case ia:case oa:return $s(a,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[s];if(t){let e=Lo(a,t.nodeIndex);return e||(e={instance:pa(a,t)},a.nodes[t.nodeIndex]=e),e.instance}}n=is(a),e=es(a),a=a.parent,4&r.flags&&(a=null)}const l=o.root.injector.get(r.token,ma);return l!==ma||i===ma?l:o.root.ngModule.injector.get(r.token,i)}function va(t,e,n){let r;if(n)r=Mo(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!is(r);)r=r.parent;return r}function ya(t,e,n,r,i,o){if(32768&n.flags){const e=Mo(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const e=Ci.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Vi(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function wa(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&e&&ka(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=_a(t,s,e,r)),s=s.parent}}function _a(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&ka(t,i,e.flags&n,r++),i+=e.childCount}return r}function ka(t,e,n,r){const i=Lo(t,e);if(!i)return;const o=i.instance;o&&(Bo.setCurrentNode(t,e),1048576&n&&No(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&No(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const Ca=new R("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Et}),Ea={},Sa=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Ta=void 0;var xa=["en",[["a","p"],["AM","PM"],Ta],[["AM","PM"],Ta,Ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ta,"{1} 'at' {0}",Ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function Aa(t){return Ia(t)[Sa.PluralCase]}function Ia(t){const e=t.toLowerCase().replace(/_/g,"-");let n=Ea[e];if(n)return n;const r=e.split("-")[0];if(n=Ea[r])return n;if("en"===r)return xa;throw new Error(`Missing locale data for the locale "${t}".`)}let Da="en-US";class Pa extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}}function Oa(){return this._results[wi()]()}class Na{constructor(){this.dirty=!0,this._results=[],this.changes=new Pa,this.length=0;const t=wi(),e=Na.prototype;e[t]||(e[t]=Oa)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Ra=h("Directive",(t={})=>t,void 0,void 0,(t,e)=>Va(t,e)),Ma=h("Component",(t={})=>Object.assign({changeDetection:dt.Default},t),Ra,void 0,(t,e)=>Ba(t,e)),La=h("Pipe",t=>Object.assign({pure:!0},t),void 0,void 0,(t,e)=>Ua(t,e)),Fa=p("Input",t=>({bindingPropertyName:t})),ja=p("Output",t=>({bindingPropertyName:t})),Ba=Yi,Va=Yi,Ua=Yi,za=new R("Application Initializer");let qa=(()=>(class{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ji(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}))();const Ha=new R("AppId");function $a(){return`${Wa()}${Wa()}${Wa()}`}function Wa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ja=new R("Platform Initializer"),Ga=new R("Platform ID"),Qa=new R("appBootstrapListener");let Ka=(()=>(class{log(t){console.log(t)}warn(t){console.warn(t)}}))();const Ya=new R("LocaleId");function Xa(){throw new Error("Runtime compiler is not loaded")}const Za=Xa,tl=Xa,el=Xa,nl=Xa;let rl,il,ol=(()=>(class{constructor(){this.compileModuleSync=Za,this.compileModuleAsync=tl,this.compileModuleAndAllComponentsSync=el,this.compileModuleAndAllComponentsAsync=nl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}))();class sl{}function al(){const t=N.wtf;return!(!t||!(rl=t.trace)||(il=rl.events,0))}const ll=al();function ul(t,e){return null}const cl=ll?function(t,e=null){return il.createScope(t,e)}:(t,e)=>ul,hl=ll?function(t,e){return rl.leaveScope(t,e),e}:(t,e)=>e,dl=(()=>Promise.resolve(0))();function fl(t){"undefined"==typeof Zone?dl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class pl{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pa(!1),this.onMicrotaskEmpty=new Pa(!1),this.onStable=new Pa(!1),this.onError=new Pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,i,o,s)=>{try{return vl(e),t.invokeTask(r,i,o,s)}finally{yl(e)}},onInvoke:(t,n,r,i,o,s,a)=>{try{return vl(e),t.invoke(r,i,o,s,a)}finally{yl(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,bl(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ml,gl,gl);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function gl(){}const ml={};function bl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yl(t){t._nesting--,bl(t)}class wl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pa,this.onMicrotaskEmpty=new Pa,this.onStable=new Pa,this.onError=new Pa}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}let _l=(()=>(class{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pl.assertNotInAngularZone(),fl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}))(),kl=(()=>{class t{constructor(){this._applications=new Map,Tl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tl.findTestabilityInTree(this,t,e)}}return t.ctorParameters=()=>[],t})();class Cl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function El(t){Tl=t}let Sl,Tl=new Cl,xl=function(t){return t instanceof Gi};const Al=new R("AllowMultipleToken");class Il{constructor(t,e){this.name=t,this.token=e}}function Dl(t,e,n=[]){const r=`Platform: ${e}`,i=new R(r);return(e=[])=>{let o=Pl();if(!o||o.injector.get(Al,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(Sl&&!Sl.destroyed&&!Sl.injector.get(Al,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Sl=t.get(Ol);const e=t.get(Ja,null);e&&e.forEach(t=>t())}(Z.create({providers:t,name:r}))}return function(t){const e=Pl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pl(){return Sl&&!Sl.destroyed?Sl:null}let Ol=(()=>(class{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(i=e?e.ngZone:void 0)?new wl:("zone.js"===i?void 0:i)||new pl({enableLongStackTrace:De()}),r=[{provide:pl,useValue:n}];var i;return n.run(()=>{const e=Z.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(yn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return function(t){Da=t.toLowerCase().replace(/_/g,"-")}(i.injector.get(Ya,"en-US")),i.onDestroy(()=>Ml(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const i=n();return ji(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(qa);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nl({},e);return function(t,e,n){return t.get(sl).createCompiler([e]).compileModuleAsync(n)}(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Rl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${S(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function Nl(t,e){return Array.isArray(e)?e.reduce(Nl,t):Object.assign({},t,e)}let Rl=(()=>{class t{constructor(t,e,n,r,i,l){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=De(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{pl.assertNotInAngularZone(),fl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{pl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof zi?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=xl(n)?null:this._injector.get(Qi),i=n.create(Z.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(_l,null);return o&&i.injector.get(kl).registerApplication(i.location.nativeElement,o),this._loadComponent(i),De()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,hl(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ml(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Qa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ml(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=cl("ApplicationRef#tick()"),t})();function Ml(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ll{}class Fl{}const jl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Bl=(()=>(class{constructor(t,e){this._compiler=t,this._config=e||jl}load(t){return this._compiler instanceof ol?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Vl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vl(t,e,r))}}))();function Vl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Ul{constructor(t,e){this.name=t,this.callback=e}}class zl{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof ql&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class ql extends zl{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof ql&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof ql&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof ql&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof ql)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Hl=new Map,$l=function(t){return Hl.get(t)||null};function Wl(t){Hl.set(t.nativeNode,t)}const Jl=Dl(null,"core",[{provide:Ga,useValue:"unknown"},{provide:Ol,deps:[Z]},{provide:kl,deps:[]},{provide:Ka,deps:[]}]);function Gl(){return Co}function Ql(){return Eo}function Kl(t){return t||"en-US"}function Yl(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}let Xl=(()=>(class{constructor(t){}}))();function Zl(t,e,n,r,i,o){t|=1;const{matchedQueries:s,references:a,matchedQueryIds:l}=as(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?hs(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Vo},provider:null,text:null,query:null,ngContent:null}}function tu(t,e,n,r,i,o,s=[],a,l,u,c,h){u||(u=Vo);const{matchedQueries:d,references:f,matchedQueryIds:p}=as(n);let g=null,m=null;o&&([g,m]=vs(o)),a=a||[];const b=new Array(a.length);for(let w=0;w<a.length;w++){const[t,e,n]=a[w],[r,i]=vs(e);let o=void 0,s=void 0;switch(15&t){case 4:s=n;break;case 1:case 8:o=n}b[w]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}l=l||[];const v=new Array(l.length);for(let w=0;w<l.length;w++){const[t,e]=l[w];v[w]={type:0,target:t,eventName:e,propName:null}}const y=(s=s||[]).map(([t,e])=>{const[n,r]=vs(t);return[n,r,e]});return h=function(t){if(t&&t.id===Ho){const e=null!=t.encapsulation&&t.encapsulation!==ft.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Jo++}`:$o}return t&&t.id===$o&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:f,ngContentIndex:r,childCount:i,bindings:b,bindingFlags:ys(b),outputs:v,element:{ns:g,name:m,attrs:y,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:u||Vo},provider:null,text:null,query:null,ngContent:null}}function eu(t,e,n){const r=n.element,i=t.root.selectorOrNode,o=t.renderer;let s;if(t.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment("");const i=us(t,e,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===ft.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[t,e,n]=r.attrs[a];o.setAttribute(s,e,n,t)}return s}function nu(t,e,n,r){for(let i=0;i<n.outputs.length;i++){const o=n.outputs[i],s=ru(t,n.nodeIndex,rs(o.target,o.eventName));let a=o.target,l=t;"component"===o.target&&(a=null,l=e);const u=l.renderer.listen(a||r,o.eventName,s);t.disposables[n.outputIndex+i]=u}}function ru(t,e,n){return r=>Zo(t,e,n,r)}function iu(t,e,n,r){if(!Qo(t,e,n,r))return!1;const i=e.bindings[n],o=Mo(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){const s=e.securityContext;let a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const l=t.renderer;null!=o?l.setAttribute(n,i,a,r):l.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){let o=t.root.sanitizer.sanitize(tn.STYLE,i);if(null!=o){o=o.toString();const t=e.suffix;null!=t&&(o+=t)}else o=null;const s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){const o=e.securityContext;let s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}function ou(t,e,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:ss(e),bindings:r},ngContent:null}}function su(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&os(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&jo(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&jo(t,n).setDirty(),n+=e.childCount}}function au(t,e){const n=jo(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=lu(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=Lo(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=lu(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const o=e.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const t=o[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,s=!0}r[t.propName]=e}s&&n.notifyOnChanges()}function lu(t,e,n,r,i){for(let o=e;o<=n;o++){const e=t.def.nodes[o],n=e.matchedQueries[r.id];if(null!=n&&i.push(uu(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Mo(t,o);if((e.childMatchedQueries&r.filterId)===r.filterId&&(lu(t,o+1,o+e.childCount,r,i),o+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const o=t[e],s=ts(o);s&&s===n&&lu(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let t=0;t<s.length;t++){const e=s[t];lu(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(o+=e.childCount)}return i}function uu(t,e,n){if(null!=n)switch(n){case 1:return Mo(t,e.nodeIndex).renderElement;case 0:return new Xi(Mo(t,e.nodeIndex).renderElement);case 2:return Mo(t,e.nodeIndex).template;case 3:return Mo(t,e.nodeIndex).viewContainer;case 4:return Lo(t,e.nodeIndex).instance}}function cu(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function hu(t,e,n){const r=us(t,e,n);r&&ps(t,n.ngContent.index,1,r,null,void 0)}function du(t,e){return gu(128,t,new Array(e+1))}function fu(t,e){return gu(32,t,new Array(e))}function pu(t,e){const n=Object.keys(e),r=n.length,i=new Array(r);for(let o=0;o<r;o++){const t=n[o];i[e[t]]=t}return gu(64,t,i)}function gu(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const t=n[i];r[i]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:ys(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function mu(t,e,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function bu(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const o=us(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function vu(t,e){return(null!=t?t.toString():"")+e.suffix}function yu(t,e,n,r){let i=0,o=0,s=0,a=0,l=0,u=null,c=null,h=!1,d=!1,f=null;for(let p=0;p<e.length;p++){const t=e[p];if(t.nodeIndex=p,t.parent=u,t.bindingIndex=i,t.outputIndex=o,t.renderParent=c,s|=t.flags,l|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=u?u.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(l|=t.element.template.nodeMatchedQueries)}if(_u(u,t,e.length),i+=t.bindings.length,o+=t.outputs.length,!c&&3&t.flags&&(f=t),20224&t.flags){h||(h=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?u.element.publicProviders[zo(t.provider.token)]=t:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[zo(t.provider.token)]=t),e&&(u.element.componentProvider=t)}if(u?(u.childFlags|=t.flags,u.directChildFlags|=t.flags,u.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(u.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)u=t,wu(t)||(c=t);else for(;u&&p===u.nodeIndex+u.childCount;){const t=u.parent;t&&(t.childFlags|=u.childFlags,t.childMatchedQueries|=u.childMatchedQueries),c=(u=t)&&wu(u)?u.renderParent:u}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||Vo,updateRenderer:r||Vo,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:f}}function wu(t){return 0!=(1&t.flags)&&null===t.element.name}function _u(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function ku(t,e,n,r){const i=Su(t.root,t.renderer,t,e,n);return Tu(i,t.component,r),xu(i),i}function Cu(t,e,n){const r=Su(t,t.renderer,null,null,e);return Tu(r,n,n),xu(r),r}function Eu(t,e,n,r){const i=e.element.componentRendererType;let o;return o=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,Su(t.root,o,t,e.element.componentProvider,n)}function Su(t,e,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Tu(t,e,n){t.component=e,t.context=n}function xu(t){let e;is(t)&&(e=Mo(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch(Bo.setCurrentNode(t,i),201347067&o.flags){case 1:const n=eu(t,e,o);let a=void 0;if(33554432&o.flags){const e=hs(o.element.componentView);a=Bo.createComponentView(t,o,e,n)}nu(t,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?qs(t,o):void 0},16777216&o.flags&&(s.viewContainer=Bs(t,o,s));break;case 2:s=bu(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:ca(t,o)});break;case 16:s={instance:ha(t,o)};break;case 16384:(s=r[i])||(s={instance:da(t,o)}),32768&o.flags&&Tu(Mo(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Na;break;case 8:hu(t,e,o),s=void 0}r[i]=s}Lu(t,Mu.CreateViewNodes),Vu(t,201326592,268435456,0)}function Au(t){Pu(t),Bo.updateDirectives(t,1),Fu(t,Mu.CheckNoChanges),Bo.updateRenderer(t,1),Lu(t,Mu.CheckNoChanges),t.state&=-97}function Iu(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Oo(t,0,256),Pu(t),Bo.updateDirectives(t,0),Fu(t,Mu.CheckAndUpdate),Vu(t,67108864,536870912,0);let e=Oo(t,256,512);wa(t,2097152|(e?1048576:0)),Bo.updateRenderer(t,0),Lu(t,Mu.CheckAndUpdate),Vu(t,134217728,536870912,0),wa(t,8388608|((e=Oo(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Oo(t,768,1024)}function Du(t,e,n,r,i,o,s,a,l,u,c,h,d){return 0===n?function(t,e,n,r,i,o,s,a,l,u,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,l,u,c,h){const d=e.bindings.length;let f=!1;return d>0&&iu(t,e,0,n)&&(f=!0),d>1&&iu(t,e,1,r)&&(f=!0),d>2&&iu(t,e,2,i)&&(f=!0),d>3&&iu(t,e,3,o)&&(f=!0),d>4&&iu(t,e,4,s)&&(f=!0),d>5&&iu(t,e,5,a)&&(f=!0),d>6&&iu(t,e,6,l)&&(f=!0),d>7&&iu(t,e,7,u)&&(f=!0),d>8&&iu(t,e,8,c)&&(f=!0),d>9&&iu(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,o,s,a,l,u,c,h);case 2:return function(t,e,n,r,i,o,s,a,l,u,c,h){let d=!1;const f=e.bindings,p=f.length;if(p>0&&Qo(t,e,0,n)&&(d=!0),p>1&&Qo(t,e,1,r)&&(d=!0),p>2&&Qo(t,e,2,i)&&(d=!0),p>3&&Qo(t,e,3,o)&&(d=!0),p>4&&Qo(t,e,4,s)&&(d=!0),p>5&&Qo(t,e,5,a)&&(d=!0),p>6&&Qo(t,e,6,l)&&(d=!0),p>7&&Qo(t,e,7,u)&&(d=!0),p>8&&Qo(t,e,8,c)&&(d=!0),p>9&&Qo(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;p>0&&(d+=vu(n,f[0])),p>1&&(d+=vu(r,f[1])),p>2&&(d+=vu(i,f[2])),p>3&&(d+=vu(o,f[3])),p>4&&(d+=vu(s,f[4])),p>5&&(d+=vu(a,f[5])),p>6&&(d+=vu(l,f[6])),p>7&&(d+=vu(u,f[7])),p>8&&(d+=vu(c,f[8])),p>9&&(d+=vu(h,f[9]));const g=Ro(t,e.nodeIndex).renderText;t.renderer.setValue(g,d)}return d}(t,e,n,r,i,o,s,a,l,u,c,h);case 16384:return function(t,e,n,r,i,o,s,a,l,u,c,h){const d=Lo(t,e.nodeIndex),f=d.instance;let p=!1,g=void 0;const m=e.bindings.length;return m>0&&Go(t,e,0,n)&&(p=!0,g=ya(t,d,e,0,n,g)),m>1&&Go(t,e,1,r)&&(p=!0,g=ya(t,d,e,1,r,g)),m>2&&Go(t,e,2,i)&&(p=!0,g=ya(t,d,e,2,i,g)),m>3&&Go(t,e,3,o)&&(p=!0,g=ya(t,d,e,3,o,g)),m>4&&Go(t,e,4,s)&&(p=!0,g=ya(t,d,e,4,s,g)),m>5&&Go(t,e,5,a)&&(p=!0,g=ya(t,d,e,5,a,g)),m>6&&Go(t,e,6,l)&&(p=!0,g=ya(t,d,e,6,l,g)),m>7&&Go(t,e,7,u)&&(p=!0,g=ya(t,d,e,7,u,g)),m>8&&Go(t,e,8,c)&&(p=!0,g=ya(t,d,e,8,c,g)),m>9&&Go(t,e,9,h)&&(p=!0,g=ya(t,d,e,9,h,g)),g&&f.ngOnChanges(g),65536&e.flags&&No(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),p}(t,e,n,r,i,o,s,a,l,u,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,l,u,c,h){const d=e.bindings;let f=!1;const p=d.length;if(p>0&&Qo(t,e,0,n)&&(f=!0),p>1&&Qo(t,e,1,r)&&(f=!0),p>2&&Qo(t,e,2,i)&&(f=!0),p>3&&Qo(t,e,3,o)&&(f=!0),p>4&&Qo(t,e,4,s)&&(f=!0),p>5&&Qo(t,e,5,a)&&(f=!0),p>6&&Qo(t,e,6,l)&&(f=!0),p>7&&Qo(t,e,7,u)&&(f=!0),p>8&&Qo(t,e,8,c)&&(f=!0),p>9&&Qo(t,e,9,h)&&(f=!0),f){const f=Fo(t,e.nodeIndex);let g;switch(201347067&e.flags){case 32:g=new Array(d.length),p>0&&(g[0]=n),p>1&&(g[1]=r),p>2&&(g[2]=i),p>3&&(g[3]=o),p>4&&(g[4]=s),p>5&&(g[5]=a),p>6&&(g[6]=l),p>7&&(g[7]=u),p>8&&(g[8]=c),p>9&&(g[9]=h);break;case 64:g={},p>0&&(g[d[0].name]=n),p>1&&(g[d[1].name]=r),p>2&&(g[d[2].name]=i),p>3&&(g[d[3].name]=o),p>4&&(g[d[4].name]=s),p>5&&(g[d[5].name]=a),p>6&&(g[d[6].name]=l),p>7&&(g[d[7].name]=u),p>8&&(g[d[8].name]=c),p>9&&(g[d[9].name]=h);break;case 128:const t=n;switch(p){case 1:g=t.transform(n);break;case 2:g=t.transform(r);break;case 3:g=t.transform(r,i);break;case 4:g=t.transform(r,i,o);break;case 5:g=t.transform(r,i,o,s);break;case 6:g=t.transform(r,i,o,s,a);break;case 7:g=t.transform(r,i,o,s,a,l);break;case 8:g=t.transform(r,i,o,s,a,l,u);break;case 9:g=t.transform(r,i,o,s,a,l,u,c);break;case 10:g=t.transform(r,i,o,s,a,l,u,c,h)}}f.value=g}return f}(t,e,n,r,i,o,s,a,l,u,c,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,l,u,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)iu(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)Qo(t,e,o,n[o])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=vu(n[t],r[t]);i=e.text.prefix+i;const o=Ro(t,e.nodeIndex).renderText;t.renderer.setValue(o,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=Lo(t,e.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)Go(t,e,a,n[a])&&(o=!0,s=ya(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&No(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)Qo(t,e,o,n[o])&&(i=!0);if(i){const i=Fo(t,e.nodeIndex);let o;switch(201347067&e.flags){case 32:o=n;break;case 64:o={};for(let e=0;e<n.length;e++)o[r[e].name]=n[e];break;case 128:const t=n[0],i=n.slice(1);o=t.transform(...i)}i.value=o}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Pu(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=Mo(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,Xo(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Ou(t,e,n,r,i,o,s,a,l,u,c,h,d){return 0===n?function(t,e,n,r,i,o,s,a,l,u,c,h){const d=e.bindings.length;d>0&&Ko(t,e,0,n),d>1&&Ko(t,e,1,r),d>2&&Ko(t,e,2,i),d>3&&Ko(t,e,3,o),d>4&&Ko(t,e,4,s),d>5&&Ko(t,e,5,a),d>6&&Ko(t,e,6,l),d>7&&Ko(t,e,7,u),d>8&&Ko(t,e,8,c),d>9&&Ko(t,e,9,h)}(t,e,r,i,o,s,a,l,u,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)Ko(t,e,r,n[r])}(t,e,r),!1}function Nu(t,e){if(jo(t,e.nodeIndex).dirty)throw Io(Bo.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function Ru(t){if(!(128&t.state)){if(Fu(t,Mu.Destroy),Lu(t,Mu.Destroy),wa(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=ts(t);if(e){const n=e.template._projectedViews;n&&(Rs(n,n.indexOf(t)),Bo.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Mo(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Ro(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&jo(t,n).destroy()}}(t),is(t)&&t.renderer.destroy(),t.state|=128}}const Mu=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Lu(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?ju(Mo(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Fu(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Mo(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)ju(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ju(t,e){const n=t.state;switch(e){case Mu.CheckNoChanges:0==(128&n)&&(12==(12&n)?Au(t):64&n&&Bu(t,Mu.CheckNoChangesProjectedViews));break;case Mu.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Au(t):64&n&&Bu(t,e));break;case Mu.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Iu(t):64&n&&Bu(t,Mu.CheckAndUpdateProjectedViews));break;case Mu.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Iu(t):64&n&&Bu(t,e));break;case Mu.Destroy:Ru(t);break;case Mu.CreateViewNodes:xu(t)}}function Bu(t,e){Fu(t,e),Lu(t,e)}function Vu(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let o=0;o<i;o++){const i=t.def.nodes[o];if(i.flags&e&&i.flags&n)switch(Bo.setCurrentNode(t,i.nodeIndex),r){case 0:au(t,i);break;case 1:Nu(t,i)}i.childFlags&e&&i.childFlags&n||(o+=i.childCount)}}let Uu=!1;function zu(t,e,n,r,i,o){const s=i.injector.get(eo);return Cu(Hu(t,i,s,e,n),r,o)}function qu(t,e,n,r,i,o){const s=i.injector.get(eo),a=Hu(t,i,new kc(s),e,n),l=tc(r);return wc(sc.create,Cu,null,[a,l,o])}function Hu(t,e,n,r,i){const o=e.injector.get(en),s=e.injector.get(yn),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function $u(t,e,n,r){const i=tc(n);return wc(sc.create,ku,null,[t,e,i,r])}function Wu(t,e,n,r){return n=Ku.get(e.element.componentProvider.provider.token)||tc(n),wc(sc.create,Eu,null,[t,e,n,r])}function Ju(t,e,n,r){return Ks(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===Gu.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=Gu.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{Qu.forEach((r,i)=>{C(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=Gu.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=ls(i.deps),r.value=i.value)}if(Qu.size>0){let e=new Set(t.modules);Qu.forEach((r,i)=>{if(e.has(C(i).providedIn)){let e={token:i,flags:r.flags|(n?4096:0),deps:ls(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[zo(i)]=e}})}}(t=t.factory(()=>Vo)),t):t}(r))}const Gu=new Map,Qu=new Map,Ku=new Map;function Yu(t){let e;Gu.set(t.token,t),"function"==typeof t.token&&(e=C(t.token))&&"function"==typeof e.providedIn&&Qu.set(t.token,t)}function Xu(t,e){const n=hs(e.viewDefFactory),r=hs(n.nodes[0].element.componentView);Ku.set(t,r)}function Zu(){Gu.clear(),Qu.clear(),Ku.clear()}function tc(t){if(0===Gu.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Gu.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Vo);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=Gu.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=ls(n.deps),t.value=n.value)}}}}function ec(t,e,n,r,i,o,s,a,l,u,c,h,d){const f=t.def.nodes[e];return Du(t,f,n,r,i,o,s,a,l,u,c,h,d),224&f.flags?Fo(t,e).value:void 0}function nc(t,e,n,r,i,o,s,a,l,u,c,h,d){const f=t.def.nodes[e];return Ou(t,f,n,r,i,o,s,a,l,u,c,h,d),224&f.flags?Fo(t,e).value:void 0}function rc(t){return wc(sc.detectChanges,Iu,null,[t])}function ic(t){return wc(sc.checkNoChanges,Au,null,[t])}function oc(t){return wc(sc.destroy,Ru,null,[t])}const sc=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let ac,lc,uc;function cc(t,e){lc=t,uc=e}function hc(t,e,n,r){return cc(t,e),wc(sc.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function dc(t,e){if(128&t.state)throw Po(sc[ac]);return cc(t,mc(t,0)),t.def.updateDirectives(function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?pc(t,o,r,i):gc(t,o,r,i),16384&o.flags&&cc(t,mc(t,n)),224&o.flags?Fo(t,o.nodeIndex).value:void 0},t)}function fc(t,e){if(128&t.state)throw Po(sc[ac]);return cc(t,bc(t,0)),t.def.updateRenderer(function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?pc(t,o,r,i):gc(t,o,r,i),3&o.flags&&cc(t,bc(t,n)),224&o.flags?Fo(t,o.nodeIndex).value:void 0},t)}function pc(t,e,n,r){if(Du(t,e,n,...r)){const i=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],o=i[t];8&r.flags&&(n[wn(r.nonMinifiedName)]=kn(o))}const r=e.parent,o=Mo(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(o,e,r):t.renderer.removeAttribute(o,e)}else t.renderer.setValue(o,`bindings=${JSON.stringify(n,null,2)}`)}}}function gc(t,e,n,r){Ou(t,e,n,...r)}function mc(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function bc(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class vc{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=es(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Mo(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return $s(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){yc(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&yc(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!is(t);)t=t.parent;return t.parent?Mo(t.parent,es(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?ns(this.view,this.nodeDef):ns(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===i?t.error.bind(t,...e):Vo),o<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function yc(t,e,n){for(let r in e.references)n[r]=uu(t,e,e.references[r])}function wc(t,e,n,r){const i=ac,o=lc,s=uc;try{ac=t;const l=e.apply(n,r);return lc=o,uc=s,ac=i,l}catch(a){if(mn(a)||!lc)throw a;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Do(t,e),t}(a,_c())}}function _c(){return lc?new vc(lc,uc):null}class kc{constructor(t){this.delegate=t}createRenderer(t,e){return new Cc(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Cc{constructor(t){this.delegate=t,this.debugContextFactory=_c,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){!function(t){Hl.delete(t.nativeNode)}($l(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new ql(n,null,r);e.name=t,Wl(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Wl(new zl(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Wl(new zl(e,null,n)),e}appendChild(t,e){const n=$l(t),r=$l(e);n&&r&&n instanceof ql&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=$l(t),i=$l(e),o=$l(n);r&&i&&r instanceof ql&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=$l(t),r=$l(e);n&&r&&n instanceof ql&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=_c();return r&&Wl(new ql(n,null,r)),n}setAttribute(t,e,n,r){const i=$l(t);i&&i instanceof ql&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=$l(t);r&&r instanceof ql&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=$l(t);n&&n instanceof ql&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=$l(t);n&&n instanceof ql&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=$l(t);i&&i instanceof ql&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=$l(t);r&&r instanceof ql&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=$l(t);r&&r instanceof ql&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=$l(t);r&&r.listeners.push(new Ul(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function Ec(t,e,n){return new Sc(t,e,n)}class Sc extends Ki{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(Uu)return;Uu=!0;const t=De()?{setCurrentNode:cc,createRootView:qu,createEmbeddedView:$u,createComponentView:Wu,createNgModuleRef:Ju,overrideProvider:Yu,overrideComponentView:Xu,clearOverrides:Zu,checkAndUpdateView:rc,checkNoChangesView:ic,destroyView:oc,createDebugContext:(t,e)=>new vc(t,e),handleEvent:hc,updateDirectives:dc,updateRenderer:fc}:{setCurrentNode:()=>{},createRootView:zu,createEmbeddedView:ku,createComponentView:Eu,createNgModuleRef:Ks,overrideProvider:Vo,overrideComponentView:Vo,clearOverrides:Vo,checkAndUpdateView:Iu,checkNoChangesView:Au,destroyView:Ru,createDebugContext:(t,e)=>new vc(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?ec:nc,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?ec:nc,t)};Bo.setCurrentNode=t.setCurrentNode,Bo.createRootView=t.createRootView,Bo.createEmbeddedView=t.createEmbeddedView,Bo.createComponentView=t.createComponentView,Bo.createNgModuleRef=t.createNgModuleRef,Bo.overrideProvider=t.overrideProvider,Bo.overrideComponentView=t.overrideComponentView,Bo.clearOverrides=t.clearOverrides,Bo.checkAndUpdateView=t.checkAndUpdateView,Bo.checkNoChangesView=t.checkNoChangesView,Bo.destroyView=t.destroyView,Bo.resolveDep=ba,Bo.createDebugContext=t.createDebugContext,Bo.handleEvent=t.handleEvent,Bo.updateDirectives=t.updateDirectives,Bo.updateRenderer=t.updateRenderer,Bo.dirtyParentQueries=su}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(hs(this._ngModuleDefFactory));return Bo.createNgModuleRef(this.moduleType,t||Z.NULL,this._bootstrapComponents,e)}}},"8lbj":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("AytR");n("ZZ/e");class i{constructor(t){this.menuCtrl=t,this.versionString=""}ngOnInit(){this.versionString=r.a.production?`V${r.a.version}.0.0 P`:`V${r.a.version}.0.0 D`}}},"95Ir":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("8Y7J");n("Dn3B");class i{constructor(t,e){this.fb=t,this.filterService=e,this.defaultDifficulty="",this.defaultBridges="",this.defaultWaterCrossings="",this.defaultParking="",this.defaultFooting="",this.submitForm=new r.p}ngOnInit(){this.myForm=this.fb.group({name:[""],difficulty:[this.defaultDifficulty],waterCrossings:[this.defaultWaterCrossings],bridges:[this.defaultBridges],parking:[this.defaultParking],footing:[this.defaultFooting]}),this.filterService.getTrailAttributesFilter().subscribe(t=>{t&&(this.myForm=this.fb.group({name:[t.name],difficulty:[t.difficulty],waterCrossings:[t.waterCrossings],bridges:[t.bridges],parking:[t.parking],footing:[t.footing]}))})}onSubmit(){this.submitForm.emit(this.myForm.value)}}},"9Vlk":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("kweq"),l=n("dh1O"),u=n("Gon4");class c{constructor(t,e){this.mapboxService=t,this.fb=e}ngOnInit(){this.myForm=this.fb.group({title:["",s.o.required],description:["",s.o.required],startDate:["",s.o.required],endDate:["",s.o.required],address:["",s.o.required],pictureUrl:["",s.o.required]})}onLocationSelected(t){this.myForm.get("address").setValue(t.place_name)}submit(){console.log(this.myForm.getRawValue())}}n.d(e,"a",function(){return p});var h=r.vb({encapsulation:0,styles:[[""]],data:{}});function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,91,"ion-content",[],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,89,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.submit()&&i),i},null,null)),r.wb(3,16384,null,0,s.s,[],null,null),r.wb(4,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.d]),r.wb(6,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(7,0,null,null,84,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(8,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,82,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(10,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,80,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),(t()(),r.xb(14,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Add New Event"])),(t()(),r.xb(16,0,null,0,71,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(17,0,null,null,70,"ion-list",[],null,null,null,i.Y,i.r)),r.wb(18,49152,null,0,o.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(20,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(21,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(22,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Title"])),(t()(),r.xb(24,0,null,0,6,"ion-input",[["formControlName","title"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,26)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,26)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(25,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(26,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(28,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(30,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(31,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(32,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(33,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(34,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Description"])),(t()(),r.xb(36,0,null,0,6,"ion-input",[["formControlName","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,38)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,38)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(37,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(38,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(40,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(42,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(43,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(44,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(45,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(46,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Start Date"])),(t()(),r.xb(48,0,null,0,6,"ion-datetime",[["displayFormat","MMM/DD/YYYY hh:mm A"],["formControlName","startDate"],["minuteValues","0,15,30,45"],["pickerFormat","MMM DD YYYY hh mm A"],["placeholder","MM/DD/YY HH:mm"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,50)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,50)._handleChangeEvent(n.target)&&i),i},i.Q,i.j)),r.wb(49,49152,null,0,o.t,[r.i,r.n,r.B],{displayFormat:[0,"displayFormat"],minuteValues:[1,"minuteValues"],pickerFormat:[2,"pickerFormat"],placeholder:[3,"placeholder"]},null),r.wb(50,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(52,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(54,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(55,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(56,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(57,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(58,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["End Date"])),(t()(),r.xb(60,0,null,0,6,"ion-datetime",[["displayFormat","MMM/DD/YYYY hh:mm A"],["formControlName","endDate"],["minuteValues","0,15,30,45"],["pickerFormat","MMM DD YYYY hh mm A"],["placeholder","MM/DD/YY HH:mm"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,62)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,62)._handleChangeEvent(n.target)&&i),i},i.Q,i.j)),r.wb(61,49152,null,0,o.t,[r.i,r.n,r.B],{displayFormat:[0,"displayFormat"],minuteValues:[1,"minuteValues"],pickerFormat:[2,"pickerFormat"],placeholder:[3,"placeholder"]},null),r.wb(62,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(64,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(66,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(67,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(68,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(69,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(70,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Picture URL"])),(t()(),r.xb(72,0,null,0,6,"ion-input",[["formControlName","pictureUrl"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,74)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,74)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(73,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(74,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(76,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(78,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(79,0,null,0,4,"ion-item",[],null,null,null,i.W,i.p)),r.wb(80,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(81,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(82,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Address"])),(t()(),r.xb(84,0,null,0,3,"ion-auto-complete",[],null,[[null,"itemSelected"],["document","click"]],function(t,e,n){var i=!0,o=t.component;return"document:click"===e&&(i=!1!==r.Jb(t,86).documentClickHandler(n)&&i),"itemSelected"===e&&(i=!1!==o.onLocationSelected(n)&&i),i},a.b,a.a)),r.Ob(5120,null,s.g,function(t){return[t]},[l.a]),r.wb(86,8437760,[["addressSearchbar",4]],0,l.a,[],{dataProvider:[0,"dataProvider"],options:[1,"options"]},{itemSelected:"itemSelected"}),r.Mb(87,{placeholder:0}),(t()(),r.xb(88,0,null,0,3,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(89,0,null,null,2,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,i.I,i.b)),r.wb(90,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Submit"]))],function(t,e){var n=e.component;t(e,4,0,n.myForm),t(e,25,0,"text"),t(e,28,0,"title"),t(e,37,0,"text"),t(e,40,0,"description"),t(e,49,0,"MMM/DD/YYYY hh:mm A","0,15,30,45","MMM DD YYYY hh mm A","MM/DD/YY HH:mm"),t(e,52,0,"startDate"),t(e,61,0,"MMM/DD/YYYY hh:mm A","0,15,30,45","MMM DD YYYY hh mm A","MM/DD/YY HH:mm"),t(e,64,0,"endDate"),t(e,73,0,"url"),t(e,76,0,"pictureUrl");var r=n.mapboxService,i=t(e,87,0,"Enter address");t(e,86,0,r,i),t(e,90,0,n.myForm.invalid,"block","large","submit")},function(t,e){t(e,2,0,r.Jb(e,6).ngClassUntouched,r.Jb(e,6).ngClassTouched,r.Jb(e,6).ngClassPristine,r.Jb(e,6).ngClassDirty,r.Jb(e,6).ngClassValid,r.Jb(e,6).ngClassInvalid,r.Jb(e,6).ngClassPending),t(e,24,0,r.Jb(e,30).ngClassUntouched,r.Jb(e,30).ngClassTouched,r.Jb(e,30).ngClassPristine,r.Jb(e,30).ngClassDirty,r.Jb(e,30).ngClassValid,r.Jb(e,30).ngClassInvalid,r.Jb(e,30).ngClassPending),t(e,36,0,r.Jb(e,42).ngClassUntouched,r.Jb(e,42).ngClassTouched,r.Jb(e,42).ngClassPristine,r.Jb(e,42).ngClassDirty,r.Jb(e,42).ngClassValid,r.Jb(e,42).ngClassInvalid,r.Jb(e,42).ngClassPending),t(e,48,0,r.Jb(e,54).ngClassUntouched,r.Jb(e,54).ngClassTouched,r.Jb(e,54).ngClassPristine,r.Jb(e,54).ngClassDirty,r.Jb(e,54).ngClassValid,r.Jb(e,54).ngClassInvalid,r.Jb(e,54).ngClassPending),t(e,60,0,r.Jb(e,66).ngClassUntouched,r.Jb(e,66).ngClassTouched,r.Jb(e,66).ngClassPristine,r.Jb(e,66).ngClassDirty,r.Jb(e,66).ngClassValid,r.Jb(e,66).ngClassInvalid,r.Jb(e,66).ngClassPending),t(e,72,0,r.Jb(e,78).ngClassUntouched,r.Jb(e,78).ngClassTouched,r.Jb(e,78).ngClassPristine,r.Jb(e,78).ngClassDirty,r.Jb(e,78).ngClassValid,r.Jb(e,78).ngClassInvalid,r.Jb(e,78).ngClassPending)})}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-add-event",[],null,null,null,d,h)),r.wb(1,114688,null,0,c,[u.a,s.b],null,null)],function(t,e){t(e,1,0)},null)}var p=r.tb("app-add-event",c,f,{},{},[])},"9ppp":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},ABqa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},a=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return o.__extends(e,t),e}(Error),l=function(){function t(t){this.app=t}return t.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(t=e.sent())?[2,t]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function u(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var c=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return u(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?u(t,function(t){return e.decode(t)}):t},t}(),h=function(){function t(t,e){var n=this;void 0===e&&(e="us-central1"),this.app_=t,this.region_=e,this.serializer=new c,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new l(t),this.cancelAllRequests=new Promise(function(t){n.deleteService=function(){return t()}})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r,i;return o.__generator(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},t.prototype.call=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r,i,l,u,c,h,d,f;return o.__generator(this,function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},l=new Headers,[4,this.contextProvider.getContext()];case 1:return(u=o.sent()).authToken&&l.append("Authorization","Bearer "+u.authToken),u.instanceIdToken&&l.append("Firebase-Instance-ID-Token",u.instanceIdToken),c=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,l),(p=c,new Promise(function(t,e){setTimeout(function(){e(new a("deadline-exceeded","deadline-exceeded"))},p)})),this.cancelAllRequests])];case 2:if(!(h=o.sent()))throw new a("cancelled","Firebase Functions instance was deleted.");if(d=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(h.status),i=r,o=void 0;try{var l=e&&e.error;if(l){var u=l.status;if("string"==typeof u){if(!s[u])return new a("internal","internal");r=s[u],i=u}var c=l.message;"string"==typeof c&&(i=c),void 0!==(o=l.details)&&(o=n.decode(o))}}catch(d){}return"ok"===r?null:new a(r,i,o)}(0,h.json,this.serializer))throw d;if(!h.json)throw new a("internal","Response is not valid JSON object.");if(void 0===(f=h.json.data)&&(f=h.json.result),void 0===f)throw new a("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}var p})})},t}(),d="functions";function f(t,e,n){return new h(t,n)}function p(t){t.INTERNAL.registerService(d,f,{Functions:h},void 0,!0)}p(i),e.registerFunctions=p},AytR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r={production:!0,version:"4",firebase:{apiKey:"AIzaSyA9WtOMm-vC_4oTp89ixutagUJWpYR3Ry0",authDomain:"horse-riding-app.firebaseapp.com",databaseURL:"https://horse-riding-app.firebaseio.com",projectId:"horse-riding-app",storageBucket:"",messagingSenderId:"215364264641",appId:"1:215364264641:web:75095f272cfe5cba"},firebasePath:"App/Prod/v4/",mapboxKey:"pk.eyJ1IjoibGVuZ3V5ZW50cmkxOTk5IiwiYSI6ImNrMTJyM3dwejAxbWwzaHA2d3BvMmhzMXAifQ.x0Iy-kvy7uv7rsbi4dixrQ",baseUrl:"http://high-horse-drifter.firebaseapp.com"}},BDB0:function(t,e){function n(t,e){if(t=t.replace(/\s+/g,""),e=e.replace(/\s+/g,""),!t.length&&!e.length)return 1;if(!t.length||!e.length)return 0;if(t===e)return 1;if(1===t.length&&1===e.length)return 0;if(t.length<2||e.length<2)return 0;let n=new Map;for(let i=0;i<t.length-1;i++){const e=t.substr(i,2),r=n.has(e)?n.get(e)+1:1;n.set(e,r)}let r=0;for(let i=0;i<e.length-1;i++){const t=e.substr(i,2),o=n.has(t)?n.get(t):0;o>0&&(n.set(t,o-1),r++)}return 2*r/(t.length+e.length-2)}t.exports={compareTwoStrings:n,findBestMatch:function(t,e){if(!function(t,e){return"string"==typeof t&&!!Array.isArray(e)&&!!e.length&&!e.find(t=>"string"!=typeof t)}(t,e))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const r=[];let i=0;for(let o=0;o<e.length;o++){const s=e[o],a=n(t,s);r.push({target:s,rating:a}),a>r[i].rating&&(i=o)}return{ratings:r,bestMatch:r[i],bestMatchIndex:i}}}},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),l=n("Lhse"),u=n("c2HN"),c=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(c.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[l.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[l.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const o=i.next();t=o.value,e=o.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}n.d(e,"a",function(){return h})},CupD:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("dsYM"),a=n("SVse"),l=n("s7LF"),u=r.vb({encapsulation:0,styles:["[_nghost-%COMP%]{--star-color:gray;--star-color-filled:orange;display:inline-block}ion-button[_ngcontent-%COMP%]{--padding-start:0;--padding-end:0;--color:var(--star-color);--color-focused:var(--star-color);--color-activated:var(--star-color)}ion-button.filled[_ngcontent-%COMP%]{--color:var(--star-color-filled);--color-focused:var(--star-color-filled);--color-activated:var(--star-color-filled)}ion-button.readonly[_ngcontent-%COMP%]{--opacity:1}"],data:{}});function c(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"ion-button",[["fill","clear"],["type","button"]],[[2,"filled",null],[2,"readonly",null]],[[null,"mouseenter"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"mouseenter"===e&&(r=!1!==i.onMouseEnter(t.context.$implicit)&&r),"click"===e&&(r=!1!==i.onClick(t.context.$implicit)&&r),r},i.I,i.b)),r.wb(1,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],fill:[1,"fill"],type:[2,"type"]},null),(t()(),r.xb(2,0,null,0,1,"ion-icon",[["name","star"],["slot","icon-only"]],null,null,null,i.U,i.n)),r.wb(3,49152,null,0,o.A,[r.i,r.n,r.B],{name:[0,"name"],size:[1,"size"]},null)],function(t,e){var n=e.component;t(e,1,0,n.disabled||n.readonly,"clear","button"),t(e,3,0,"star",n.size)},function(t,e){var n=e.component;t(e,0,0,e.context.$implicit<=n.hoverRate||!n.hoverRate&&e.context.$implicit<=n.rate,n.readonly)})}function h(t){return r.Tb(2,[(t()(),r.mb(16777216,null,null,2,null,c)),r.wb(1,278528,null,0,a.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null),r.Kb(2,5)],function(t,e){var n=t(e,2,0,1,2,3,4,5);t(e,1,0,n)},null)}var d=n("iInd");n("6seB"),n("lGQG"),n("ajt+"),n("Q+Hy"),n("VMA6"),n.d(e,"a",function(){return f}),n.d(e,"b",function(){return w});var f=r.vb({encapsulation:0,styles:[[".ion-col-review[_ngcontent-%COMP%]{align-content:flex-end}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}.overflow-clip[_ngcontent-%COMP%]{overflow:clip}.avatar[_ngcontent-%COMP%]{width:40%;border-radius:50%}ion-col[_ngcontent-%COMP%]{align-self:center}"]],data:{}});function p(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,55,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(2,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(4,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Facility Cleanliness"])),(t()(),r.xb(6,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,8).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,8).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onCampAttributeRateChange(n,o.CampReviewAttributes.facilityCleanliness)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(8,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(9,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(10,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(12,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Horse Facilities"])),(t()(),r.xb(14,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,16).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,16).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onCampAttributeRateChange(n,o.CampReviewAttributes.horseFacilities)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(16,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(17,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(18,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(20,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Big Rig Friendly"])),(t()(),r.xb(22,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,24).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,24).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onCampAttributeRateChange(n,o.CampReviewAttributes.bigRigFriendly)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(24,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(25,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(26,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(27,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(28,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Wifi"])),(t()(),r.xb(30,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,32).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,32).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onCampAttributeRateChange(n,o.CampReviewAttributes.wifi)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(32,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(33,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(34,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(35,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(36,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Pet Friendly"])),(t()(),r.xb(38,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,40).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,40).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onCampAttributeRateChange(n,o.CampReviewAttributes.petFriendly)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(40,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(41,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(42,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(43,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(44,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Overall"])),(t()(),r.xb(46,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,48).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,48).onBlur()&&i),"rateChange"===e&&(i=!1!==(o.campReviewToSubmit.rating=n)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(48,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(49,0,null,null,6,"ion-textarea",[["name","description"],["placeholder","Write your review here..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,51)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,51)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.campReviewToSubmit.description=n)&&i),i},i.lb,i.E)),r.wb(50,49152,null,0,o.vb,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"]},null),r.wb(51,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,l.g,function(t){return[t]},[o.Mb]),r.wb(53,671744,null,0,l.l,[[8,null],[8,null],[8,null],[6,l.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,l.h,null,[l.l]),r.wb(55,16384,null,0,l.i,[[4,l.h]],null,null)],function(t,e){var n=e.component;t(e,8,0,null==n.campReviewToSubmit?null:n.campReviewToSubmit.facilityCleanliness),t(e,16,0,null==n.campReviewToSubmit?null:n.campReviewToSubmit.horseFacilities),t(e,24,0,null==n.campReviewToSubmit?null:n.campReviewToSubmit.bigRigFriendly),t(e,32,0,null==n.campReviewToSubmit?null:n.campReviewToSubmit.wifi),t(e,40,0,null==n.campReviewToSubmit?null:n.campReviewToSubmit.petFriendly),t(e,48,0,null==n.campReviewToSubmit?null:n.campReviewToSubmit.rating),t(e,50,0,"description","Write your review here..."),t(e,53,0,"description",n.campReviewToSubmit.description)},function(t,e){t(e,49,0,r.Jb(e,55).ngClassUntouched,r.Jb(e,55).ngClassTouched,r.Jb(e,55).ngClassPristine,r.Jb(e,55).ngClassDirty,r.Jb(e,55).ngClassValid,r.Jb(e,55).ngClassInvalid,r.Jb(e,55).ngClassPending)})}function g(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,63,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(2,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(4,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Overall"])),(t()(),r.xb(6,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,8).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,8).onBlur()&&i),"rateChange"===e&&(i=!1!==(o.trailReviewToSubmit.rating=n)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(8,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(9,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(10,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(12,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Overall Difficulty"])),(t()(),r.xb(14,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,16).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,16).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onTrailAttributeRateChange(n,o.TrailReviewAttributes.difficulty)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(16,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(17,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(18,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(20,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Water Crossings"])),(t()(),r.xb(22,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,24).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,24).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onTrailAttributeRateChange(n,o.TrailReviewAttributes.difficultyWater)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(24,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(25,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(26,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(27,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(28,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Ease of Navigation (terrain)"])),(t()(),r.xb(30,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,32).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,32).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onTrailAttributeRateChange(n,o.TrailReviewAttributes.difficultyBridges)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(32,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(33,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(34,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(35,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(36,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Ease of Navigation (footing)"])),(t()(),r.xb(38,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,40).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,40).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onTrailAttributeRateChange(n,o.TrailReviewAttributes.footing)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(40,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(41,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(42,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(43,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(44,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Trail Condition"])),(t()(),r.xb(46,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,48).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,48).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onTrailAttributeRateChange(n,o.TrailReviewAttributes.trailCondition)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(48,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(49,0,null,null,7,"ion-item",[],null,null,null,i.W,i.p)),r.wb(50,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(51,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(52,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Parking"])),(t()(),r.xb(54,0,null,0,2,"ion-rating",[],null,[[null,"rateChange"],[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"mouseleave"===e&&(i=!1!==r.Jb(t,56).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,56).onBlur()&&i),"rateChange"===e&&(i=!1!==o.onTrailAttributeRateChange(n,o.TrailReviewAttributes.parking)&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(56,573440,null,0,s.a,[r.i],{rate:[0,"rate"]},{rateChange:"rateChange"}),(t()(),r.xb(57,0,null,null,6,"ion-textarea",[["name","description"],["placeholder","Write your review here..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,59)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,59)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.trailReviewToSubmit.description=n)&&i),i},i.lb,i.E)),r.wb(58,49152,null,0,o.vb,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"]},null),r.wb(59,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,l.g,function(t){return[t]},[o.Mb]),r.wb(61,671744,null,0,l.l,[[8,null],[8,null],[8,null],[6,l.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,l.h,null,[l.l]),r.wb(63,16384,null,0,l.i,[[4,l.h]],null,null)],function(t,e){var n=e.component;t(e,8,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.rating),t(e,16,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.difficulty),t(e,24,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.difficultyWater),t(e,32,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.difficultyBridges),t(e,40,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.footing),t(e,48,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.trailCondition),t(e,56,0,null==n.trailReviewToSubmit?null:n.trailReviewToSubmit.parking),t(e,58,0,"description","Write your review here..."),t(e,61,0,"description",n.trailReviewToSubmit.description)},function(t,e){t(e,57,0,r.Jb(e,63).ngClassUntouched,r.Jb(e,63).ngClassTouched,r.Jb(e,63).ngClassPristine,r.Jb(e,63).ngClassDirty,r.Jb(e,63).ngClassValid,r.Jb(e,63).ngClassInvalid,r.Jb(e,63).ngClassPending)})}function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,11,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,7,"ion-list",[],null,null,null,i.Y,i.r)),r.wb(2,49152,null,0,o.M,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,2,null,p)),r.wb(4,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.mb(16777216,null,0,2,null,g)),r.wb(7,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.xb(9,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSubmit()&&r),r},i.I,i.b)),r.wb(10,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Submit"]))],function(t,e){var n=e.component;t(e,4,0,0==r.Sb(e,4,0,r.Jb(e,5).transform(n.isTrail$))),t(e,7,0,1==r.Sb(e,7,0,r.Jb(e,8).transform(n.isTrail$)))},null)}function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,7,"p",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Please "])),(t()(),r.xb(3,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r.Jb(t,4).onClick(n)&&i),"click"===e&&(i=!1!==r.Jb(t,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"click"===e&&(i=!1!==o.onLoginButtonClick()&&i),i},null,null)),r.wb(4,737280,null,0,o.Kb,[a.j,o.Gb,r.n,d.m,[2,d.n]],null,null),r.wb(5,671744,null,0,d.o,[d.m,d.a,a.j],{routerLink:[0,"routerLink"]},null),r.Kb(6,1),(t()(),r.Rb(-1,null,["log in"])),(t()(),r.Rb(-1,null,[" to write a review."]))],function(t,e){t(e,4,0);var n=t(e,6,0,"/login");t(e,5,0,n)},function(t,e){t(e,3,0,r.Jb(e,5).target,r.Jb(e,5).href)})}function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),r.mb(16777216,null,null,2,null,m)),r.wb(2,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.mb(16777216,null,null,2,null,b)),r.wb(5,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.mb(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,r.Sb(e,2,0,r.Jb(e,3).transform(n.isAuth))),t(e,5,0,!r.Sb(e,5,0,r.Jb(e,6).transform(n.isAuth)))},null)}function y(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,31,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,30,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(2,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,28,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(4,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(5,0,null,0,3,"ion-col",[["size","3"]],null,null,null,i.O,i.h)),r.wb(6,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(7,0,null,0,1,"img",[["class","avatar"],["onError","this.src='assets/blank-profile-picture.png'"]],[[8,"src",4]],null,null,null,null)),r.Lb(131072,a.b,[r.i]),(t()(),r.xb(9,0,null,0,22,"ion-col",[["size","9"]],null,null,null,i.O,i.h)),r.wb(10,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(11,0,null,0,11,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(12,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,4,"ion-col",[["class","overflow-clip"],["size","6"]],null,null,null,i.O,i.h)),r.wb(14,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.Rb(15,0,[" "," \xb7 "," "])),r.Lb(131072,a.b,[r.i]),r.Nb(17,2),(t()(),r.xb(18,0,null,0,4,"ion-col",[["class","ion-col-review no-wrap"],["size","6"]],null,null,null,i.O,i.h)),r.wb(19,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(20,0,null,0,2,"ion-rating",[["readonly","true"]],null,[[null,"mouseleave"],[null,"blur"]],function(t,e,n){var i=!0;return"mouseleave"===e&&(i=!1!==r.Jb(t,22).onMouseLeave()&&i),"blur"===e&&(i=!1!==r.Jb(t,22).onBlur()&&i),i},h,u)),r.Ob(5120,null,l.g,function(t){return[t]},[s.a]),r.wb(22,573440,null,0,s.a,[r.i],{rate:[0,"rate"],readonly:[1,"readonly"]},null),(t()(),r.xb(23,0,null,0,8,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(24,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(25,0,null,0,6,"ion-textarea",[["name","description"],["readonly","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,27)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,27)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.review.description=n)&&i),i},i.lb,i.E)),r.wb(26,49152,null,0,o.vb,[r.i,r.n,r.B],{name:[0,"name"],readonly:[1,"readonly"]},null),r.wb(27,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,l.g,function(t){return[t]},[o.Mb]),r.wb(29,671744,null,0,l.l,[[8,null],[8,null],[8,null],[6,l.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,l.h,null,[l.l]),r.wb(31,16384,null,0,l.i,[[4,l.h]],null,null)],function(t,e){var n=e.component;t(e,6,0,"3"),t(e,10,0,"9"),t(e,14,0,"6"),t(e,19,0,"6"),t(e,22,0,n.review.rating,"true"),t(e,26,0,"description","true"),t(e,29,0,"description",n.review.description)},function(t,e){var n,i=e.component;t(e,7,0,null==(n=r.Sb(e,7,0,r.Jb(e,8).transform(i.userData$)))?null:n.photoUrl);var o,s=null==(o=r.Sb(e,15,0,r.Jb(e,16).transform(i.userData$)))?null:o.name,a=r.Sb(e,15,1,t(e,17,0,r.Jb(e.parent,0),i.review.dateTime,"MMM y"));t(e,15,0,s,a),t(e,25,0,r.Jb(e,31).ngClassUntouched,r.Jb(e,31).ngClassTouched,r.Jb(e,31).ngClassPristine,r.Jb(e,31).ngClassDirty,r.Jb(e,31).ngClassValid,r.Jb(e,31).ngClassInvalid,r.Jb(e,31).ngClassPending)})}function w(t){return r.Tb(0,[r.Lb(0,a.e,[r.w]),(t()(),r.mb(16777216,null,null,2,null,v)),r.wb(2,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.mb(16777216,null,null,2,null,y)),r.wb(5,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i])],function(t,e){var n=e.component;t(e,2,0,r.Sb(e,2,0,r.Jb(e,3).transform(n.readyToEdit))),t(e,5,0,r.Sb(e,5,0,r.Jb(e,6).transform(n.readyToView)))},null)}},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},Dn3B:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("2Vo4"),i=n("VMA6"),o=n("8Y7J");let s=(()=>{class t{constructor(){this.defaultFilter={distance:500},this.currentSource=i.b.HorseCamps,this.currentCampFilter=new r.a(this.defaultFilter),this.campAttributesFilter=new r.a(null),this.trailFilters=new r.a(null)}setCampAttributesFilter(t){this.campAttributesFilter.next(t)}getCampAttributesFilter(){return this.campAttributesFilter}setTrailAttributesFilter(t){this.trailFilters.next(t)}getTrailAttributesFilter(){return this.trailFilters}setSource(t){this.currentSource=t}getFilter(){return this.currentCampFilter}setFilter(t){this.currentCampFilter.next(t)}filterCampsByAttributes(t,e){let n=t;return""!==e.name.trim()&&(n=n.filter(t=>t.name.indexOf(name)>=0)),e.city&&e.city.length>0&&(n=n.filter(t=>t.city==e.city)),e.state&&e.state.length>0&&(n=n.filter(t=>t.state==e.state)),n}filterTrailsByAttributes(t,e){let n=t;""!==e.name.trim()&&(n=n.filter(t=>t.name.indexOf(name)>=0));const r={bridges:e.bridges,parking:e.parking,difficulty:e.difficulty,footing:e.footing,waterCrossings:e.waterCrossings};return Object.keys(r).forEach(t=>{r[t]&&""!==r[t].trim()&&(n=n.filter(e=>e.attributes[t]===r[t]))}),n}}return t.ngInjectableDef=o.Wb({factory:function(){return new t},token:t,providedIn:"root"}),t})()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},EYAf:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("SVse"),l=n("ehau"),u=n("Dn3B");n.d(e,"b",function(){return c}),n.d(e,"c",function(){return d}),n.d(e,"a",function(){return p});var c=r.vb({encapsulation:0,styles:[[""]],data:{}});function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,13,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(1,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(2,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(3,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(4,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(5,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Name"])),(t()(),r.xb(7,0,null,0,6,"ion-input",[["formControlName","name"],["placeholder","Filter by name..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,9)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,9)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(8,49152,null,0,o.E,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(9,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(11,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(13,16384,null,0,s.i,[[4,s.h]],null,null)],function(t,e){t(e,1,0,"6"),t(e,8,0,"Filter by name..."),t(e,11,0,"name")},function(t,e){t(e,7,0,r.Jb(e,13).ngClassUntouched,r.Jb(e,13).ngClassTouched,r.Jb(e,13).ngClassPristine,r.Jb(e,13).ngClassDirty,r.Jb(e,13).ngClassValid,r.Jb(e,13).ngClassInvalid,r.Jb(e,13).ngClassPending)})}function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,45,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,2).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSubmit()&&i),i},null,null)),r.wb(1,16384,null,0,s.s,[],null,null),r.wb(2,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.d]),r.wb(4,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(5,0,null,null,40,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(6,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(7,0,null,0,31,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(8,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,1,null,h)),r.wb(10,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.xb(11,0,null,0,13,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(13,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(14,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(15,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(16,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["City"])),(t()(),r.xb(18,0,null,0,6,"ion-input",[["formControlName","city"],["placeholder","Filter by city..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,20)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,20)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(19,49152,null,0,o.E,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(20,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(22,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(24,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(25,0,null,0,13,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(26,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(27,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(28,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(29,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(30,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["State"])),(t()(),r.xb(32,0,null,0,6,"ion-input",[["formControlName","state"],["placeholder","Filter by state..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,34)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,34)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(33,49152,null,0,o.E,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(34,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(36,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(38,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(39,0,null,0,6,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(40,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(41,0,null,0,4,"ion-col",[],null,null,null,i.O,i.h)),r.wb(42,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(43,0,null,0,2,"ion-button",[["type","submit"]],null,null,null,i.I,i.b)),r.wb(44,49152,null,0,o.i,[r.i,r.n,r.B],{type:[0,"type"]},null),(t()(),r.Rb(-1,0,["Filter Camps"]))],function(t,e){var n=e.component;t(e,2,0,n.myForm),t(e,10,0,!n.nameElementHidden),t(e,12,0,"6"),t(e,19,0,"Filter by city..."),t(e,22,0,"city"),t(e,26,0,"6"),t(e,33,0,"Filter by state..."),t(e,36,0,"state"),t(e,44,0,"submit")},function(t,e){t(e,0,0,r.Jb(e,4).ngClassUntouched,r.Jb(e,4).ngClassTouched,r.Jb(e,4).ngClassPristine,r.Jb(e,4).ngClassDirty,r.Jb(e,4).ngClassValid,r.Jb(e,4).ngClassInvalid,r.Jb(e,4).ngClassPending),t(e,18,0,r.Jb(e,24).ngClassUntouched,r.Jb(e,24).ngClassTouched,r.Jb(e,24).ngClassPristine,r.Jb(e,24).ngClassDirty,r.Jb(e,24).ngClassValid,r.Jb(e,24).ngClassInvalid,r.Jb(e,24).ngClassPending),t(e,32,0,r.Jb(e,38).ngClassUntouched,r.Jb(e,38).ngClassTouched,r.Jb(e,38).ngClassPristine,r.Jb(e,38).ngClassDirty,r.Jb(e,38).ngClassValid,r.Jb(e,38).ngClassInvalid,r.Jb(e,38).ngClassPending)})}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-camp-search-form",[],null,null,null,d,c)),r.wb(1,114688,null,0,l.a,[s.b,u.a],null,null)],function(t,e){t(e,1,0)},null)}var p=r.tb("app-camp-search-form",l.a,f,{nameElementHidden:"nameElementHidden"},{submitForm:"submitForm"},[])},EmcB:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG");n("a+Xp"),n("ZZ/e");class i{constructor(t,e,n){this.blogService=t,this.alertCtrl=e,this.router=n,this.p=1,this.blogs$=this.blogService.getAllAsList()}ngOnInit(){}onPageChange(t){this.p=t,this.content&&this.content.scrollToTop()}onAddBlogButton(){this.router.navigate(["/admin/blog-add"])}onRemoveBlogButton(t){return r.__awaiter(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Deleting blog...",message:"Are you sure you want to delete this post? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"OK",handler:()=>{this.blogService.tryDelete(t)}}]})).present()})}}},F4UR:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("bP1B");class r{}},"Gh+9":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n("Dn3B"),n("ZZ/e");var r=n("VMA6");class i{constructor(t,e){this.filterService=t,this.popoverCtrl=e,this.filter={distance:null},this.campFilter={bigRigFriendly:!0,petFriendly:!0,wifi:!0},this.SourceEnum=r.b,this.currentSource=this.filterService.currentSource}ngOnInit(){}submitCampAttributesFilter(t){this.filterService.setCampAttributesFilter(t),this.popoverCtrl.dismiss()}submitTrailAttributesFilter(t){this.filterService.setTrailAttributesFilter(t),this.popoverCtrl.dismiss()}ngOnDestroy(){}}},Gon4:function(t,e,n){"use strict";var r=n("mrSG"),i=n("AytR"),o=n("lJxs"),s=n("JIr8"),a=n("vkgz"),l=n("LRne"),u=function(t){return t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl",t}({}),c=function(t){return t.Application="APPLICATION",t.Documents="DOCUMENTS",t.Data="DATA",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t}({}),h=new(function(){function t(){var t=this;this.platform="web",this.isNative=!1,this.Plugins={},this.Plugins=new Proxy(this.Plugins,{get:function(e,n){if(void 0===e[n]){var r=t;return new Proxy({},{get:function(t,e){return void 0===t[e]?r.pluginMethodNoop.bind(r,t,e,n):t[e]}})}return e[n]}})}return t.prototype.pluginMethodNoop=function(t,e,n){return Promise.reject(n+" does not have web implementation.")},t.prototype.getPlatform=function(){return this.platform},t.prototype.isPluginAvailable=function(t){return this.Plugins.hasOwnProperty(t)},t.prototype.convertFileSrc=function(t){return t},t.prototype.handleError=function(t){console.error(t)},t}());h=window.Capacitor||h,window.Capacitor||(window.Capacitor=h);var d=h.Plugins,f=new(function(){function t(){this.plugins={},this.loadedPlugins={}}return t.prototype.addPlugin=function(t){this.plugins[t.config.name]=t},t.prototype.getPlugin=function(t){return this.plugins[t]},t.prototype.loadPlugin=function(t){var e=this.getPlugin(t);e?e.load():console.error("Unable to load web plugin "+t+", no such plugin found.")},t.prototype.getPlugins=function(){var t=[];for(var e in this.plugins)t.push(this.plugins[e]);return t},t}()),p=function(){function t(t,e){this.config=t,this.loaded=!1,this.listeners={},this.windowListeners={},e?e.addPlugin(this):f.addPlugin(this)}return t.prototype.addWindowListener=function(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0},t.prototype.removeWindowListener=function(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)},t.prototype.addListener=function(t,e){var n=this;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e);var r=this.windowListeners[t];return r&&!r.registered&&this.addWindowListener(r),{remove:function(){n.removeListener(t,e)}}},t.prototype.removeListener=function(t,e){var n=this.listeners[t];if(n){var r=n.indexOf(e);this.listeners[t].splice(r,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}},t.prototype.notifyListeners=function(t,e){var n=this.listeners[t];n&&n.forEach(function(t){return t(e)})},t.prototype.hasListeners=function(t){return!!this.listeners[t].length},t.prototype.registerWindowListener=function(t,e){var n=this;this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:function(t){n.notifyListeners(e,t)}}},t.prototype.requestPermissions=function(){return Capacitor.isNative?Capacitor.nativePromise(this.config.name,"requestPermissions",{}):Promise.resolve({results:[]})},t.prototype.load=function(){this.loaded=!0},t}(),g=function(t,e){t.hasOwnProperty(e.config.name)&&!function(t){return t.config.platforms&&t.config.platforms.indexOf(Capacitor.platform)>=0}(e)||(t[e.config.name]=e)},m=(new(function(t){function e(){return t.call(this,{name:"Accessibility",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.isScreenReaderEnabled=function(){throw new Error("Feature not available in the browser")},e.prototype.speak=function(t){if(!("speechSynthesis"in window))return Promise.reject("Browser does not support the Speech Synthesis API");var e=new SpeechSynthesisUtterance(t.value);return t.language&&(e.lang=t.language),window.speechSynthesis.speak(e),Promise.resolve()},e}(p)),new(function(t){function e(){var e=t.call(this,{name:"App",platforms:["web"]})||this;return document.addEventListener("visibilitychange",e.handleVisibilityChange.bind(e),!1),e}return r.__extends(e,t),e.prototype.exitApp=function(){throw new Error("Method not implemented.")},e.prototype.canOpenUrl=function(t){return Promise.resolve({value:!0})},e.prototype.openUrl=function(t){return Promise.resolve({completed:!0})},e.prototype.getLaunchUrl=function(){return Promise.resolve({url:""})},e.prototype.handleVisibilityChange=function(){var t={isActive:!0!==document.hidden};this.notifyListeners("appStateChange",t)},e}(p)),new(function(t){function e(){return t.call(this,{name:"Browser",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.open=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){return this._lastWindow=window.open(t.url,t.windowName||"_blank"),[2,Promise.resolve()]})})},e.prototype.prefetch=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(t){return[2,Promise.resolve()]})})},e.prototype.close=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(t){return this._lastWindow&&this._lastWindow.close(),[2,Promise.resolve()]})})},e}(p)),new(function(t){function e(){return t.call(this,{name:"Camera",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.getPhoto=function(t){return r.__awaiter(this,void 0,void 0,function(){var e=this;return r.__generator(this,function(n){return[2,new Promise(function(n,i){return r.__awaiter(e,void 0,void 0,function(){var e,o=this;return r.__generator(this,function(s){switch(s.label){case 0:return e=document.createElement("pwa-camera-modal"),document.body.appendChild(e),[4,e.componentOnReady()];case 1:return s.sent(),e.addEventListener("onPhoto",function(s){return r.__awaiter(o,void 0,void 0,function(){var o,a;return r.__generator(this,function(r){switch(r.label){case 0:return null!==(o=s.detail)?[3,1]:(i("User cancelled photos app"),[3,4]);case 1:return o instanceof Error?(i(o.message),[3,4]):[3,2];case 2:return a=n,[4,this._getCameraPhoto(o,t)];case 3:a.apply(void 0,[r.sent()]),r.label=4;case 4:return e.dismiss(),document.body.removeChild(e),[2]}})})}),e.present(),[2]}})})})]})})},e.prototype._getCameraPhoto=function(t,e){return new Promise(function(n,r){var i=new FileReader,o=t.type.split("/")[1];e.resultType==u.Uri?n({webPath:URL.createObjectURL(t),format:o}):(i.readAsDataURL(t),i.onloadend=function(){var t=i.result;n(e.resultType==u.DataUrl?{dataUrl:t,format:o}:{base64String:t.split(",")[1],format:o})},i.onerror=function(t){r(t)})})},e}(p)),new(function(t){function e(){return t.call(this,{name:"Clipboard",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.write=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){switch(e.label){case 0:return navigator.clipboard?t.string||t.url?[4,navigator.clipboard.writeText(t.string||t.url)]:[3,2]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return e.sent(),[3,3];case 2:if(t.image)return[2,Promise.reject("Setting images not supported on the web")];e.label=3;case 3:return[2,Promise.resolve()]}})})},e.prototype.read=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n,i,o,s;return r.__generator(this,function(r){switch(r.label){case 0:return navigator.clipboard?"string"!==t.type&&"url"!==t.type?[3,2]:[4,navigator.clipboard.readText()]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return e=r.sent(),[2,Promise.resolve({value:e})];case 2:return[4,navigator.clipboard.read()];case 3:for(n=r.sent(),i=0,o=n.items;i<o.length;i++)if("text/plain"===(s=o[i]).type)return[2,Promise.resolve({value:s.getAs("text/plain")})];r.label=4;case 4:return[2,Promise.reject("Unable to get data from clipboard")]}})})},e}(p)),new(function(t){function e(){var e=t.call(this,{name:"Filesystem",platforms:["web"]})||this;return e.DEFAULT_DIRECTORY=c.Data,e.DB_VERSION=1,e.DB_NAME="Disc",e._writeCmds=["add","put","delete"],e}return r.__extends(e,t),e.prototype.initDb=function(){return r.__awaiter(this,void 0,void 0,function(){var t=this;return r.__generator(this,function(n){if(void 0!==this._db)return[2,this._db];if(!("indexedDB"in window))throw new Error("This browser doesn't support IndexedDB");return[2,new Promise(function(n,r){var i=indexedDB.open(t.DB_NAME,t.DB_VERSION);i.onupgradeneeded=e.doUpgrade,i.onsuccess=function(){t._db=i.result,n(i.result)},i.onerror=function(){return r(i.error)},i.onblocked=function(){console.warn("db blocked")}})]})})},e.doUpgrade=function(t){var e=t.target.result;switch(t.oldVersion){case 0:case 1:default:e.objectStoreNames.contains("FileStorage")&&e.deleteObjectStore("FileStorage"),e.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}},e.prototype.dbRequest=function(t,e){return r.__awaiter(this,void 0,void 0,function(){var n;return r.__generator(this,function(r){return n=-1!==this._writeCmds.indexOf(t)?"readwrite":"readonly",[2,this.initDb().then(function(r){return new Promise(function(i,o){var s=r.transaction(["FileStorage"],n).objectStore("FileStorage"),a=s[t].apply(s,e);a.onsuccess=function(){return i(a.result)},a.onerror=function(){return o(a.error)}})})]})})},e.prototype.dbIndexRequest=function(t,e,n){return r.__awaiter(this,void 0,void 0,function(){var i;return r.__generator(this,function(r){return i=-1!==this._writeCmds.indexOf(e)?"readwrite":"readonly",[2,this.initDb().then(function(r){return new Promise(function(o,s){var a=r.transaction(["FileStorage"],i).objectStore("FileStorage").index(t),l=a[e].apply(a,n);l.onsuccess=function(){return o(l.result)},l.onerror=function(){return s(l.error)}})})]})})},e.prototype.getPath=function(t,e){return"/"+(t=t||this.DEFAULT_DIRECTORY)+"/"+(void 0!==e?e.replace(/^[/]+|[/]+$/g,""):"")},e.prototype.clear=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(t){switch(t.label){case 0:return[4,this.initDb()];case 1:return t.sent().transaction(["FileStorage"],"readwrite").objectStore("FileStorage").clear(),[2,{}]}})})},e.prototype.readFile=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),[4,this.dbRequest("get",[e])];case 1:if(void 0===(n=r.sent()))throw Error("File does not exist.");return[2,{data:n.content}]}})})},e.prototype.writeFile=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n,i,o,s,a;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),n=t.data,i=e.substr(0,e.lastIndexOf("/")),[4,this.dbRequest("get",[i])];case 1:return void 0!==r.sent()?[3,3]:-1===(o=i.indexOf("/",1))?[3,3]:(s=i.substr(o),[4,this.mkdir({path:s,directory:t.directory,createIntermediateDirectories:!0})]);case 2:r.sent(),r.label=3;case 3:return a=Date.now(),[4,this.dbRequest("put",[{path:e,folder:i,type:"file",size:n.length,ctime:a,mtime:a,content:n}])];case 4:return r.sent(),[2,{}]}})})},e.prototype.appendFile=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n,i,o,s,a,l;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),n=t.data,i=e.substr(0,e.lastIndexOf("/")),o=Date.now(),s=o,[4,this.dbRequest("get",[i])];case 1:return void 0!==r.sent()?[3,3]:(a=i.substr(i.indexOf("/",1)),[4,this.mkdir({path:a,directory:t.directory,createIntermediateDirectories:!0})]);case 2:r.sent(),r.label=3;case 3:return[4,this.dbRequest("get",[e])];case 4:return void 0!==(l=r.sent())&&(n=l.content+n,s=l.ctime),[4,this.dbRequest("put",[{path:e,folder:i,type:"file",size:n.length,ctime:s,mtime:o,content:n}])];case 5:return r.sent(),[2,{}]}})})},e.prototype.deleteFile=function(t){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(n){switch(n.label){case 0:return e=this.getPath(t.directory,t.path),[4,this.dbRequest("get",[e])];case 1:if(void 0===n.sent())throw Error("File does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])];case 2:if(0!==n.sent().length)throw Error("Folder is not empty.");return[4,this.dbRequest("delete",[e])];case 3:return n.sent(),[2,{}]}})})},e.prototype.mkdir=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n,i,o,s,a,l,u;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),n=t.createIntermediateDirectories,i=e.substr(0,e.lastIndexOf("/")),o=(e.match(/\//g)||[]).length,[4,this.dbRequest("get",[i])];case 1:return s=r.sent(),[4,this.dbRequest("get",[e])];case 2:if(a=r.sent(),1===o)throw Error("Cannot create Root directory");if(void 0!==a)throw Error("Current directory does already exist.");if(!n&&2!==o&&void 0===s)throw Error("Parent directory must exist");return n&&2!==o&&void 0===s?(l=i.substr(i.indexOf("/",1)),[4,this.mkdir({path:l,directory:t.directory,createIntermediateDirectories:n})]):[3,4];case 3:r.sent(),r.label=4;case 4:return u=Date.now(),[4,this.dbRequest("put",[{path:e,folder:i,type:"directory",size:0,ctime:u,mtime:u}])];case 5:return r.sent(),[2,{}]}})})},e.prototype.rmdir=function(t){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(n){switch(n.label){case 0:return e=this.getPath(t.directory,t.path),[4,this.dbRequest("get",[e])];case 1:if(void 0===n.sent())throw Error("Folder does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])];case 2:if(0!==n.sent().length)throw Error("Folder is not empty.");return[4,this.dbRequest("delete",[e])];case 3:return n.sent(),[2,{}]}})})},e.prototype.readdir=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),[4,this.dbRequest("get",[e])];case 1:if(void 0===(n=r.sent()))throw Error("Folder does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])];case 2:return[2,{files:r.sent().map(function(t){return t.substring(n.path.length+1)})}]}})})},e.prototype.getUri=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),[4,this.dbRequest("get",[e])];case 1:return void 0!==(n=r.sent())?[3,3]:[4,this.dbRequest("get",[e+"/"])];case 2:n=r.sent(),r.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{uri:n.path}]}})})},e.prototype.stat=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n;return r.__generator(this,function(r){switch(r.label){case 0:return e=this.getPath(t.directory,t.path),[4,this.dbRequest("get",[e])];case 1:return void 0!==(n=r.sent())?[3,3]:[4,this.dbRequest("get",[e+"/"])];case 2:n=r.sent(),r.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path}]}})})},e.prototype.rename=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n,i,o,s,a,l,u,c,h,d,f,p,g=this;return r.__generator(this,function(m){switch(m.label){case 0:if(n=t.from,i=t.directory,!(e=t.to)||!n)throw Error("Both to and from must be provided");if(n===e)return[2,{}];if(e.startsWith(n))throw Error("To path cannot contain the from path");m.label=1;case 1:return m.trys.push([1,3,,6]),[4,this.stat({path:e,directory:i})];case 2:return o=m.sent(),[3,6];case 3:return m.sent(),(s=e.split("/")).pop(),a=s.join("/"),s.length>0?[4,this.stat({path:a,directory:i})]:[3,5];case 4:if("directory"!==m.sent().type)throw new Error("Parent directory of the to path is a file");m.label=5;case 5:return[3,6];case 6:if(o&&"directory"===o.type)throw new Error("Cannot overwrite a directory with a file");return[4,this.stat({path:n,directory:i})];case 7:switch(l=m.sent(),u=function(t,e,n){return r.__awaiter(g,void 0,void 0,function(){var o,s;return r.__generator(this,function(r){switch(r.label){case 0:return o=this.getPath(i,t),[4,this.dbRequest("get",[o])];case 1:return(s=r.sent()).ctime=e,s.mtime=n,[4,this.dbRequest("put",[s])];case 2:return r.sent(),[2]}})})},l.type){case"file":return[3,8];case"directory":return[3,13]}return[3,25];case 8:return[4,this.readFile({path:n,directory:i})];case 9:return c=m.sent(),[4,this.deleteFile({path:n,directory:i})];case 10:return m.sent(),[4,this.writeFile({path:e,directory:i,data:c.data})];case 11:return m.sent(),[4,u(e,l.ctime,l.mtime)];case 12:return m.sent(),[2,{}];case 13:if(o)throw Error("Cannot move a directory over an existing object");m.label=14;case 14:return m.trys.push([14,17,,18]),[4,this.mkdir({path:e,directory:i,createIntermediateDirectories:!1})];case 15:return m.sent(),[4,u(e,l.ctime,l.mtime)];case 16:case 17:return m.sent(),[3,18];case 18:return[4,this.readdir({path:n,directory:i})];case 19:h=m.sent().files,d=0,f=h,m.label=20;case 20:return d<f.length?[4,this.rename({from:n+"/"+(p=f[d]),to:e+"/"+p,directory:i})]:[3,23];case 21:m.sent(),m.label=22;case 22:return d++,[3,20];case 23:return[4,this.rmdir({path:n,directory:i})];case 24:m.sent(),m.label=25;case 25:return[2,{}]}})})},e._debug=!0,e}(p)),function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(e){if(e&&"object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t});new(function(t){function e(){return t.call(this,{name:"Geolocation",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.getCurrentPosition=function(t){var e=this;return new Promise(function(n,r){return e.requestPermissions().then(function(e){window.navigator.geolocation.getCurrentPosition(function(t){n(t)},function(t){r(t)},m({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},t))})})},e.prototype.watchPosition=function(t,e){return""+window.navigator.geolocation.watchPosition(function(t){e(t)},function(t){e(null,t)},m({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},t))},e.prototype.clearWatch=function(t){return window.navigator.geolocation.clearWatch(parseInt(t.id,10)),Promise.resolve()},e}(p)),new(function(t){function e(){return t.call(this,{name:"Device",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.getInfo=function(){return r.__awaiter(this,void 0,void 0,function(){var t,e,n;return r.__generator(this,function(r){switch(r.label){case 0:t=navigator.userAgent,e=this.parseUa(t),n={},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.getBattery()];case 2:return n=r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2,Promise.resolve({model:e.model,platform:"web",appVersion:"",osVersion:e.osVersion,manufacturer:navigator.vendor,isVirtual:!1,batteryLevel:n.level,isCharging:n.charging,uuid:this.getUid()})]}})})},e.prototype.getLanguageCode=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(t){return[2,{value:navigator.language}]})})},e.prototype.parseUa=function(t){var e={},n=t.indexOf("(")+1,r=t.indexOf(") AppleWebKit");-1!==t.indexOf(") Gecko")&&(r=t.indexOf(") Gecko"));var i=t.substring(n,r);if(-1!==t.indexOf("Android"))e.model=i.replace("; wv","").split("; ").pop().split(" Build")[0],e.osVersion=i.split("; ")[1];else if(e.model=i.split("; ")[0],navigator.oscpu)e.osVersion=navigator.oscpu;else if(-1!==t.indexOf("Windows"))e.osVersion=i;else{var o=i.split("; ").pop().replace(" like Mac OS X","").split(" ");e.osVersion=o[o.length-1].replace(/_/g,".")}return e},e.prototype.getUid=function(){var t=window.localStorage.getItem("_capuid");return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),window.localStorage.setItem("_capuid",t),t)},e}(p)),new(function(t){function e(){var e=t.call(this,{name:"LocalNotifications",platforms:["web"]})||this;return e.pending=[],e}return r.__extends(e,t),e.prototype.sendPending=function(){var t=this,e=[],n=+new Date;this.pending.forEach(function(r){r.schedule&&r.schedule.at&&+r.schedule.at<=n&&(t.buildNotification(r),e.push(r))}),console.log("Sent pending, removing",e),this.pending=this.pending.filter(function(t){return!e.find(function(e){return e===t})})},e.prototype.sendNotification=function(t){var e=this,n=t;if(t.schedule&&t.schedule.at){var r=+t.schedule.at-+new Date;return this.pending.push(n),void setTimeout(function(){e.sendPending()},r)}this.buildNotification(t)},e.prototype.buildNotification=function(t){return new Notification(t.title,{body:t.body})},e.prototype.schedule=function(t){var e=this,n=[];return t.notifications.forEach(function(t){n.push(e.sendNotification(t))}),Promise.resolve({notifications:n.map(function(t){return{id:""}})})},e.prototype.getPending=function(){return Promise.resolve({notifications:this.pending.map(function(t){return{id:""+t.id}})})},e.prototype.registerActionTypes=function(t){throw new Error("Method not implemented.")},e.prototype.cancel=function(t){return console.log("Cancel these",t),this.pending=this.pending.filter(function(e){return!t.notifications.find(function(t){return t.id===""+e.id})}),Promise.resolve()},e.prototype.areEnabled=function(){throw new Error("Method not implemented.")},e.prototype.requestPermissions=function(){return new Promise(function(t,e){Notification.requestPermission().then(function(n){"denied"!==n&&"default"!==n?t({results:[n]}):e(n)}).catch(function(t){e(t)})})},e}(p)),new(function(t){function e(){return t.call(this,{name:"Share",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.share=function(t){return navigator.share?navigator.share({title:t.title,text:t.text,url:t.url}):Promise.reject("Web Share API not available")},e}(p)),new(function(t){function e(){return t.call(this,{name:"Modals",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.alert=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){return window.alert(t.message),[2,Promise.resolve()]})})},e.prototype.prompt=function(t){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(n){return e=window.prompt(t.message,t.inputPlaceholder||""),[2,Promise.resolve({value:e,cancelled:null===e})]})})},e.prototype.confirm=function(t){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(n){return e=window.confirm(t.message),[2,Promise.resolve({value:e})]})})},e.prototype.showActions=function(t){return r.__awaiter(this,void 0,void 0,function(){var e=this;return r.__generator(this,function(n){return[2,new Promise(function(n,i){return r.__awaiter(e,void 0,void 0,function(){var e,i;return r.__generator(this,function(r){switch(r.label){case 0:return(e=document.querySelector("ion-action-sheet-controller"))||(e=document.createElement("ion-action-sheet-controller"),document.body.appendChild(e)),[4,e.componentOnReady()];case 1:return r.sent(),i=t.options.map(function(t,e){return{text:t.title,role:t.style&&t.style.toLowerCase()||"",icon:t.icon||"",handler:function(){n({index:e})}}}),[4,e.create({title:t.title,buttons:i})];case 2:return[4,r.sent().present()];case 3:return r.sent(),[2]}})})})]})})},e}(p)),new(function(t){function e(){var e=t.call(this,{name:"Motion"})||this;return e.registerWindowListener("devicemotion","accel"),e.registerWindowListener("deviceorientation","orientation"),e}return r.__extends(e,t),e}(p)),new(function(t){function e(){var e=t.call(this,{name:"Network",platforms:["web"]})||this;return e.listenerFunction=null,e}return r.__extends(e,t),e.prototype.getStatus=function(){return new Promise(function(t,e){if(window.navigator){var n=window.navigator.onLine,r=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;t({connected:n,connectionType:n?r?r.type||r.effectiveType:"wifi":"none"})}else e("Network info not available")})},e.prototype.addListener=function(t,e){var n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,r=e.bind(this,{connected:!0,connectionType:n?n.type||n.effectiveType:"wifi"}),i=e.bind(this,{connected:!1,connectionType:"none"});if(0===t.localeCompare("networkStatusChange"))return window.addEventListener("online",r),window.addEventListener("offline",i),{remove:function(){window.removeEventListener("online",r),window.removeEventListener("offline",i)}}},e}(p)),new(function(t){function e(){return t.call(this,{name:"SplashScreen",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.show=function(t,e){return Promise.resolve()},e.prototype.hide=function(t,e){return Promise.resolve()},e}(p)),new(function(t){function e(){var e=t.call(this,{name:"Storage",platforms:["web"]})||this;return e.KEY_PREFIX="_cap_",e}return r.__extends(e,t),e.prototype.get=function(t){var e=this;return new Promise(function(n,r){n({value:window.localStorage.getItem(e.makeKey(t.key))})})},e.prototype.set=function(t){var e=this;return new Promise(function(n,r){window.localStorage.setItem(e.makeKey(t.key),t.value),n()})},e.prototype.remove=function(t){var e=this;return new Promise(function(n,r){window.localStorage.removeItem(e.makeKey(t.key)),n()})},e.prototype.keys=function(){var t=this;return new Promise(function(e,n){e({keys:Object.keys(localStorage).filter(function(e){return t.isKey(e)}).map(function(e){return t.getKey(e)})})})},e.prototype.clear=function(){var t=this;return new Promise(function(e,n){Object.keys(localStorage).filter(function(e){return t.isKey(e)}).forEach(function(t){return window.localStorage.removeItem(t)}),e()})},e.prototype.makeKey=function(t){return this.KEY_PREFIX+t},e.prototype.isKey=function(t){return 0===t.indexOf(this.KEY_PREFIX)},e.prototype.getKey=function(t){return t.substr(this.KEY_PREFIX.length)},e}(p)),new(function(t){function e(){return t.call(this,{name:"Toast",platforms:["web"]})||this}return r.__extends(e,t),e.prototype.show=function(t){return r.__awaiter(this,void 0,void 0,function(){var e,n;return r.__generator(this,function(r){return e=3e3,t.duration&&(e="long"===t.duration?5e3:3e3),(n=document.createElement("pwa-toast")).duration=e,n.message=t.text,document.body.appendChild(n),[2]})})},e}(p)),function(t){for(var e=0,n=f.getPlugins();e<n.length;e++)g(t,n[e])}(d);var b=n("8Y7J"),v=n("IheW");n.d(e,"a",function(){return w});const{Geolocation:y}=d;let w=(()=>{class t{constructor(t){this.http=t,this.baseUrl="https://api.mapbox.com/geocoding/v5/mapbox.places",this.currentQuery={term:"",place:null},this.defaultAddress="San Francisco, California",this.numResults=3}getDefaultPlace(){const t=localStorage.getItem("currLocation");return t?this.autocomplete(t).pipe(Object(o.a)(t=>t[0])):this.autocomplete(this.defaultAddress).pipe(Object(o.a)(t=>t[0]))}getResults(t){return this.autocomplete(t).pipe(Object(o.a)(t=>t.map(t=>({place_name:t.place_name,place:t,isDefault:!1}))),Object(o.a)(t=>t.slice(0,this.numResults)))}getItemLabel(t){return t.place_name}setSearchQuery(t){this.currentQuery=t}getSearchQuery(){return this.currentQuery}autocomplete(t){return this.http.get(`${this.baseUrl}/${t}.json`,{params:{access_token:i.a.mapboxKey}}).pipe(Object(o.a)(t=>t.features))}forwardGeocodeToCoords(t){return this.forwardGeocode(t).pipe(Object(o.a)(t=>({long:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]})))}forwardGeocode(t){return this.autocomplete(t).pipe(Object(s.a)(e=>(console.log(e),console.log("Wrong address:",t),Object(l.a)([]))),Object(o.a)(t=>0===t.length?[]:t[0]))}reverseGeocode(t){return this.autocomplete(`${t.long}, ${t.lat}`).pipe(Object(o.a)(t=>t.length>0?t[0]:null),Object(a.a)(t=>console.log("features",t)))}straightLineDistance(t,e,n=null){const r=t.long,i=t.lat,o=e.long,s=e.lat;if(i===s&&r===o)return 0;{const t=Math.PI*i/180,e=Math.PI*s/180,a=Math.PI*(r-o)/180;let l=Math.sin(t)*Math.sin(e)+Math.cos(t)*Math.cos(e)*Math.cos(a);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515,"K"===n&&(l*=1.609344),"N"===n&&(l*=.8684),l}}campToMapboxMarker(t){return{type:"Feature",place_name:t.name,geometry:{type:"Point",coordinates:[t.coords.long,t.coords.lat]},properties:{title:t.name,description:"",id:t.id}}}findMe(){return r.__awaiter(this,void 0,void 0,function*(){const t=yield this.getPosition();return localStorage.setItem("currLocation",`${t.coords.longitude}, ${t.coords.latitude}`),{lat:t.coords.latitude,long:t.coords.longitude}})}getPosition(){return y.getCurrentPosition()}}return t.ngInjectableDef=b.Wb({factory:function(){return new t(b.Xb(v.c))},token:t,providedIn:"root"}),t})()},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("mCNh"),l=n("2fFW");n.d(e,"a",function(){return u});let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||l.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){l.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=c(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=c(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function c(t){if(t||(t=l.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},HPGL:function(t,e,n){"use strict";function r(){if("undefined"==typeof process){var t="undefined"!=typeof window?window:{},e=Date.now(),n=!1;t.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-e)+" ms"),n=!0}),setTimeout(function(){!n&&t.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}n.d(e,"a",function(){return r})},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IheW:function(t,e,n){"use strict";n.d(e,"k",function(){return O}),n.d(e,"n",function(){return F}),n.d(e,"o",function(){return j}),n.d(e,"l",function(){return R}),n.d(e,"m",function(){return M}),n.d(e,"b",function(){return h}),n.d(e,"f",function(){return c}),n.d(e,"c",function(){return T}),n.d(e,"a",function(){return A}),n.d(e,"d",function(){return U}),n.d(e,"e",function(){return V}),n.d(e,"j",function(){return B}),n.d(e,"g",function(){return N}),n.d(e,"i",function(){return P}),n.d(e,"h",function(){return L});var r=n("8Y7J"),i=n("LRne"),o=n("HDdC"),s=n("bOdf"),a=n("pLZG"),l=n("lJxs"),u=n("SVse");class c{}class h{}class d{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new d;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;0===(t=t.filter(t=>-1===i.indexOf(t))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class f{encodeKey(t){return p(t)}encodeValue(t){return p(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function p(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class g{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new f,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new g({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function m(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function b(t){return"undefined"!=typeof Blob&&t instanceof Blob}function v(t){return"undefined"!=typeof FormData&&t instanceof FormData}class y{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new d),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new g,this.urlWithParams=e}serializeBody(){return null===this.body?null:m(this.body)||b(this.body)||v(this.body)||"string"==typeof this.body?this.body:this.body instanceof g?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:v(this.body)?null:b(this.body)?this.body.type||null:m(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof g?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new y(e,n,i,{params:l,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}const w=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class _{constructor(t,e=200,n="OK"){this.headers=t.headers||new d,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class k extends _{constructor(t={}){super(t),this.type=w.ResponseHeader}clone(t={}){return new k({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class C extends _{constructor(t={}){super(t),this.type=w.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new C({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class E extends _{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function S(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let T=(()=>(class{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof y)r=t;else{let i=void 0;i=n.headers instanceof d?n.headers:new d(n.headers);let o=void 0;n.params&&(o=n.params instanceof g?n.params:new g({fromObject:n.params})),r=new y(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const o=Object(i.a)(r).pipe(Object(s.a)(t=>this.handler.handle(t)));if(t instanceof y||"events"===n.observe)return o;const u=o.pipe(Object(a.a)(t=>t instanceof C));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(Object(l.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(Object(l.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(Object(l.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(Object(l.a)(t=>t.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new g).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,S(n,e))}post(t,e,n={}){return this.request("POST",t,S(n,e))}put(t,e,n={}){return this.request("PUT",t,S(n,e))}}))();class x{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const A=new r.r("HTTP_INTERCEPTORS");let I=(()=>(class{intercept(t,e){return e.handle(t)}}))();const D=/^\)\]\}',?\n/;class P{}let O=(()=>(class{constructor(){}build(){return new XMLHttpRequest}}))(),N=(()=>(class{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new o.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new d(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new k({headers:o,status:e,statusText:r,url:s})},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let u=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(D,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new C({body:l,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new E({error:l,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new E({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let l=!1;const u=r=>{l||(e.next(o()),l=!0);let i={type:w.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:w.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:w.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}))();const R=new r.r("XSRF_COOKIE_NAME"),M=new r.r("XSRF_HEADER_NAME");class L{}let F=(()=>(class{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(u.E)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}))(),j=(()=>(class{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}))(),B=(()=>(class{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(A,[]);this.chain=t.reduceRight((t,e)=>new x(t,e),this.backend)}return this.chain.handle(t)}}))(),V=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:j,useClass:I}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:R,useValue:e.cookieName}:[],e.headerName?{provide:M,useValue:e.headerName}:[]]}}}return t})(),U=(()=>(class{}))()},IjjT:function(t,e,n){"use strict";let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();n.d(e,"a",function(){return i});class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new l(t,this.total))}}class l extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj");function s(t){return function(e){const n=new a(t),r=e.lift(n);return n.caught=r}}class a{constructor(t){this.selector=t}call(t,e){return e.subscribe(new l(t,this.selector,this.caught))}}class l extends r.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new i.a(this,void 0,void 0);this.add(r),Object(o.a)(this,n,void 0,void 0,r)}}}},JYpY:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});class r{constructor(t,e,n,r,i){this.bigRigFriendly=5,this.petFriendly=5,this.facilityCleanliness=5,this.horseFacilities=5,this.wifi=5,this.id=t,this.campID=e,this.userID=n,this.rating=r,this.description=i,this.dateTime=new Date}setCampAttribute(t,e){this[t]=e}submitReview(t){const e=new Map,n=`reviews/review-by-uid/${this.userID}/${this.id}`,r=`reviews/review-by-campID/${this.campID}/${this.id}`;e[`reviews/review-info/${this.id}`]=this,e[n]=!0,e[r]=!0,t.batchWrite(e)}}var i=function(t){return t.bigRigFriendly="bigRigFriendly",t.petFriendly="petFriendly",t.facilityCleanliness="facilityCleanliness",t.horseFacilities="horseFacilities",t.wifi="wifi",t}({})},Ji5e:function(t,e,n){},KJyt:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("gnlj"),l=n("lGQG"),u=n("iInd");n.d(e,"a",function(){return f});var c=r.vb({encapsulation:0,styles:[[""]],data:{}});function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,71,"ion-content",[],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,69,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.register(r.Jb(t,4))&&i),i},null,null)),r.wb(3,16384,null,0,s.s,[],null,null),r.wb(4,4210688,[["form",4]],0,s.k,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.k]),r.wb(6,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(7,0,null,null,64,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(8,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,55,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(10,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,53,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),(t()(),r.xb(14,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Create your account!"])),(t()(),r.xb(16,0,null,0,44,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(17,0,null,null,10,"ion-item",[],null,null,null,i.W,i.p)),r.wb(18,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,8,"ion-input",[["name","name"],["ngModel",""],["placeholder","Name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,22)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,22)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(20,16384,null,0,s.n,[],{required:[0,"required"]},null),r.Ob(1024,null,s.f,function(t){return[t]},[s.n]),r.wb(22,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(24,671744,null,0,s.l,[[2,s.a],[6,s.f],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},null),r.Ob(2048,null,s.h,null,[s.l]),r.wb(26,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(27,49152,null,0,o.E,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(t()(),r.xb(28,0,null,null,10,"ion-item",[],null,null,null,i.W,i.p)),r.wb(29,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(30,0,null,0,8,"ion-input",[["name","email"],["ngModel",""],["placeholder","your@email.com"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,33)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,33)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(31,16384,null,0,s.n,[],{required:[0,"required"]},null),r.Ob(1024,null,s.f,function(t){return[t]},[s.n]),r.wb(33,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(35,671744,null,0,s.l,[[2,s.a],[6,s.f],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},null),r.Ob(2048,null,s.h,null,[s.l]),r.wb(37,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(38,49152,null,0,o.E,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(t()(),r.xb(39,0,null,null,10,"ion-item",[],null,null,null,i.W,i.p)),r.wb(40,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(41,0,null,0,8,"ion-input",[["name","password"],["ngModel",""],["placeholder","Password"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,44)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,44)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(42,16384,null,0,s.n,[],{required:[0,"required"]},null),r.Ob(1024,null,s.f,function(t){return[t]},[s.n]),r.wb(44,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(46,671744,null,0,s.l,[[2,s.a],[6,s.f],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},null),r.Ob(2048,null,s.h,null,[s.l]),r.wb(48,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(49,49152,null,0,o.E,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(t()(),r.xb(50,0,null,null,10,"ion-item",[],null,null,null,i.W,i.p)),r.wb(51,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(52,0,null,0,8,"ion-input",[["name","confirm"],["ngModel",""],["placeholder","Password again"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,55)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,55)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(53,16384,null,0,s.n,[],{required:[0,"required"]},null),r.Ob(1024,null,s.f,function(t){return[t]},[s.n]),r.wb(55,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(57,671744,null,0,s.l,[[2,s.a],[6,s.f],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},null),r.Ob(2048,null,s.h,null,[s.l]),r.wb(59,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(60,49152,null,0,o.E,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(t()(),r.xb(61,0,null,0,3,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(62,0,null,null,2,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,i.I,i.b)),r.wb(63,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Register"])),(t()(),r.xb(65,0,null,0,6,"ion-row",[["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(66,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(67,0,null,0,4,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.googleLogin()&&r),r},i.I,i.b)),r.wb(68,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.xb(69,0,null,0,1,"ion-icon",[["name","logo-google"],["padding",""]],null,null,null,i.U,i.n)),r.wb(70,49152,null,0,o.A,[r.i,r.n,r.B],{name:[0,"name"]},null),(t()(),r.Rb(-1,0,[" Login with Google "]))],function(t,e){t(e,20,0,""),t(e,24,0,"name",""),t(e,27,0,"name","Name","","text"),t(e,31,0,""),t(e,35,0,"email",""),t(e,38,0,"email","your@email.com","","email"),t(e,42,0,""),t(e,46,0,"password",""),t(e,49,0,"password","Password","","password"),t(e,53,0,""),t(e,57,0,"confirm",""),t(e,60,0,"confirm","Password again","","password"),t(e,63,0,r.Jb(e,4).invalid,"block","large","submit"),t(e,70,0,"logo-google")},function(t,e){t(e,2,0,r.Jb(e,6).ngClassUntouched,r.Jb(e,6).ngClassTouched,r.Jb(e,6).ngClassPristine,r.Jb(e,6).ngClassDirty,r.Jb(e,6).ngClassValid,r.Jb(e,6).ngClassInvalid,r.Jb(e,6).ngClassPending),t(e,19,0,r.Jb(e,20).required?"":null,r.Jb(e,26).ngClassUntouched,r.Jb(e,26).ngClassTouched,r.Jb(e,26).ngClassPristine,r.Jb(e,26).ngClassDirty,r.Jb(e,26).ngClassValid,r.Jb(e,26).ngClassInvalid,r.Jb(e,26).ngClassPending),t(e,30,0,r.Jb(e,31).required?"":null,r.Jb(e,37).ngClassUntouched,r.Jb(e,37).ngClassTouched,r.Jb(e,37).ngClassPristine,r.Jb(e,37).ngClassDirty,r.Jb(e,37).ngClassValid,r.Jb(e,37).ngClassInvalid,r.Jb(e,37).ngClassPending),t(e,41,0,r.Jb(e,42).required?"":null,r.Jb(e,48).ngClassUntouched,r.Jb(e,48).ngClassTouched,r.Jb(e,48).ngClassPristine,r.Jb(e,48).ngClassDirty,r.Jb(e,48).ngClassValid,r.Jb(e,48).ngClassInvalid,r.Jb(e,48).ngClassPending),t(e,52,0,r.Jb(e,53).required?"":null,r.Jb(e,59).ngClassUntouched,r.Jb(e,59).ngClassTouched,r.Jb(e,59).ngClassPristine,r.Jb(e,59).ngClassDirty,r.Jb(e,59).ngClassValid,r.Jb(e,59).ngClassInvalid,r.Jb(e,59).ngClassPending)})}function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-register",[],null,null,null,h,c)),r.wb(1,114688,null,0,a.a,[l.a,o.Nb,u.m],null,null)],function(t,e){t(e,1,0)},null)}var f=r.tb("app-register",a.a,d,{},{},[])},"KOl+":function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return y});var r=n("HDdC"),i=n("xgIS"),o={error:"cordova_not_available"},s={error:"plugin_not_installed"};function a(t){if("undefined"!=typeof window&&window.angular){var e=window.document,n=window.angular.element(e.querySelector("[ng-app]")||e.body).injector();if(n)return n.get("$q")(function(e,n){t(e,n)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(e,n){t(e,n)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function l(t,e,n,r){var i,o;void 0===r&&(r={});var s=a(function(s,a){i=r.destruct?p(t,e,n,r,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(t)}):p(t,e,n,r,s,a),o=a});return i&&i.error&&(s.catch(function(){}),"function"==typeof o&&o(i.error)),s}function u(t,e,n,r){return void 0===r&&(r={}),a(function(i,o){var s=p(t,e,n,r);s?s.error?o(s.error):s.then&&s.then(i).catch(o):o({error:"unexpected_error"})})}function c(t,e,n,i){return void 0===i&&(i={}),new r.a(function(r){var o;return(o=i.destruct?p(t,e,n,i,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.error(t)}):p(t,e,n,i,r.next.bind(r),r.error.bind(r)))&&o.error&&(r.error(o.error),r.complete()),function(){try{if(i.clearFunction)return i.clearWithArgs?p(t,i.clearFunction,n,i,r.next.bind(r),r.error.bind(r)):p(t,i.clearFunction,[])}catch(o){console.warn("Unable to clear the previous observable watch for",t.constructor.getPluginName(),e),console.warn(o)}}})}function h(t,e){return e="undefined"!=typeof window&&e?b(window,e):e||"undefined"!=typeof window||{},Object(i.a)(e,t)}function d(t,e,n){var r,i,a;return"string"==typeof t?r=t:(r=t.constructor.getPluginRef(),n=t.constructor.getPluginName(),a=t.constructor.getPluginInstallName()),!(!(i=m(r))||e&&void 0===i[e])||("undefined"!=typeof window&&window.cordova?(function(t,n,r){e?console.warn("Native: tried calling "+t+"."+e+", but the "+t+" plugin is not installed."):console.warn("Native: tried accessing the "+t+" plugin but it's not installed."),n&&console.warn("Install the "+t+" plugin: 'ionic cordova plugin add "+n+"'")}(n,a),s):(function(t,n){"undefined"==typeof process&&(e?console.warn("Native: tried calling "+t+"."+e+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"):console.warn("Native: tried accessing the "+t+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"))}(n),o))}function f(t,e,n,r){if(void 0===e&&(e={}),e.sync)return t;if("reverse"===e.callbackOrder)t.unshift(r),t.unshift(n);else if("node"===e.callbackStyle)t.push(function(t,e){t?r(t):n(e)});else if("object"===e.callbackStyle&&e.successName&&e.errorName){var i={};i[e.successName]=n,i[e.errorName]=r,t.push(i)}else if(void 0!==e.successIndex||void 0!==e.errorIndex){var o=function(){e.successIndex>t.length?t[e.successIndex]=n:t.splice(e.successIndex,0,n)},s=function(){e.errorIndex>t.length?t[e.errorIndex]=r:t.splice(e.errorIndex,0,r)};e.successIndex>e.errorIndex?(s(),o()):(o(),s())}else t.push(n),t.push(r);return t}function p(t,e,n,r,i,o){void 0===r&&(r={}),n=f(n,r,i,o);var s=d(t,e);if(!0===s){var a=m(t.constructor.getPluginRef());return a[e].apply(a,n)}return s}function g(t,e,n,r,i,o){if(void 0===r&&(r={}),n=f(n,r,i,o),function(t,e){return t._objectInstance&&(!e||void 0!==t._objectInstance[e])}(t,e))return t._objectInstance[e].apply(t._objectInstance,n)}function m(t){return"undefined"!=typeof window?b(window,t):null}function b(t,e){for(var n=e.split("."),r=t,i=0;i<n.length;i++){if(!r)return null;r=r[n[i]]}return r}var v=function(t,e,n){return void 0===n&&(n={}),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n.sync?p(t,e,r,n):n.observable?c(t,e,r,n):n.eventObservable&&n.event?h(n.event,n.element):n.otherPromise?u(t,e,r,n):l(t,e,r,n)}};function y(t,e,n){return void 0===n&&(n={}),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n.sync)return g(t,e,i,n);if(n.observable)return new r.a(function(r){var o;return(o=n.destruct?g(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.error(t)}):g(t,e,i,n,r.next.bind(r),r.error.bind(r)))&&o.error&&r.error(o.error),function(){try{return n.clearWithArgs?g(t,n.clearFunction,i,n,r.next.bind(r),r.error.bind(r)):g(t,n.clearFunction,[])}catch(o){console.warn("Unable to clear the previous observable watch for",t.constructor.getPluginName(),e),console.warn(o)}}});if(n.otherPromise)return a(function(r,o){var s;(s=n.destruct?g(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}):g(t,e,i,n,r,o))&&s.then?s.then(r,o):o()});var s,l,u=a(function(r,o){s=n.destruct?g(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}):g(t,e,i,n,r,o),l=o});return s&&s.error&&(u.catch(function(){}),"function"==typeof l&&l(s.error)),u}}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},LmZi:function(t,e,n){"use strict";n.r(e),n.d(e,"registerStorage",function(){return Kt});var r=n("wj3C"),i=n.n(r),o=n("mrSG"),s="firebasestorage.googleapis.com",a="storageBucket",l=12e4,u=6e4,c=-9007199254740991,h=function(){function t(t,e){this.code_=f(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return f(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),d={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function f(t){return"storage/"+t}function p(){return new h(d.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function g(){return new h(d.CANCELED,"User canceled the upload/download.")}function m(){return new h(d.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b(){return new h(d.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v(t,e,n){return new h(d.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function y(){return new h(d.APP_DELETED,"The Firebase app was deleted.")}function w(t,e){return new h(d.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _(t){throw new h(d.INTERNAL_ERROR,"Internal error: "+t)}var k={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function C(t){switch(t){case k.RAW:case k.BASE64:case k.BASE64URL:case k.DATA_URL:return;default:throw"Expected one of the event types: ["+k.RAW+", "+k.BASE64+", "+k.BASE64URL+", "+k.DATA_URL+"]."}}var E=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function S(t,e){switch(t){case k.RAW:return new E(T(e));case k.BASE64:case k.BASE64URL:return new E(x(t,e));case k.DATA_URL:return new E((n=new A(e)).base64?x(k.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw w(k.DATA_URL,"Malformed data URL.")}return T(e)}(n.rest),new A(e).contentType)}var n;throw p()}function T(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function x(t,e){switch(t){case k.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw w(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case k.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw w(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(u){throw w(t,"Invalid character found")}for(var a=new Uint8Array(s.length),l=0;l<s.length;l++)a[l]=s.charCodeAt(l);return a}var A=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw w(k.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=n.length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}(),I={STATE_CHANGED:"state_changed"},D={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},P={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function O(t){switch(t){case D.RUNNING:case D.PAUSING:case D.CANCELING:return P.RUNNING;case D.PAUSED:return P.PAUSED;case D.SUCCESS:return P.SUCCESS;case D.CANCELED:return P.CANCELED;case D.ERROR:default:return P.ERROR}}function N(t){return null!=t}function R(t){return void 0!==t}function M(t){return"function"==typeof t}function L(t){return"object"==typeof t}function F(t){return L(t)&&null!==t}function j(t){return"string"==typeof t||t instanceof String}function B(t){return V(t)&&Number.isInteger(t)}function V(t){return"number"==typeof t||t instanceof Number}function U(t){return z()&&t instanceof Blob}function z(){return"undefined"!=typeof Blob}var q=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),H=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=q.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=q.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=q.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw _("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),N(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return N(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw _("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw _("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw _("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){N(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){N(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),$=function(){function t(){}return t.prototype.createXhrIo=function(){return new H},t}();function W(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=W();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(z())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var G=function(){function t(t,e){var n=0,r="";U(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(U(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(z()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(J.apply(null,r))}var i=e.map(function(t){return j(t)?S(k.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Q=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new h(d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){for(var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),i=s.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],a=0;a<o.length;a++){var l=o[a],u=l.regex.exec(e);if(u){var c=u[l.indices.path];c||(c=""),n=new t(u[l.indices.bucket],c),l.postModify(n);break}}if(null==n)throw function(t){return new h(d.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}();function K(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return L(n=e)&&!Array.isArray(n)?e:null}function Y(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}function X(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Z(t){return"https://"+s+"/v0"+t}function tt(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function et(t,e){return e}var nt=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||et}}(),rt=null;function it(t,e,n){var r=K(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Q(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function ot(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function st(t){if(!L(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!L(n))throw"Expected object for 'customMetadata' mapping."}else if(F(n))throw"Mapping for '"+e+"' cannot be an object."}}var at="maxResults",lt=1e3,ut="pageToken",ct="prefixes",ht="items";function dt(t){if(!L(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===at){if(!B(t[at])||t[at]<=0)throw"Expected maxResults to be a positive number.";if(t[at]>1e3)throw"Expected maxResults to be less than or equal to "+lt+"."}else{if(e!==ut)throw"Unknown option: "+e;if(t[ut]&&!j(t[ut]))throw"Expected pageToken to be string."}}var ft=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function pt(t){if(!t)throw p()}function gt(t,e){return function(n,r){var i=it(t,r,e);return pt(null!==i),i}}function mt(t){return function(e,n){var r;return(r=401===e.getStatus()?new h(d.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new h(d.QUOTA_EXCEEDED,"Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new h(d.UNAUTHORIZED,"User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function bt(t){var e=mt(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new h(d.OBJECT_NOT_FOUND,"Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function vt(t,e,n){var r=Z(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new ft(r,"GET",gt(t,n),i);return o.errorHandler=bt(e),o}function yt(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Z(e.bucketOnlyServerUrl()),l=t.maxOperationRetryTime(),u=new ft(s,"GET",function(t){return function(e,n){var r=function(t,e){var r=K(n);return null===r?null:function(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new h(d.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a+"' property when initializing the app?");if(e[ct])for(var i=0,o=e[ct];i<o.length;i++){var s=o[i].replace(/\/$/,""),l=t.makeStorageReference(new Q(r,s));n.prefixes.push(l)}if(e[ht])for(var u=0,c=e[ht];u<c.length;u++)l=t.makeStorageReference(new Q(r,c[u].name)),n.items.push(l);return n}(t,r)}(t);return pt(null!==r),r}}(t),l);return u.urlParams=o,u.errorHandler=mt(e),u}function wt(t,e,n){var r=Z(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new ft(r,"GET",function(t,e){return function(n,r){var i=it(t,r,e);return pt(null!==i),function(t,e){var n=K(r);if(null===n)return null;if(!j(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var n=t.fullPath;return Z("/b/"+o(t.bucket)+"/o/"+o(n))+tt({alt:"media",token:e})})[0]}(i)}}(t,n),i);return o.errorHandler=bt(e),o}function _t(t,e,n,r){var i=Z(e.fullServerUrl()),o=ot(n,r),s=t.maxOperationRetryTime(),a=new ft(i,"PATCH",gt(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=bt(e),a}function kt(t,e){var n=Z(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new ft(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=bt(e),i}function Ct(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Et=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function St(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){pt(!1)}return pt(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Tt=function(){return function(t,e,n){if(M(t)||N(e)||N(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),xt=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function At(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var s,a,l,u;if(!(r<=n.length&&n.length<=i))throw(s=r)===(a=i)?(l=s,u=1===s?"argument":"arguments"):(l="between "+s+" and "+a,u="arguments"),new h(d.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+l+" "+u+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(c){throw c instanceof Error?v(o,t,c.message):v(o,t,c)}}var It=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!R(e)||t(e)},this.optional=!!e}}();function Dt(t,e){function n(t){if(!j(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new It(r,e)}function Pt(){return new It(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||z()&&t instanceof Blob))throw"Expected Blob or File."})}function Ot(t){return new It(st,t)}function Nt(t){return new It(dt,t)}function Rt(){return new It(function(t){if(!(V(t)&&t>=0))throw"Expected a number 0 or greater."})}function Mt(t,e){return new It(function(e){if(!(null===e||N(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)},e)}function Lt(t){return new It(function(t){if(null!==t&&!M(t))throw"Expected a Function."},t)}function Ft(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var jt=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=D.RUNNING,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(d.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(D.ERROR))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(d.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(D.ERROR))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===D.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case D.RUNNING:t(n);break;case D.CANCELING:e.transition_(D.CANCELED);break;case D.PAUSING:e.transition_(D.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Ct(e,r,i),a={name:s.fullPath},l=Z(o),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=ot(s,n),h=t.maxUploadRetryTime(),d=new ft(l,"POST",function(t){var e;St(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){pt(!1)}return pt(j(e)),e},h);return d.urlParams=a,d.headers=u,d.body=c,d.errorHandler=mt(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,n,r,i){var o=t.authWrapper_.maxUploadRetryTime(),s=new ft(r,"POST",function(t){var e=St(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){pt(!1)}n||pt(!1);var r=Number(n);return pt(!isNaN(r)),new Et(r,i.size(),"final"===e)},o);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=mt(n),s}(0,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Et(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var l=new Et(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new h(d.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var u=l.total-l.current,c=u;i>0&&(c=Math.min(c,i));var f=l.current,p={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},g=r.slice(f,f+c);if(null===g)throw m();var b=e.maxUploadRetryTime(),v=new ft(n,"POST",function(t,n){var i,s=St(t,["active","final"]),a=l.current+c,u=r.size();return i="final"===s?gt(e,o)(t,n):null,new Et(a,u,"final"===s,i)},b);return v.headers=p,v.body=g.uploadData(),v.progressCallback=a||null,v.errorHandler=mt(t),v}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(a){return t.error_=a,void t.transition_(D.ERROR)}var s=t.authWrapper_.makeRequest(o,i);t.request_=s,s.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(D.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=vt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(D.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var l=Ct(e,r,i),u=ot(l,n),c=G.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===c)throw m();var h={name:l.fullPath},d=Z(o),f=t.maxUploadRetryTime(),p=new ft(d,"POST",gt(t,n),f);return p.urlParams=h,p.headers=s,p.body=c.uploadData(),p.errorHandler=mt(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(D.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case D.CANCELING:case D.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case D.RUNNING:var e=this.state_===D.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case D.PAUSED:this.state_=t,this.notifyObservers_();break;case D.CANCELED:this.error_=g(),this.state_=t,this.notifyObservers_();break;case D.ERROR:case D.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case D.PAUSING:this.transition_(D.PAUSED);break;case D.CANCELING:this.transition_(D.CANCELED);break;case D.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=O(this.state_);return new xt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==I.STATE_CHANGED)throw"Expected one of the event types: ["+I.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=Lt(!0).validator,a=Mt(null,!0).validator;function l(t){try{return void s(t)}catch(e){}try{if(a(t),!(R(t.next)||R(t.error)||R(t.complete)))throw"";return}catch(e){throw o}}var u=[Dt(i),Mt(l,!0),Lt(!0),Lt(!0)];At("on",u,arguments);var c=this;function h(t){return function(e,n,i){null!==t&&At("on",t,arguments);var o=new Tt(e,n,r);return c.addObserver_(o),function(){c.removeObserver_(o)}}}function d(t){if(null===t)throw o;l(t)}var f=[Mt(d),Lt(!0),Lt(!0)],p=!(R(e)||R(n)||R(r));return p?h(f):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(O(this.state_)){case P.SUCCESS:Ft(this.resolve_.bind(null,this.snapshot))();break;case P.CANCELED:case P.ERROR:Ft(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(O(this.state_)){case P.RUNNING:case P.PAUSED:t.next&&Ft(t.next.bind(t,this.snapshot))();break;case P.SUCCESS:t.complete&&Ft(t.complete.bind(t))();break;case P.CANCELED:case P.ERROR:t.error&&Ft(t.error.bind(t,this.error_))();break;default:t.error&&Ft(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){At("resume",[],arguments);var t=this.state_===D.PAUSED||this.state_===D.PAUSING;return t&&this.transition_(D.RUNNING),t},t.prototype.pause=function(){At("pause",[],arguments);var t=this.state_===D.RUNNING;return t&&this.transition_(D.PAUSING),t},t.prototype.cancel=function(){At("cancel",[],arguments);var t=this.state_===D.RUNNING||this.state_===D.PAUSING;return t&&this.transition_(D.CANCELING),t},t}(),Bt=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof Q?e:Q.makeFromUrl(e)}return t.prototype.toString=function(){return At("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(rt)return rt;var t=[];t.push(new nt("bucket")),t.push(new nt("generation")),t.push(new nt("metageneration")),t.push(new nt("name","fullPath",!0));var e=new nt("name");e.xform=function(t,e){return function(t){return!j(t)||t.length<2?t:X(t)}(e)},t.push(e);var n=new nt("size");return n.xform=function(t,e){return N(e)?Number(e):e},t.push(n),t.push(new nt("timeCreated")),t.push(new nt("updated")),t.push(new nt("md5Hash",null,!0)),t.push(new nt("cacheControl",null,!0)),t.push(new nt("contentDisposition",null,!0)),t.push(new nt("contentEncoding",null,!0)),t.push(new nt("contentLanguage",null,!0)),t.push(new nt("contentType",null,!0)),t.push(new nt("metadata","customMetadata",!0)),rt=t}()},t.prototype.child=function(t){At("child",[Dt()],arguments);var e=Y(this.location.path,t),n=new Q(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Q(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Q(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return X(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),At("put",[Pt(),Ot(!0)],arguments),this.throwIfRoot_("put"),new jt(this,this.authWrapper,this.location,this.mappings(),new G(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=k.RAW),At("putString",[Dt(),Dt(C,!0),Ot(!0)],arguments),this.throwIfRoot_("putString");var r=S(e,t),i=Object.assign({},n);return!N(i.contentType)&&N(r.contentType)&&(i.contentType=r.contentType),new jt(this,this.authWrapper,this.location,this.mappings(),new G(r.data,!0),i)},t.prototype.delete=function(){var t=this;return At("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(e){var n=kt(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.listAll=function(){At("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},t.prototype.listAllHelper=function(t,e){return Object(o.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(o.__generator)(this,function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},t.prototype.list=function(t){At("list",[Nt(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=t||{},i=yt(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()})},t.prototype.getMetadata=function(){var t=this;return At("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(e){var n=vt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){var e=this;return At("updateMetadata",[Ot()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=_t(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){var t=this;return At("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(e){var n=wt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw b();return t})})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new h(d.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Vt=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Ut=function(){function t(){this.map=new Map,this.id=c}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},t.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},t}(),zt=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;N(s)&&(this.bucket_=t.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=l,this.maxUploadRetryTime_=u,this.requestMap_=new Ut}return t.extractBucket_=function(t){var e=t[a]||null;return null==e?null:Q.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&N(this.app_.INTERNAL)&&N(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw y();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Vt(y());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),qt=function(){function t(t,e,n,r,i,o,s,a,l,u,c){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=l,this.pool_=c,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());R(a)?i(a):i()}catch(l){o(l)}else null!==s?((r=p()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?y():g():new h(d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ht(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var l=!1;function u(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];l||(l=!0,e.apply(null,t))}function c(e){i=setTimeout(function(){i=null,t(h,a())},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];l||(t?u.call.apply(u,[null,t].concat(n)):a()||o?u.call.apply(u,[null,t].concat(n)):(r<64&&(r*=2),1===s?(s=2,e=0):e=1e3*(r+Math.random()),c(e)))}var d=!1;function f(t){d||(d=!0,l||(null!==i?(t||(s=2),clearTimeout(i),c(0)):t||(s=1)))}return c(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(e,n){if(n)e(!1,new Ht(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===q.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Ht(s,n))}else{var a=n.getErrorCode()===q.ABORT;e(!1,new Ht(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ht=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function $t(t,e,n){var r=tt(t.urlParams),o=t.url+r,s=Object.assign({},t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==i.a?i.a.SDK_VERSION:"AppManager")}(s),new qt(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Wt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new zt(t,function(t,e){return new Bt(t,e)},$t,this,e),this.app_=t,null!=n)this.bucket_=Q.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Q(r,""))}this.internals_=new Jt(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(At("ref",[Dt(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Bt(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Q.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return At("refFromURL",[Dt(e,!1)],arguments),new Bt(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){At("setMaxUploadRetryTime",[Rt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){At("setMaxOperationRetryTime",[Rt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Jt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}(),Gt="storage";function Qt(t,e,n){return new Wt(t,new $,n)}function Kt(t){t.INTERNAL.registerService(Gt,Qt,{TaskState:P,TaskEvent:I,StringFormat:k,Storage:Wt,Reference:Bt},void 0,!0)}Kt(i.a)},Lq6m:function(t,e,n){"use strict";var r=n("KOl+");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.installed=function(){return!0===Object(r.a)(this.pluginRef)},t.getPlugin=function(){return"undefined"!=typeof window?function(t,e){for(var n=e.split("."),r=t,i=0;i<n.length;i++){if(!r)return null;r=r[n[i]]}return r}(window,this.pluginRef):null},t.getPluginName=function(){return this.pluginName},t.getPluginRef=function(){return this.pluginRef},t.getPluginInstallName=function(){return this.plugin},t.getSupportedPlatforms=function(){return this.platforms||[]},t}()},N2yL:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("iInd"),a=n("SVse"),l=n("abRS"),u=n("xkgV"),c=n("s7LF"),h=n("Wwor"),d=n("VMA6"),f=n("Gon4");n.d(e,"a",function(){return y});var p=r.vb({encapsulation:0,styles:[['.ion-card-total[_ngcontent-%COMP%]{box-shadow:10px 10px 22px 0 rgba(179,177,179,.49);width:30%;height:100%;text-align:left}ion-col[_ngcontent-%COMP%]{text-align:center;margin:auto}.total-number[_ngcontent-%COMP%]{font-family:"Samsung Sharp Sans";color:#da6501}']],data:{}});function g(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,24,"ion-row",[["style","border-bottom:0.06em solid #E8E8E8;"]],null,null,null,i.bb,i.u)),r.wb(1,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,5,"ion-col",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,4).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,6).onClick(n)&&i),i},i.O,i.h)),r.wb(3,49152,null,0,o.r,[r.i,r.n,r.B],null,null),r.wb(4,16384,null,0,s.n,[s.m,s.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.Kb(5,2),r.wb(6,737280,null,0,o.Kb,[a.j,o.Gb,r.n,s.m,[2,s.n]],null,null),(t()(),r.Rb(7,0,["",""])),(t()(),r.xb(8,0,null,0,2,"ion-col",[],null,null,null,i.O,i.h)),r.wb(9,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.Rb(10,0,["",""])),(t()(),r.xb(11,0,null,0,2,"ion-col",[],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.Rb(13,0,["",""])),(t()(),r.xb(14,0,null,0,2,"ion-col",[],null,null,null,i.O,i.h)),r.wb(15,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.Rb(16,0,["",""])),(t()(),r.xb(17,0,null,0,7,"ion-col",[["size","2"]],null,null,null,i.O,i.h)),r.wb(18,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(19,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onEditCampButtonClick(t.context.$implicit)&&r),r},i.I,i.b)),r.wb(20,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,[" Edit "])),(t()(),r.xb(22,0,null,0,2,"ion-button",[["color","danger"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteCampButtonClick(t.context.$implicit)&&r),r},i.I,i.b)),r.wb(23,49152,null,0,o.i,[r.i,r.n,r.B],{color:[0,"color"]},null),(t()(),r.Rb(-1,0,[" Delete "]))],function(t,e){var n=t(e,5,0,"/camp-info",e.context.$implicit.id);t(e,4,0,n),t(e,6,0),t(e,18,0,"2"),t(e,23,0,"danger")},function(t,e){t(e,7,0,e.context.$implicit.name),t(e,10,0,e.context.$implicit.address),t(e,13,0,e.context.$implicit.city),t(e,16,0,e.context.$implicit.state)})}function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"pagination-controls",[],null,[[null,"pageChange"]],function(t,e,n){var r=!0;return"pageChange"===e&&(r=!1!==t.component.onPageChange(n)&&r),r},l.b,l.a)),r.wb(1,49152,null,0,u.c,[],null,{pageChange:"pageChange"})],null,null)}function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,74,"ion-content",[["padding",""]],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,72,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(3,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(4,0,null,0,18,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(5,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(6,0,null,0,10,"ion-col",[],null,null,null,i.O,i.h)),r.wb(7,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(8,0,null,0,8,"ion-card",[["class","ion-card-total"],["padding",""]],null,null,null,i.M,i.d)),r.wb(9,49152,null,0,o.k,[r.i,r.n,r.B],null,null),(t()(),r.xb(10,0,null,0,3,"ion-card-subtitle",[["style","float:left;font-weight:950;"]],null,null,null,i.L,i.f)),r.wb(11,49152,null,0,o.n,[r.i,r.n,r.B],null,null),(t()(),r.Rb(12,0,[" Total ",": "])),r.Lb(131072,a.b,[r.i]),(t()(),r.xb(14,0,null,0,2,"h1",[["class","total-number"]],null,null,null,null,null)),(t()(),r.Rb(15,null,[" "," "])),r.Lb(131072,a.b,[r.i]),(t()(),r.xb(17,0,null,0,5,"ion-col",[["style","text-align: right;"]],null,null,null,i.O,i.h)),r.wb(18,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddCampsButton()&&r),r},i.I,i.b)),r.wb(20,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.Rb(21,0,["Add ",""])),r.Lb(131072,a.b,[r.i]),(t()(),r.xb(23,0,null,0,39,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(24,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(25,0,null,0,8,"ion-col",[],null,null,null,i.O,i.h)),r.wb(26,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(27,0,null,0,6,"ion-searchbar",[["placeholder","Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,29)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,29)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.currQueries.name=n)&&i),"ionChange"===e&&(i=!1!==o.onAnySearchBarChange(n)&&i),i},i.cb,i.v)),r.wb(28,49152,null,0,o.hb,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(29,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,c.g,function(t){return[t]},[o.Mb]),r.wb(31,671744,null,0,c.l,[[8,null],[8,null],[8,null],[6,c.g]],{model:[0,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,c.h,null,[c.l]),r.wb(33,16384,null,0,c.i,[[4,c.h]],null,null),(t()(),r.xb(34,0,null,0,8,"ion-col",[],null,null,null,i.O,i.h)),r.wb(35,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(36,0,null,0,6,"ion-searchbar",[["placeholder","Address"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,38)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,38)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.currQueries.address=n)&&i),"ionChange"===e&&(i=!1!==o.onAnySearchBarChange(n)&&i),i},i.cb,i.v)),r.wb(37,49152,null,0,o.hb,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(38,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,c.g,function(t){return[t]},[o.Mb]),r.wb(40,671744,null,0,c.l,[[8,null],[8,null],[8,null],[6,c.g]],{model:[0,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,c.h,null,[c.l]),r.wb(42,16384,null,0,c.i,[[4,c.h]],null,null),(t()(),r.xb(43,0,null,0,8,"ion-col",[],null,null,null,i.O,i.h)),r.wb(44,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(45,0,null,0,6,"ion-searchbar",[["placeholder","City"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,47)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,47)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.currQueries.city=n)&&i),"ionChange"===e&&(i=!1!==o.onAnySearchBarChange(n)&&i),i},i.cb,i.v)),r.wb(46,49152,null,0,o.hb,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(47,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,c.g,function(t){return[t]},[o.Mb]),r.wb(49,671744,null,0,c.l,[[8,null],[8,null],[8,null],[6,c.g]],{model:[0,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,c.h,null,[c.l]),r.wb(51,16384,null,0,c.i,[[4,c.h]],null,null),(t()(),r.xb(52,0,null,0,8,"ion-col",[],null,null,null,i.O,i.h)),r.wb(53,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(54,0,null,0,6,"ion-searchbar",[["placeholder","State"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,56)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,56)._handleInputEvent(n.target)&&i),"ngModelChange"===e&&(i=!1!==(o.currQueries.state=n)&&i),"ionChange"===e&&(i=!1!==o.onAnySearchBarChange(n)&&i),i},i.cb,i.v)),r.wb(55,49152,null,0,o.hb,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(56,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,c.g,function(t){return[t]},[o.Mb]),r.wb(58,671744,null,0,c.l,[[8,null],[8,null],[8,null],[6,c.g]],{model:[0,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,c.h,null,[c.l]),r.wb(60,16384,null,0,c.i,[[4,c.h]],null,null),(t()(),r.xb(61,0,null,0,1,"ion-col",[["size","2"]],null,null,null,i.O,i.h)),r.wb(62,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.mb(16777216,null,0,4,null,g)),r.wb(64,278528,null,0,a.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null),r.Lb(131072,a.b,[r.i]),r.Mb(66,{itemsPerPage:0,currentPage:1}),r.Lb(0,u.b,[u.e]),(t()(),r.xb(68,0,null,0,6,"ion-row",[["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(69,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(70,0,null,0,4,"ion-col",[["size","9"]],null,null,null,i.O,i.h)),r.wb(71,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.mb(16777216,null,0,2,null,m)),r.wb(73,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i])],function(t,e){var n=e.component;t(e,28,0,"Name"),t(e,31,0,n.currQueries.name),t(e,37,0,"Address"),t(e,40,0,n.currQueries.address),t(e,46,0,"City"),t(e,49,0,n.currQueries.city),t(e,55,0,"State"),t(e,58,0,n.currQueries.state),t(e,62,0,"2");var i=r.Sb(e,64,0,r.Jb(e,67).transform(r.Sb(e,64,0,r.Jb(e,65).transform(n.dataSource$)),t(e,66,0,11,n.p)));t(e,64,0,i),t(e,71,0,"9"),t(e,73,0,r.Sb(e,73,0,r.Jb(e,74).transform(n.dataSource$)))},function(t,e){var n,i=e.component;t(e,12,0,r.Sb(e,12,0,r.Jb(e,13).transform(i.title))),t(e,15,0,null==(n=r.Sb(e,15,0,r.Jb(e,16).transform(i.dataSource$)))?null:n.length),t(e,21,0,r.Sb(e,21,0,r.Jb(e,22).transform(i.title))),t(e,27,0,r.Jb(e,33).ngClassUntouched,r.Jb(e,33).ngClassTouched,r.Jb(e,33).ngClassPristine,r.Jb(e,33).ngClassDirty,r.Jb(e,33).ngClassValid,r.Jb(e,33).ngClassInvalid,r.Jb(e,33).ngClassPending),t(e,36,0,r.Jb(e,42).ngClassUntouched,r.Jb(e,42).ngClassTouched,r.Jb(e,42).ngClassPristine,r.Jb(e,42).ngClassDirty,r.Jb(e,42).ngClassValid,r.Jb(e,42).ngClassInvalid,r.Jb(e,42).ngClassPending),t(e,45,0,r.Jb(e,51).ngClassUntouched,r.Jb(e,51).ngClassTouched,r.Jb(e,51).ngClassPristine,r.Jb(e,51).ngClassDirty,r.Jb(e,51).ngClassValid,r.Jb(e,51).ngClassInvalid,r.Jb(e,51).ngClassPending),t(e,54,0,r.Jb(e,60).ngClassUntouched,r.Jb(e,60).ngClassTouched,r.Jb(e,60).ngClassPristine,r.Jb(e,60).ngClassDirty,r.Jb(e,60).ngClassValid,r.Jb(e,60).ngClassInvalid,r.Jb(e,60).ngClassPending)})}function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-admin-camps",[],null,null,null,b,p)),r.wb(1,114688,null,0,h.a,[s.m,s.a,o.Fb,o.a,d.a,f.a],null,null)],function(t,e){t(e,1,0)},null)}var y=r.tb("app-admin-camps",h.a,v,{},{},[])},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},NSPt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,s=n("mrSG"),a=n("zVF4"),l=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),a.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:a.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return a.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},d=h("localStorage"),f=h("sessionStorage"),p=new l.Logger("@firebase/database"),g="FIREBASE_DATABASE_EMULATOR_HOST",m=(i=1,function(){return i++}),b=function(t){var e=a.stringToByteArray(t),n=new a.Sha1;n.update(e);var r=n.digest();return a.base64.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=v.apply(null,t[r]):n+="object"==typeof t[r]?a.stringify(t[r]):t[r],n+=" ";return n},y=null,w=!0,_=function(t,e){a.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=l.LogLevel.VERBOSE,y=p.log.bind(p),e&&f.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,f.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===y&&!0===f.get("logging_enabled")&&_(!0)),y){var n=v.apply(null,t);y(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,s.__spread([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,s.__spread(t));p.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,s.__spread(t));throw p.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,s.__spread(t));p.warn(n)},x=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",I="[MAX_NAME]",D=function(t,e){if(t===e)return 0;if(t===A||e===I)return-1;if(e===A||t===I)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},O=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+a.stringify(e))},N=function(t){if("object"!=typeof t||null===t)return a.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=a.stringify(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function M(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L,F,j,B,V,U,z,q,H,$,W=function(t){var e,n,r,i,o,s,l;for(a.assert(!x(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),s=[],o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse(),l=s.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(l.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},J=new RegExp("^-?\\d{1,10}$"),G=function(t){if(J.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Q=function(t){try{t()}catch(e){setTimeout(function(){throw T("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},K=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Y=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Z=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=a.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=a.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),tt="long_polling",et=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(a.assert("string"==typeof t,"typeof type must == string"),a.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==tt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return M(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),nt=function(t){var e=rt(t),n=e.namespace;return"firebase"===e.domain&&S(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new et(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!=e.subdomain),path:new X(e.pathString)}},rt=function(t){var e="",n="",r="",i="",o="",a=!0,l="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(e){for(var n="",r=t.substring(h,d).split("/"),i=0;i<r.length;i++)if(r[i].length>0){var o=r[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(s){}n+="/"+o}return n}());var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=s.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var l=a.split("=");2===l.length?r[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(c=e.indexOf(":"))>=0?(a="https"===l||"wss"===l,u=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:l,pathString:i,namespace:o}},it=/[\[\].#$\/\u0000-\u001F\u007F]/,ot=/[\[\].#$\u0000-\u001F\u007F]/,st=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!ot.test(t)},lt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!x(t)||t&&"object"==typeof t&&a.contains(t,".sv")},ut=function(t,e,n,r,i){i&&void 0===n||ct(a.errorPrefix(t,e,i),n,r)},ct=function(t,e,n){var r=n instanceof X?new Z(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(x(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&a.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(M(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ct(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var o=a.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];M(n,function(t,e){var n=new X(t);if(ct(o,e,r.child(n)),".priority"===n.getBack()&&!lt(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},dt=function(t,e,n,r){if(!r||void 0!==n){if(x(n))throw new Error(a.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lt(n))throw new Error(a.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(a.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(a.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,r)},bt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},vt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(a.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a boolean.")},wt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){a.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),a.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){a.validateArgCount("OnDisconnect.remove",0,1,arguments.length),bt("OnDisconnect.remove",this.path_),a.validateCallback("OnDisconnect.remove",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){a.validateArgCount("OnDisconnect.set",1,2,arguments.length),bt("OnDisconnect.set",this.path_),ut("OnDisconnect.set",1,t,this.path_,!1),a.validateCallback("OnDisconnect.set",2,e,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){a.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),bt("OnDisconnect.setWithPriority",this.path_),ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),dt("OnDisconnect.setWithPriority",2,e,!1),a.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(a.validateArgCount("OnDisconnect.update",1,2,arguments.length),bt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),a.validateCallback("OnDisconnect.update",2,e,!0);var i=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return a.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),kt=(L="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",F=0,j=[],function(t){var e,n=t===F;F=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=L.charAt(t%64),t=Math.floor(t/64);a.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===j[e];e--)j[e]=0;j[e]++}else for(e=0;e<12;e++)j[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=L.charAt(j[e]);return a.assert(20===i.length,"nextPushId: Length should be 20."),i}),Ct=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Et=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ct(A,t),r=new Ct(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ct.MIN},t}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return B},set:function(t){B=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return D(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw a.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(I,B)},e.prototype.makePost=function(t,e){return a.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,B)},e.prototype.toString=function(){return".key"},e}(Et),Tt=new St,xt=function(t){return"number"==typeof t?"number:"+W(t):"string:"+t},At=function(t){if(t.isLeafNode()){var e=t.val();a.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&a.contains(e,".sv"),"Priority must be a string or number.")}else a.assert(t===V||t.isEmpty(),"priority of unexpected type.");a.assert(t===V||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},It=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,a.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),At(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return U},set:function(t){U=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(a.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+xt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(a.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return a.assert(i>=0,"Unknown leaf type: "+n),a.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Dt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(I,new It("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=z(t);return new Ct(e,new It("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Et)),Pt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ot=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Rt.EMPTY_NODE,this.right=null!=o?o:Rt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Rt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Rt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ot(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Rt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Pt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Pt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nt,t}(),Mt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Mt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ft=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0==a)return null;if(1==a)return o=t[e],s=n?n(o):o,new Ot(s,o.node,Ot.BLACK,null,null);var l=parseInt(a/2,10)+e,u=i(e,l),c=i(l+1,r);return o=t[l],s=n?n(o):o,new Ot(s,o.node,Ot.BLACK,u,c)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var u=i(o+1,a),c=t[o],h=n?n(c):c;l(new Ot(h,c.node,r,null,u))},l=function(t){r?(r.left=t,r=t):(o=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),h=Math.pow(2,e.count-(u+1));c?a(h,Ot.BLACK):(a(h,Ot.BLACK),a(h,Ot.RED))}return o}(new Lt(t.length));return new Rt(r||e,o)},jt={},Bt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return a.assert(jt&&Dt,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":jt},{".priority":Dt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=a.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Rt?e:null},t.prototype.hasIndex=function(t){return a.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){a.assert(e!==Tt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,l=n.getIterator(Ct.Wrap),u=l.getNext();u;)o=o||e.isDefinedOn(u.node),i.push(u),u=l.getNext();r=o?Ft(i,e.getCompare()):jt;var c=e.toString(),h=s.__assign({},this.indexSet_);h[c]=e;var d=s.__assign({},this.indexes_);return d[c]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(a.map(this.indexes_,function(t,i){var o=a.safeGet(r.indexSet_,i);if(a.assert(o,"Missing index implementation for "+i),t===jt){if(o.isDefinedOn(e.node)){for(var s=[],l=n.getIterator(Ct.Wrap),u=l.getNext();u;)u.name!=e.name&&s.push(u),u=l.getNext();return s.push(e),Ft(s,o.getCompare())}return jt}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Ct(e.name,c))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(a.map(this.indexes_,function(t){if(t===jt)return t;var r=n.get(e.name);return r?t.remove(new Ct(e.name,r)):t}),this.indexSet_)},t}();function Vt(t,e){return D(t.name,e.name)}function Ut(t,e){return D(t,e)}var zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&At(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return $||($=new t(new Rt(Ut),null,Bt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||$},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?$:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r,i=new Ct(e,n),o=void 0,s=void 0;return n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?$:this.priorityNode_,new t(o,r,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;a.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Dt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+xt(this.getPriority().val())+":"),this.forEachChild(Dt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qt?-1:0},t.prototype.withIndex=function(e){if(e===Tt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Tt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Dt),r=e.getIterator(Dt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Tt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),qt=new(function(t){function e(){return t.call(this,new Rt(Ut),zt.EMPTY_NODE,Bt.Default)||this}return s.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(zt));Object.defineProperties(Ct,{MIN:{value:new Ct(A,zt.EMPTY_NODE)},MAX:{value:new Ct(I,qt)}}),St.__EMPTY_NODE=zt.EMPTY_NODE,It.__childrenNodeConstructor=zt,V=qt,q=qt;var Ht=!0;function $t(t,e){if(void 0===e&&(e=null),null===t)return zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),a.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new It(t,$t(e));if(t instanceof Array||!Ht){var n=zt.EMPTY_NODE;return M(t,function(e,r){if(a.contains(t,e)&&"."!==e.substring(0,1)){var i=$t(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority($t(e))}var r=[],i=!1;if(M(t,function(t,e){if("."!==t.substring(0,1)){var n=$t(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ct(t,n)))}}),0==r.length)return zt.EMPTY_NODE;var o=Ft(r,Vt,function(t){return t.name},Ut);if(i){var s=Ft(r,Dt.getCompare());return new zt(o,$t(e),new Bt({".priority":s},{".priority":Dt}))}return new zt(o,$t(e),Bt.Default)}z=$t;var Wt,Jt,Gt,Qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?D(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return Ct.MAX},e.prototype.makePost=function(t,e){var n=$t(t);return new Ct(e,n)},e.prototype.toString=function(){return".value"},e}(Et)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,a.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return s.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=$t(t),r=zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},e.prototype.maxPost=function(){var t=zt.EMPTY_NODE.updateChild(this.indexPath_,qt);return new Ct(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Et),Yt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return a.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return a.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return a.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return a.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){a.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new X(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Dt)},t.prototype.hasChild=function(t){a.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return a.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(a.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),a.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Dt))})},t.prototype.hasChildren=function(){return a.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return a.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return a.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Xt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+a.stringify(this.snapshot.exportVal())},t}(),Zt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),te=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new Yt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),ee=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return a.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zt(this,t,e):null},t.prototype.createEvent=function(t,e){a.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Xt(t.type,this,new Yt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ne=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Tt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Dt){if(null!=e&&!lt(e)||null!=n&&!lt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(a.assert(t.getIndex()instanceof Kt||t.getIndex()===Qt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return a.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){a.validateArgCount("Query.on",2,4,arguments.length),ft("Query.on",1,e,!1),a.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new te(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new ee(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){a.validateArgCount("Query.off",0,3,arguments.length),ft("Query.off",1,t,!0),a.validateCallback("Query.off",2,e,!0),a.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new te(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new ee(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;a.validateArgCount("Query.once",1,4,arguments.length),ft("Query.once",1,e,!1),a.validateCallback("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),l=!0,u=new a.Deferred;u.promise.catch(function(){});var c=function(t){l&&(l=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(a.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(a.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(a.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Kt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){a.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Tt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){a.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Dt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){a.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.startAt",0,2,arguments.length),ut("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.endAt",0,2,arguments.length),ut("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(a.validateArgCount("Query.equalTo",1,2,arguments.length),ut("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return a.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return a.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(a.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,a.validateCallback(t,3,r.cancel,!0),r.context=n,a.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(a.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),re=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Dt,function(t,e){n.remember(new X(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new X(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),ie=function(t,e){return t&&"object"==typeof t?(a.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},oe=function(t,e){var n,r=t.getPriority().val(),i=ie(r,e);if(t.isLeafNode()){var o=t,s=ie(o.getValue(),e);return s!==o.getValue()||i!==o.getPriority().val()?new It(s,$t(i)):t}var a=t;return n=a,i!==a.getPriority().val()&&(n=n.updatePriority(new It(i))),a.forEachChild(Dt,function(t,r){var i=oe(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n},se=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ae=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,a.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=se.ACK_USER_WRITE,this.source=ae.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return a.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ue=function(){return Jt||(Jt=new Rt(P)),Jt},ce=function(){function t(t,e){void 0===e&&(e=ue()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return M(e,function(t,e){n=n.set(new X(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),he=function(){function t(t,e){this.source=t,this.path=e,this.type=se.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=se.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),fe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=se.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new de(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return a.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),pe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ge=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new pe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new pe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new pe(zt.EMPTY_NODE,!1,!1),new pe(zt.EMPTY_NODE,!1,!1)),t}(),me=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){a.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(me.childRemovedChange(e,s)):a.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(me.childAddedChange(e,n)):o.trackChildChange(me.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Dt,function(t,r){e.hasChild(t)||n.trackChildChange(me.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Dt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me.childChangedChange(e,r,i))}else n.trackChildChange(me.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;a.assert(e==me.CHILD_ADDED||e==me.CHILD_CHANGED||e==me.CHILD_REMOVED,"Only child changes supported for tracking"),a.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e==me.CHILD_ADDED&&i==me.CHILD_REMOVED)this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e==me.CHILD_REMOVED&&i==me.CHILD_ADDED)this.changeMap.delete(n);else if(e==me.CHILD_REMOVED&&i==me.CHILD_CHANGED)this.changeMap.set(n,me.childRemovedChange(n,r.oldSnap));else if(e==me.CHILD_CHANGED&&i==me.CHILD_ADDED)this.changeMap.set(n,me.childAddedChange(n,t.snapshotNode));else{if(e!=me.CHILD_CHANGED||i!=me.CHILD_CHANGED)throw a.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ye=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),we=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new pe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),_e=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),ke=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){a.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),a.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,l=new ve;if(n.type===se.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,l):(a.assert(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,l))}else if(n.type===se.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,l):(a.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,l))}else if(n.type===se.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,l):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,l)}else{if(n.type!==se.LISTEN_COMPLETE)throw a.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,l)}var d=l.getChanges();return t.maybeAddValueEvent_(e,o,d),new _e(o,d)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,l=void 0;if(e.isEmpty())if(a.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=n.calcCompleteEventChildren(u instanceof zt?u:zt.EMPTY_NODE);s=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var d=e.getFront();if(".priority"==d){a.assert(1==e.getLength(),"Can't have a priority with additional path components");var f=o.getNode();l=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,f,l);s=null!=p?this.filter_.updatePriority(f,p):o.getNode()}else{var g=e.popFront(),m=void 0;if(o.isCompleteForChild(d)){l=t.getServerCache().getNode();var b=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l);m=null!=b?o.getNode().getImmediateChild(d).updateChild(g,b):o.getNode().getImmediateChild(d)}else m=n.calcCompleteChild(d,t.getServerCache());s=null!=m?this.filter_.updateChild(o.getNode(),d,m,g,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,l=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){var c=l.getNode().updateChild(e,n);a=u.updateFullNode(l.getNode(),c,null)}else{var h=e.getFront();if(!l.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),f=l.getNode().getImmediateChild(h).updateChild(d,n);a=".priority"==h?u.updatePriority(l.getNode(),f):u.updateChild(l.getNode(),h,f,d,ye,null)}var p=t.updateServerSnap(a,l.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),g=new we(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,l=t.getEventCache(),u=new we(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var c=e.getFront();if(".priority"===c)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,l.isFullyInitialized(),l.isFiltered());else{var h=e.popFront(),d=l.getNode().getImmediateChild(c),f=void 0;if(h.isEmpty())f=n;else{var p=u.getCompleteChild(c);f=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):zt.EMPTY_NODE}if(d.equals(f))s=t;else{var g=this.filter_.updateChild(l.getNode(),c,f,h,u,o);s=t.updateEventSnap(g,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,l=e;return r.foreach(function(r,u){var c=n.child(r);t.cacheHasChild_(e,c.getFront())&&(l=a.applyUserOverwrite_(l,c,u,i,o,s))}),r.foreach(function(r,u){var c=n.child(r);t.cacheHasChild_(e,c.getFront())||(l=a.applyUserOverwrite_(l,c,u,i,o,s))}),l},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var l,u=t;l=e.isEmpty()?n:ce.Empty.setTree(e,n);var c=t.getServerCache().getNode();return l.children.inorderTraversal(function(e,n){if(c.hasChild(e)){var l=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(l,n);u=a.applyServerOverwrite_(u,new X(e),h,r,i,o,s)}}),l.children.inorderTraversal(function(e,n){var l=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!c.hasChild(e)&&!l){var h=t.getServerCache().getNode().getImmediateChild(e),d=a.applyMerge_(h,n);u=a.applyServerOverwrite_(u,new X(e),d,r,i,o,s)}}),u},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var l=ce.Empty;return a.getNode().forEachChild(Tt,function(t,e){l=l.set(new X(t),e)}),this.applyServerMerge_(t,e,l,r,i,s,o)}return t}var u=ce.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(u=u.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,u,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ye,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new we(n,t,r),l=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();a.assert(h instanceof zt,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}u=this.filter_.updateFullNode(l,c=c,i)}else{var d=e.getFront(),f=n.calcCompleteChild(d,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(d)&&(f=l.getImmediateChild(d)),(u=null!=f?this.filter_.updateChild(l,d,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(l,d,zt.EMPTY_NODE,e.popFront(),s,i):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Ce=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===me.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(me.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,me.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,me.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,me.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,me.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,me.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw a.assertionError("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ee=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new be(n.getIndex()),i=n.getNodeFilter();this.processor_=new ke(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(zt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(zt.EMPTY_NODE,s.getNode(),null),u=new pe(a,o.isFullyInitialized(),r.filtersNodes()),c=new pe(l,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ge(c,u),this.eventGenerator_=new Ce(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){a.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===se.MERGE&&null!==t.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),a.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),a.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Dt,function(t,e){n.push(me.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(me.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Se=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(Gt,"Reference.ts has not been loaded"),Gt},set:function(t){a.assert(!Gt,"__referenceConstructor has already been defined"),Gt=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var l=this.views.get(o);return a.assert(null!=l,"SyncTree gave us an op for an invalid query."),l.applyOperation(t,e,n)}var u=[];try{for(var c=s.__values(this.views.values()),h=c.next();!h.done;h=c.next())u=u.concat((l=h.value).applyOperation(t,e,n))}catch(d){r={error:d}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),l=!1;a?l=!0:r instanceof zt?(a=n.calcCompleteEventChildren(r),l=!1):(a=zt.EMPTY_NODE,l=!1);var u=new ge(new pe(a,l,!1),new pe(r,i,!1));s=new Ee(t,u),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),l=[],u=[],c=this.hasCompleteView();if("default"===a)try{for(var h=s.__values(this.views.entries()),d=h.next();!d.done;d=h.next()){var f,p=s.__read(d.value,2),g=p[0];u=u.concat((f=p[1]).removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(g),f.getQuery().getQueryParams().loadsAllData()||l.push(f.getQuery()))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(f=this.views.get(a))&&(u=u.concat(f.removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(a),f.getQuery().getQueryParams().loadsAllData()||l.push(f.getQuery())));return c&&!this.hasCompleteView()&&l.push(new t.__referenceConstructor(e.repo,e.path)),{removed:l,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=s.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=s.__values(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=s.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Te=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ce(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=X.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new ce(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return M(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ce.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Dt,function(e,n){t.push(new Ct(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ct(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ce(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(a.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(X.Empty,this.writeTree_,t)},t.Empty=new t(new ce(null)),t}(),xe=function(){function t(){this.visibleWrites_=Te.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ae(t,this)},t.prototype.addOverwrite=function(t,e,n,r){a.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){a.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});a.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var l=this.allWrites_[s];l.visible&&(s>=n&&this.recordContainsPath_(l,r.path)?i=!1:r.path.contains(l.path)&&(o=!0)),s--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):M(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||zt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(X.Empty)?a.apply(n||zt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=zt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Dt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Dt,function(t,e){var r=i.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){a.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),l=a.getCompleteNode(X.Empty);if(null!=l)s=l;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=h.getNext();d&&u.length<r;)0!==c(d,n)&&u.push(d),d=h.getNext();return u},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Te.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,l=void 0;if(o.snap)n.contains(s)?(l=X.relativePath(n,s),r=r.addWrite(l,o.snap)):s.contains(n)&&(l=X.relativePath(s,n),r=r.addWrite(X.Empty,o.snap.getChild(l)));else{if(!o.children)throw a.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))l=X.relativePath(n,s),r=r.addWrites(l,o.children);else if(s.contains(n))if((l=X.relativePath(s,n)).isEmpty())r=r.addWrites(X.Empty,o.children);else{var u=a.safeGet(o.children,l.getFront());if(u){var c=u.getChild(l.popFront());r=r.addWrite(X.Empty,c)}}}}}return r},t}(),Ae=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ie=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ce.Empty,this.pendingWriteTree_=new xe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new de(ae.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ce.fromObject(e);return this.applyOperationToSyncPoints_(new fe(ae.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ce.Empty;return null!=n.snap?r=r.set(X.Empty,!0):M(n.children,function(t,e){r=r.set(new X(t),e)}),this.applyOperationToSyncPoints_(new le(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new de(ae.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ce.fromObject(e);return this.applyOperationToSyncPoints_(new fe(ae.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new he(ae.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,l=X.relativePath(s,e),u=new de(ae.forServerTaggedQuery(a),l,n);return this.applyTaggedOperation_(s,u)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,l=X.relativePath(s,e),u=ce.fromObject(n),c=new fe(ae.forServerTaggedQuery(a),l,u);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=X.relativePath(o,e),l=new he(ae.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,l)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=X.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var s,l=this.syncPointTree_.get(r);l?(o=o||l.hasCompleteView(),i=i||l.getCompleteServerCache(X.Empty)):(l=new Se,this.syncPointTree_=this.syncPointTree_.set(r,l)),null!=i?s=!0:(s=!1,i=zt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(t,n))}));var u=l.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);a.assert(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var d=this.pendingWriteTree_.childWrites(r),f=l.addEventRegistration(e,n,d,i,s);if(!u&&!o){var p=l.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var l=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var u=l.removed;a=l.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(c&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var g=f[p],m=g.getQuery(),b=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(m),this.tagForQuery_(m),b.hashFn,b.onComplete)}}!h&&u.length>0&&!r&&(c?this.listenProvider_.stopListening(t.queryForListening_(e),null):u.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(u)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=X.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),M(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),l=this.syncPointTree_.subtree(r);if(i)a.assert(!l.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=l.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),M(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return a.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);a.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){var u=n?n.getImmediateChild(s):null,c=r.child(s);o=o.concat(this.applyOperationHelper_(a,l,u,c))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,l=r.child(e),u=t.operationForChild(e);u&&(s=s.concat(i.applyOperationDescendantsHelper_(u,o,a,l)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Pe=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Oe=function(){return function(t){this.accessToken=t}}(),Ne=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return Promise.resolve(new Oe("owner"))},t.prototype.addTokenChangeListener=function(t){},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){T('Database emulator unexpectedly rejected fake "owner" credentials.')},t}(),Re=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),a.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return a.deepCopy(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Re),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Le=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s.__assign({},t);return this.last_&&M(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Fe=1e4,je=3e4,Be=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Le(t);var n=Fe+(je-Fe)*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;M(e,function(e,i){i>0&&a.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ve=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ue(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ue=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&k("event: "+e.toString()),Q(n)}}},t.prototype.getPath=function(){return this.path_},t}(),ze=function(){function t(t){this.allowedEvents_=t,this.listeners_={},a.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=s.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){a.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),qe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ze),He=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ze),$e=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Q(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),We="pLPCommand",Je="pRTLPCB",Ge=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL(tt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new $e(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(a.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Qe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s.__read(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s.__read(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!a.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!a.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=a.base64Encode(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=a.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window[We+this.uniqueCallbackIdentifier]=e,window[Je+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(l){k("frame writing exception"),l.stack&&k(l.stack),k(l)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||k("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),a.isNodeSdk()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;a.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Ke="",Ye=null;"undefined"!=typeof MozWebSocket?Ye=MozWebSocket:"undefined"!=typeof WebSocket&&(Ye=WebSocket);var Xe=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!a.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(a.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+Ke+"/"+process.platform+"/"+(a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},i=process.env,o=0==this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Ye(this.connURL,[],r)}else this.mySock=new Ye(this.connURL)}catch(l){this.log_("Error instantiating WebSocket.");var s=l.message||l.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ye&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=a.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(a.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ze=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ge,Xe]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Xe&&Xe.isAvailable(),o=i&&!Xe.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Xe];else{var a=this.transports_=[];try{for(var l=s.__values(t.ALL_TRANSPORTS),u=l.next();!u.done;u=l.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),tn=function(){function t(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new Ze(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Y(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=O("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),en=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),nn=1e3,rn=3e5,on=function(t){function e(n,r,i,o,s,l){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=s,u.authOverride_=l,u.id=e.nextPersistentConnectionId_++,u.log_=C("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=nn,u.maxReconnectDelay_=rn,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,l&&!a.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),qe.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&He.getInstance().on("online",u.onOnline_,u),u}return s.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(a.stringify(i)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,l=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==l&&n.removeListen_(i,o),t.onComplete&&t.onComplete(l,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&a.contains(t,"w")){var n=a.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||a.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=a.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+a.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+a.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,l=!1,u=null,c=function(){u?u.close():(l=!0,r())};this.realtime_={close:c,sendRequest:function(t){a.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){l?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new tn(i,o.repoInfo_,t,n,r,function(t){T(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),l||(a.CONSTANTS.NODE_ADMIN&&T(t),c())})}},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new X(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=s.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var l=(n=void 0,s.__values(a.values())),u=l.next();!u.done;u=l.next())this.sendListen_(u.value)}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";a.CONSTANTS.NODE_ADMIN?e="admin_node":a.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+Ke.replace(/\./g,"-")]=1,a.isMobileCordova()?t["framework.cordova"]=1:a.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=He.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(en),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=C("p:rest:"),i.listens_={},i}return s.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(a.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var l=e.getListenId_(t,r),u={};this.listens_[l]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),a.safeGet(o.listens_,l)===u&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+a.querystring(e);r.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=a.jsonEval(l.responseText)}catch(e){T("Failed to parse JSON response for "+s+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&T("Got unsuccessful REST response for "+s+" Status: "+l.status),n(l.status);n=null}},l.open("GET",s,!0),l.send()})},e}(en),an=function(){function t(t,e,n){var r,i=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new re,this.persistentConnection_=null,r="undefined"!=typeof process&&process.env[g]?new Ne(n):new Pe(n),this.stats_=Me.getCollection(t),e||K())this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(o)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}this.persistentConnection_=new on(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){i.server_.refreshAuthToken(t)}),this.statsReporter_=Me.getOrCreateReporter(t,function(){return new Be(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new De,this.infoSyncTree_=new Ie({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ie({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=a.map(e,function(t){return $t(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var l=$t(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,l,r)}else if(n){var u=a.map(e,function(t){return $t(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=$t(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;M(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),r=$t(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=$t(e,n),a=oe(s,o),l=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(t,a,l,!0);this.eventQueue_.queueEvents(u),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(l,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var c=this.abortTransactions_(t);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(M(e,function(t,e){i=!1;var n=$t(e);s[t]=oe(n,o)}),i)k("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(l),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||T("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),l=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(l,s),r.callOnCompleteCallback(n,e,i)}),M(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new re;return t.forEachTree(new X(""),function(t,r){n.remember(t,oe(r,e))}),n}(this.onDisconnect_,e),r=[];n.forEachTree(X.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new re,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=$t(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=$t(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(a.isEmpty(e))return k("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&M(e,function(e,n){var i=$t(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Le(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);M(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),k.apply(void 0,s.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Q(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!0,configurable:!0}),t}(),ln=function(){function t(e){this.indexedFilter_=new be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(zt.EMPTY_NODE);var i=this;return e.forEachChild(Dt,function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),un=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zt.EMPTY_NODE);var a=void 0,l=void 0,u=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();u=function(t,e){return c(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&u(a,s)<=0&&(h=!0),h&&o<this.limit_&&u(s,l)<=0?o++:r=r.updateImmediateChild(s.name,zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var l=t;a.assert(l.numChildren()==this.limit_,"");var u=new Ct(e,n),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(l.hasChild(e)){for(var d=l.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||l.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me.childChangedChange(e,n,d)),l.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me.childRemovedChange(e,d));var g=l.updateImmediateChild(e,zt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(me.childAddedChange(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(me.childRemovedChange(c.name,c.node)),i.trackChildChange(me.childAddedChange(e,n))),l.updateImmediateChild(e,n).updateImmediateChild(c.name,zt.EMPTY_NODE)):t},t}(),cn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return a.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Dt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Dt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new be(this.getIndex()):this.hasLimit()?new un(this):new ln(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Dt?e=n.PRIORITY_INDEX:this.index_===Qt?e=n.VALUE_INDEX:this.index_===Tt?e=n.KEY_INDEX:(a.assert(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=a.stringify(e),this.startSet_&&(r[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+a.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),hn=function(t){function e(e,n){if(!(e instanceof an))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,cn.DEFAULT,!1)||this}return s.__extends(e,t),e.prototype.getKey=function(){return a.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return a.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?mt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){a.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){a.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){a.validateArgCount("Reference.set",1,2,arguments.length),bt("Reference.set",this.path),ut("Reference.set",1,t,this.path,!1),a.validateCallback("Reference.set",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(a.validateArgCount("Reference.update",1,2,arguments.length),bt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),a.validateCallback("Reference.update",2,e,!0);var i=new a.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(a.validateArgCount("Reference.setWithPriority",2,3,arguments.length),bt("Reference.setWithPriority",this.path),ut("Reference.setWithPriority",1,t,this.path,!1),dt("Reference.setWithPriority",2,e,!1),a.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new a.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return a.validateArgCount("Reference.remove",0,1,arguments.length),bt("Reference.remove",this.path),a.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(a.validateArgCount("Reference.transaction",1,3,arguments.length),bt("Reference.transaction",this.path),a.validateCallback("Reference.transaction",1,t,!1),a.validateCallback("Reference.transaction",2,e,!0),yt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new a.Deferred;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){a.validateArgCount("Reference.setPriority",1,2,arguments.length),bt("Reference.setPriority",this.path),dt("Reference.setPriority",1,t,!1),a.validateCallback("Reference.setPriority",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){a.validateArgCount("Reference.push",0,2,arguments.length),bt("Reference.push",this.path),ut("Reference.push",1,t,this.path,!0),a.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=kt(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return bt("Reference.onDisconnect",this.path),new wt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(ne);ne.__referenceConstructor=hn,Se.__referenceConstructor=hn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),fn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new dn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof X?e:new X(e),i=this;null!==(n=r.getFront());)i=new t(n,i,a.safeGet(i.node_.children,n)||new dn),r=r.popFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){a.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;M(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=a.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),pn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});an.MAX_TRANSACTION_RETRIES_=25,an.prototype.transactions_init_=function(){this.transactionQueueTree_=new fn},an.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new hn(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:m(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=this.getLatestState_(t);s.currentInputSnapshot=l;var u=s.update(l.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Yt(s.currentInputSnapshot,new hn(this,s.path),Dt);s.onComplete(null,!1,c)}}else{ct("transaction failed: Data returned ",u,s.path),s.status=pn.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(s),h.setValue(d);var f=void 0;"object"==typeof u&&null!==u&&a.contains(u,".priority")?(f=a.safeGet(u,".priority"),a.assert(lt(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||zt.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),g=$t(u,f),b=oe(g,p);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=b,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,b,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},an.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zt.EMPTY_NODE},an.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);a.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===pn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},an.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,s=i.hash(),l=0;l<e.length;l++){var u=e[l];a.assert(u.status===pn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=pn.SENT,u.retryCount++;var c=X.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),d=t;this.server_.put(d.toString(),h,function(r){n.log_("transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=pn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,l=new hn(n,e[s].path),u=new Yt(a,l,Dt);o.push(e[s].onComplete.bind(null,null,!0,u))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)Q(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===pn.SENT_NEEDS_ABORT?pn.NEEDS_ABORT:pn.RUN;else for(T("transaction at "+d.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=pn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},s)},an.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},an.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===pn.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s=t[o],l=X.relativePath(e,s.path),u=!1,c=void 0;if(a.assert(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===pn.NEEDS_ABORT)u=!0,c=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===pn.RUN)if(s.retryCount>=an.MAX_TRANSACTION_RETRIES_)u=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,i);s.currentInputSnapshot=h;var d=t[o].update(h.val());if(void 0!==d){ct("transaction failed: Data returned ",d,s.path);var f=$t(d);"object"==typeof d&&null!=d&&a.contains(d,".priority")||(f=f.updatePriority(h.getPriority()));var p=s.currentWriteId,g=this.generateServerValues(),m=oe(f,g);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,m,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else u=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],u&&(t[o].status=pn.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===c){var b=new hn(this,t[o].path),v=new Yt(t[o].currentInputSnapshot,b,Dt);n.push(t[o].onComplete.bind(null,null,!1,v))}else n.push(t[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)Q(n[o]);this.sendReadyTransactions_()}},an.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},an.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},an.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},an.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==pn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},an.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},an.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===pn.SENT_NEEDS_ABORT||(e[o].status===pn.SENT?(a.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=pn.SENT_NEEDS_ABORT,e[o].abortReason="set"):(a.assert(e[o].status===pn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Q(n[o])}};var gn,mn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&S("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=nt(n),i=r.repoInfo,o=void 0;return"undefined"!=typeof process&&(o=process.env[g]),o&&(i=(r=nt(n="http://"+o+"?ns="+i.namespace)).repoInfo),vt("Invalid Firebase Database URL",1,r),r.path.isEmpty()||S("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=a.safeGet(this.repos_,t.app.name);e&&a.safeGet(e,t.repoInfo_.toURLString())===t||S("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=a.safeGet(this.repos_,e.name);n||(this.repos_[e.name]=n={});var r=a.safeGet(n,t.toURLString());return r&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new an(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){this.repo_=t,t instanceof an||S("Don't call new Database() directly - please use firebase.database()."),this.root_=new hn(t,X.Empty),this.INTERNAL=new vn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),a.validateArgCount("database.ref",0,1,arguments.length),t instanceof hn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),a.validateArgCount(e,1,1,arguments.length);var n=nt(t);vt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){a.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){a.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),vn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.database.checkDeleted_("delete"),mn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),yn=Object.freeze({forceLongPolling:function(){Xe.forceDisallow(),Ge.forceAllow()},forceWebSockets:function(){Ge.forceDisallow()},isWebSocketsAvailable:function(){return Xe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),wn=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var _n=Object.freeze({DataConnection:wn,RealTimeConnection:tn,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:et,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){mn.getInstance().forceRestClient(t)}}),kn=bn.ServerValue;function Cn(e){Ke=e.SDK_VERSION;var n=e.INTERNAL.registerService("database",function(t,e,n){return mn.getInstance().databaseFromApp(t,n)},{Reference:hn,Query:ne,Database:bn,DataSnapshot:Yt,enableLogging:_,INTERNAL:yn,ServerValue:kn,TEST_ACCESS:_n},null,!0);a.isNodeSdk()&&(t.exports=n)}Cn(o),e.DataSnapshot=Yt,e.Database=bn,e.OnDisconnect=wt,e.Query=ne,e.Reference=hn,e.ServerValue=kn,e.enableLogging=_,e.registerDatabase=Cn},OoTa:function(t,e,n){"use strict";n.d(e,"a",function(){return w}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return y}),n.d(e,"e",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o});const r=t=>o(t),i=(t,e)=>("string"==typeof t&&(e=t,t=void 0),r(t).includes(e)),o=(t=window)=>{t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=s(t)).forEach(e=>t.document.documentElement.classList.add(`plt-${e}`)),e},s=t=>Object.keys(g).filter(e=>g[e](t)),a=t=>f(t,/iPad/i),l=t=>f(t,/android|sink/i),u=t=>p(t,"(any-pointer:coarse)"),c=t=>h(t)||d(t),h=t=>!!(t.cordova||t.phonegap||t.PhoneGap),d=t=>{const e=t.Capacitor;return!(!e||!e.isNative)},f=(t,e)=>!(!t.navigator||!t.navigator.userAgent)&&e.test(t.navigator.userAgent),p=(t,e)=>!!t.matchMedia&&t.matchMedia(e).matches,g={ipad:a,iphone:t=>f(t,/iPhone/i),ios:t=>f(t,/iPad|iPhone|iPod/i),android:l,phablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},tablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return a(t)||(t=>l(t)&&!f(t,/mobile/i))(t)||r>460&&r<820&&i>780&&i<1400},cordova:h,capacitor:d,electron:t=>f(t,/electron/i),pwa:t=>!!t.matchMedia&&(t.matchMedia("(display-mode: standalone)").matches||t.navigator.standalone),mobile:u,mobileweb:t=>u(t)&&!c(t),desktop:t=>!u(t),hybrid:c};class m{constructor(){this.m=new Map}reset(t){this.m=new Map(Object.entries(t))}get(t,e){const n=this.m.get(t);return void 0!==n?n:e}getBoolean(t,e=!1){const n=this.m.get(t);return void 0===n?e:"string"==typeof n?"true"===n:!!n}getNumber(t,e){const n=parseFloat(this.m.get(t));return isNaN(n)?void 0!==e?e:NaN:n}set(t,e){this.m.set(t,e)}}const b=new m,v=t=>{try{const n=t.sessionStorage.getItem(C);return null!==n?JSON.parse(n):{}}catch(e){return{}}},y=(t,e)=>{try{t.sessionStorage.setItem(C,JSON.stringify(e))}catch(n){return}},w=t=>{const e={};return t.location.search.slice(1).split("&").map(t=>t.split("=")).map(([t,e])=>[decodeURIComponent(t),decodeURIComponent(e)]).filter(([t])=>_(t,k)).map(([t,e])=>[t.slice(k.length),e]).forEach(([t,n])=>{e[t]=n}),e},_=(t,e)=>t.substr(0,e.length)===e,k="ionic:",C="ionic-persist-config"},Ovnn:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("ZZ/e");var r=n("s7LF"),i=(n("ajt+"),n("gRsD"));class o{constructor(t,e,n,i){this.fb=t,this.modalCtrl=e,this.navParams=n,this.db=i;let o=this.navParams.get("url")||"";this.myForm=this.fb.group({isOnLocalImageInput:[null],url:[o,r.o.required],file:[null]})}ngOnInit(){}isOnLocalImageInput(){return this.myForm.get("isOnLocalImageInput").value}submit(t){t||(this.dataToBeDismissed=i.a.getAlreadyUploadedImage(this.myForm.get("url").value)),this.modalCtrl.dismiss(this.dataToBeDismissed)}cancel(){this.modalCtrl.dismiss()}onFileChange(t){const e=t.target.files[0];var n=new FileReader;n.readAsDataURL(e),n.onload=t=>{if(t&&t.target&&t.target.result){const n=t.target.result.toString();this.dataToBeDismissed=i.a.getLocalImage(n,e),this.myForm.get("url").setValue(t.target.result),this.myForm.get("file").setValue(e)}}}}},PVcy:function(t,e,n){"use strict";function r(t){return null==t}function i(t){return"function"==typeof t.set}function o(t,e){return i(e)?e:t.ref(e)}function s(t,e){if("string"==typeof t)return e.stringCase();if(i(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}n("mrSG");var a=n("HDdC"),l=n("lJxs"),u=n("3N8a");const c=new(n("IjjT").a)(u.a);var h=n("7o/Q"),d=n("EY2u"),f=n("LRne");let p=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(f.a)(this.value);case"E":return t=this.error,new a.a(e=>e.error(t));case"C":return Object(d.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class g{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new m(t,this.delay,this.scheduler))}}class m extends h.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(m.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new b(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(p.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(p.createComplete()),this.unsubscribe()}}class b{constructor(t,e){this.time=t,this.notification=e}}var v=n("w1tV");function y(t,e,n="on"){return new a.a(r=>{const i=t[n](e,(t,e)=>{r.next({snapshot:t,prevKey:e}),"once"==n&&r.complete()},r.error.bind(r));return"on"==n?{unsubscribe(){t.off(e,i)}}:{unsubscribe(){}}}).pipe(Object(l.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),function(t,e=c){const n=0 instanceof Date&&!isNaN(0)?0-e.now():Math.abs(0);return t=>t.lift(new g(n,e))}(),Object(v.a)())}var w=n("VRyK"),_=n("eIep"),k=n("Kqap"),C=n("/uUt");function E(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function S(t,e){const{payload:n,prevKey:i,key:o}=e,s=E(t,o),a=function(t,e){if(r(e))return 0;{const n=E(t,e);return-1===n?t.length:n+1}}(t,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(s>-1){const r=t[s-1];(r&&r.key||null)!=i&&(t=t.filter(t=>t.payload.key!==n.key)).splice(a,0,e)}else{if(null==i)return[e,...t];(t=t.slice()).splice(a,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===o?e:t);case"child_moved":if(s>-1){const e=t.splice(s,1)[0];return(t=t.slice()).splice(a,0,e),t}return t;default:return t}}function T(t){return(r(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function x(t,e){return function(t,e){return y(t,"value","once").pipe(Object(_.a)(n=>{const r=[Object(f.a)(n)];return e.forEach(e=>r.push(y(t,e))),Object(w.a)(...r).pipe(Object(k.a)(S,[]))}),Object(C.a)())}(t,e=T(e))}function A(t,e){const n=(e=T(e)).map(e=>y(t,e));return Object(w.a)(...n)}var I=n("l7GE"),D=n("ZUHj");class P{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new O(t,this.observables,this.project))}}class O extends I.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(D.a)(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class N{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new R(t,this.predicate))}}class R extends h.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const n=this.predicate(t,this.index++);this.skipping=Boolean(n)}catch(e){this.destination.error(e)}}}function M(t,e){return function(n,r){return s(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function L(t){return function(){return y(t,"value")}}var F=n("1XSQ"),j=n("yA/v");n.d(e,"a",function(){return B});let B=(()=>(class{constructor(t,e,n,r,i){this.scheduler=new F.a(i,r),this.database=i.runOutsideAngular(()=>Object(j.e)(t,e).database(n||void 0))}list(t,e){const n=o(this.database,t);let r=n;return e&&(r=e(n)),function(t,e){return{query:t,update:M(t.ref,"update"),set:M(t.ref,"set"),push:e=>t.ref.push(e),remove:(n=t.ref,function(t){return t?s(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}),snapshotChanges(n){const r=x(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r))},stateChanges(n){const r=A(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r))},auditTrail(n){const r=function(t,e){return function(t,e){return function(t){return y(t,"value").pipe(Object(l.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new P(t,n))}}(e),Object(l.a)(([t,e])=>{let n=t.lastKeyToLoad;const r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(n=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new N(n))),Object(l.a)(t=>t.actions));var n}(t,A(t,e).pipe(Object(k.a)((t,e)=>[...t,e],[])))}(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r))},valueChanges(n){const r=x(t,n);return e.scheduler.keepUnstableUntilFirst(e.scheduler.runOutsideAngular(r)).pipe(Object(l.a)(t=>t.map(t=>t.payload.val())))}};var n}(r,this)}object(t){const e=o(this.database,t);return r=this,{query:n=e,snapshotChanges(){const t=L(n)();return r.scheduler.keepUnstableUntilFirst(r.scheduler.runOutsideAngular(t))},update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges(){const t=L(n)();return r.scheduler.keepUnstableUntilFirst(r.scheduler.runOutsideAngular(t)).pipe(Object(l.a)(t=>t.payload.exists()?t.payload.val():null))}};var n,r}createPushId(){return this.database.ref().push().key}}))()},PjcS:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});var r,i=n("8Y7J");!function(t){t.EditorConstructor=function(){},t.Config=function(){},t.EventInfo=function(){},t.BaseEditor=function(){},t.DataApi=function(){},t.Editor=function(){}}(r||(r={}));let o=(()=>(class{constructor(t,e){this.config={},this.data="",this.tagName="div",this.ready=new i.p,this.change=new i.p,this.blur=new i.p,this.focus=new i.p,this.editorInstance=null,this.initialIsDisabled=!1,this.isEditorSettingData=!1,this.ngZone=e,this.elementRef=t}set disabled(t){this.setDisabledState(t)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initialIsDisabled}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.createEditor()})}ngOnDestroy(){this.editorInstance&&(this.editorInstance.destroy(),this.editorInstance=null)}writeValue(t){null===t&&(t=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.setData(t),this.isEditorSettingData=!1):(this.data=t,this.editorElement&&(this.editorElement.innerHTML=this.data))}registerOnChange(t){this.cvaOnChange=t}registerOnTouched(t){this.cvaOnTouched=t}setDisabledState(t){this.editorInstance?this.editorInstance.isReadOnly=t:this.initialIsDisabled=t}createEditor(){const t=document.createElement(this.tagName);if(this.editorElement=t,this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const e=Object.assign({},this.config,{initialData:this.config.initialData||this.data||""});return this.elementRef.nativeElement.appendChild(t),this.editor.create(t,e).then(t=>{this.editorInstance=t,this.initialIsDisabled&&(t.isReadOnly=this.initialIsDisabled),this.ngZone.run(()=>{this.ready.emit(t)}),this.setUpEditorEvents(t)}).catch(t=>{console.error(t.stack)})}setUpEditorEvents(t){const e=t.editing.view.document;t.model.document.on("change:data",e=>{this.ngZone.run(()=>{if(this.cvaOnChange&&!this.isEditorSettingData){const e=t.getData();this.cvaOnChange(e)}this.change.emit({event:e,editor:t})})}),e.on("focus",e=>{this.ngZone.run(()=>{this.focus.emit({event:e,editor:t})})}),e.on("blur",e=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:e,editor:t})})})}}))(),s=(()=>(class{}))()},"Q+Hy":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("ajt+"),i=n("lJxs"),o=n("8Y7J");let s=(()=>{class t{constructor(t){this.db=t,this.defaultName="Anonymous",this.defaultPhotoUrl="assets/blank-profile-picture.png"}getUserProfile(t){return this.db.getObjectValues(`users/${t}`).pipe(Object(i.a)(t=>(t.name||(t.name=this.defaultName),t.photoUrl||(t.photoUrl=this.defaultPhotoUrl),t)))}}return t.ngInjectableDef=o.Wb({factory:function(){return new t(o.Xb(r.a))},token:t,providedIn:"root"}),t})()},"Rt+L":function(t,e,n){"use strict";n("KOl+")},S6Yj:function(t,e,n){"use strict";n.d(e,"a",function(){return G}),n.d(e,"b",function(){return V}),n.d(e,"c",function(){return xt}),n.d(e,"d",function(){return At}),n.d(e,"e",function(){return Nt}),n.d(e,"f",function(){return Pt}),n.d(e,"g",function(){return R}),n.d(e,"h",function(){return Rt}),n.d(e,"i",function(){return J}),n.d(e,"j",function(){return It}),n.d(e,"k",function(){return Et}),n.d(e,"l",function(){return Dt}),n.d(e,"m",function(){return _}),n.d(e,"n",function(){return M});var r=n("OoTa");let i,o,s,a=0,l=!1,u=!1,c=!1,h=!1,d=!1;const f=window,p=document,g={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r)},m=!!p.documentElement.attachShadow,b=(()=>{let t=!1;try{p.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),v=(()=>{try{return new CSSStyleSheet,!0}catch(t){}return!1})(),y=new WeakMap,w=t=>y.get(t),_=(t,e)=>y.set(e.$lazyInstance$=t,e),k=(t,e)=>e in t,C=t=>console.error(t),E=new Map,S=new Map,T=f.__stencil_cssshim,x=[],A=[],I=[],D=(t,e)=>n=>{t.push(n),l||(l=!0,e&&4&g.$flags$?N(O):g.raf(O))},P=(t,e)=>{let n=0,r=0;for(;n<t.length&&(r=performance.now())<e;)try{t[n++](r)}catch(i){C(i)}n===t.length?t.length=0:0!==n&&t.splice(0,n)},O=()=>{a++,(t=>{for(let n=0;n<t.length;n++)try{t[n](performance.now())}catch(e){C(e)}t.length=0})(x);const t=2==(6&g.$flags$)?performance.now()+10*Math.ceil(a*(1/22)):1/0;P(A,t),P(I,t),A.length>0&&(I.push(...A),A.length=0),(l=x.length+A.length+I.length>0)?g.raf(O):a=0},N=t=>Promise.resolve().then(t),R=D(x,!1),M=D(A,!0),L={},F=t=>null!=t,j=t=>t.toLowerCase(),B=t=>"object"==(t=typeof t)||"function"===t,V=()=>f.CSS&&f.CSS.supports&&f.CSS.supports("color","var(--c)")?Promise.resolve():n.e(26).then(n.t.bind(null,"WEgO",7)),U="http://www.w3.org/1999/xlink",z=new WeakMap,q=(t,e,n)=>{let r=S.get(t);v&&n?(r=r||new CSSStyleSheet).replace(e):r=e,S.set(t,r)},H=(t,e,n,r)=>{let i=$(e.$tagName$,n),o=S.get(i);if(t=11===t.nodeType?t:p,o||(i=$(e.$tagName$),o=S.get(i)),o)if("string"==typeof o){let n,s=z.get(t=t.head||t);if(s||z.set(t,s=new Set),!s.has(i)){if(t.host&&(n=t.firstElementChild)&&"STYLE"===n.tagName)n.innerHTML=o;else{if(T){const t=(n=T.createHostStyle(r,i,o,!!(10&e.$flags$)))["s-sc"];t&&(i=t,s=null)}else(n=p.createElement("style")).innerHTML=o;t.insertBefore(n,t.querySelector("link"))}s&&s.add(i)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return i},$=(t,e)=>"sc-"+(e?t+"-"+e:t),W=t=>t.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),J=(t,e,...n)=>{let r,i,o=null,s=!1,a=!1,l=[];const u=e=>{for(let n=0;n<e.length;n++)o=e[n],Array.isArray(o)?u(o):null!=o&&"boolean"!=typeof o&&((s="function"!=typeof t&&!B(o))&&(o=String(o)),s&&a?l[l.length-1].$text$+=o:l.push(s?{$flags$:0,$text$:o}:o),a=s)};if(u(n),e){r=e.key||void 0,i=e.name;{const t=e.className||e.class;t&&(e.class="object"!=typeof t?t:Object.keys(t).filter(e=>t[e]).join(" "))}}if("function"==typeof t)return t(e,l,Q);const c={$flags$:0,$tag$:t,$children$:l.length>0?l:null,$elm$:void 0,$attrs$:e};return c.$key$=r,c.$name$=i,c},G={},Q={forEach:(t,e)=>t.map(K).forEach(e),map:(t,e)=>t.map(K).map(e).map(Y)},K=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Y=t=>({$flags$:0,$attrs$:t.vattrs,$children$:t.vchildren,$key$:t.vkey,$name$:t.vname,$tag$:t.vtag,$text$:t.vtext}),X=(t,e,n,r,i,o)=>{if(n!==r)if("class"===e){const e=t.classList;Z(n).forEach(t=>e.remove(t)),Z(r).forEach(t=>e.add(t))}else if("style"===e){for(const e in n)r&&null!=r[e]||(e.includes("-")?t.style.removeProperty(e):t.style[e]="");for(const e in r)n&&r[e]===n[e]||(e.includes("-")?t.style.setProperty(e,r[e]):t.style[e]=r[e])}else if("key"===e);else if("ref"===e)r&&r(t);else if(e.startsWith("on")&&!k(t,e))e=k(t,j(e))?j(e.substring(2)):j(e[2])+e.substring(3),n&&g.rel(t,e,n,!1),r&&g.ael(t,e,r,!1);else{const n=k(t,e),a=B(r);if((n||a&&null!==r)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const n=null==r?"":r;t[e]!==n&&(t[e]=n)}}catch(s){}const l=!(!i||e===(e=e.replace(/^xlink\:?/,"")));null==r||!1===r?l?t.removeAttributeNS(U,j(e)):t.removeAttribute(e):(!n||4&o||i)&&!a&&(r=!0===r?"":r.toString(),l?t.setAttributeNS(U,j(e),r):t.setAttribute(e,r))}},Z=t=>t?t.split(/\s+/).filter(t=>t):[],tt=(t,e,n,r)=>{const i=11===e.$elm$.nodeType&&e.$elm$.host?e.$elm$.host:e.$elm$,o=t&&t.$attrs$||L,s=e.$attrs$||L;for(r in o)r in s||X(i,r,o[r],void 0,n,e.$flags$);for(r in s)X(i,r,o[r],s[r],n,e.$flags$)},et=(t,e,n,r)=>{let a,l,c,f=e.$children$[n],g=0;if(u||(h=!0,"slot"===f.$tag$&&(i&&r.classList.add(i+"-s"),f.$flags$|=f.$children$?2:1)),F(f.$text$))f.$elm$=p.createTextNode(f.$text$);else if(1&f.$flags$)f.$elm$=p.createTextNode("");else{if(a=f.$elm$=d||"svg"===f.$tag$?p.createElementNS("http://www.w3.org/2000/svg",f.$tag$):p.createElement(2&f.$flags$?"slot-fb":f.$tag$),tt(null,f,d="svg"===f.$tag$||"foreignObject"!==f.$tag$&&d),F(i)&&a["s-si"]!==i&&a.classList.add(a["s-si"]=i),f.$children$)for(g=0;g<f.$children$.length;++g)(l=et(t,f,g,a))&&a.appendChild(l);"svg"===f.$tag$?d=!1:"foreignObject"===f.$elm$.tagName&&(d=!0)}return f.$elm$["s-hn"]=s,3&f.$flags$&&(f.$elm$["s-sr"]=!0,f.$elm$["s-cr"]=o,f.$elm$["s-sn"]=f.$name$||"",(c=t&&t.$children$&&t.$children$[n])&&c.$tag$===f.$tag$&&t.$elm$&&nt(t.$elm$,!1)),f.$elm$},nt=(t,e)=>{g.$flags$|=1;const n=t.childNodes;for(let r=n.length-1;r>=0;r--){const t=n[r];t["s-hn"]!==s&&t["s-ol"]&&(at(t).insertBefore(t,st(t)),t["s-ol"].remove(),t["s-ol"]=void 0,h=!0),e&&nt(t,e)}g.$flags$&=-2},rt=(t,e,n,r,i,o)=>{let a,l=t["s-cr"]&&t["s-cr"].parentNode||t;for(l.shadowRoot&&j(l.tagName)===s&&(l=l.shadowRoot);i<=o;++i)r[i]&&(a=et(null,n,i,t))&&(r[i].$elm$=a,l.insertBefore(a,st(e)))},it=(t,e,n,r)=>{for(;e<=n;++e)F(t[e])&&(r=t[e].$elm$,dt(t[e],!0),c=!0,r["s-ol"]?r["s-ol"].remove():nt(r,!0),r.remove())},ot=(t,e)=>t.$tag$===e.$tag$&&("slot"===t.$tag$?t.$name$===e.$name$:t.$key$===e.$key$),st=t=>t&&t["s-ol"]||t,at=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,lt=(t,e)=>{const n=e.$elm$=t.$elm$,r=t.$children$,i=e.$children$;let o;d=n&&F(n.parentNode)&&void 0!==n.ownerSVGElement,d="svg"===e.$tag$||"foreignObject"!==e.$tag$&&d,F(e.$text$)?(o=n["s-cr"])?o.parentNode.textContent=e.$text$:t.$text$!==e.$text$&&(n.textContent=e.$text$):("slot"===e.$tag$||tt(t,e,d),F(r)&&F(i)?((t,e,n,r)=>{let i,o,s=0,a=0,l=0,u=0,c=e.length-1,h=e[0],d=e[c],f=r.length-1,p=r[0],g=r[f];for(;s<=c&&a<=f;)if(null==h)h=e[++s];else if(null==d)d=e[--c];else if(null==p)p=r[++a];else if(null==g)g=r[--f];else if(ot(h,p))lt(h,p),h=e[++s],p=r[++a];else if(ot(d,g))lt(d,g),d=e[--c],g=r[--f];else if(ot(h,g))"slot"!==h.$tag$&&"slot"!==g.$tag$||nt(h.$elm$.parentNode,!1),lt(h,g),t.insertBefore(h.$elm$,d.$elm$.nextSibling),h=e[++s],g=r[--f];else if(ot(d,p))"slot"!==h.$tag$&&"slot"!==g.$tag$||nt(d.$elm$.parentNode,!1),lt(d,p),t.insertBefore(d.$elm$,h.$elm$),d=e[--c],p=r[++a];else{for(l=-1,u=s;u<=c;++u)if(e[u]&&F(e[u].$key$)&&e[u].$key$===p.$key$){l=u;break}l>=0?((o=e[l]).$tag$!==p.$tag$?i=et(e&&e[a],n,l,t):(lt(o,p),e[l]=void 0,i=o.$elm$),p=r[++a]):(i=et(e&&e[a],n,a,t),p=r[++a]),i&&at(h.$elm$).insertBefore(i,st(h.$elm$))}s>c?rt(t,null==r[f+1]?null:r[f+1].$elm$,n,r,a,f):a>f&&it(e,s,c)})(n,r,e,i):F(i)?(F(t.$text$)&&(n.textContent=""),rt(n,null,e,i,0,i.length-1)):F(r)&&it(r,0,r.length-1)),d&&"svg"===e.$tag$&&(d=!1)},ut=(t,e,n,r,i,o,s,a)=>{for(r=0,i=(n=t.childNodes).length;r<i;r++)if(1===(e=n[r]).nodeType){if(e["s-sr"])for(s=e["s-sn"],e.hidden=!1,o=0;o<i;o++)if(n[o]["s-hn"]!==e["s-hn"])if(a=n[o].nodeType,""!==s){if(1===a&&s===n[o].getAttribute("slot")){e.hidden=!0;break}}else if(1===a||3===a&&""!==n[o].textContent.trim()){e.hidden=!0;break}ut(e)}},ct=[],ht=t=>{let e,n,r,i,o=t.childNodes,s=o.length,a=0,l=0,u=0;for(s=o.length;a<s;a++){if((e=o[a])["s-sr"]&&(n=e["s-cr"]))for(i=e["s-sn"],l=(r=n.parentNode.childNodes).length-1;l>=0;l--)(n=r[l])["s-cn"]||n["s-nr"]||n["s-hn"]===e["s-hn"]||((3===(u=n.nodeType)||8===u)&&""===i||1===u&&null===n.getAttribute("slot")&&""===i||1===u&&n.getAttribute("slot")===i)&&(ct.some(t=>t.$nodeToRelocate$===n)||(c=!0,n["s-sn"]=i,ct.push({$slotRefNode$:e,$nodeToRelocate$:n})));1===e.nodeType&&ht(e)}},dt=(t,e)=>{t&&(t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(e?null:t.$elm$),t.$children$&&t.$children$.forEach(t=>{dt(t,e)}))},ft=(t,e,n,r)=>{e.$flags$|=16;const i=e.$lazyInstance$,o=()=>pt(t,e,n,i,r);let s;return r?(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.forEach(([t,e])=>bt(i,t,e)),e.$queuedListeners$=null),s=bt(i,"componentWillLoad")):s=bt(i,"componentWillUpdate"),vt(s,()=>M(o))},pt=(t,e,n,r,a)=>{e.$flags$&=-17,t["s-lr"]=!1,a&&((t,e,n)=>{const r=H(m&&t.shadowRoot?t.shadowRoot:t.getRootNode(),e,n,t);10&e.$flags$&&(t["s-sc"]=r,t.classList.add(r+"-h"),2&e.$flags$&&t.classList.add(r+"-s"))})(t,n,e.$modeName$),e.$flags$|=4;try{((t,e,n,r)=>{s=j(t.tagName);const a=e.$vnode$||{$flags$:0},l=(t=>t&&t.$tag$===G)(r)?r:J(null,null,r);if(n.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},n.$attrsToReflect$.forEach(([e,n])=>l.$attrs$[n]=t[e])),l.$tag$=null,l.$flags$|=4,e.$vnode$=l,l.$elm$=a.$elm$=t.shadowRoot||t,i=t["s-sc"],o=t["s-cr"],u=m&&0!=(1&n.$flags$),h=c=!1,lt(a,l),h){ht(l.$elm$);for(let t=0;t<ct.length;t++){const e=ct[t];if(!e.$nodeToRelocate$["s-ol"]){const t=p.createTextNode("");t["s-nr"]=e.$nodeToRelocate$,e.$nodeToRelocate$.parentNode.insertBefore(e.$nodeToRelocate$["s-ol"]=t,e.$nodeToRelocate$)}}g.$flags$|=1;for(let t=0;t<ct.length;t++){const e=ct[t],n=e.$slotRefNode$.parentNode;let r=e.$slotRefNode$.nextSibling,i=e.$nodeToRelocate$["s-ol"];for(;i=i.previousSibling;){let t=i["s-nr"];if(t&&t["s-sn"]===e.$nodeToRelocate$["s-sn"]&&n===t.parentNode&&(!(t=t.nextSibling)||!t["s-nr"])){r=t;break}}(!r&&n!==e.$nodeToRelocate$.parentNode||e.$nodeToRelocate$.nextSibling!==r)&&e.$nodeToRelocate$!==r&&n.insertBefore(e.$nodeToRelocate$,r)}g.$flags$&=-2}c&&ut(l.$elm$),ct.length=0})(t,e,n,r.render&&r.render())}catch(l){C(l)}e.$flags$&=-5,T&&T.updateHost(t),t["s-lr"]=!0,e.$flags$|=2,t["s-rc"].length>0&&(t["s-rc"].forEach(t=>t()),t["s-rc"].length=0),gt(t,e)},gt=(t,e,n)=>{if(!t["s-al"]){const r=e.$lazyInstance$,i=e.$ancestorComponent$;64&e.$flags$?bt(r,"componentDidUpdate"):(e.$flags$|=64,t.classList.add("hydrated"),bt(r,"componentDidLoad"),e.$onReadyResolve$(t),i||mt()),i&&((n=i["s-al"])&&(n.delete(t),0===n.size&&(i["s-al"]=void 0,i["s-init"]())),e.$ancestorComponent$=void 0)}},mt=()=>{p.documentElement.classList.add("hydrated"),g.$flags$|=2},bt=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){C(r)}},vt=(t,e)=>t&&t.then?t.then(e):e(),yt=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),i=t.prototype;if(r.forEach(([t,[r]])=>{31&r||2&n&&32&r?Object.defineProperty(i,t,{get(){return((t,e)=>w(t).$instanceValues$.get(e))(this,t)},set(n){((t,e,n,r)=>{const i=w(this),o=i.$hostElement$,s=i.$instanceValues$.get(e),a=i.$flags$;if(!((n=((t,e)=>null==t||B(t)?t:4&e?"false"!==t&&(""===t||!!t):2&e?parseFloat(t):1&e?String(t):t)(n,r.$members$[e][0]))===s||8&a&&void 0!==s)&&(i.$instanceValues$.set(e,n),i.$lazyInstance$)){if(r.$watchers$&&128&a){const t=r.$watchers$[e];t&&t.forEach(t=>{try{i.$lazyInstance$[t].call(i.$lazyInstance$,n,s,e)}catch(r){C(r)}})}2==(22&a)&&ft(o,i,r,!1)}})(0,t,n,e)},configurable:!0,enumerable:!0}):1&n&&64&r&&Object.defineProperty(i,t,{value(...e){const n=w(this);return n.$onReadyPromise$.then(()=>n.$lazyInstance$[t](...e))}})}),1&n){const n=new Map;i.attributeChangedCallback=function(t,e,r){g.jmp(()=>{const e=n.get(t);this[e]=(null!==r||"boolean"!=typeof this[e])&&r})},t.observedAttributes=r.filter(([t,e])=>15&e[0]).map(([t,r])=>{const i=r[1]||t;return n.set(i,t),512&r[0]&&e.$attrsToReflect$.push([t,i]),i})}}return t},wt=(t,e,n,r,i,o,s)=>{let a,l,u,c;if(1===o.nodeType){for((a=o.getAttribute("c-id"))&&((l=a.split("."))[0]!==s&&"0"!==l[0]||(u={$flags$:0,$hostId$:l[0],$nodeId$:l[1],$depth$:l[2],$index$:l[3],$tag$:j(o.tagName),$elm$:o},e.push(u),o.removeAttribute("c-id"),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u,t=u,r&&"0"===u.$depth$&&(r[u.$index$]=u.$elm$))),c=o.childNodes.length-1;c>=0;c--)wt(t,e,n,r,i,o.childNodes[c],s);if(o.shadowRoot)for(c=o.shadowRoot.childNodes.length-1;c>=0;c--)wt(t,e,n,r,i,o.shadowRoot.childNodes[c],s)}else 8===o.nodeType?(l=o.nodeValue.split("."))[1]!==s&&"0"!==l[1]||(u={$flags$:0,$hostId$:l[1],$nodeId$:l[2],$depth$:l[3],$index$:l[4],$elm$:o},"t"===(a=l[0])?(u.$elm$=o.nextSibling,u.$elm$&&3===u.$elm$.nodeType&&(u.$text$=u.$elm$.textContent,e.push(u),o.remove(),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u,r&&"0"===u.$depth$&&(r[u.$index$]=u.$elm$))):u.$hostId$===s&&("s"===a?(u.$tag$="slot",o["s-sn"]=l[5]?u.$name$=l[5]:"",o["s-sr"]=!0,r&&(u.$elm$=p.createElement(u.$tag$),u.$name$&&u.$elm$.setAttribute("name",u.$name$),o.parentNode.insertBefore(u.$elm$,o),o.remove(),"0"===u.$depth$&&(r[u.$index$]=u.$elm$)),n.push(u),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u):"r"===a&&(r?o.remove():(i["s-cr"]=o,o["s-cn"]=!0)))):t&&"style"===t.$tag$&&(t.$children$=[{$index$:"0",$text$:o.textContent,$elm$:o}])},_t=(t,e)=>{if(1===t.nodeType){let n=0;for(;n<t.childNodes.length;n++)_t(t.childNodes[n],e);if(t.shadowRoot)for(n=0;n<t.shadowRoot.childNodes.length;n++)_t(t.shadowRoot.childNodes[n],e)}else if(8===t.nodeType){const n=t.nodeValue.split(".");"o"===n[0]&&(e.set(n[1]+"."+n[2],t),t.nodeValue="",t["s-sd"]=""===n[3])}},kt=[],Ct=t=>kt.push(t),Et=t=>w(t).$modeName$,St=t=>{bt(t,"connectedCallback")},Tt=(t,e)=>{(e=t["s-cr"]=p.createComment(""))["s-cn"]=!0,t.insertBefore(e,t.firstChild)},xt=(t,e={})=>{const r=[],i=e.exclude||[],o=p.head,s=f.customElements,a=o.querySelector("meta[charset]"),l=p.createElement("style");let u;Object.assign(g,e),g.$resourcesUrl$=new URL(e.resourcesUrl||"./",p.baseURI).href,e.syncQueue&&(g.$flags$|=4),g.$flags$|=2;{const t=p.querySelectorAll("style[s-id]");let e="",n=0;for(;n<t.length;n++)e+=t[n].innerHTML;for(n=0;n<t.length;n++){const r=t[n];q(r.getAttribute("s-id"),e+W(r.innerHTML),!0)}}t.forEach(t=>t[1].forEach(e=>{const o={$flags$:e[0],$tagName$:e[1],$members$:e[2],$listeners$:e[3],$attrsToReflect$:[],$watchers$:{}};!m&&1&o.$flags$&&(o.$flags$|=8);const a=o.$tagName$;o.$lazyBundleIds$=t[0],i.includes(a)||s.get(a)||(r.push(a),s.define(a,yt(class extends HTMLElement{constructor(t){super(t),t=this,this["s-lr"]=!1,this["s-rc"]=[],(t=>{{const e={$flags$:0,$hostElement$:t,$instanceValues$:new Map};e.$onReadyPromise$=new Promise(t=>e.$onReadyResolve$=t),y.set(t,e)}})(t),1&o.$flags$&&(m?t.attachShadow({mode:"open"}):"shadowRoot"in t||(t.shadowRoot=t))}connectedCallback(){u&&(clearTimeout(u),u=null),g.jmp(()=>((t,e)=>{if(0==(1&g.$flags$)){const r=w(t);if(e.$listeners$&&(r.$rmListeners$=((t,e,n)=>{e.$queuedListeners$=e.$queuedListeners$||[];const r=n.map(([n,r,i])=>{const o=((t,e)=>4&e?p:8&e?f:32&e?p.body:16&e?t.parentElement:t)(t,n),s=((t,e)=>n=>{256&t.$flags$?t.$lazyInstance$[e](n):t.$queuedListeners$.push([e,n])})(e,i),a=(t=>b?{passive:0!=(1&t),capture:0!=(2&t)}:0!=(2&t))(n);return g.ael(o,r,s,a),()=>g.rel(o,r,s,a)});return()=>r.forEach(t=>t())})(t,r,e.$listeners$)),!(1&r.$flags$)){let i;if(r.$flags$|=1,i=t.getAttribute("s-id")){if(m&&1&e.$flags$){const n=H(t.shadowRoot,e,t.getAttribute("s-mode"));t.classList.remove(n+"-h"),t.classList.remove(n+"-s")}((t,e,n,r)=>{const i=t.shadowRoot,o=[],s=i?[]:null,a=r.$vnode$={$flags$:0,$tag$:e};g.$orgLocNodes$||_t(p.body,g.$orgLocNodes$=new Map),t["s-id"]=n,t.removeAttribute("s-id"),wt(a,o,[],s,t,t,n),o.forEach(t=>{const n=t.$hostId$+"."+t.$nodeId$,r=g.$orgLocNodes$.get(n),o=t.$elm$;r&&(r["s-sd"]||"0"===t.$hostId$)&&r.parentNode.insertBefore(o,r.nextSibling),i||(o["s-hn"]=e,r&&(o["s-ol"]=r,o["s-ol"]["s-nr"]=o)),g.$orgLocNodes$.delete(n)}),i&&s.forEach(t=>{t&&i.appendChild(t)})})(t,e.$tagName$,i,r)}i||(4&e.$flags$||8&e.$flags$)&&Tt(t);{let e=t;for(;e=e.parentNode||e.host;)if(1===e.nodeType&&e.hasAttribute("s-id")||e["s-init"]&&!1===e["s-lr"]){r.$ancestorComponent$=e,(e["s-al"]=e["s-al"]||new Set).add(t);break}}e.$members$&&Object.entries(e.$members$).forEach(([e,[n]])=>{if(31&n&&t.hasOwnProperty(e)){const n=t[e];delete t[e],t[e]=n}}),N(()=>(async(t,e,r,i,o)=>{if(0==(32&e.$flags$)){e.$flags$|=32,null==e.$modeName$&&(e.$modeName$="string"!=typeof r.$lazyBundleIds$?(t=>kt.map(e=>e(t)).find(t=>!!t))(t):""),(o=((t,e,r)=>{const i=t.$tagName$.replace(/-/g,"_"),o="string"!=typeof t.$lazyBundleIds$?t.$lazyBundleIds$[e.$modeName$]:t.$lazyBundleIds$,s=E.get(o);return s?s[i]:n("kLfG")(`./${o}.entry.js`).then(t=>(E.set(o,t),t[i]),C)})(r,e)).then&&(o=await o),o.isProxied||(r.$watchers$=o.watchers,yt(o,r,2),o.isProxied=!0),e.$flags$|=8;try{new o(e)}catch(l){C(l)}e.$flags$&=-9,e.$flags$|=128,St(e.$lazyInstance$);const i=$(r.$tagName$,e.$modeName$);if(!S.has(i)&&o.style){let t=o.style;"string"!=typeof t&&(t=t[e.$modeName$]),8&r.$flags$&&(t=await n.e(111).then(n.bind(null,"ZHuR")).then(e=>e.scopeCss(t,i,!1))),q(i,t,!!(1&r.$flags$))}}const s=e.$ancestorComponent$,a=()=>ft(t,e,r,!0);s&&!1===s["s-lr"]&&s["s-rc"]?s["s-rc"].push(a):a()})(t,r,e))}St(r.$lazyInstance$)}})(this,o))}disconnectedCallback(){g.jmp(()=>(t=>{if(0==(1&g.$flags$)){const e=w(t),n=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$(),e.$rmListeners$=void 0),T&&T.removeHost(t),bt(n,"disconnectedCallback"),bt(n,"componentDidUnload")}})(this))}"s-init"(){const t=w(this);t.$lazyInstance$&&gt(this,t)}"s-hmr"(t){}forceUpdate(){((t,e)=>{{const n=w(t);2&n.$flags$&&ft(t,n,e,!1)}})(this,o)}componentOnReady(){return w(this).$onReadyPromise$}},o,1)))})),l.innerHTML=r+"{visibility:hidden}.hydrated{visibility:inherit}",l.setAttribute("data-styles",""),o.insertBefore(l,a?a.nextSibling:o.firstChild),g.jmp(()=>u=setTimeout(mt,30))},At=(t,e,n)=>{const r=Pt(t);return{emit:t=>r.dispatchEvent(new CustomEvent(e,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:t}))}},It=t=>{const e=new URL(t,g.$resourcesUrl$);return e.origin!==f.location.origin?e.href:e.pathname},Dt=(t,e)=>{const n=()=>{let t=p.querySelector(e);return t||(t=p.createElement(e),p.body.appendChild(t)),"function"==typeof t.componentOnReady?t.componentOnReady():Promise.resolve(t)};return{create:(...t)=>n().then(e=>e.create(...t)),componentOnReady:n}},Pt=t=>w(t).$hostElement$;let Ot;const Nt=t=>t&&Et(t)||Ot,Rt=()=>{(()=>{const t=document,e=window,n=e.Ionic=e.Ionic||{};Object(r.g)(e);const i=Object.assign({},Object(r.c)(e),{persistConfig:!1},n.config,Object(r.a)(e));r.b.reset(i),r.b.getBoolean("persistConfig")&&Object(r.d)(e,i),n.config=r.b,n.mode=Ot=r.b.get("mode",t.documentElement.getAttribute("mode")||(Object(r.f)(e,"ios")?"ios":"md")),r.b.set("mode",Ot),t.documentElement.setAttribute("mode",Ot),t.documentElement.classList.add(Ot),r.b.getBoolean("_testing")&&r.b.set("animated",!1),Ct(t=>t.mode=t.mode||t.getAttribute("mode")||Ot)})(),Ct(t=>"ION-ICON"===t.tagName?t.mode||t.getAttribute("mode"):null)}},S7Dv:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("EYAf"),o=n("ehau"),s=n("s7LF"),a=n("Dn3B"),l=n("uCxy"),u=n("95Ir"),c=n("oBZk"),h=n("ZZ/e"),d=n("SVse"),f=n("Gh+9");n.d(e,"a",function(){return y});var p=r.vb({encapsulation:0,styles:[[""]],data:{}});function g(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,1,"app-camp-search-form",[],null,[[null,"submitForm"]],function(t,e,n){var r=!0;return"submitForm"===e&&(r=!1!==t.component.submitCampAttributesFilter(n)&&r),r},i.c,i.b)),r.wb(2,114688,null,0,o.a,[s.b,a.a],{nameElementHidden:[0,"nameElementHidden"]},{submitForm:"submitForm"})],function(t,e){t(e,2,0,!0)},null)}function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,1,"app-trail-search-form",[],null,[[null,"submitForm"]],function(t,e,n){var r=!0;return"submitForm"===e&&(r=!1!==t.component.submitTrailAttributesFilter(n)&&r),r},l.c,l.a)),r.wb(2,114688,null,0,u.a,[s.b,a.a],{nameElementHidden:[0,"nameElementHidden"]},{submitForm:"submitForm"})],function(t,e){t(e,2,0,!0)},null)}function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,7,"ion-content",[["padding",""]],null,null,null,c.P,c.i)),r.wb(1,49152,null,0,h.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,5,"ion-list",[],null,null,null,c.Y,c.r)),r.wb(3,49152,null,0,h.M,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,1,null,g)),r.wb(5,16384,null,0,d.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,0,1,null,m)),r.wb(7,16384,null,0,d.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,5,0,n.currentSource==n.SourceEnum.HorseCamps),t(e,7,0,n.currentSource==n.SourceEnum.HorseTrails)},null)}function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-filter-modal",[],null,null,null,b,p)),r.wb(1,245760,null,0,f.a,[a.a,h.Jb],null,null)],function(t,e){t(e,1,0)},null)}var y=r.tb("app-filter-modal",f.a,v,{},{},[])},SGgB:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("vfXG"),a=n("iInd"),l=n("SVse"),u=n("Y8sq"),c=n("Q+Hy"),h=n("abRS"),d=n("xkgV"),f=n("EmcB"),p=n("a+Xp");n.d(e,"a",function(){return _});var g=r.vb({encapsulation:0,styles:[[""]],data:{}});function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"ion-col",[],null,null,null,i.O,i.h)),r.wb(1,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,1,"p",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,[" No blogs have been posted. "]))],null,null)}function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,13,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(1,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,6,"ion-col",[["size","9"]],null,null,null,i.O,i.h)),r.wb(3,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(4,0,null,0,4,"app-blog-post",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,5).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,7).onClick(n)&&i),i},s.c,s.b)),r.wb(5,16384,null,0,a.n,[a.m,a.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.Kb(6,2),r.wb(7,737280,null,0,o.Kb,[l.j,o.Gb,r.n,a.m,[2,a.n]],null,null),r.wb(8,638976,null,0,u.a,[c.a],{blog:[0,"blog"]},null),(t()(),r.xb(9,0,null,0,4,"ion-col",[["size","3"]],null,null,null,i.O,i.h)),r.wb(10,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(11,0,null,0,2,"ion-button",[["color","danger"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onRemoveBlogButton(t.context.$implicit)&&r),r},i.I,i.b)),r.wb(12,49152,null,0,o.i,[r.i,r.n,r.B],{color:[0,"color"]},null),(t()(),r.Rb(-1,0,["Remove"]))],function(t,e){t(e,3,0,"9");var n=t(e,6,0,"/blog-info",e.context.$implicit.id);t(e,5,0,n),t(e,7,0),t(e,8,0,e.context.$implicit),t(e,10,0,"3"),t(e,12,0,"danger")},null)}function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"pagination-controls",[],null,[[null,"pageChange"]],function(t,e,n){var r=!0;return"pageChange"===e&&(r=!1!==t.component.onPageChange(n)&&r),r},h.b,h.a)),r.wb(1,49152,null,0,d.c,[],null,{pageChange:"pageChange"})],null,null)}function y(t){return r.Tb(0,[r.Pb(671088640,1,{content:0}),(t()(),r.xb(1,0,null,null,27,"ion-content",[["padding",""]],null,null,null,i.P,i.i)),r.wb(2,49152,[[1,4]],0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,25,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(4,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(5,0,null,0,6,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(6,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(7,0,null,0,4,"ion-col",[],null,null,null,i.O,i.h)),r.wb(8,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddBlogButton()&&r),r},i.I,i.b)),r.wb(10,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Add Blog"])),(t()(),r.xb(12,0,null,0,4,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(13,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,2,null,m)),r.wb(15,16384,null,0,l.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,l.b,[r.i]),(t()(),r.mb(16777216,null,0,4,null,b)),r.wb(18,278528,null,0,l.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null),r.Lb(131072,l.b,[r.i]),r.Mb(20,{itemsPerPage:0,currentPage:1}),r.Lb(0,d.b,[d.e]),(t()(),r.xb(22,0,null,0,6,"ion-row",[["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(23,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(24,0,null,0,4,"ion-col",[["size","9"]],null,null,null,i.O,i.h)),r.wb(25,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.mb(16777216,null,0,2,null,v)),r.wb(27,16384,null,0,l.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,l.b,[r.i])],function(t,e){var n,i=e.component;t(e,15,0,0==(null==(n=r.Sb(e,15,0,r.Jb(e,16).transform(i.blogs$)))?null:n.length));var o=r.Sb(e,18,0,r.Jb(e,21).transform(r.Sb(e,18,0,r.Jb(e,19).transform(i.blogs$)),t(e,20,0,3,i.p)));t(e,18,0,o),t(e,25,0,"9"),t(e,27,0,r.Sb(e,27,0,r.Jb(e,28).transform(i.blogs$)))},null)}function w(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-admin-blog",[],null,null,null,y,g)),r.wb(1,114688,null,0,f.a,[p.a,o.a,a.m],null,null)],function(t,e){t(e,1,0)},null)}var _=r.tb("app-admin-blog",f.a,w,{},{},[])},SVse:function(t,e,n){"use strict";n.d(e,"D",function(){return Y}),n.d(e,"n",function(){return Z}),n.d(e,"o",function(){return X}),n.d(e,"E",function(){return tt}),n.d(e,"c",function(){return At}),n.d(e,"k",function(){return it}),n.d(e,"l",function(){return st}),n.d(e,"m",function(){return lt}),n.d(e,"p",function(){return pt}),n.d(e,"q",function(){return gt}),n.d(e,"d",function(){return It}),n.d(e,"b",function(){return _t}),n.d(e,"e",function(){return St}),n.d(e,"f",function(){return Tt}),n.d(e,"t",function(){return xt}),n.d(e,"v",function(){return Et}),n.d(e,"u",function(){return Ct}),n.d(e,"C",function(){return Dt}),n.d(e,"x",function(){return Ot}),n.d(e,"w",function(){return Nt}),n.d(e,"z",function(){return nt}),n.d(e,"y",function(){return et}),n.d(e,"B",function(){return dt}),n.d(e,"A",function(){return ht}),n.d(e,"s",function(){return i}),n.d(e,"h",function(){return o}),n.d(e,"j",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"g",function(){return c}),n.d(e,"r",function(){return h}),n.d(e,"i",function(){return l});var r=n("8Y7J");class i{}const o=new r.r("Location Initialized");class s{}const a=new r.r("appBaseHref");let l=(()=>{class t{constructor(e,n){this._subject=new r.p,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(u(i)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+t.normalizeQueryParams(n))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,u(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}return t})();function u(t){return t.replace(/\/index.html$/,"")}let c=(()=>(class extends s{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=l.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),h=(()=>(class extends s{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return l.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+l.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))();const d=function(){var t={Decimal:0,Percent:1,Currency:2,Scientific:3};return t[t.Decimal]="Decimal",t[t.Percent]="Percent",t[t.Currency]="Currency",t[t.Scientific]="Scientific",t}(),f=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),p=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),g=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),m=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),b=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function v(t,e){return E(Object(r.yb)(t)[r.ib.DateFormat],e)}function y(t,e){return E(Object(r.yb)(t)[r.ib.TimeFormat],e)}function w(t,e){return E(Object(r.yb)(t)[r.ib.DateTimeFormat],e)}function _(t,e){const n=Object(r.yb)(t),i=n[r.ib.NumberSymbols][e];if(void 0===i){if(e===b.CurrencyDecimal)return n[r.ib.NumberSymbols][b.Decimal];if(e===b.CurrencyGroup)return n[r.ib.NumberSymbols][b.Group]}return i}const k=r.zb;function C(t){if(!t[r.ib.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ib.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function E(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function S(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const T=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,x={},A=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,I=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),D=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),P=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function O(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function N(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function R(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case D.FullYear:return e.getFullYear();case D.Month:return e.getMonth();case D.Date:return e.getDate();case D.Hours:return e.getHours();case D.Minutes:return e.getMinutes();case D.Seconds:return e.getSeconds();case D.FractionalSeconds:return e.getMilliseconds();case D.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===D.Hours)0===a&&-12===n&&(a=12);else if(t===D.FractionalSeconds)return l=e,N(a,3).substr(0,l);var l;const u=_(s,b.MinusSign);return N(a,e,u,r,i)}}function M(t,e,n=p.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case P.Months:return function(t,e,n){const i=Object(r.yb)(t),o=E([i[r.ib.MonthsFormat],i[r.ib.MonthsStandalone]],e);return E(o,n)}(e,o,i)[t.getMonth()];case P.Days:return function(t,e,n){const i=Object(r.yb)(t),o=E([i[r.ib.DaysFormat],i[r.ib.DaysStandalone]],e);return E(o,n)}(e,o,i)[t.getDay()];case P.DayPeriods:const a=t.getHours(),l=t.getMinutes();if(s){const t=function(t){const e=Object(r.yb)(t);return C(e),(e[r.ib.ExtraData][2]||[]).map(t=>"string"==typeof t?S(t):[S(t[0]),S(t[1])])}(e),n=function(t,e,n){const i=Object(r.yb)(t);C(i);const o=E([i[r.ib.ExtraData][0],i[r.ib.ExtraData][1]],e)||[];return E(o,n)||[]}(e,o,i);let s;if(t.forEach((t,e)=>{if(Array.isArray(t)){const{hours:r,minutes:i}=t[0],{hours:o,minutes:u}=t[1];a>=r&&l>=i&&(a<o||a===o&&l<u)&&(s=n[e])}else{const{hours:r,minutes:i}=t;r===a&&i===l&&(s=n[e])}}),s)return s}return function(t,e,n){const i=Object(r.yb)(t),o=E([i[r.ib.DayPeriodsFormat],i[r.ib.DayPeriodsStandalone]],e);return E(o,n)}(e,o,i)[a<12?0:1];case P.Eras:return function(t,e){return E(Object(r.yb)(t)[r.ib.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function L(t){return function(e,n,r){const i=-1*r,o=_(n,b.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case I.Short:return(i>=0?"+":"")+N(s,2,o)+N(Math.abs(i%60),2,o);case I.ShortGMT:return"GMT"+(i>=0?"+":"")+N(s,1,o);case I.Long:return"GMT"+(i>=0?"+":"")+N(s,2,o)+":"+N(Math.abs(i%60),2,o);case I.Extended:return 0===r?"Z":(i>=0?"+":"")+N(s,2,o)+":"+N(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const F=0,j=4;function B(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,F,1).getDay();return new Date(t,0,1+(e<=j?j:j+7)-e)}(n.getFullYear()),e=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(j-o.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var o;return N(i,t,_(r,b.MinusSign))}}const V={};function U(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function z(t){return t instanceof Date&&!isNaN(t.valueOf())}const q=/^(\d+)?\.((\d+)(-(\d+))?)?$/,H=22,$=".",W="0",J=";",G=",",Q="#";function K(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}const Y=new r.r("UseV4Plurals");class X{}let Z=(()=>(class extends X{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):k(e||this.locale)(t)){case f.Zero:return"zero";case f.One:return"one";case f.Two:return"two";case f.Few:return"few";case f.Many:return"many";default:return"other"}}}))();function tt(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class et{}let nt=(()=>(class{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.Cb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.Qb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}))(),rt=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})(),it=(()=>(class extends rt{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}}))();class ot{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let st=(()=>(class{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.bb)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ot(null,this._ngForOf,-1,-1),r),i=new at(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(n);else{const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new at(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}))();class at{constructor(t,e){this.record=t,this.view=e}}let lt=(()=>(class{constructor(t,e){this._viewContainer=t,this._context=new ut,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ct("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ct("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}))();class ut{constructor(){this.$implicit=null,this.ngIf=null}}function ct(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.Qb)(e)}'.`)}class ht{}let dt=(()=>(class{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n}getValue(){return null}setNgStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}applyChanges(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}))(),ft=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})(),pt=(()=>(class extends ft{constructor(t){super(t)}set ngStyle(t){this._delegate.setNgStyle(t)}ngDoCheck(){this._delegate.applyChanges()}}))(),gt=(()=>(class{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}))();function mt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.Qb)(t)}'`)}class bt{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class vt{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const yt=new vt,wt=new bt;let _t=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Object(r.Fb)(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.U.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.Eb)(e))return yt;if(Object(r.Db)(e))return wt;throw mt(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t})();const kt=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let Ct=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw mt(t,e);return e.replace(kt,t=>t[0].toUpperCase()+t.substr(1).toLowerCase())}}return t})(),Et=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw mt(t,e);return e.toUpperCase()}}return t})(),St=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,i){let o=function(t){if(z(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(T))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,l=Number(t[6]||0),u=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,l,u),e}(n)}const e=new Date(t);if(!z(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Object(r.yb)(t)[r.ib.LocaleId]}(e);if(x[i]=x[i]||{},x[i][n])return x[i][n];let o="";switch(n){case"shortDate":o=v(e,m.Short);break;case"mediumDate":o=v(e,m.Medium);break;case"longDate":o=v(e,m.Long);break;case"fullDate":o=v(e,m.Full);break;case"shortTime":o=y(e,m.Short);break;case"mediumTime":o=y(e,m.Medium);break;case"longTime":o=y(e,m.Long);break;case"fullTime":o=y(e,m.Full);break;case"short":const r=t(e,"shortTime"),i=t(e,"shortDate");o=O(w(e,m.Short),[r,i]);break;case"medium":const s=t(e,"mediumTime"),a=t(e,"mediumDate");o=O(w(e,m.Medium),[s,a]);break;case"long":const l=t(e,"longTime"),u=t(e,"longDate");o=O(w(e,m.Long),[l,u]);break;case"full":const c=t(e,"fullTime"),h=t(e,"fullDate");o=O(w(e,m.Full),[c,h])}return o&&(x[i][n]=o),o}(n,e)||e;let s,a=[];for(;e;){if(!(s=A.exec(e))){a.push(e);break}{const t=(a=a.concat(s.slice(1))).pop();if(!t)break;e=t}}let l=o.getTimezoneOffset();i&&(l=U(i,l),o=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(U(e,r)-r))}(o,i));let u="";return a.forEach(t=>{const e=function(t){if(V[t])return V[t];let e;switch(t){case"G":case"GG":case"GGG":e=M(P.Eras,g.Abbreviated);break;case"GGGG":e=M(P.Eras,g.Wide);break;case"GGGGG":e=M(P.Eras,g.Narrow);break;case"y":e=R(D.FullYear,1,0,!1,!0);break;case"yy":e=R(D.FullYear,2,0,!0,!0);break;case"yyy":e=R(D.FullYear,3,0,!1,!0);break;case"yyyy":e=R(D.FullYear,4,0,!1,!0);break;case"M":case"L":e=R(D.Month,1,1);break;case"MM":case"LL":e=R(D.Month,2,1);break;case"MMM":e=M(P.Months,g.Abbreviated);break;case"MMMM":e=M(P.Months,g.Wide);break;case"MMMMM":e=M(P.Months,g.Narrow);break;case"LLL":e=M(P.Months,g.Abbreviated,p.Standalone);break;case"LLLL":e=M(P.Months,g.Wide,p.Standalone);break;case"LLLLL":e=M(P.Months,g.Narrow,p.Standalone);break;case"w":e=B(1);break;case"ww":e=B(2);break;case"W":e=B(1,!0);break;case"d":e=R(D.Date,1);break;case"dd":e=R(D.Date,2);break;case"E":case"EE":case"EEE":e=M(P.Days,g.Abbreviated);break;case"EEEE":e=M(P.Days,g.Wide);break;case"EEEEE":e=M(P.Days,g.Narrow);break;case"EEEEEE":e=M(P.Days,g.Short);break;case"a":case"aa":case"aaa":e=M(P.DayPeriods,g.Abbreviated);break;case"aaaa":e=M(P.DayPeriods,g.Wide);break;case"aaaaa":e=M(P.DayPeriods,g.Narrow);break;case"b":case"bb":case"bbb":e=M(P.DayPeriods,g.Abbreviated,p.Standalone,!0);break;case"bbbb":e=M(P.DayPeriods,g.Wide,p.Standalone,!0);break;case"bbbbb":e=M(P.DayPeriods,g.Narrow,p.Standalone,!0);break;case"B":case"BB":case"BBB":e=M(P.DayPeriods,g.Abbreviated,p.Format,!0);break;case"BBBB":e=M(P.DayPeriods,g.Wide,p.Format,!0);break;case"BBBBB":e=M(P.DayPeriods,g.Narrow,p.Format,!0);break;case"h":e=R(D.Hours,1,-12);break;case"hh":e=R(D.Hours,2,-12);break;case"H":e=R(D.Hours,1);break;case"HH":e=R(D.Hours,2);break;case"m":e=R(D.Minutes,1);break;case"mm":e=R(D.Minutes,2);break;case"s":e=R(D.Seconds,1);break;case"ss":e=R(D.Seconds,2);break;case"S":e=R(D.FractionalSeconds,1);break;case"SS":e=R(D.FractionalSeconds,2);break;case"SSS":e=R(D.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=L(I.Short);break;case"ZZZZZ":e=L(I.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=L(I.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=L(I.Long);break;default:return null}return V[t]=e,e}(t);u+=e?e(o,n,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}(e,n,o||this.locale,i)}catch(s){throw mt(t,s.message)}}}return t})(),Tt=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(function(t){return null==t||""===t||t!=t}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",l=!1;if(isFinite(t)){let u=function(e){let n,r,i,o,s,a=Math.abs(t)+"",l=0;for((r=a.indexOf($))>-1&&(a=a.replace($,"")),(i=a.search(/e/i))>0?(r<0&&(r=i),r+=+a.slice(i+1),a=a.substring(0,i)):r<0&&(r=a.length),i=0;a.charAt(i)===W;i++);if(i===(s=a.length))n=[0],r=1;else{for(s--;a.charAt(s)===W;)s--;for(r-=i,n=[],o=0;i<=s;i++,o++)n[o]=Number(a.charAt(i))}return r>H&&(n=n.splice(0,H-1),l=r-1,r=1),{digits:n,exponent:l,integerLen:r}}();s&&(u=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(u));let c=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(q);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(c=K(e)),null!=n&&(h=K(n)),null!=r?d=K(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=0!==o;const u=e+t.integerLen,c=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,l&&(0===r[n]&&n>=u?r.pop():l=!1),e>=10?1:0},0);c&&(r.unshift(c),t.integerLen++)}(u,h,d);let f=u.digits,p=u.integerLen;const g=u.exponent;let m=[];for(l=f.every(t=>!t);p<c;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const v=[];for(f.length>=e.lgSize&&v.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)v.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&v.unshift(f.join("")),a=v.join(_(n,r)),m.length&&(a+=_(n,i)+m.join("")),g&&(a+=_(n,b.Exponential)+"+"+g)}else a=_(n,b.Infinity);return t<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(J),i=r[0],o=r[1],s=-1!==i.indexOf($)?i.split($):[i.substring(0,i.lastIndexOf(W)+1),i.substring(i.lastIndexOf(W)+1)],a=s[0],l=s[1]||"";n.posPre=a.substr(0,a.indexOf(Q));for(let c=0;c<l.length;c++){const t=l.charAt(c);t===W?n.minFrac=n.maxFrac=c+1:t===Q?n.maxFrac=c+1:n.posSuf+=t}const u=a.split(G);if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf(Q);n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.yb)(t)[r.ib.NumberFormats][e]}(e,d.Decimal),_(e,b.MinusSign)),e,b.Group,b.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),i,n)}catch(o){throw mt(t,o.message)}}}return t})(),xt=(()=>{class t{transform(e,n,r){if(null==e)return e;if(!this.supports(e))throw mt(t,e);return e.slice(n,r)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t})(),At=(()=>(class{}))();const It=new r.r("DocumentToken"),Dt="browser",Pt="server";function Ot(t){return t===Pt}let Nt=(()=>{class t{}return t.ngInjectableDef=Object(r.Wb)({token:t,providedIn:"root",factory:()=>new Rt(Object(r.Xb)(It),window,Object(r.Xb)(r.o))}),t})();class Rt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const n=this.document.querySelector(`#${t}`);if(n)return void this.scrollToElement(n);const r=this.document.querySelector(`[name='${t}']`);if(r)return void this.scrollToElement(r)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}},SeVD:function(t,e,n){"use strict";var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),l=n("c2HN"),u=n("XoHu");n.d(e,"a",function(){return c});const c=t=>{if(t&&"function"==typeof t[s.a])return(t=>e=>{const n=t[s.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(Object(a.a)(t))return Object(r.a)(t);if(Object(l.a)(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.a),e))(t);if(t&&"function"==typeof t[o.a])return(t=>e=>{const n=t[o.a]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),l=n("SpAZ");function u(t,e){const n=arguments.length>=2;return u=>u.pipe(t?Object(i.a)((e,n)=>t(e,n,u)):l.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},U7NT:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("SVse"),a=n("ssx2");n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return d});var l=r.vb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{height:20vh;position:relative}.btn-remove-overlay[_ngcontent-%COMP%]{--background-hover:transparent;position:absolute}.img-underneath[_ngcontent-%COMP%]{position:absolute;max-width:80%;max-height:100%}"]],data:{}});function u(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,6,"ion-col",[["class","container"],["padding",""],["size","4"]],null,null,null,i.O,i.h)),r.wb(1,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(2,0,null,0,0,"img",[["class","img-underneath"]],[[8,"src",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onEditPhotoButton(t.context.index)&&r),r},null,null)),(t()(),r.xb(3,0,null,0,3,"ion-button",[["class","btn-remove-overlay"],["fill","clear"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onRemovePhotoButton(t.context.index)&&r),r},i.I,i.b)),r.wb(4,49152,null,0,o.i,[r.i,r.n,r.B],{fill:[0,"fill"]},null),(t()(),r.xb(5,0,null,0,1,"ion-icon",[["color","danger"],["name","close"]],null,null,null,i.U,i.n)),r.wb(6,49152,null,0,o.A,[r.i,r.n,r.B],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"4"),t(e,4,0,"clear"),t(e,6,0,"danger","close")},function(t,e){t(e,2,0,e.context.$implicit.url)})}function c(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,10,"ion-grid",[["padding",""]],null,null,null,i.S,i.l)),r.wb(1,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,8,"ion-row",[["padding",""]],null,null,null,i.bb,i.u)),r.wb(3,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,1,null,u)),r.wb(5,278528,null,0,s.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null),(t()(),r.xb(6,0,null,0,4,"ion-col",[],null,null,null,i.O,i.h)),r.wb(7,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(8,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddPhotoButton()&&r),r},i.I,i.b)),r.wb(9,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,[" Add Photo "]))],function(t,e){t(e,5,0,e.component.inputUrls)},null)}function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-photo-adder",[],null,null,null,c,l)),r.wb(1,114688,null,0,a.a,[o.Fb],null,null)],function(t,e){t(e,1,0)},null)}var d=r.tb("app-photo-adder",a.a,h,{inputUrls:"inputUrls"},{onFilesChanged:"onFilesChanged"},[])},UxCU:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},VMA6:function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"b",function(){return m});var r=n("ajt+"),i=n("Cfvw"),o=n("LRne"),s=n("itXk"),a=n("JIr8"),l=n("5+tZ"),u=n("lJxs"),c=n("vkgz"),h=n("SxV6"),d=n("BDB0"),f=n("Gon4"),p=n("8Y7J");let g=(()=>{class t{constructor(t,e){this.db=t,this.mapboxService=e,this.basePath="camps"}tryAddNew(t){return Object(i.a)(this.db.updateObjectAtPath(`${this.basePath}/${t.id}`,t)).pipe(Object(a.a)(t=>Object(o.a)(!1)),Object(l.a)(t=>Object(o.a)(!0)))}delete(t){this.db.removeAtPath(`${this.basePath}/${t.id}`),this.db.removeAtPath(`campsOrTrails/horseTrails/${t.id}`),this.db.removeAtPath(`campsOrTrails/horseCamps/${t.id}`)}addToTrailTable(t){this.db.updateObjectAtPath("campsOrTrails/horseTrails/",{[t.id]:!0})}addToCampTable(t){this.db.updateObjectAtPath("campsOrTrails/horseCamps/",{[t.id]:!0})}getDataSourceAsMap(t){switch(t){case m.HorseCamps:return this.getAllHorseCampsAsMap();case m.HorseTrails:return this.getAllHorseTrailsAsMap()}}isTrailById(t){return this.getAllHorseTrailsAsMap().pipe(Object(u.a)(e=>e.hasOwnProperty(t)))}isTrail(t){return this.isTrailById(t.id)}getAllHorseCampsAsMap(){return this.getAllHorseCampsAsList().pipe(Object(u.a)(t=>{const e={};return t.forEach(t=>e[t.id]=t),e}))}getAllHorseTrailsAsMap(){return this.getAllHorseTrailsAsList().pipe(Object(u.a)(t=>{const e={};return t.forEach(t=>e[t.id]=t),e}))}getAllHorseCampsAsList(){return this.getHorseCampsTable().pipe(Object(l.a)(t=>{const e=Object.keys(t).map(t=>this.getByID(t));return Object(s.a)(e)}))}getAllHorseTrailsAsList(){return this.getHorseTrailsTable().pipe(Object(l.a)(t=>{const e=Object.keys(t).map(t=>this.getByID(t));return Object(s.a)(e)}))}getHorseCampsTable(){return this.db.getObjectValues("campsOrTrails/horseCamps")}getHorseTrailsTable(){return this.db.getObjectValues("campsOrTrails/horseTrails/")}getAllAsList(){return this.db.getListSortedByFunction(this.basePath)}getByID(t){return this.db.getObjectValues(`${this.basePath}/${t}`).pipe(Object(c.a)(t=>{t.coords?t.city&&t.state||this.setCampCityAndState(t).subscribe():(console.log("null camp",t),this.setCampCoords(t).subscribe())}),Object(h.a)())}setCampCoords(t){return this.mapboxService.forwardGeocodeToCoords(t.address).pipe(Object(c.a)(e=>(this.db.setObjectAtPath(`camps/${t.id}/coords`,e),e)))}setCampCityAndState(t){return this.mapboxService.reverseGeocode(t.coords).pipe(Object(c.a)(e=>{const n=this.parseStateFromContext(e.context),r=this.parseCityFromContext(e.context);null!=n&&this.db.setObjectAtPath(`camps/${t.id}/state`,n),null!=r&&this.db.setObjectAtPath(`camps/${t.id}/city`,r)}))}parseStateFromContext(t){if(!t||t.length<2)return null;const e=t[t.length-2];return e.id.startsWith("region")?e.text:null}parseCityFromContext(t){if(!t||t.length<3)return null;const e=t[t.length-3];return e.id.startsWith("place")?e.text:null}filterByTerm(t,e){const n=Object.keys(e).map(t=>e[t]),r=d.findBestMatch(t,n.map(t=>this.campToStringSearch(t)));return this.sortMatches(r.ratings).map(t=>this.stringSearchToCampId(t.target)).map(t=>e[t])}sortMatches(t){return t.sort((t,e)=>t.rating<e.rating?1:-1)}campToStringSearch(t){return`${t.id} ${t.name}`}stringSearchToCampId(t){return t.split(" ")[0]}}return t.ngInjectableDef=p.Wb({factory:function(){return new t(p.Xb(r.a),p.Xb(f.a))},token:t,providedIn:"root"}),t})();var m=function(t){return t[t.HorseCamps=0]="HorseCamps",t[t.HorseTrails=1]="HorseTrails",t}({})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},VUZZ:function(t,e,n){"use strict";n.r(e),n.d(e,"GESTURE_CONTROLLER",function(){return o}),n.d(e,"createGesture",function(){return c});class r{constructor(t,e,n,r,i){this.id=e,this.name=n,this.disableScroll=i,this.priority=1e6*r+e,this.ctrl=t}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class i{constructor(t,e,n,r){this.id=e,this.disable=n,this.disableScroll=r,this.ctrl=t}block(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.disableGesture(t,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.enableGesture(t,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const o=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(t){return new r(this,this.newID(),t.name,t.priority||0,!!t.disableScroll)}createBlocker(t={}){return new i(this,this.newID(),t.disable,!!t.disableScroll)}start(t,e,n){return this.canStart(t)?(this.requestedStart.set(e,n),!0):(this.requestedStart.delete(e),!1)}capture(t,e,n){if(!this.start(t,e,n))return!1;const r=this.requestedStart;let i=-1e4;if(r.forEach(t=>{i=Math.max(i,t)}),i===n){this.capturedId=e,r.clear();const n=new CustomEvent("ionGestureCaptured",{detail:{gestureName:t}});return document.dispatchEvent(n),!0}return r.delete(e),!1}release(t){this.requestedStart.delete(t),this.capturedId===t&&(this.capturedId=void 0)}disableGesture(t,e){let n=this.disabledGestures.get(t);void 0===n&&(n=new Set,this.disabledGestures.set(t,n)),n.add(e)}enableGesture(t,e){const n=this.disabledGestures.get(t);void 0!==n&&n.delete(e)}disableScroll(t){this.disabledScroll.add(t),1===this.disabledScroll.size&&document.body.classList.add("backdrop-no-scroll")}enableScroll(t){this.disabledScroll.delete(t),0===this.disabledScroll.size&&document.body.classList.remove("backdrop-no-scroll")}canStart(t){return void 0===this.capturedId&&!this.isDisabled(t)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(t){const e=this.disabledGestures.get(t);return!!(e&&e.size>0)}newID(){return this.gestureId++,this.gestureId}},s=(t,e,n,r)=>{const i=a(t)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let o,s;return t.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",s="__zone_symbol__removeEventListener"):(o="addEventListener",s="removeEventListener"),t[o](e,n,i),()=>{t[s](e,n,i)}},a=t=>{if(void 0===l)try{const n=Object.defineProperty({},"passive",{get:()=>{l=!0}});t.addEventListener("optsTest",()=>{},n)}catch(e){l=!1}return!!l};let l;const u=t=>t instanceof Document?t:t.ownerDocument,c=t=>{let e=!1,n=!1,r=!0,i=!1;const a=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t),l=a.canStart,c=a.onWillStart,p=a.onStart,g=a.onEnd,m=a.notCaptured,b=a.onMove,v=a.threshold,y={type:"pan",startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,event:void 0,data:void 0},w=((t,e,n)=>{const r=a.maxAngle*(Math.PI/180),i="x"===a.direction,o=Math.cos(r),s=e*e;let l=0,u=0,c=!1,h=0;return{start(t,e){l=t,u=e,h=0,c=!0},detect(t,e){if(!c)return!1;const n=t-l,r=e-u,a=n*n+r*r;if(a<s)return!1;const d=Math.sqrt(a),f=(i?n:r)/d;return h=f>o?1:f<-o?-1:0,c=!1,!0},isGesture:()=>0!==h,getDirection:()=>h}})(0,a.threshold),_=o.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll}),k=()=>{e&&(i=!1,b&&b(y))},C=()=>!(_&&!_.capture()||(e=!0,r=!1,y.startX=y.currentX,y.startY=y.currentY,y.startTimeStamp=y.timeStamp,c?c(y).then(E):E(),0)),E=()=>{p&&p(y),r=!0},S=()=>{e=!1,n=!1,i=!1,r=!0,_.release()},T=t=>{const n=e,i=r;S(),i&&(h(y,t),n?g&&g(y):m&&m(y))},x=((t,e,n,r,i)=>{let o,a,l,c,h,d,f,p=0;const g=r=>{p=Date.now()+2e3,e(r)&&(!a&&n&&(a=s(t,"touchmove",n,i)),l||(l=s(t,"touchend",b,i)),c||(c=s(t,"touchcancel",b,i)))},m=r=>{p>Date.now()||e(r)&&(!d&&n&&(d=s(u(t),"mousemove",n,i)),f||(f=s(u(t),"mouseup",v,i)))},b=t=>{y(),r&&r(t)},v=t=>{w(),r&&r(t)},y=()=>{a&&a(),l&&l(),c&&c(),a=l=c=void 0},w=()=>{d&&d(),f&&f(),d=f=void 0},_=()=>{y(),w()},k=e=>{e?(o&&o(),h&&h(),o=h=void 0,_()):(o||(o=s(t,"touchstart",g,i)),h||(h=s(t,"mousedown",m,i)))};return{setDisabled:k,stop:_,destroy:()=>{k(!0),r=n=e=void 0}}})(a.el,t=>{const e=f(t);return!(n||!r)&&(d(t,y),y.startX=y.currentX,y.startY=y.currentY,y.startTimeStamp=y.timeStamp=e,y.velocityX=y.velocityY=y.deltaX=y.deltaY=0,y.event=t,(!l||!1!==l(y))&&(_.release(),!!_.start()&&(n=!0,0===v?C():(w.start(y.startX,y.startY),!0))))},t=>{e?!i&&r&&(i=!0,h(y,t),requestAnimationFrame(k)):(h(y,t),w.detect(y.currentX,y.currentY)&&(w.isGesture()&&C()||A()))},T,{capture:!1}),A=()=>{S(),x.stop(),m&&m(y)};return{setDisabled(t){t&&e&&T(void 0),x.setDisabled(t)},destroy(){_.destroy(),x.destroy()}}},h=(t,e)=>{if(!e)return;const n=t.currentX,r=t.currentY,i=t.timeStamp;d(e,t);const o=t.currentX,s=t.currentY,a=(t.timeStamp=f(e))-i;if(a>0&&a<100){const e=(s-r)/a;t.velocityX=(o-n)/a*.7+.3*t.velocityX,t.velocityY=.7*e+.3*t.velocityY}t.deltaX=o-t.startX,t.deltaY=s-t.startY,t.event=e},d=(t,e)=>{let n=0,r=0;if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];n=t.clientX,r=t.clientY}else void 0!==t.pageX&&(n=t.pageX,r=t.pageY)}e.currentX=n,e.currentY=r},f=t=>t.timeStamp||Date.now()},VrSs:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("SVse"),l=n("U7NT"),u=n("ssx2"),c=n("kweq"),h=n("dh1O"),d=n("+/gg"),f=n("Gon4"),p=n("ajt+"),g=n("VMA6"),m=n("iInd");n.d(e,"a",function(){return k});var b=r.vb({encapsulation:0,styles:[["ion-auto-complete[_ngcontent-%COMP%], ion-auto-complete[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;width:100%}h3[_ngcontent-%COMP%]{font-family:'Samsung Sharp Sans';font-weight:700;color:#373838;font-size:1.2em}.label[_ngcontent-%COMP%]{font-family:Futura;font-weight:700;font-size:1.15em}.rounded[_ngcontent-%COMP%]{width:100%;height:100px;border-radius:10px;margin-bottom:10px}ion-button[_ngcontent-%COMP%]{width:30%;margin-left:auto;margin-right:auto}"]],data:{}});function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function y(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,108,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(2,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(4,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Difficulty"])),(t()(),r.xb(6,0,null,0,15,"ion-select",[["formControlName","difficulty"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,8)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,8)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(7,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(8,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(10,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(12,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(13,0,null,0,2,"ion-select-option",[["value","Easy"]],null,null,null,i.db,i.x)),r.wb(14,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Easy"])),(t()(),r.xb(16,0,null,0,2,"ion-select-option",[["value","Intermediate"]],null,null,null,i.db,i.x)),r.wb(17,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Intermediate"])),(t()(),r.xb(19,0,null,0,2,"ion-select-option",[["value","Extreme"]],null,null,null,i.db,i.x)),r.wb(20,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Extreme"])),(t()(),r.xb(22,0,null,null,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(23,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(24,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(25,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Water Crossings"])),(t()(),r.xb(27,0,null,0,15,"ion-select",[["formControlName","waterCrossings"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,29)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,29)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(28,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(29,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(31,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(33,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(34,0,null,0,2,"ion-select-option",[["value","Puddles"]],null,null,null,i.db,i.x)),r.wb(35,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Puddles"])),(t()(),r.xb(37,0,null,0,2,"ion-select-option",[["value","Streams"]],null,null,null,i.db,i.x)),r.wb(38,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Streams"])),(t()(),r.xb(40,0,null,0,2,"ion-select-option",[["value","Rivers"]],null,null,null,i.db,i.x)),r.wb(41,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Rivers"])),(t()(),r.xb(43,0,null,null,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(44,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(45,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(46,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Parking for Rigs"])),(t()(),r.xb(48,0,null,0,15,"ion-select",[["formControlName","parking"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,50)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,50)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(49,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(50,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(52,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(54,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(55,0,null,0,2,"ion-select-option",[["value","Plenty"]],null,null,null,i.db,i.x)),r.wb(56,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Plenty"])),(t()(),r.xb(58,0,null,0,2,"ion-select-option",[["value","Limited"]],null,null,null,i.db,i.x)),r.wb(59,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Limited"])),(t()(),r.xb(61,0,null,0,2,"ion-select-option",[["value","None"]],null,null,null,i.db,i.x)),r.wb(62,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["None"])),(t()(),r.xb(64,0,null,null,23,"ion-item",[],null,null,null,i.W,i.p)),r.wb(65,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(66,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(67,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Footing"])),(t()(),r.xb(69,0,null,0,18,"ion-select",[["formControlName","footing"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,71)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,71)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(70,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(71,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(73,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(75,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(76,0,null,0,2,"ion-select-option",[["value","Carriage"]],null,null,null,i.db,i.x)),r.wb(77,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Carriage trails"])),(t()(),r.xb(79,0,null,0,2,"ion-select-option",[["value","Sandy"]],null,null,null,i.db,i.x)),r.wb(80,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Sandy Loamy"])),(t()(),r.xb(82,0,null,0,2,"ion-select-option",[["value","Muddy"]],null,null,null,i.db,i.x)),r.wb(83,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Muddy"])),(t()(),r.xb(85,0,null,0,2,"ion-select-option",[["value","Rocky"]],null,null,null,i.db,i.x)),r.wb(86,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Rocky"])),(t()(),r.xb(88,0,null,null,20,"ion-item",[],null,null,null,i.W,i.p)),r.wb(89,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(90,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(91,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Bridges"])),(t()(),r.xb(93,0,null,0,15,"ion-select",[["formControlName","bridges"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,95)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,95)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(94,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(95,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(97,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(99,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(100,0,null,0,2,"ion-select-option",[["value","High"]],null,null,null,i.db,i.x)),r.wb(101,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["High"])),(t()(),r.xb(103,0,null,0,2,"ion-select-option",[["value","Low"]],null,null,null,i.db,i.x)),r.wb(104,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Low"])),(t()(),r.xb(106,0,null,0,2,"ion-select-option",[["value","Scary"]],null,null,null,i.db,i.x)),r.wb(107,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Scary"]))],function(t,e){t(e,4,0,"stacked"),t(e,10,0,"difficulty"),t(e,14,0,"Easy"),t(e,17,0,"Intermediate"),t(e,20,0,"Extreme"),t(e,25,0,"stacked"),t(e,31,0,"waterCrossings"),t(e,35,0,"Puddles"),t(e,38,0,"Streams"),t(e,41,0,"Rivers"),t(e,46,0,"stacked"),t(e,52,0,"parking"),t(e,56,0,"Plenty"),t(e,59,0,"Limited"),t(e,62,0,"None"),t(e,67,0,"stacked"),t(e,73,0,"footing"),t(e,77,0,"Carriage"),t(e,80,0,"Sandy"),t(e,83,0,"Muddy"),t(e,86,0,"Rocky"),t(e,91,0,"stacked"),t(e,97,0,"bridges"),t(e,101,0,"High"),t(e,104,0,"Low"),t(e,107,0,"Scary")},function(t,e){t(e,6,0,r.Jb(e,12).ngClassUntouched,r.Jb(e,12).ngClassTouched,r.Jb(e,12).ngClassPristine,r.Jb(e,12).ngClassDirty,r.Jb(e,12).ngClassValid,r.Jb(e,12).ngClassInvalid,r.Jb(e,12).ngClassPending),t(e,27,0,r.Jb(e,33).ngClassUntouched,r.Jb(e,33).ngClassTouched,r.Jb(e,33).ngClassPristine,r.Jb(e,33).ngClassDirty,r.Jb(e,33).ngClassValid,r.Jb(e,33).ngClassInvalid,r.Jb(e,33).ngClassPending),t(e,48,0,r.Jb(e,54).ngClassUntouched,r.Jb(e,54).ngClassTouched,r.Jb(e,54).ngClassPristine,r.Jb(e,54).ngClassDirty,r.Jb(e,54).ngClassValid,r.Jb(e,54).ngClassInvalid,r.Jb(e,54).ngClassPending),t(e,69,0,r.Jb(e,75).ngClassUntouched,r.Jb(e,75).ngClassTouched,r.Jb(e,75).ngClassPristine,r.Jb(e,75).ngClassDirty,r.Jb(e,75).ngClassValid,r.Jb(e,75).ngClassInvalid,r.Jb(e,75).ngClassPending),t(e,93,0,r.Jb(e,99).ngClassUntouched,r.Jb(e,99).ngClassTouched,r.Jb(e,99).ngClassPristine,r.Jb(e,99).ngClassDirty,r.Jb(e,99).ngClassValid,r.Jb(e,99).ngClassInvalid,r.Jb(e,99).ngClassPending)})}function w(t){return r.Tb(0,[r.Lb(0,a.u,[]),r.Pb(671088640,1,{addressSearchBar:0}),(t()(),r.xb(2,0,null,null,100,"ion-content",[],null,null,null,i.P,i.i)),r.wb(3,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(4,0,null,0,98,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,6).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,6).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.submit()&&i),i},null,null)),r.wb(5,16384,null,0,s.s,[],null,null),r.wb(6,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.d]),r.wb(8,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(9,0,null,null,93,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(10,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,91,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(12,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,89,"ion-col",[["align-self-center",""],["size","12"]],null,null,null,i.O,i.h)),r.wb(14,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(15,0,null,0,4,"div",[["text-center",""]],null,null,null,null,null)),(t()(),r.xb(16,0,null,null,3,"h3",[["class","submit"]],null,null,null,null,null)),(t()(),r.Rb(17,null,["Submit ",""])),r.Lb(131072,a.b,[r.i]),r.Nb(19,1),(t()(),r.xb(20,0,null,0,0,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(21,0,null,0,72,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(22,0,null,null,71,"ion-list",[],null,null,null,i.Y,i.r)),r.wb(23,49152,null,0,o.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(24,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(25,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(26,0,null,0,2,"ion-label",[["class","label"],["position","stacked"]],null,null,null,i.X,i.q)),r.wb(27,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Name"])),(t()(),r.xb(29,0,null,0,6,"ion-input",[["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,31)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,31)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(30,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(31,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(33,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(35,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(36,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(37,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(38,0,null,0,2,"ion-label",[["class","label"],["position","stacked"]],null,null,null,i.X,i.q)),r.wb(39,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Description"])),(t()(),r.xb(41,0,null,0,6,"ion-textarea",[["formControlName","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,43)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,43)._handleInputEvent(n.target)&&i),i},i.lb,i.E)),r.wb(42,49152,null,0,o.vb,[r.i,r.n,r.B],null,null),r.wb(43,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(45,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(47,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(48,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(49,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(50,0,null,0,2,"ion-label",[["class","label"],["position","stacked"]],null,null,null,i.X,i.q)),r.wb(51,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["URL"])),(t()(),r.xb(53,0,null,0,6,"ion-input",[["formControlName","url"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,55)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,55)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(54,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(55,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(57,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(59,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(60,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(61,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(62,0,null,0,2,"ion-label",[["class","label"],["position","stacked"]],null,null,null,i.X,i.q)),r.wb(63,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Phone number"])),(t()(),r.xb(65,0,null,0,6,"ion-input",[["formControlName","phoneNumber"],["type","tel"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,67)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,67)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(66,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(67,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(69,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(71,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(72,0,null,0,4,"ion-item",[],null,null,null,i.W,i.p)),r.wb(73,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(74,0,null,0,2,"ion-label",[["class","label"],["position","stacked"]],null,null,null,i.X,i.q)),r.wb(75,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Add Photos"])),(t()(),r.xb(77,0,null,0,1,"app-photo-adder",[],null,[[null,"onFilesChanged"]],function(t,e,n){var r=!0;return"onFilesChanged"===e&&(r=!1!==t.component.onPhotoUrlsChange(n)&&r),r},l.c,l.b)),r.wb(78,114688,null,0,u.a,[o.Fb],{inputUrls:[0,"inputUrls"]},{onFilesChanged:"onFilesChanged"}),(t()(),r.xb(79,0,null,0,4,"ion-item",[],null,null,null,i.W,i.p)),r.wb(80,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(81,0,null,0,2,"ion-label",[["class","label"],["position","stacked"]],null,null,null,i.X,i.q)),r.wb(82,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Address"])),(t()(),r.xb(84,0,null,0,3,"ion-auto-complete",[],null,[[null,"itemSelected"],["document","click"]],function(t,e,n){var i=!0,o=t.component;return"document:click"===e&&(i=!1!==r.Jb(t,86).documentClickHandler(n)&&i),"itemSelected"===e&&(i=!1!==o.onLocationSelected(n)&&i),i},c.b,c.a)),r.Ob(5120,null,s.g,function(t){return[t]},[h.a]),r.wb(86,8437760,[[1,4],["addressSearchbar",4]],0,h.a,[],{dataProvider:[0,"dataProvider"],keyword:[1,"keyword"],options:[2,"options"]},{itemSelected:"itemSelected"}),r.Mb(87,{placeholder:0}),(t()(),r.mb(16777216,null,0,2,null,v)),r.wb(89,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.mb(16777216,null,0,2,null,y)),r.wb(92,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,a.b,[r.i]),(t()(),r.xb(94,0,null,0,8,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(95,0,null,null,4,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,i.I,i.b)),r.wb(96,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(97,0,["Submit ",""])),r.Lb(131072,a.b,[r.i]),r.Nb(99,1),(t()(),r.xb(100,0,null,null,2,"ion-button",[["color","danger"],["expand","block"],["size","large"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cancel()&&r),r},i.I,i.b)),r.wb(101,49152,null,0,o.i,[r.i,r.n,r.B],{color:[0,"color"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Cancel"]))],function(t,e){var n=e.component;t(e,6,0,n.myForm),t(e,14,0,"12"),t(e,27,0,"stacked"),t(e,30,0,"text"),t(e,33,0,"name"),t(e,39,0,"stacked"),t(e,45,0,"description"),t(e,51,0,"stacked"),t(e,54,0,"url"),t(e,57,0,"url"),t(e,63,0,"stacked"),t(e,66,0,"tel"),t(e,69,0,"phoneNumber"),t(e,75,0,"stacked"),t(e,78,0,n.myForm.get("pictureUrl").value),t(e,82,0,"stacked");var i=n.mapboxService,o=n.myForm.get("address").value,s=t(e,87,0,"Enter address");t(e,86,0,i,o,s),t(e,89,0,"camp"===r.Sb(e,89,0,r.Jb(e,90).transform(n.type))),t(e,92,0,"trail"===r.Sb(e,92,0,r.Jb(e,93).transform(n.type))),t(e,96,0,n.myForm.invalid,"block","large","submit"),t(e,101,0,"danger","block","large","button")},function(t,e){var n=e.component;t(e,4,0,r.Jb(e,8).ngClassUntouched,r.Jb(e,8).ngClassTouched,r.Jb(e,8).ngClassPristine,r.Jb(e,8).ngClassDirty,r.Jb(e,8).ngClassValid,r.Jb(e,8).ngClassInvalid,r.Jb(e,8).ngClassPending);var i=r.Sb(e,17,0,t(e,19,0,r.Jb(e,0),r.Sb(e,17,0,r.Jb(e,18).transform(n.type))));t(e,17,0,i),t(e,29,0,r.Jb(e,35).ngClassUntouched,r.Jb(e,35).ngClassTouched,r.Jb(e,35).ngClassPristine,r.Jb(e,35).ngClassDirty,r.Jb(e,35).ngClassValid,r.Jb(e,35).ngClassInvalid,r.Jb(e,35).ngClassPending),t(e,41,0,r.Jb(e,47).ngClassUntouched,r.Jb(e,47).ngClassTouched,r.Jb(e,47).ngClassPristine,r.Jb(e,47).ngClassDirty,r.Jb(e,47).ngClassValid,r.Jb(e,47).ngClassInvalid,r.Jb(e,47).ngClassPending),t(e,53,0,r.Jb(e,59).ngClassUntouched,r.Jb(e,59).ngClassTouched,r.Jb(e,59).ngClassPristine,r.Jb(e,59).ngClassDirty,r.Jb(e,59).ngClassValid,r.Jb(e,59).ngClassInvalid,r.Jb(e,59).ngClassPending),t(e,65,0,r.Jb(e,71).ngClassUntouched,r.Jb(e,71).ngClassTouched,r.Jb(e,71).ngClassPristine,r.Jb(e,71).ngClassDirty,r.Jb(e,71).ngClassValid,r.Jb(e,71).ngClassInvalid,r.Jb(e,71).ngClassPending);var o=r.Sb(e,97,0,t(e,99,0,r.Jb(e,0),r.Sb(e,97,0,r.Jb(e,98).transform(n.type))));t(e,97,0,o)})}function _(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-add-camp",[],null,null,null,w,b)),r.wb(1,4308992,null,0,d.a,[f.a,p.a,g.a,s.b,o.Nb,o.Fb,m.a,m.m,o.a],null,null)],function(t,e){t(e,1,0)},null)}var k=r.tb("app-add-camp",d.a,_,{},{},[])},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},Wwor:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("mrSG"),i=n("lJxs"),o=n("eIep"),s=n("SxV6"),a=(n("VMA6"),n("Gon4"),n("+/gg"));n("ZZ/e");class l{constructor(t,e,n,r,s,a){this.router=t,this.route=e,this.modalCtrl=n,this.alertCtrl=r,this.campService=s,this.mapboxService=a,this.currQueries={name:"",address:"",state:"",city:""},this.queries=Object.keys(this.currQueries),this.p=1,this.isTrail=this.route.paramMap.pipe(Object(i.a)(t=>"trails"===t.get("source"))),this.title=this.isTrail.pipe(Object(i.a)(t=>t?"Trails":"Camps")),this.dataSource$=this.isTrail.pipe(Object(o.a)(t=>t?this.campService.getAllHorseTrailsAsList():this.campService.getAllHorseCampsAsList())),this.originalDataSource$=this.dataSource$}ngOnInit(){}onAddCampsButton(){this.isTrail.pipe(Object(s.a)()).subscribe(t=>{this.router.navigate(t?["/admin/add/trail"]:["/admin/add/camp"])})}onAnySearchBarChange(t){this.dataSource$=this.originalDataSource$.pipe(Object(i.a)(t=>""===this.currQueries.name?t:t.filter(t=>t.name.toLowerCase().includes(this.currQueries.name.toLowerCase()))),Object(i.a)(t=>""===this.currQueries.address?t:t.filter(t=>t.address.toLowerCase().includes(this.currQueries.address.toLowerCase()))),Object(i.a)(t=>""===this.currQueries.city?t:t.filter(t=>!!t.city&&t.city.toLowerCase().includes(this.currQueries.city.toLowerCase()))),Object(i.a)(t=>""===this.currQueries.state?t:t.filter(t=>!!t.state&&t.state.toLowerCase().includes(this.currQueries.state.toLowerCase()))))}onEditCampButtonClick(t){return r.__awaiter(this,void 0,void 0,function*(){(yield this.modalCtrl.create({component:a.a,componentProps:{camp:t}})).present()})}onDeleteCampButtonClick(t){return r.__awaiter(this,void 0,void 0,function*(){(yield this.alertCtrl.create({message:`Are you sure you want to delete ${t.name}? This action is irreversible!`,buttons:[{text:"Cancel",role:"cancel"},{text:"Yes",handler:()=>{this.campService.delete(t)}}]})).present()})}onPageChange(t){this.p=t}}},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(t=l){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function l(){return new r.a}},XNiG:function(t,e,n){"use strict";var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp");class a extends o.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}var l=n("2QA8");n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});class u extends i.a{constructor(t){super(t),this.destination=t}}let c=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends c{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y8sq:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("8Y7J");n("Q+Hy");class i{constructor(t){this.userProfileService=t,this.onRemoveButton=new r.p}ngOnInit(){}ngOnChanges(t){t.blog&&(this.blog=t.blog.currentValue,this.userData$=this.userProfileService.getUserProfile(this.blog.uid))}onRemoveButtonClick(){this.onRemoveButton.emit(this.blog)}}},ZF4u:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SVse"),o=n("U7NT"),s=n("ssx2"),a=n("ZZ/e"),l=n("oBZk"),u=n("CupD"),c=n("6seB"),h=n("lGQG"),d=n("ajt+"),f=n("Q+Hy"),p=n("VMA6"),g=n("2qqB"),m=n("4kQV");n.d(e,"a",function(){return k});var b=r.vb({encapsulation:0,styles:[[".fake-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;color:#00f}"]],data:{}});function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,2,"h1",[],null,null,null,null,null)),(t()(),r.Rb(1,null,["Reviewing ",""])),r.Lb(131072,i.b,[r.i])],null,function(t,e){var n,i=e.component;t(e,1,0,null==(n=r.Sb(e,1,0,r.Jb(e,2).transform(i.camp$)))?null:n.name)})}function y(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-photo-adder",[],null,[[null,"onFilesChanged"]],function(t,e,n){var r=!0;return"onFilesChanged"===e&&(r=!1!==t.component.onPhotoUrlsChange(n)&&r),r},o.c,o.b)),r.wb(1,114688,null,0,s.a,[a.Fb],null,{onFilesChanged:"onFilesChanged"})],function(t,e){t(e,1,0)},null)}function w(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,14,"ion-content",[["padding",""]],null,null,null,l.P,l.i)),r.wb(1,49152,null,0,a.s,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,2,null,v)),r.wb(3,16384,null,0,i.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,i.b,[r.i]),(t()(),r.xb(5,0,null,0,1,"span",[["class","fake-link"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=0!=(i.isAddingPhoto=!i.isAddingPhoto)&&r),r},null,null)),(t()(),r.Rb(-1,null,["Have some photos to add to your review?"])),(t()(),r.mb(16777216,null,0,1,null,y)),r.wb(8,16384,null,0,i.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.xb(9,0,null,0,2,"app-review",[],null,[[null,"exitEventEmitter"],[null,"submitReview"]],function(t,e,n){var r=!0,i=t.component;return"exitEventEmitter"===e&&(r=!1!==i.exitPopover()&&r),"submitReview"===e&&(r=!1!==i.submitReview(n)&&r),r},u.b,u.a)),r.wb(10,638976,null,0,c.a,[h.a,d.a,f.a,p.a,a.Fb],{camp:[0,"camp"],isEditMode:[1,"isEditMode"]},{submitReview:"submitReview",exitEventEmitter:"exitEventEmitter"}),r.Lb(131072,i.b,[r.i]),(t()(),r.xb(12,0,null,0,2,"ion-button",[["color","danger"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.exitPopover()&&r),r},l.I,l.b)),r.wb(13,49152,null,0,a.i,[r.i,r.n,r.B],{color:[0,"color"]},null),(t()(),r.Rb(-1,0,["Cancel"]))],function(t,e){var n=e.component;t(e,3,0,r.Sb(e,3,0,r.Jb(e,4).transform(n.camp$))),t(e,8,0,n.isAddingPhoto),t(e,10,0,r.Sb(e,10,0,r.Jb(e,11).transform(n.camp$)),!0),t(e,13,0,"danger")},null)}function _(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-review-write-new-review",[],null,null,null,w,b)),r.wb(1,114688,null,0,g.a,[m.a,p.a,a.Hb,a.Jb,a.Fb],null,null)],function(t,e){t(e,1,0)},null)}var k=r.tb("app-review-write-new-review",g.a,_,{},{},[])},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},"ZZ/e":function(t,e,n){"use strict";var r=n("mrSG"),i=n("8Y7J"),o=n("SVse"),s=n("iInd"),a=n("OoTa"),l=(n("1iah"),n("VUZZ"),n("igpV")),u=n("zZxQ"),c=n("XNiG"),h=n("xgIS"),d=n("2Vo4"),f=n("pLZG"),p=n("eIep"),g=n("/uUt"),m=n("S6Yj");n.d(e,"a",function(){return Ie}),n.d(e,"b",function(){return se}),n.d(e,"c",function(){return ne}),n.d(e,"d",function(){return F}),n.d(e,"e",function(){return j}),n.d(e,"f",function(){return B}),n.d(e,"g",function(){return V}),n.d(e,"h",function(){return U}),n.d(e,"i",function(){return z}),n.d(e,"j",function(){return q}),n.d(e,"k",function(){return H}),n.d(e,"l",function(){return $}),n.d(e,"m",function(){return W}),n.d(e,"n",function(){return J}),n.d(e,"o",function(){return G}),n.d(e,"p",function(){return Q}),n.d(e,"q",function(){return K}),n.d(e,"r",function(){return Y}),n.d(e,"s",function(){return X}),n.d(e,"t",function(){return Z}),n.d(e,"u",function(){return tt}),n.d(e,"v",function(){return et}),n.d(e,"w",function(){return nt}),n.d(e,"x",function(){return rt}),n.d(e,"y",function(){return it}),n.d(e,"z",function(){return ot}),n.d(e,"A",function(){return st}),n.d(e,"B",function(){return at}),n.d(e,"C",function(){return lt}),n.d(e,"D",function(){return ut}),n.d(e,"E",function(){return ct}),n.d(e,"F",function(){return ht}),n.d(e,"G",function(){return dt}),n.d(e,"H",function(){return ft}),n.d(e,"I",function(){return pt}),n.d(e,"J",function(){return gt}),n.d(e,"K",function(){return mt}),n.d(e,"L",function(){return bt}),n.d(e,"M",function(){return vt}),n.d(e,"N",function(){return yt}),n.d(e,"O",function(){return wt}),n.d(e,"P",function(){return _t}),n.d(e,"Q",function(){return kt}),n.d(e,"R",function(){return Ct}),n.d(e,"S",function(){return Et}),n.d(e,"T",function(){return St}),n.d(e,"U",function(){return Tt}),n.d(e,"V",function(){return xt}),n.d(e,"W",function(){return At}),n.d(e,"X",function(){return It}),n.d(e,"Y",function(){return Dt}),n.d(e,"Z",function(){return Pt}),n.d(e,"ab",function(){return Ot}),n.d(e,"bb",function(){return Nt}),n.d(e,"cb",function(){return Rt}),n.d(e,"db",function(){return Mt}),n.d(e,"eb",function(){return Lt}),n.d(e,"fb",function(){return ke}),n.d(e,"gb",function(){return Ft}),n.d(e,"hb",function(){return jt}),n.d(e,"ib",function(){return Bt}),n.d(e,"jb",function(){return Vt}),n.d(e,"kb",function(){return Ut}),n.d(e,"lb",function(){return zt}),n.d(e,"mb",function(){return qt}),n.d(e,"nb",function(){return Ht}),n.d(e,"ob",function(){return $t}),n.d(e,"pb",function(){return Wt}),n.d(e,"qb",function(){return Jt}),n.d(e,"rb",function(){return Gt}),n.d(e,"sb",function(){return Qt}),n.d(e,"tb",function(){return Ee}),n.d(e,"ub",function(){return Kt}),n.d(e,"vb",function(){return Yt}),n.d(e,"wb",function(){return Xt}),n.d(e,"xb",function(){return Zt}),n.d(e,"yb",function(){return te}),n.d(e,"zb",function(){return ee}),n.d(e,"Ab",function(){return Te}),n.d(e,"Bb",function(){return je}),n.d(e,"Cb",function(){return Le}),n.d(e,"Db",function(){return De}),n.d(e,"Eb",function(){return Oe}),n.d(e,"Fb",function(){return Ne}),n.d(e,"Gb",function(){return D}),n.d(e,"Hb",function(){return oe}),n.d(e,"Ib",function(){return x}),n.d(e,"Jb",function(){return Re}),n.d(e,"Kb",function(){return Se}),n.d(e,"Lb",function(){return S}),n.d(e,"Mb",function(){return T}),n.d(e,"Nb",function(){return Me}),n.d(e,"Ob",function(){return re}),n.d(e,"Pb",function(){return Fe});var b=function(t){return"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(t):"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t)},v=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=y(t,e);return o.componentOnReady().then(function(){return o[n].apply(o,r)})},y=function(t,e){var n=e.querySelector(t);return n||(n=e.createElement(t),e.body.appendChild(n)),n},w=function(){function t(t){this.el=t,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this.el.nativeElement.value=this.lastValue=null==t?"":t,_(this.el)},t.prototype.handleChangeEvent=function(t,e){t===this.el.nativeElement&&(e!==this.lastValue&&(this.lastValue=e,this.onChange(e)),_(this.el))},t.prototype._handleBlurEvent=function(t){t===this.el.nativeElement&&(this.onTouched(),_(this.el))},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.el.nativeElement.disabled=t},t}(),_=function(t){b(function(){var e=t.nativeElement,n=k(e);C(e,n);var r=e.closest("ion-item");r&&C(r,n)})},k=function(t){for(var e=t.classList,n=[],r=0;r<e.length;r++){var i=e.item(r);null!==i&&E(i,"ng-")&&n.push("ion-"+i.substr(3))}return n},C=function(t,e){var n=t.classList;n.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),n.add.apply(n,e)},E=function(t,e){return t.substr(0,e.length)===e},S=function(t){function e(e){return t.call(this,e)||this}return Object(r.__extends)(e,t),e.prototype._handleChangeEvent=function(t){this.handleChangeEvent(t,t.value)},e}(w),T=function(t){function e(e){return t.call(this,e)||this}return Object(r.__extends)(e,t),e.prototype._handleInputEvent=function(t){this.handleChangeEvent(t,t.value)},e}(w),x=function(){function t(t,e){var n=this;this.doc=t,this.backButton=new c.a,this.pause=new c.a,this.resume=new c.a,this.resize=new c.a,e.run(function(){var r;n.win=t.defaultView,n.backButton.subscribeWithPriority=function(t,n){return this.subscribe(function(r){return r.register(t,function(){return e.run(n)})})},I(n.pause,t,"pause"),I(n.resume,t,"resume"),I(n.backButton,t,"ionBackButton"),I(n.resize,n.win,"resize"),n._readyPromise=new Promise(function(t){r=t}),n.win&&n.win.cordova?t.addEventListener("deviceready",function(){r("cordova")},{once:!0}):r("dom")})}return t.prototype.is=function(t){return Object(a.f)(this.win,t)},t.prototype.platforms=function(){return Object(a.e)(this.win)},t.prototype.ready=function(){return this._readyPromise},Object.defineProperty(t.prototype,"isRTL",{get:function(){return"rtl"===this.doc.dir},enumerable:!0,configurable:!0}),t.prototype.getQueryParam=function(t){return A(this.win.location.href,t)},t.prototype.isLandscape=function(){return!this.isPortrait()},t.prototype.isPortrait=function(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches},t.prototype.testUserAgent=function(t){var e=this.win.navigator;return!!(e&&e.userAgent&&e.userAgent.indexOf(t)>=0)},t.prototype.url=function(){return this.win.location.href},t.prototype.width=function(){return this.win.innerWidth},t.prototype.height=function(){return this.win.innerHeight},t.ngInjectableDef=Object(i.W)({factory:function(){return new t(Object(i.ab)(o.d),Object(i.ab)(i.B))},token:t,providedIn:"root"}),t}(),A=function(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},I=function(t,e,n){e&&e.addEventListener(n,function(e){t.next(null!=e?e.detail:void 0)})},D=function(){function t(t,e,n,r){var i=this;this.location=e,this.serializer=n,this.router=r,this.direction=O,this.animated=N,this.guessDirection="forward",this.lastNavId=-1,r&&r.events.subscribe(function(t){if(t instanceof s.d){var e=t.restoredState?t.restoredState.navigationId:t.id;i.guessDirection=e<i.lastNavId?"back":"forward",i.guessAnimation=t.restoredState?void 0:i.guessDirection,i.lastNavId="forward"===i.guessDirection?t.id:e}}),t.backButton.subscribeWithPriority(0,function(){return i.pop()})}return t.prototype.navigateForward=function(t,e){return void 0===e&&(e={}),this.setDirection("forward",e.animated,e.animationDirection),this.navigate(t,e)},t.prototype.navigateBack=function(t,e){return void 0===e&&(e={}),this.setDirection("back",e.animated,e.animationDirection),this.navigate(t,e)},t.prototype.navigateRoot=function(t,e){return void 0===e&&(e={}),this.setDirection("root",e.animated,e.animationDirection),this.navigate(t,e)},t.prototype.back=function(t){return void 0===t&&(t={animated:!0,animationDirection:"back"}),this.setDirection("back",t.animated,t.animationDirection),this.location.back()},t.prototype.pop=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(e){switch(e.label){case 0:t=this.topOutlet,e.label=1;case 1:return t?[4,t.pop()]:[3,3];case 2:return e.sent()?[3,3]:(t=t.parentOutlet,[3,1]);case 3:return[2]}})})},t.prototype.setDirection=function(t,e,n){this.direction=t,this.animated=P(t,e,n)},t.prototype.setTopOutlet=function(t){this.topOutlet=t},t.prototype.consumeTransition=function(){var t,e="root";return"auto"===this.direction?(e=this.guessDirection,t=this.guessAnimation):(t=this.animated,e=this.direction),this.direction=O,this.animated=N,{direction:e,animation:t}},t.prototype.navigate=function(t,e){if(Array.isArray(t))return this.router.navigate(t,e);var n=this.serializer.parse(t.toString());return void 0!==e.queryParams&&(n.queryParams=Object(r.__assign)({},e.queryParams)),void 0!==e.fragment&&(n.fragment=e.fragment),this.router.navigateByUrl(n,e)},t.ngInjectableDef=Object(i.W)({factory:function(){return new t(Object(i.ab)(x),Object(i.ab)(o.i),Object(i.ab)(s.t),Object(i.ab)(s.m,8))},token:t,providedIn:"root"}),t}(),P=function(t,e,n){if(!1!==e)return void 0!==n?n:"forward"===t||"back"===t?t:"root"===t&&!0===e?"forward":void 0},O="auto",N=void 0,R=function(t,e){var n=t.prototype;e.forEach(function(t){Object.defineProperty(n,t,{get:function(){return this.el[t]},set:function(e){var n=this;this.z.runOutsideAngular(function(){return n.el[t]=e})}})})},M=function(t,e){var n=t.prototype;e.forEach(function(t){n[t]=function(){var e=this,n=arguments;return this.z.runOutsideAngular(function(){return e.el[t].apply(e.el,n)})}})},L=function(t,e,n){n.forEach(function(n){return t[n]=Object(h.a)(e,n)})},F=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),j=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),B=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(B,["color","defaultHref","disabled","icon","mode","text","type"]);var V=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionBackdropTap"])}}();R(V,["stopPropagation","tappable","visible"]);var U=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(U,["color","mode"]);var z=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionFocus","ionBlur"])}}();R(z,["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerDirection","shape","size","strong","target","type"]);var q=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),H=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(H,["button","color","disabled","download","href","mode","rel","routerDirection","target","type"]);var $=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R($,["mode"]);var W=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(W,["color","mode","translucent"]);var J=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(J,["color","mode"]);var G=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(G,["color","mode"]);var Q=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange","ionFocus","ionBlur"])}}();R(Q,["checked","color","disabled","indeterminate","mode","name","value"]);var K=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(K,["color","mode","outline"]);var Y=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Y,["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]);var X=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}}();M(X,["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]),R(X,["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"]);var Z=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}}();M(Z,["open"]),R(Z,["cancelText","dayNames","dayShortNames","dayValues","disabled","displayFormat","doneText","hourValues","max","min","minuteValues","mode","monthNames","monthShortNames","monthValues","name","pickerFormat","pickerOptions","placeholder","readonly","value","yearValues"]);var tt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();M(tt,["close"]),R(tt,["activated","edge","horizontal","vertical"]);var et=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionFocus","ionBlur"])}}();R(et,["activated","color","disabled","download","href","mode","rel","routerDirection","show","size","target","translucent","type"]);var nt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(nt,["activated","side"]);var rt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(rt,["mode","translucent"]);var it=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(it,["fixed"]);var ot=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(ot,["mode","translucent"]);var st=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(st,["ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","size","src"]);var at=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}}();R(at,["alt","src"]);var lt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionInfinite"])}}();M(lt,["complete"]),R(lt,["disabled","position","threshold"]);var ut=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(ut,["loadingSpinner","loadingText"]);var ct=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}}();M(ct,["setFocus","getInputElement"]),R(ct,["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"]);var ht=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(ht,["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerDirection","target","type"]);var dt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(dt,["color","mode","sticky"]);var ft=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),pt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(pt,["color","disabled","download","expandable","href","mode","rel","target","type"]);var gt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionSwipe"])}}();R(gt,["side"]);var mt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionDrag"])}}();M(mt,["getOpenAmount","getSlidingRatio","open","close","closeOpened"]),R(mt,["disabled"]);var bt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(bt,["color","mode","position"]);var vt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();M(vt,["closeSlidingItems"]),R(vt,["inset","lines","mode"]);var yt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(yt,["color","mode"]);var wt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}}();M(wt,["isOpen","isActive","open","close","toggle","setOpen"]),R(wt,["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"]);var _t=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(_t,["autoHide","color","disabled","menu","type"]);var kt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(kt,["autoHide","menu"]);var Ct=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionNavWillChange","ionNavDidChange"])}}();M(Ct,["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"]),R(Ct,["animated","animation","root","rootParams","swipeGesture"]);var Et=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),St=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(St,["component","componentProps"]);var Tt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Tt,["component","componentProps"]);var xt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(xt,["color","mode"]);var At=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(At,["buffer","color","mode","reversed","type","value"]);var It=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionSelect","ionFocus","ionBlur"])}}();R(It,["checked","color","disabled","mode","name","value"]);var Dt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange"])}}();R(Dt,["allowEmptySelection","name","value"]);var Pt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange","ionFocus","ionBlur"])}}();R(Pt,["color","debounce","disabled","dualKnobs","max","min","mode","name","pin","snaps","step","ticks","value"]);var Ot=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionRefresh","ionPull","ionStart"])}}();M(Ot,["complete","cancel","getProgress"]),R(Ot,["closeDuration","disabled","pullFactor","pullMax","pullMin","snapbackDuration"]);var Nt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Nt,["pullingIcon","pullingText","refreshingSpinner","refreshingText"]);var Rt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),Mt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionItemReorder"])}}();M(Mt,["complete"]),R(Mt,["disabled"]);var Lt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();M(Lt,["addRipple"]),R(Lt,["type"]);var Ft=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),jt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}}();M(jt,["setFocus","getInputElement"]),R(jt,["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","inputmode","mode","placeholder","searchIcon","showCancelButton","spellcheck","type","value"]);var Bt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange","ionStyle"])}}();R(Bt,["color","disabled","mode","scrollable","value"]);var Vt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionSelect"])}}();R(Vt,["checked","disabled","layout","mode","type","value"]);var Ut=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange","ionCancel","ionFocus","ionBlur"])}}();M(Ut,["open"]),R(Ut,["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"]);var zt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(zt,["disabled","selected","value"]);var qt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(qt,["animated","width"]);var Ht=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),$t=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionSlidesDidLoad","ionSlideTap","ionSlideDoubleTap","ionSlideWillChange","ionSlideDidChange","ionSlideNextStart","ionSlidePrevStart","ionSlideNextEnd","ionSlidePrevEnd","ionSlideTransitionStart","ionSlideTransitionEnd","ionSlideDrag","ionSlideReachStart","ionSlideReachEnd","ionSlideTouchStart","ionSlideTouchEnd"])}}();M($t,["update","updateAutoHeight","slideTo","slideNext","slidePrev","getActiveIndex","getPreviousIndex","length","isEnd","isBeginning","startAutoplay","stopAutoplay","lockSwipeToNext","lockSwipeToPrev","lockSwipes"]),R($t,["mode","options","pager","scrollbar"]);var Wt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Wt,["color","duration","name","paused"]);var Jt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionSplitPaneVisible"])}}();R(Jt,["contentId","disabled","when"]);var Gt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Gt,["color","mode","selectedTab","translucent"]);var Qt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Qt,["disabled","download","href","layout","mode","rel","selected","tab","target"]);var Kt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Kt,["color","mode"]);var Yt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}}();M(Yt,["setFocus","getInputElement"]),R(Yt,["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"]);var Xt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}(),Zt=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(Zt,["color"]);var te=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,L(this,this.el,["ionChange","ionFocus","ionBlur"])}}();R(te,["checked","color","disabled","mode","name","value"]);var ee=function(){return function(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}}();R(ee,["color","mode"]);var ne=function(){function t(){}return t.prototype.get=function(t,e){var n=ie();return n?n.get(t,e):null},t.prototype.getBoolean=function(t,e){var n=ie();return!!n&&n.getBoolean(t,e)},t.prototype.getNumber=function(t,e){var n=ie();return n?n.getNumber(t,e):0},t.prototype.set=function(t,e){var n=ie();n&&n.set(t,e)},t.ngInjectableDef=Object(i.W)({factory:function(){return new t},token:t,providedIn:"root"}),t}(),re=new i.r("USERCONFIG"),ie=function(){if("undefined"!=typeof window){var t=window.Ionic;if(t&&t.config)return t.config}return null},oe=function(){function t(t){void 0===t&&(t={}),this.data=t}return t.prototype.get=function(t){return this.data[t]},t}(),se=function(){function t(t,e){this.zone=t,this.appRef=e}return t.prototype.create=function(t,e,n){return new ae(t,e,n,this.appRef,this.zone)},t}(),ae=function(){function t(t,e,n,r,i){this.resolver=t,this.injector=e,this.location=n,this.appRef=r,this.zone=i,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}return t.prototype.attachViewToDom=function(t,e,n,r){var i=this;return this.zone.run(function(){return new Promise(function(o){o(le(i.zone,i.resolver,i.injector,i.location,i.appRef,i.elRefMap,i.elEventsMap,t,e,n,r))})})},t.prototype.removeViewFromDom=function(t,e){var n=this;return this.zone.run(function(){return new Promise(function(t){var r=n.elRefMap.get(e);if(r){r.destroy(),n.elRefMap.delete(e);var i=n.elEventsMap.get(e);i&&(i(),n.elEventsMap.delete(e))}t()})})},t}(),le=function(t,e,n,r,o,s,a,l,u,c,h){var d=e.resolveComponentFactory(u),f=i.s.create({providers:de(c),parent:n}),p=r?r.createComponent(d,r.length,f):d.create(f),g=p.instance,m=p.location.nativeElement;if(c&&Object.assign(g,c),h)for(var b=0,v=h;b<v.length;b++)m.classList.add(v[b]);var y=ce(t,g,m);return l.appendChild(m),r||o.attachView(p.hostView),p.changeDetectorRef.reattach(),s.set(m,p),a.set(m,y),m},ue=[l.a,l.b,l.c,l.d,l.e],ce=function(t,e,n){return t.run(function(){var t=ue.filter(function(t){return"function"==typeof e[t]}).map(function(t){var r=function(n){return e[t](n.detail)};return n.addEventListener(t,r),function(){return n.removeEventListener(t,r)}});return function(){return t.forEach(function(t){return t()})}})},he=new i.r("NavParamsToken"),de=function(t){return[{provide:he,useValue:t},{provide:oe,useFactory:fe,deps:[he]}]},fe=function(t){return new oe(t)},pe=function(t,e){return(t=t.filter(function(t){return t.stackId!==e.stackId})).push(e),t},ge=function(t,e){var n=t.createUrlTree(["."],{relativeTo:e});return t.serializeUrl(n)},me=function(t,e){if(t)for(var n=be(e),r=0;r<n.length;r++){if(r>=t.length)return n[r];if(n[r]!==t[r])return}},be=function(t){return t.split("/").map(function(t){return t.trim()}).filter(function(t){return""!==t})},ve=function(t){t&&(t.ref.destroy(),t.unlistenEvents())},ye=function(){function t(t,e,n,r,i,o){this.containerEl=e,this.router=n,this.navCtrl=r,this.zone=i,this.location=o,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==t?be(t):void 0}return t.prototype.createView=function(t,e){var n=ge(this.router,e),r=t&&t.location&&t.location.nativeElement,i=ce(this.zone,t.instance,r);return{id:this.nextId++,stackId:me(this.tabsPrefix,n),unlistenEvents:i,element:r,ref:t,url:n}},t.prototype.getExistingView=function(t){var e=ge(this.router,t),n=this.views.find(function(t){return t.url===e});return n&&n.ref.changeDetectorRef.reattach(),n},t.prototype.setActive=function(t){var e=this,n=this.navCtrl.consumeTransition(),r=n.direction,i=n.animation,o=this.activeView,s=function(t,e){return!e||t.stackId!==e.stackId}(t,o);s&&(r="back",i=void 0);var a,l=this.views.slice(),u=this.router;u.getCurrentNavigation?a=u.getCurrentNavigation():u.navigations&&u.navigations.value&&(a=u.navigations.value),a&&a.extras&&a.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);var c=this.views.includes(t),h=this.insertView(t,r);return c||t.ref.changeDetectorRef.detectChanges(),this.zone.runOutsideAngular(function(){return e.wait(function(){return o&&o.ref.changeDetectorRef.detach(),t.ref.changeDetectorRef.reattach(),e.transition(t,o,i,e.canGoBack(1),!1).then(function(){return we(t,h,l,e.location)}).then(function(){return{enteringView:t,direction:r,animation:i,tabSwitch:s}})})})},t.prototype.canGoBack=function(t,e){return void 0===e&&(e=this.getActiveStackId()),this.getStack(e).length>t},t.prototype.pop=function(t,e){var n=this;return void 0===e&&(e=this.getActiveStackId()),this.zone.run(function(){var r=n.getStack(e);if(r.length<=t)return Promise.resolve(!1);var i=r[r.length-t-1],o=i.url,s=i.savedData;if(s){var a=s.get("primary");a&&a.route&&a.route._routerState&&a.route._routerState.snapshot&&a.route._routerState.snapshot.url&&(o=a.route._routerState.snapshot.url)}return n.navCtrl.navigateBack(o,i.savedExtras).then(function(){return!0})})},t.prototype.startBackTransition=function(){var t=this,e=this.activeView;if(e){var n=this.getStack(e.stackId),r=n[n.length-2];return this.wait(function(){return t.transition(r,e,"back",t.canGoBack(2),!0)})}return Promise.resolve()},t.prototype.endBackTransition=function(t){t?(this.skipTransition=!0,this.pop(1)):this.activeView&&_e(this.activeView,this.views,this.views,this.location)},t.prototype.getLastUrl=function(t){var e=this.getStack(t);return e.length>0?e[e.length-1]:void 0},t.prototype.getActiveStackId=function(){return this.activeView?this.activeView.stackId:void 0},t.prototype.destroy=function(){this.containerEl=void 0,this.views.forEach(ve),this.activeView=void 0,this.views=[]},t.prototype.getStack=function(t){return this.views.filter(function(e){return e.stackId===t})},t.prototype.insertView=function(t,e){return this.activeView=t,this.views=function(t,e,n){return"root"===n?pe(t,e):"forward"===n?function(t,e){return t.indexOf(e)>=0?t=t.filter(function(t){return t.stackId!==e.stackId||t.id<=e.id}):t.push(e),t}(t,e):function(t,e){return t.indexOf(e)>=0?t.filter(function(t){return t.stackId!==e.stackId||t.id<=e.id}):pe(t,e)}(t,e)}(this.views,t,e),this.views.slice()},t.prototype.transition=function(t,e,n,r,i){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(e===t)return Promise.resolve(!1);var o=t?t.element:void 0,s=e?e.element:void 0,a=this.containerEl;return o&&o!==s&&(o.classList.add("ion-page","ion-page-invisible"),o.parentElement!==a&&a.appendChild(o),a.commit)?a.commit(o,s,{deepWait:!0,duration:void 0===n?0:void 0,direction:n,showGoBack:r,progressAnimation:i}):Promise.resolve(!1)},t.prototype.wait=function(t){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return void 0===this.runningTask?[3,2]:[4,this.runningTask];case 1:e.sent(),this.runningTask=void 0,e.label=2;case 2:return[2,this.runningTask=t()]}})})},t}(),we=function(t,e,n,r){return"function"==typeof requestAnimationFrame?new Promise(function(i){requestAnimationFrame(function(){_e(t,e,n,r),i()})}):Promise.resolve()},_e=function(t,e,n,r){n.filter(function(t){return!e.includes(t)}).forEach(ve),e.forEach(function(e){var n=r.path().split("?")[0].split("#")[0];if(e!==t&&e.url!==n){var i=e.element;i.setAttribute("aria-hidden","true"),i.classList.add("ion-page-hidden"),e.ref.changeDetectorRef.detach()}})},ke=function(){function t(t,e,n,r,o,a,l,u,c,h,f,p,g){this.parentContexts=t,this.location=e,this.resolver=n,this.config=a,this.navCtrl=l,this.parentOutlet=g,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new d.a(null),this.stackEvents=new i.p,this.activateEvents=new i.p,this.deactivateEvents=new i.p,this.nativeEl=c.nativeElement,this.name=r||s.f,this.tabsPrefix="true"===o?ge(h,p):void 0,this.stackCtrl=new ye(this.tabsPrefix,this.nativeEl,h,l,f,u),t.onChildOutletCreated(this.name,this)}return Object.defineProperty(t.prototype,"animated",{set:function(t){this.nativeEl.animated=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeGesture",{set:function(t){var e=this;this._swipeGesture=t,this.nativeEl.swipeHandler=t?{canStart:function(){return e.stackCtrl.canGoBack(1)},onStart:function(){return e.stackCtrl.startBackTransition()},onEnd:function(t){return e.stackCtrl.endBackTransition(t)}}:void 0},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.stackCtrl.destroy()},t.prototype.getContext=function(){return this.parentContexts.getContext(this.name)},t.prototype.ngOnInit=function(){var t=this;if(!this.activated){var e=this.getContext();e&&e.route&&this.activateWith(e.route,e.resolver||null)}this.nativeEl.componentOnReady&&this.nativeEl.componentOnReady().then(function(){void 0===t._swipeGesture&&(t.swipeGesture=t.config.getBoolean("swipeBackEnabled","ios"===t.nativeEl.mode))})},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){throw new Error("incompatible reuse strategy")},t.prototype.attach=function(t,e){throw new Error("incompatible reuse strategy")},t.prototype.deactivate=function(){if(this.activated){if(this.activatedView){this.activatedView.savedData=new Map(this.getContext().children.contexts),this.activatedView.savedExtras={};var t=this.getContext();if(t.route){var e=t.route.snapshot;this.activatedView.savedExtras.queryParams=e.queryParams,this.activatedView.savedExtras.fragment=e.fragment}}var n=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}},t.prototype.activateWith=function(t,e){var n,r=this;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var i=this.stackCtrl.getExistingView(t);if(i){n=this.activated=i.ref;var o=i.savedData;o&&(this.getContext().children.contexts=o),this.updateActivatedRouteProxy(n.instance,t)}else{var s=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new d.a(null),u=this.createActivatedRouteProxy(l,t),c=new Ce(u,a,this.location.injector);n=this.activated=this.location.createComponent(s,this.location.length,c),l.next(n.instance),i=this.stackCtrl.createView(this.activated,t),this.proxyMap.set(n.instance,u),this.currentActivatedRoute$.next({component:n.instance,activatedRoute:t})}this.activatedView=i,this.stackCtrl.setActive(i).then(function(t){r.navCtrl.setTopOutlet(r),r.activateEvents.emit(n.instance),r.stackEvents.emit(t)})},t.prototype.canGoBack=function(t,e){return void 0===t&&(t=1),this.stackCtrl.canGoBack(t,e)},t.prototype.pop=function(t,e){return void 0===t&&(t=1),this.stackCtrl.pop(t,e)},t.prototype.getLastUrl=function(t){var e=this.stackCtrl.getLastUrl(t);return e?e.url:void 0},t.prototype.getActiveStackId=function(){return this.stackCtrl.getActiveStackId()},t.prototype.createActivatedRouteProxy=function(t,e){var n=new s.a;return n._futureSnapshot=e._futureSnapshot,n._routerState=e._routerState,n.snapshot=e.snapshot,n.outlet=e.outlet,n.component=e.component,n._paramMap=this.proxyObservable(t,"paramMap"),n._queryParamMap=this.proxyObservable(t,"queryParamMap"),n.url=this.proxyObservable(t,"url"),n.params=this.proxyObservable(t,"params"),n.queryParams=this.proxyObservable(t,"queryParams"),n.fragment=this.proxyObservable(t,"fragment"),n.data=this.proxyObservable(t,"data"),n},t.prototype.proxyObservable=function(t,e){var n=this;return t.pipe(Object(f.a)(function(t){return!!t}),Object(p.a)(function(t){return n.currentActivatedRoute$.pipe(Object(f.a)(function(e){return null!==e&&e.component===t}),Object(p.a)(function(t){return t&&t.activatedRoute[e]}),Object(g.a)())}))},t.prototype.updateActivatedRouteProxy=function(t,e){var n=this.proxyMap.get(t);if(!n)throw new Error("Could not find activated route proxy for view");n._futureSnapshot=e._futureSnapshot,n._routerState=e._routerState,n.snapshot=e.snapshot,n.outlet=e.outlet,n.component=e.component,this.currentActivatedRoute$.next({component:t,activatedRoute:e})},t}(),Ce=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===s.a?this.route:t===s.b?this.childContexts:this.parent.get(t,e)},t}(),Ee=function(){function t(t){this.navCtrl=t,this.ionTabsWillChange=new i.p,this.ionTabsDidChange=new i.p}return t.prototype.onPageSelected=function(t){var e=t.enteringView.stackId;t.tabSwitch&&void 0!==e&&(this.tabBar&&(this.tabBar.selectedTab=e),this.ionTabsWillChange.emit({tab:e}),this.ionTabsDidChange.emit({tab:e}))},t.prototype.select=function(t){var e=this.outlet.getActiveStackId()===t,n=this.outlet.tabsPrefix+"/"+t,r=e?n:this.outlet.getLastUrl(t)||n;return this.navCtrl.navigateRoot(r,{animated:!0,animationDirection:"back"})},t.prototype.getSelected=function(){return this.outlet.getActiveStackId()},t}(),Se=function(){function t(t,e,n,r,i){this.locationStrategy=t,this.navCtrl=e,this.elementRef=n,this.router=r,this.routerLink=i,this.routerDirection="forward"}return t.prototype.ngOnInit=function(){this.updateTargetUrlAndHref()},t.prototype.ngOnChanges=function(){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.updateTargetUrlAndHref=function(){if(this.routerLink){var t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}},t.prototype.onClick=function(t){this.navCtrl.setDirection(this.routerDirection),t.preventDefault()},t}(),Te=function(){function t(t,e,n){this.z=t,this.iterableDiffers=e,this.refMap=new WeakMap,this.el=n.nativeElement,this.el.nodeRender=this.nodeRender.bind(this)}return t.prototype.ngOnChanges=function(t){if(this.trackBy&&"items"in t){var e=t.items.currentValue;if(void 0===this.differ&&null!=e)try{this.differ=this.iterableDiffers.find(e).create(this.trackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+e+"'. VirtualScroll only supports binding to Iterables such as Arrays.")}}},t.prototype.ngDoCheck=function(){null!==(void 0!==this.differ&&this.items?this.differ.diff(this.items):null)&&this.checkRange(0)},t.prototype.nodeRender=function(t,e,n){var r=this;return this.z.run(function(){var i;if(t){var o=(i=r.refMap.get(t)).context;o.$implicit=e.value,o.index=e.index}else i=r.itmTmp.viewContainer.createEmbeddedView(r.getComponent(e.type),{$implicit:e.value,index:n},n),t=xe(i),r.refMap.set(t,i);return i.detectChanges(),t})},t.prototype.getComponent=function(t){switch(t){case"item":return this.itmTmp.templateRef;case"header":return this.hdrTmp.templateRef;case"footer":return this.ftrTmp.templateRef}throw new Error("template for virtual item was not provided")},t}(),xe=function(t){for(var e=t.rootNodes,n=0;n<e.length;n++)if(1===e[n].nodeType)return e[n];throw new Error("virtual element was not created")};R(Te,["approxItemHeight","approxHeaderHeight","approxFooterHeight","headerFn","footerFn","items","itemHeight","headerHeight","footerHeight"]),M(Te,["checkEnd","checkRange","positionForItem"]);var Ae=function(){function t(t){this.ctrl=t}return t.prototype.create=function(t){return this.ctrl.create(t||{})},t.prototype.dismiss=function(t,e,n){return this.ctrl.dismiss(t,e,n)},t.prototype.getTop=function(){return this.ctrl.getTop()},t}(),Ie=function(t){function e(){return t.call(this,u.b)||this}return Object(r.__extends)(e,t),e.ngInjectableDef=Object(i.W)({factory:function(){return new e},token:e,providedIn:"root"}),e}(Ae),De=function(t){function e(){return t.call(this,u.l)||this}return Object(r.__extends)(e,t),e.ngInjectableDef=Object(i.W)({factory:function(){return new e},token:e,providedIn:"root"}),e}(Ae),Pe="ion-menu-controller",Oe=function(){function t(t){this.doc=t}return t.prototype.open=function(t){return v(Pe,this.doc,"open",t)},t.prototype.close=function(t){return v(Pe,this.doc,"close",t)},t.prototype.toggle=function(t){return v(Pe,this.doc,"toggle",t)},t.prototype.enable=function(t,e){return v(Pe,this.doc,"enable",t,e)},t.prototype.swipeEnable=function(t,e){return console.warn("MenuController.swipeEnable is deprecated. Use MenuController.swipeGesture() instead"),this.swipeGesture(t,e)},t.prototype.swipeGesture=function(t,e){return v(Pe,this.doc,"swipeGesture",t,e)},t.prototype.isOpen=function(t){return v(Pe,this.doc,"isOpen",t)},t.prototype.isEnabled=function(t){return v(Pe,this.doc,"isEnabled",t)},t.prototype.get=function(t){return v(Pe,this.doc,"get",t)},t.prototype.getOpen=function(){return v(Pe,this.doc,"getOpen")},t.prototype.getMenus=function(){return v(Pe,this.doc,"getMenus")},t.ngInjectableDef=Object(i.W)({factory:function(){return new t(Object(i.ab)(o.d))},token:t,providedIn:"root"}),t}(),Ne=function(t){function e(e,n,r){var i=t.call(this,u.m)||this;return i.angularDelegate=e,i.resolver=n,i.injector=r,i}return Object(r.__extends)(e,t),e.prototype.create=function(e){return t.prototype.create.call(this,Object(r.__assign)({},e,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))},e}(Ae),Re=function(t){function e(e,n,r){var i=t.call(this,u.d)||this;return i.angularDelegate=e,i.resolver=n,i.injector=r,i}return Object(r.__extends)(e,t),e.prototype.create=function(e){return t.prototype.create.call(this,Object(r.__assign)({},e,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))},e}(Ae),Me=function(t){function e(){return t.call(this,u.p)||this}return Object(r.__extends)(e,t),e.ngInjectableDef=Object(i.W)({factory:function(){return new e},token:e,providedIn:"root"}),e}(Ae),Le=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.shouldAttach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){if(t.routeConfig!==e.routeConfig)return!1;var n=t.params,r=e.params,i=Object.keys(n),o=Object.keys(r);if(i.length!==o.length)return!1;for(var s=0,a=i;s<a.length;s++){var l=a[s];if(r[l]!==n[l])return!1}return!0},t}(),Fe=function(t,e,i){return function(){var o=e.defaultView;if(o){(o.Ionic=o.Ionic||{}).config=Object(r.__assign)({},t,{_zoneGate:function(t){return i.run(t)}});var s="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var t=window,e=[];return t.customElements&&(!t.Element||t.Element.prototype.closest&&t.Element.prototype.matches&&t.Element.prototype.remove)||e.push(n.e(110).then(n.t.bind(null,"QdDj",7))),"function"==typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!t.NodeList||t.NodeList.prototype.forEach)&&t.fetch&&function(){try{var t=new URL("b","http://a");return t.pathname="c%20d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()&&"undefined"!=typeof WeakMap||e.push(n.e(108).then(n.t.bind(null,"t6o4",7))),t.CSS&&t.CSS.supports&&t.CSS.supports("color","var(--c)")||e.push(n.e(109).then(n.t.bind(null,"KIXJ",7))),Promise.all(e)}().then(function(){return((t,e)=>Object(m.b)().then(()=>{Object(m.h)(),Object(m.c)(JSON.parse('[[{"ios":"ion-select_3-ios","md":"ion-select_3-md"},[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionSelect","onSelect"]]],[1,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]},[[0,"ionSelectOptionDidLoad","selectOptionChanged"],[0,"ionSelectOptionDidUnload","selectOptionChanged"]]],[1,"ion-select-option",{"disabled":[4],"selected":[4],"value":[1032]}]]],[{"ios":"ion-action-sheet-ios","md":"ion-action-sheet-md"},[[2,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],[{"ios":"ion-fab_3-ios","md":"ion-fab_3-md"},[[1,"ion-fab-button",{"color":[1],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],[{"ios":"ion-refresher_2-ios","md":"ion-refresher_2-md"},[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[0,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],[{"ios":"ion-alert-ios","md":"ion-alert-md"},[[2,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],[{"ios":"ion-back-button-ios","md":"ion-back-button-md"},[[2,"ion-back-button",{"color":[1],"defaultHref":[1,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1]}]]],[{"ios":"ion-loading-ios","md":"ion-loading-md"},[[2,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],[{"ios":"ion-toast-ios","md":"ion-toast-md"},[[1,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[1],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"showCloseButton":[4,"show-close-button"],"closeButtonText":[1,"close-button-text"],"buttons":[16],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],[{"ios":"ion-card_5-ios","md":"ion-card_5-md"},[[6,"ion-card",{"color":[1],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"target":[1]}],[0,"ion-card-content"],[1,"ion-card-header",{"color":[1],"translucent":[4]}],[1,"ion-card-subtitle",{"color":[1]}],[1,"ion-card-title",{"color":[1]}]]],[{"ios":"ion-item-option_3-ios","md":"ion-item-option_3-md"},[[1,"ion-item-option",{"color":[1],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[0,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],[{"ios":"ion-infinite-scroll_2-ios","md":"ion-infinite-scroll_2-md"},[[0,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],[{"ios":"ion-reorder_2-ios","md":"ion-reorder_2-md"},[[1,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],[{"ios":"ion-segment_2-ios","md":"ion-segment_2-md"},[[1,"ion-segment-button",{"checked":[1028],"disabled":[4],"layout":[1],"type":[1],"value":[1]}],[2,"ion-segment",{"color":[1],"disabled":[4],"scrollable":[4],"value":[1025]},[[0,"ionSelect","segmentClick"]]]]],[{"ios":"ion-tab-bar_2-ios","md":"ion-tab-bar_2-md"},[[1,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[16,"ionTabBarChanged","onTabBarChanged"]]],[1,"ion-tab-bar",{"color":[1],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},[[8,"keyboardWillHide","onKeyboardWillHide"],[8,"keyboardWillShow","onKeyboardWillShow"]]]]],[{"ios":"ion-chip-ios","md":"ion-chip-md"},[[1,"ion-chip",{"color":[1],"outline":[4]}]]],[{"ios":"ion-modal-ios","md":"ion-modal-md"},[[2,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],[{"ios":"ion-popover-ios","md":"ion-popover-md"},[[2,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],[{"ios":"ion-searchbar-ios","md":"ion-searchbar-md"},[[2,"ion-searchbar",{"color":[1],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[8,"show-cancel-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-action-sheet-controller_8",[[0,"ion-action-sheet-controller",{"create":[64],"dismiss":[64],"getTop":[64]}],[0,"ion-alert-controller",{"create":[64],"dismiss":[64],"getTop":[64]}],[1,"ion-anchor",{"color":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"]}],[0,"ion-loading-controller",{"create":[64],"dismiss":[64],"getTop":[64]}],[0,"ion-modal-controller",{"create":[64],"dismiss":[64],"getTop":[64]}],[0,"ion-picker-controller",{"create":[64],"dismiss":[64],"getTop":[64]}],[0,"ion-popover-controller",{"create":[64],"dismiss":[64],"getTop":[64]}],[0,"ion-toast-controller",{"create":[64],"dismiss":[64],"getTop":[64]}]]],[{"ios":"ion-app_8-ios","md":"ion-app_8-md"},[[0,"ion-app"],[2,"ion-buttons"],[1,"ion-content",{"color":[1],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[2,"click","onClick"]]],[0,"ion-footer",{"translucent":[4]}],[0,"ion-header",{"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[1,"ion-title",{"color":[1]}],[1,"ion-toolbar",{"color":[1]},[[0,"ionStyle","childrenStyle"]]]]],["ion-nav_4",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-pop"],[0,"ion-nav-push",{"component":[1],"componentProps":[16]}],[0,"ion-nav-set-root",{"component":[1],"componentProps":[16]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"target":[1]}]]],[{"ios":"ion-avatar_3-ios","md":"ion-avatar_3-md"},[[1,"ion-avatar"],[1,"ion-badge",{"color":[1]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],[{"ios":"ion-slide_2-ios","md":"ion-slide_2-md"},[[0,"ion-slide"],[4,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64]},[[0,"ionSlideChanged","onSlideChanged"]]]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"tabs":[32],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],[{"ios":"ion-checkbox-ios","md":"ion-checkbox-md"},[[1,"ion-checkbox",{"color":[1],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],[{"ios":"ion-input-ios","md":"ion-input-md"},[[2,"ion-input",{"color":[1],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1025],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],[{"ios":"ion-progress-bar-ios","md":"ion-progress-bar-md"},[[1,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[1]}]]],[{"ios":"ion-range-ios","md":"ion-range-md"},[[1,"ion-range",{"color":[1],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],[{"ios":"ion-split-pane-ios","md":"ion-split-pane-md"},[[0,"ion-split-pane",{"contentId":[1,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[1]}]]],[{"ios":"ion-textarea-ios","md":"ion-textarea-md"},[[2,"ion-textarea",{"color":[1],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],[{"ios":"ion-toggle-ios","md":"ion-toggle-md"},[[1,"ion-toggle",{"color":[1],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],[{"ios":"ion-backdrop-ios","md":"ion-backdrop-md"},[[1,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"touchstart","onTouchStart"],[2,"click","onMouseDown"],[2,"mousedown","onMouseDown"]]]]],[{"ios":"ion-menu_4-ios","md":"ion-menu_4-md"},[[1,"ion-menu",{"contentId":[1,"content-id"],"menuId":[1,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[32,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]]],[1,"ion-menu-button",{"color":[1],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[32,"ionMenuChange","visibilityChanged"],[32,"ionSplitPaneVisible","visibilityChanged"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[32,"ionMenuChange","visibilityChanged"],[32,"ionSplitPaneVisible","visibilityChanged"]]],[0,"ion-menu-controller",{"open":[64],"close":[64],"toggle":[64],"enable":[64],"swipeGesture":[64],"isOpen":[64],"isEnabled":[64],"get":[64],"getOpen":[64],"getMenus":[64],"isAnimating":[64],"registerAnimation":[64],"_getInstance":[64]}]]],[{"ios":"ion-datetime_3-ios","md":"ion-datetime_3-md"},[[2,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[1,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[0,"ion-picker-column",{"col":[16]}]]],[{"ios":"ion-radio_2-ios","md":"ion-radio_2-md"},[[1,"ion-radio",{"color":[1],"name":[1],"disabled":[4],"checked":[1028],"value":[1032]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[0,"ionRadioDidLoad","onRadioDidLoad"],[0,"ionRadioDidUnload","onRadioDidUnload"],[0,"ionSelect","onRadioSelect"],[0,"ionDeselect","onRadioDeselect"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[1],"duration":[2],"name":[1],"paused":[4]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],[{"ios":"ion-button_2-ios","md":"ion-button_2-md"},[[1,"ion-button",{"color":[1],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"color":[1],"ariaLabel":[1537,"aria-label"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[1],"src":[1],"icon":[8],"size":[1],"lazy":[4],"svgContent":[32],"isVisible":[32]}]]],[{"ios":"ion-item_8-ios","md":"ion-item_8-md"},[[1,"ion-item-divider",{"color":[1],"sticky":[4]}],[0,"ion-item-group"],[1,"ion-note",{"color":[1]}],[1,"ion-skeleton-text",{"animated":[4],"width":[1]}],[1,"ion-item",{"color":[1],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32]},[[0,"ionStyle","itemStyle"]]],[2,"ion-label",{"color":[1],"position":[1],"noAnimate":[32]}],[0,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[1,"ion-list-header",{"color":[1]}]]]]'),e)}))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:b,jmp:function(t){return i.runOutsideAngular(t)},ael:function(t,e,n,r){t[s](e,n,r)},rel:function(t,e,n,r){t.removeEventListener(e,n,r)}})})}}},je=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:re,useValue:e},{provide:i.d,useFactory:Fe,multi:!0,deps:[re,o.d,i.B]}]}},t}()},ZedB:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG");class i{constructor(t=null,e=null,n=null){this.url=t,this.ref=e,this.task=n}static getUploadedImage(t){return new i(t)}static getLocalImage(t,e){return new i(null,t,e)}getUrl(){return r.__awaiter(this,void 0,void 0,function*(){return this.url?this.url:(yield this.task,this.ref.getDownloadURL().toPromise())})}}},"a+Xp":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("mrSG"),i=n("Cfvw"),o=n("LRne"),s=n("ajt+"),a=n("JIr8"),l=n("5+tZ"),u=n("8Y7J");let c=(()=>{class t{constructor(t){this.db=t}tryAddNew(t){const e=this.getAllRefs(t);return Object(i.a)(this.db.batchWrite(e)).pipe(Object(a.a)(t=>Object(o.a)(!1)),Object(l.a)(t=>Object(o.a)(!0)))}tryDelete(t){return r.__awaiter(this,void 0,void 0,function*(){const e=this.getAllRefs(t);Object.keys(e).forEach(t=>r.__awaiter(this,void 0,void 0,function*(){yield this.db.removeAtPath(t)}))})}getAllRefs(t){const e=new Map;return e[`blogs/blogs-details/${t.id}`]=t,e[`blogs/blogs-by-uid/${t.uid}/${t.id}`]=!0,e}getAllAsMap(){return this.db.getObjectValues("blogs/blogs-details/")}getAllAsList(){return this.db.getListSortedByFunction("blogs/blogs-details/",null)}getByID(t){return this.db.getObjectValues(`blogs/blogs-details/${t}`)}}return t.ngInjectableDef=u.Wb({factory:function(){return new t(u.Xb(s.a))},token:t,providedIn:"root"}),t})()},a3Cf:function(t,e,n){"use strict";var r=n("HPGL"),i=n("Lq6m");n.d(e,"IonicNativePlugin",function(){return i.a}),n("KOl+");var o=n("xSm1");n.d(e,"cordova",function(){return o.a}),n("hKQe"),n("Rt+L");var s=n("pxS/");n.d(e,"cordovaPropertyGet",function(){return s.a}),n.d(e,"cordovaPropertySet",function(){return s.b}),n("Ji5e"),n("4pTB"),Object(r.a)()},aCaX:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("SVse"),l=n("iInd"),u=n("bP1B"),c=n("lGQG");n.d(e,"a",function(){return p});var h=r.vb({encapsulation:0,styles:[[""]],data:{}});function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,58,"ion-content",[],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,56,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.login(r.Jb(t,4))&&i),i},null,null)),r.wb(3,16384,null,0,s.s,[],null,null),r.wb(4,4210688,[["form",4]],0,s.k,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.k]),r.wb(6,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(7,0,null,null,51,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(8,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,33,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(10,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,31,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),(t()(),r.xb(14,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Login"])),(t()(),r.xb(16,0,null,0,22,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(17,0,null,null,10,"ion-item",[],null,null,null,i.W,i.p)),r.wb(18,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(19,0,null,0,8,"ion-input",[["name","email"],["ngModel",""],["placeholder","your@email.com"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,22)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,22)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(20,16384,null,0,s.n,[],{required:[0,"required"]},null),r.Ob(1024,null,s.f,function(t){return[t]},[s.n]),r.wb(22,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(24,671744,null,0,s.l,[[2,s.a],[6,s.f],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},null),r.Ob(2048,null,s.h,null,[s.l]),r.wb(26,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(27,49152,null,0,o.E,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(t()(),r.xb(28,0,null,null,10,"ion-item",[],null,null,null,i.W,i.p)),r.wb(29,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(30,0,null,0,8,"ion-input",[["name","password"],["ngModel",""],["placeholder","Password"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,33)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,33)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(31,16384,null,0,s.n,[],{required:[0,"required"]},null),r.Ob(1024,null,s.f,function(t){return[t]},[s.n]),r.wb(33,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(35,671744,null,0,s.l,[[2,s.a],[6,s.f],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},null),r.Ob(2048,null,s.h,null,[s.l]),r.wb(37,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(38,49152,null,0,o.E,[r.i,r.n,r.B],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(t()(),r.xb(39,0,null,0,3,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(40,0,null,null,2,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,i.I,i.b)),r.wb(41,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Login"])),(t()(),r.xb(43,0,null,0,6,"ion-row",[["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(44,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(45,0,null,0,4,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.googleLogin()&&r),r},i.I,i.b)),r.wb(46,49152,null,0,o.i,[r.i,r.n,r.B],null,null),(t()(),r.xb(47,0,null,0,1,"ion-icon",[["name","logo-google"],["padding",""]],null,null,null,i.U,i.n)),r.wb(48,49152,null,0,o.A,[r.i,r.n,r.B],{name:[0,"name"]},null),(t()(),r.Rb(-1,0,[" Login with Google "])),(t()(),r.xb(50,0,null,0,8,"ion-row",[["justify-content-center",""],["padding",""]],null,null,null,i.bb,i.u)),r.wb(51,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(52,0,null,0,6,"div",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,[" If you don't have an account, please "])),(t()(),r.xb(54,0,null,null,3,"a",[["routerLink","/register"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,55).onClick(n)&&i),"click"===e&&(i=!1!==r.Jb(t,56).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.wb(55,737280,null,0,o.Kb,[a.j,o.Gb,r.n,l.m,[2,l.n]],null,null),r.wb(56,671744,null,0,l.o,[l.m,l.a,a.j],{routerLink:[0,"routerLink"]},null),(t()(),r.Rb(-1,null,[" register"])),(t()(),r.Rb(-1,null,[" first! "]))],function(t,e){t(e,20,0,""),t(e,24,0,"email",""),t(e,27,0,"email","your@email.com","","email"),t(e,31,0,""),t(e,35,0,"password",""),t(e,38,0,"password","Password","","password"),t(e,41,0,r.Jb(e,4).invalid,"block","large","submit"),t(e,48,0,"logo-google"),t(e,55,0),t(e,56,0,"/register")},function(t,e){t(e,2,0,r.Jb(e,6).ngClassUntouched,r.Jb(e,6).ngClassTouched,r.Jb(e,6).ngClassPristine,r.Jb(e,6).ngClassDirty,r.Jb(e,6).ngClassValid,r.Jb(e,6).ngClassInvalid,r.Jb(e,6).ngClassPending),t(e,19,0,r.Jb(e,20).required?"":null,r.Jb(e,26).ngClassUntouched,r.Jb(e,26).ngClassTouched,r.Jb(e,26).ngClassPristine,r.Jb(e,26).ngClassDirty,r.Jb(e,26).ngClassValid,r.Jb(e,26).ngClassInvalid,r.Jb(e,26).ngClassPending),t(e,30,0,r.Jb(e,31).required?"":null,r.Jb(e,37).ngClassUntouched,r.Jb(e,37).ngClassTouched,r.Jb(e,37).ngClassPristine,r.Jb(e,37).ngClassDirty,r.Jb(e,37).ngClassValid,r.Jb(e,37).ngClassInvalid,r.Jb(e,37).ngClassPending),t(e,54,0,r.Jb(e,56).target,r.Jb(e,56).href)})}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-login",[],null,null,null,d,h)),r.wb(1,114688,null,0,u.a,[c.a,o.Nb,l.m],null,null)],function(t,e){t(e,1,0)},null)}var p=r.tb("app-login",u.a,f,{},{},[])},abRS:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return b});var r=n("8Y7J"),i=n("xkgV"),o=n("SVse"),s=r.vb({encapsulation:2,styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],data:{}});function a(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"a",[["tabindex","0"]],[[1,"aria-label",0]],[[null,"keyup.enter"],[null,"click"]],function(t,e,n){var i=!0;return"keyup.enter"===e&&(i=!1!==r.Jb(t.parent.parent.parent,2).previous()&&i),"click"===e&&(i=!1!==r.Jb(t.parent.parent.parent,2).previous()&&i),i},null,null)),(t()(),r.Rb(1,null,[" "," "])),(t()(),r.xb(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),r.Rb(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.previousLabel+" "+n.screenReaderPageLabel),t(e,1,0,n.previousLabel),t(e,3,0,n.screenReaderPageLabel)})}function l(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),r.Rb(1,null,[" "," "])),(t()(),r.xb(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),r.Rb(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.previousLabel),t(e,3,0,n.screenReaderPageLabel)})}function u(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,4,"li",[["class","pagination-previous"]],[[2,"disabled",null]],null,null,null,null)),(t()(),r.mb(16777216,null,null,1,null,a)),r.wb(2,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,l)),r.wb(4,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,1<r.Jb(e.parent.parent,2).getCurrent()),t(e,4,0,r.Jb(e.parent.parent,2).isFirstPage())},function(t,e){t(e,0,0,r.Jb(e.parent.parent,2).isFirstPage())})}function c(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,5,"a",[["tabindex","0"]],null,[[null,"keyup.enter"],[null,"click"]],function(t,e,n){var i=!0;return"keyup.enter"===e&&(i=!1!==r.Jb(t.parent.parent.parent,2).setCurrent(t.parent.context.$implicit.value)&&i),"click"===e&&(i=!1!==r.Jb(t.parent.parent.parent,2).setCurrent(t.parent.context.$implicit.value)&&i),i},null,null)),(t()(),r.xb(1,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),r.Rb(2,null,[""," "])),(t()(),r.xb(3,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),r.Rb(4,null,["",""])),r.Nb(5,2)],null,function(t,e){t(e,2,0,e.component.screenReaderPageLabel);var n="..."===e.parent.context.$implicit.label?e.parent.context.$implicit.label:r.Sb(e,4,0,t(e,5,0,r.Jb(e.parent.parent.parent,0),e.parent.context.$implicit.label,""));t(e,4,0,n)})}function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,5,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),r.Rb(2,null,[""," "])),(t()(),r.xb(3,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),r.Rb(4,null,["",""])),r.Nb(5,2)],null,function(t,e){t(e,2,0,e.component.screenReaderCurrentLabel);var n="..."===e.parent.context.$implicit.label?e.parent.context.$implicit.label:r.Sb(e,4,0,t(e,5,0,r.Jb(e.parent.parent.parent,0),e.parent.context.$implicit.label,""));t(e,4,0,n)})}function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,4,"li",[],[[2,"current",null],[2,"ellipsis",null]],null,null,null,null)),(t()(),r.mb(16777216,null,null,1,null,c)),r.wb(2,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,h)),r.wb(4,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,r.Jb(e.parent.parent,2).getCurrent()!==e.context.$implicit.value),t(e,4,0,r.Jb(e.parent.parent,2).getCurrent()===e.context.$implicit.value)},function(t,e){t(e,0,0,r.Jb(e.parent.parent,2).getCurrent()===e.context.$implicit.value,"..."===e.context.$implicit.label)})}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"a",[["tabindex","0"]],[[1,"aria-label",0]],[[null,"keyup.enter"],[null,"click"]],function(t,e,n){var i=!0;return"keyup.enter"===e&&(i=!1!==r.Jb(t.parent.parent.parent,2).next()&&i),"click"===e&&(i=!1!==r.Jb(t.parent.parent.parent,2).next()&&i),i},null,null)),(t()(),r.Rb(1,null,[" "," "])),(t()(),r.xb(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),r.Rb(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.nextLabel+" "+n.screenReaderPageLabel),t(e,1,0,n.nextLabel),t(e,3,0,n.screenReaderPageLabel)})}function p(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),r.Rb(1,null,[" "," "])),(t()(),r.xb(2,0,null,null,1,"span",[["class","show-for-sr"]],null,null,null,null,null)),(t()(),r.Rb(3,null,["",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.nextLabel),t(e,3,0,n.screenReaderPageLabel)})}function g(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,4,"li",[["class","pagination-next"]],[[2,"disabled",null]],null,null,null,null)),(t()(),r.mb(16777216,null,null,1,null,f)),r.wb(2,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,p)),r.wb(4,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,!r.Jb(e.parent.parent,2).isLastPage()),t(e,4,0,r.Jb(e.parent.parent,2).isLastPage())},function(t,e){t(e,0,0,r.Jb(e.parent.parent,2).isLastPage())})}function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,8,"ul",[["class","ngx-pagination"],["role","navigation"]],[[1,"aria-label",0],[2,"responsive",null]],null,null,null,null)),(t()(),r.mb(16777216,null,null,1,null,u)),r.wb(2,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.xb(3,0,null,null,1,"li",[["class","small-screen"]],null,null,null,null,null)),(t()(),r.Rb(4,null,[" "," / "," "])),(t()(),r.mb(16777216,null,null,1,null,d)),r.wb(6,278528,null,0,o.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null),(t()(),r.mb(16777216,null,null,1,null,g)),r.wb(8,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.directionLinks),t(e,6,0,r.Jb(e.parent,2).pages),t(e,8,0,n.directionLinks)},function(t,e){var n=e.component;t(e,0,0,n.screenReaderPaginationLabel,n.responsive),t(e,4,0,r.Jb(e.parent,2).getCurrent(),r.Jb(e.parent,2).getLastPage())})}function b(t){return r.Tb(2,[r.Lb(0,o.f,[r.w]),(t()(),r.xb(1,0,null,null,3,"pagination-template",[],null,[[null,"pageChange"]],function(t,e,n){var r=!0;return"pageChange"===e&&(r=!1!==t.component.pageChange.emit(n)&&r),r},null,null)),r.wb(2,737280,[["p",4]],0,i.d,[i.e,r.i],{id:[0,"id"],maxSize:[1,"maxSize"]},{pageChange:"pageChange"}),(t()(),r.mb(16777216,null,null,1,null,m)),r.wb(4,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.id,n.maxSize),t(e,4,0,!(n.autoHide&&r.Jb(e,2).pages.length<=1))},null)}},"ajt+":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("AytR"),i=n("iqUP"),o=n("ZedB"),s=n("8Y7J"),a=n("PVcy"),l=n("gJ2e");let u=(()=>{class t{constructor(t,e){this.afDb=t,this.afStorage=e}uuidv4(){let t=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let r=16*Math.random();return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(e+r)%16|0,e=Math.floor(e/16)),("x"===n?r:3&r|8).toString(16)})}getObjectValues(t){return this.afDb.object(r.a.firebasePath+t).valueChanges()}setObjectAtPath(t,e){return this.afDb.object(r.a.firebasePath+t).set(e)}appendObjectAtPath(t,e){return this.afDb.list(r.a.firebasePath+t).push(e)}pushObjectAtPath(t,e){return this.afDb.database.ref(r.a.firebasePath+t).push(e)}batchWrite(t){return this.afDb.database.ref(r.a.firebasePath).update(t)}getListSortedByFunction(t,e=null){return this.afDb.list(r.a.firebasePath+t,e).valueChanges().pipe()}updateObjectAtPath(t,e){return this.afDb.database.ref(r.a.firebasePath+t).update(e)}getFile(t){return i.storage().ref().child(r.a.firebasePath+t).getDownloadURL().then(t=>t,t=>t)}getImageUrl(t,e){const n=this.afStorage.ref(r.a.firebasePath+"images/"+t);return{task:n.put(e),ref:n}}removeAtPath(t){return this.afDb.database.ref(r.a.firebasePath+t).remove()}uploadAllPhotos(t){return t.map(t=>{if(t.isLocal){const e=this.getImageUrl(this.uuidv4(),t.file);return o.a.getLocalImage(e.ref,e.task)}return o.a.getUploadedImage(t.url)}).map(t=>t.getUrl())}}return t.ngInjectableDef=s.Wb({factory:function(){return new t(s.Xb(a.a),s.Xb(l.a))},token:t,providedIn:"root"}),t})()},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},bP1B:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG");n("lGQG"),n("ZZ/e");class i{constructor(t,e,n){this.authService=t,this.toastCtrl=e,this.router=n}ngOnInit(){}login(t){return r.__awaiter(this,void 0,void 0,function*(){const e={email:t.value.email,password:t.value.password};try{(yield this.authService.login(e))&&((yield this.toastCtrl.create({message:"Login successful!",duration:2e3})).present(),this.router.navigate([""]))}catch(n){this.showErrorAlert(n)}})}googleLogin(){return r.__awaiter(this,void 0,void 0,function*(){try{yield this.authService.googleLogin(),this.router.navigate([""])}catch(t){this.showErrorAlert(t)}})}facebookLogin(){return r.__awaiter(this,void 0,void 0,function*(){try{yield this.authService.facebookLogin(),this.router.navigate([""])}catch(t){this.showErrorAlert(t)}})}showErrorAlert(t){return r.__awaiter(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t.message,duration:2e3})).present()})}}},bQlE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s=n("zVF4");n("fSjL");var a,l,u,c,h,d=n("q/0M"),f="0.2.17",p="FB-PERF-TRACE-START",g="FB-PERF-TRACE-STOP",m="FB-PERF-TRACE-MEASURE",b="@firebase/performance/config",v="@firebase/performance/configexpire",y=((a={})["trace started"]="Trace {$traceName} was started before.",a["trace stopped"]="Trace {$traceName} is not running.",a["no window"]="Window is not available.",a["no app id"]="App id is not available.",a["no project id"]="Project id is not available.",a["no api key"]="Api key is not available.",a["invalid cc log"]="Attempted to queue invalid cc event",a["FB not default"]="Performance can only start when Firebase app instance is the default one.",a["RC response not ok"]="RC response is not ok",a["invalid attribute name"]="Attribute name {$attributeName} is invalid.",a["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",a["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",a),w=new s.ErrorFactory("performance","Performance",y),_=function(){function t(t){if(!t)throw w.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===l&&(l=new t(u)),l},t}(),k=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw w.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw w.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw w.create("no api key");return t},t.getInstance=function(){return void 0===c&&(c=new t),c},t}();function C(){return h}var E=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t[t.PRERENDER=3]="PRERENDER",t[t.UNLOADED=4]="UNLOADED",t}({}),S=["firebase_","google_","ga_"],T=new RegExp("^[a-zA-Z]\\w*$");function x(){var t=_.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function A(){switch(_.getInstance().document.visibilityState){case"visible":return E.VISIBLE;case"hidden":return E.HIDDEN;case"prerender":return E.PRERENDER;default:return E.UNKNOWN}}function I(){var t=_.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var D=new d.Logger("Performance");D.logLevel=d.LogLevel.INFO;var P="0.0.1",O={loggingEnabled:!0},N="FIREBASE_INSTALLATIONS_AUTH",R="Could not fetch config, will use default configs";function M(t){if(!t)return t;var e=k.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):O.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=L(e.tracesSamplingRate),e.logNetworkAfterSampling=L(e.networkRequestsSamplingRate),t}function L(t){return Math.random()<=t}var F,j=1;function B(){return j=2,F=F||function(){var t=_.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=k.getInstance().firebaseAppInstance.installations().getId()).then(function(t){h=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=_.getInstance().localStorage,e=t.getItem(v);if(e&&Number(e)>Date.now()){var n=t.getItem(b);if(n)try{return JSON.parse(n)}catch(a){return}}}();return e?(M(e),Promise.resolve()):function(t){return(e=k.getInstance().firebaseAppInstance.installations().getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+k.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+k.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:N+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:k.getInstance().getAppId(),app_version:f,sdk_version:P})});return fetch(r).then(function(t){if(t.ok)return t.json();throw w.create("RC response not ok")})}).catch(function(){D.info(R)});var e}(t).then(function(t){return M(t)}).then(function(t){return function(t){if(t){var e=_.getInstance().localStorage;e.setItem(b,JSON.stringify(t)),e.setItem(v,String(Date.now()+60*k.getInstance().configTimeToLive*60*1e3))}}(t)},function(){})}(t)}).then(function(){return V()},function(){return V()})}function V(){j=3}var U,z=3,q=[];function H(t){if(!t.eventTime||!t.message)throw w.create("invalid cc log");q=q.concat([t])}function $(){if(U)return U;var t=function(t){return function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=t.apply(void 0,r);H({message:o,eventTime:Date.now()})}}(G);return(U=new d.Logger("@firebase/performance/cc")).logHandler=t,U}function W(t){var e=k.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&_.getInstance().requiredApisAvailable()&&(t.isAuto&&A()!==E.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===j?J(t):B().then(function(){return J(t)},function(){return J(t)})))}function J(t){C()&&setTimeout(function(){return $().log(t,1)},0)}function G(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Q(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=K(t.counters));var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=K(n));var r={application_info:Q(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Q(){return{google_app_id:k.getInstance().getAppId(),app_instance_id:C(),web_app_info:{sdk_version:f,page_url:_.getInstance().getUrl(),service_worker_status:x(),visibility_state:A(),effective_connection_type:I()},application_process_state:0}}function K(t){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})}!function t(e){setTimeout(function(){if(0!==z){if(!q.length)return t(1e4);var e=q.slice();q=[];var n=e.map(function(t){return{source_extension_json:t.message,event_time_ms:String(t.eventTime)}}),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:k.getInstance().logSource,log_event:n};fetch(k.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then(function(t){return t.ok||D.info("Call to Firebase backend failed."),t.json()}).then(function(e){var n=Number(e.next_request_wait_millis),r=isNaN(n)?1e4:Math.max(1e4,n);z=3,t(r)}).catch(function(){q=e.concat(q),D.info("Tries left: "+--z+"."),t(1e4)})}},e)}(5500);var Y=["_fp","_fcp","_fid"],X=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=_.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=p+"-"+this.randomId+"-"+this.name,this.traceStopMark=g+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||m+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw w.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw w.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),W(this)},t.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=o.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var s=i[r];isNaN(Number(n.metrics[s]))||(this.counters[s]=Number(Math.floor(n.metrics[s])))}W(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith("_wt_")&&Y.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw w.create("invalide custom metric name",{customMetricName:t});this.counters[t]=e},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||S.some(function(e){return t.startsWith(e)})||!t.match(T))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw w.create("invalid attribute name",{attributeName:t});if(!r)throw w.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return o.__assign({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=_.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),s=Math.floor(1e3*_.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var l=n.find(function(t){return"first-contentful-paint"===t.name});l&&l.startTime&&o.putMetric("_fcp",Math.floor(1e3*l.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}W(o)}},t.createUserTimingTrace=function(e){W(new t(e,!1,e))},t}();function Z(t){var e=t;if(e&&void 0!==e.responseStart){var n=_.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=k.getInstance();e.instrumentationEnabled&&t.url!==e.logEndPointUrl.split("?")[0]&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return $().log(t,0)},0)}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var tt=5e3;function et(){C()&&(setTimeout(function(){return function(){var t=_.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){X.createOobTrace(e,n),r=void 0},tt);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),X.createOobTrace(e,n,t))})}else X.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=_.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)Z(n[e]);t.setupObserver("resource",Z)}()},0),setTimeout(function(){return function(){for(var t=_.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)nt(n[e]);t.setupObserver("measure",nt)}()},0))}function nt(t){var e=t.name;e.substring(0,m.length)!==m&&X.createUserTimingTrace(e)}var rt=function(){function t(t){this.app=t,_.getInstance().requiredApisAvailable()?B().then(et,et):D.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return t.prototype.trace=function(t){return new X(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return k.getInstance().instrumentationEnabled},set:function(t){k.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return k.getInstance().dataCollectionEnabled},set:function(t){k.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),t}(),it="[DEFAULT]";function ot(t){t.INTERNAL.registerService("performance",function(t){if(t.name!==it)throw w.create("FB not default");if("undefined"==typeof window)throw w.create("no window");return function(t){u=t}(window),k.getInstance().firebaseAppInstance=t,new rt(t)},{})}ot(i),e.registerPerformance=ot},c1j0:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});class r{constructor(t,e,n,r,i){this.difficulty=5,this.parking=5,this.footing=5,this.trailCondition=5,this.difficultyWater=5,this.difficultyBridges=5,this.id=t,this.campID=e,this.userID=n,this.rating=r,this.description=i,this.dateTime=new Date}setTrailAttribute(t,e){this[t]=e}submitReview(t){const e=new Map,n=`reviews/review-by-uid/${this.userID}/${this.id}`,r=`reviews/review-by-campID/${this.campID}/${this.id}`;e[`reviews/review-info/${this.id}`]=this,e[n]=!0,e[r]=!0,t.batchWrite(e)}}var i=function(t){return t.difficulty="difficulty",t.parking="parking",t.footing="footing",t.trailCondition="trailCondition",t.difficultyWater="difficultyWater",t.difficultyBridges="difficultyBridges",t}({})},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cUpR:function(t,e,n){"use strict";n.d(e,"p",function(){return vt}),n.d(e,"q",function(){return x}),n.d(e,"a",function(){return yt}),n.d(e,"h",function(){return bt}),n.d(e,"c",function(){return A}),n.d(e,"d",function(){return I}),n.d(e,"e",function(){return et}),n.d(e,"f",function(){return nt}),n.d(e,"g",function(){return rt}),n.d(e,"b",function(){return lt}),n.d(e,"r",function(){return s}),n.d(e,"j",function(){return B}),n.d(e,"i",function(){return Z}),n.d(e,"m",function(){return it}),n.d(e,"n",function(){return at}),n.d(e,"l",function(){return O}),n.d(e,"o",function(){return P}),n.d(e,"k",function(){return ut});var r=n("SVse"),i=n("8Y7J");let o=null;function s(){return o}class a{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class l extends a{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const t=["Webkit","Moz","O","ms"];for(let n=0;n<t.length;n++)if(null!=this.getStyle(e,t[n]+"AnimationName")){this._animationPrefix="-"+t[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(t=>{null!=this.getStyle(e,t)&&(this._transitionEnd=n[t])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const u={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},c=3,h={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},f=(()=>{if(i.Ab.Node)return i.Ab.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class p extends l{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new p,o||(o=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return u}contains(t,e){return f.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===c&&d.hasOwnProperty(e)&&(e=d[e]))}return h[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=m||(m=document.querySelector("base"))?m.getAttribute("href"):null;return null==e?null:(n=e,g||(g=document.createElement("a")),g.setAttribute("href",n),"/"===g.pathname.charAt(0)?g.pathname:"/"+g.pathname);var n}resetBaseElement(){m=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(r.E)(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let g,m=null;function b(){return!!window.history.pushState}let v=(()=>{class t extends r.s{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){b()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){b()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.ctorParameters=()=>[{type:void 0,decorators:[{type:i.q,args:[r.d]}]}],t})();const y=new i.r("TRANSITION_ID"),w=[{provide:i.d,useFactory:function(t,e,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[y,r.d,i.s],multi:!0}];class _{static init(){Object(i.db)(new _)}addToWindow(t){i.Ab.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.Ab.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.Ab.getAllAngularRootElements=()=>t.getAllRootElements(),i.Ab.frameworkStabilizers||(i.Ab.frameworkStabilizers=[]),i.Ab.frameworkStabilizers.push(t=>{const e=i.Ab.getAllAngularTestabilities();let n=e.length,r=!1;const o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,s().getHost(e),!0):this.findTestabilityInTree(t,s().parentElement(e),!0):null}}function k(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i.Ab.ng=i.Ab.ng||{})[t]=e)}const C=(()=>({ApplicationRef:i.g,NgZone:i.B}))(),E="probe",S="coreTokens";function T(t){return Object(i.Z)(t)}function x(t){return k(E,T),k(S,Object.assign({},C,(t||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>T}const A=new i.r("EventManagerPlugins");let I=(()=>(class{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}))();class D{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let P=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}))(),O=(()=>(class extends P{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}))();const N={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},R=/%COMP%/g,M="_nghost-%COMP%",L="_ngcontent-%COMP%";function F(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?F(t,i,n):(i=i.replace(R,t),n.push(i))}return n}function j(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let B=(()=>(class{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new V(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.T.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new q(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case i.T.Native:case i.T.ShadowDom:return new H(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=F(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class V{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(N[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=N[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=N[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&i.J.DashCase?t.style.setProperty(e,n,r&i.J.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.J.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){z(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return z(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,j(n)):this.eventManager.addEventListener(t,e,j(n))}}const U=(()=>"@".charCodeAt(0))();function z(t,e){if(t.charCodeAt(0)===U)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class q extends V{constructor(t,e,n,r){super(t),this.component=n;const i=F(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr=L.replace(R,r+"-"+n.id),this.hostAttr=M.replace(R,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class H extends V{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===i.T.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=F(r.id,r.styles,[]);for(let i=0;i<o.length;i++){const t=document.createElement("style");t.textContent=o[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const $=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),W=$("addEventListener"),J=$("removeEventListener"),G={},Q="__zone_symbol__propagationStopped",K=(()=>{const t="undefined"!=typeof Zone&&Zone[$("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),Y=function(t){return!!K&&K.hasOwnProperty(t)},X=function(t){const e=G[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[Q];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};let Z=(()=>(class extends D{constructor(t,e,n){super(t),this.ngZone=e,n&&Object(r.x)(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Q]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let r=n;if(!t[W]||i.B.isInAngularZone()&&!Y(e))t.addEventListener(e,r,!1);else{let n=G[e];n||(n=G[e]=$("ANGULAR"+e+"FALSE"));let i=t[n];const o=i&&i.length>0;i||(i=t[n]=[]);const s=Y(e)?Zone.root:Zone.current;if(0===i.length)i.push({zone:s,handler:r});else{let t=!1;for(let e=0;e<i.length;e++)if(i[e].handler===r){t=!0;break}t||i.push({zone:s,handler:r})}o||t[W](e,X,!1)}return()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,n){let r=t[J];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);let i=G[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,X,!1]):t.removeEventListener.apply(t,[e,n,!1])}}))();const tt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},et=new i.r("HammerGestureConfig"),nt=new i.r("HammerLoader");let rt=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}))(),it=(()=>(class extends D{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!tt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),o=function(t){r.runGuarded(function(){n(t)})};return i.on(e,o),()=>{i.off(e,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}))();const ot=["alt","control","meta","shift"],st={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let at=(()=>{class t extends D{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ot.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=s().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ot.forEach(r=>{r!=n&&(0,st[r])(t)&&(e+=r+".")}),e+=n}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t})();class lt{}let ut=(()=>(class extends lt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case i.L.NONE:return e;case i.L.HTML:return e instanceof ht?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(i.jb)(this._doc,String(e)));case i.L.STYLE:return e instanceof dt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(i.kb)(e));case i.L.SCRIPT:if(e instanceof ft)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case i.L.URL:return e instanceof gt||e instanceof pt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(i.lb)(String(e)));case i.L.RESOURCE_URL:if(e instanceof gt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof ct)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new ht(t)}bypassSecurityTrustStyle(t){return new dt(t)}bypassSecurityTrustScript(t){return new ft(t)}bypassSecurityTrustUrl(t){return new pt(t)}bypassSecurityTrustResourceUrl(t){return new gt(t)}}))();class ct{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class ht extends ct{getTypeName(){return"HTML"}}class dt extends ct{getTypeName(){return"Style"}}class ft extends ct{getTypeName(){return"Script"}}class pt extends ct{getTypeName(){return"URL"}}class gt extends ct{getTypeName(){return"ResourceURL"}}const mt=[{provide:i.E,useValue:r.C},{provide:i.F,useValue:function(){p.makeCurrent(),_.init()},multi:!0},{provide:r.s,useClass:v,deps:[r.d]},{provide:r.d,useFactory:function(){return document},deps:[]}],bt=Object(i.V)(i.cb,"browser",mt);function vt(){return new i.o}let yt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:i.c,useValue:e.appId},{provide:y,useExisting:i.c},w]}}}return t})();"undefined"!=typeof window&&window},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("DH7j"),o=n("lJxs"),s=n("XoHu"),a=n("Cfvw");function l(...t){if(1===t.length){const e=t[0];if(Object(i.a)(e))return u(e,null);if(Object(s.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return u(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return u(t=1===t.length&&Object(i.a)(t[0])?t[0]:t,null).pipe(Object(o.a)(t=>e(...t)))}return u(t,null)}function u(t,e){return new r.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let l=0;l<r;l++){const u=Object(a.a)(t[l]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[l]=t},error:t=>n.error(t),complete:()=>{++o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}},dh1O:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return c}),n("mrSG");var r=n("8Y7J"),i=(n("ZZ/e"),n("XNiG")),o=n("Cfvw"),s=n("HDdC"),a=n("nYR2");class l{constructor(){this.animated=!1,this.color=null,this.autocomplete="off",this.autocorrect="off",this.cancelButtonIcon="arrow-round-back",this.cancelButtonText="Cancel",this.clearIcon="close-circle",this.clearInput=!1,this.clearOnEdit=!1,this.debounce=250,this.mode="md",this.noItems="",this.placeholder="Search",this.searchIcon="search",this.showCancelButton=!1,this.spellcheck="off",this.type="search",this.value=""}}let u=(()=>(class{constructor(){this.disabled=!1,this.exclude=[],this.frontIcon=!1,this.hideListOnSelection=!0,this.location="auto",this.multi=!1,this.name="",this.options=new l,this.removeButtonClasses="",this.removeButtonColor="primary",this.removeButtonIcon="close-circle",this.removeButtonSlot="end",this.removeDuplicateSuggestions=!0,this.onTouchedCallback=!1,this.onChangeCallback=!1,this.isLoading=!1,this.showListChanged=!1,this.autoBlur=new r.p,this.autoFocus=new r.p,this.blur=new r.p,this.focus=new r.p,this.ionAutoInput=new r.p,this.itemsChange=new r.p,this.itemsHidden=new r.p,this.itemRemoved=new r.p,this.itemSelected=new r.p,this.itemsShown=new r.p,this.modelChange=new r.p,this.keyword="",this.suggestions=[],this._showList=!1,this.options=new l,this.defaultOpts=new l,this.selected=[]}get model(){let t=this.selected;return this.multi||void 0===this.selected.length||(t=0===this.selected.length?null:this.selected[0]),t}set model(t){void 0!==t&&(this.selected=t,this.keyword=this.getLabel(t))}set eager(t){t&&this.getItems(null,!1)}get showList(){return this._showList}set showList(t){this._showList!==t&&(this._showList=t,this.showListChanged=!0)}ngAfterViewChecked(){this.showListChanged&&(this.showListChanged=!1,this.showList?this.itemsShown.emit():this.itemsHidden.emit())}documentClickHandler(t){(this.searchbarElem&&this.searchbarElem.nativeElement&&!this.searchbarElem.nativeElement.contains(t.target)||!this.inputElem&&this.inputElem.nativeElement&&this.inputElem.nativeElement.contains(t.target))&&this.hideItemList()}getFormValue(t){if(null==t||"function"==typeof this.dataProvider)return null;let e=null==this.dataProvider.formValueAttribute?this.dataProvider.labelAttribute:this.dataProvider.formValueAttribute;return"object"==typeof t&&e?t[e]:t}_getPosition(t){let e=0,n=0;for(;t;){if("BODY"===t.tagName){const r=t.scrollLeft||document.documentElement.scrollLeft,i=t.scrollTop||document.documentElement.scrollTop;e+=t.offsetLeft-r+t.clientLeft,n+=t.offsetTop-i+t.clientTop}else e+=t.offsetLeft-t.scrollLeft+t.clientLeft,n+=t.offsetTop-t.scrollTop+t.clientTop;t=t.offsetParent}return{x:e,y:n}}clearValue(t=!1){this.keyword="",this.selection=null,this.formValue=null,t&&this.hideItemList()}getItems(t,e){this.promise&&clearTimeout(this.promise),this.promise=setTimeout(()=>{let n;t&&(this.keyword=t.detail.target.value),this.showResultsFirst&&""===this.keyword.trim()&&(this.keyword=""),(n="function"==typeof this.dataProvider?this.dataProvider(this.keyword):this.dataProvider.getResults(this.keyword))instanceof i.a&&(n=n.asObservable()),n instanceof Promise&&(n=Object(o.a)(n)),n instanceof s.a?(this.isLoading=!0,n.pipe(Object(a.a)(()=>{this.isLoading=!1})).subscribe(t=>{this.setSuggestions(t,e)},t=>console.error(t))):this.setSuggestions(n,e),this.ionAutoInput.emit(this.keyword)},this.options.debounce)}getLabel(t){if(null==t||"function"==typeof this.dataProvider)return"";let e=this.dataProvider.labelAttribute,n=t;return this.dataProvider.getItemLabel&&(n=this.dataProvider.getItemLabel(n)),"object"==typeof n&&e?n[e]||"":n||""}getSelection(){return this.multi?this.selection:this.selected}getStyle(){let t=this.location;if("auto"===this.location){const e=this._getPosition(this.searchbarElem.nativeElement).y;t=e>window.innerHeight-e?"top":"bottom"}return"bottom"===t?{}:{bottom:"37px"}}getValue(){return this.formValue}handleTap(t){(this.showResultsFirst||this.keyword.length>0)&&this.getItems()}handleSelectTap(t,e){return this.selectItem(e),t.srcEvent?(t.srcEvent.stopPropagation&&t.srcEvent.stopPropagation(),t.srcEvent.preventDefault&&t.srcEvent.preventDefault()):t.preventDefault&&t.preventDefault(),!1}hideItemList(){this.showList=this.alwaysShowList}onFocus(t){this.getItems(),t=this._reflectName(t),this.autoFocus.emit(t),this.focus.emit(t)}onBlur(t){t=this._reflectName(t),this.autoBlur.emit(t),this.blur.emit(t)}_reflectName(t){return"object"==typeof t.srcElement.attributes["ng-reflect-name"]&&(t.srcElement.name=t.srcElement.attributes["ng-reflect-name"].value),t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}removeDuplicates(t){const e=this.selected?this.selected.length:0,n=t.length;for(let r=0;r<e;r++){const e=this.getLabel(this.selected[r]);for(let r=0;r<n;r++)e===this.getLabel(t[r])&&t.splice(r,1)}return t}removeExcluded(t){const e=this.exclude.length,n=this.suggestions.length;for(let r=0;r<e;r++){const e=this.getLabel(this.exclude[r]);for(let r=0;r<n;r++)e===this.getLabel(t[r])&&t.splice(r,1)}return t}removeItem(t,e){const n=this.selected?this.selected.length:0;for(let r=0;r<n;r++){const e=this.selected[r];this.getLabel(t)===this.getLabel(e)&&this.selected.splice(r,1)}(e=void 0===e||e)&&(this.itemRemoved.emit(t),this.itemsChange.emit(this.selected)),this.modelChange.emit(this.selected)}selectItem(t){this.keyword=this.getLabel(t),this.formValue=this.getFormValue(t),this.hideItemList(),this.updateModel(this.formValue),this.hideListOnSelection&&this.hideItemList(),this.multi?(this.clearValue(),this.selected.push(t),this.itemsChange.emit(this.selected)):(this.selection=t,this.selected=[t],this.itemsChange.emit(t)),this.itemSelected.emit(t),this.modelChange.emit(this.selected)}setFocus(){this.searchbarElem&&this.searchbarElem.nativeElement.setFocus()}setSuggestions(t,e){this.removeDuplicateSuggestions&&(t=this.removeDuplicates(t),t=this.removeExcluded(t)),this.suggestions=t,(e||void 0===e)&&this.showItemList()}setValue(t){this.formValue=this.getFormValue(t),this.keyword=this.getLabel(t)}showItemList(){this.showList=!0}updateModel(t){t!==this.formValue&&(this.formValue=t,this.selected=this.multi?[]:null),this.onChangeCallback&&this.onChangeCallback(this.formValue),this.modelChange.emit(this.selected)}writeValue(t){t!==this.selection&&(this.selection=t||null,this.formValue=this.getFormValue(this.selection),this.keyword=this.getLabel(this.selection))}}))(),c=(()=>(class{transform(t,e){if(!e)return t;let n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return t.replace(new RegExp(n,"gi"),function(t){return t.bold()})}}))();var h;let d=(()=>h=class{static forRoot(){return{ngModule:h,providers:[]}}})()},dsYM:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("8Y7J");n("ZZ/e");let i=(()=>(class{constructor(t){this.cd=t,this.hover=new r.p,this.leave=new r.p,this.rateChange=new r.p}ngOnChanges(t){t.rate&&this.update(this.rate)}update(t,e=!0){this.readonly||this.disabled||this.rate===t||(this.rate=t,this.rateChange.emit(this.rate)),e&&(this.onChange&&this.onChange(this.rate),this.onTouched&&this.onTouched())}onClick(t){this.update(this.resettable&&this.rate===t?0:t)}onMouseEnter(t){this.disabled||this.readonly||(this.hoverRate=t),this.hover.emit(t)}onMouseLeave(){this.leave.emit(this.hoverRate),this.hoverRate=0}onBlur(){this.onTouched&&this.onTouched()}writeValue(t){this.update(t,!1),this.cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}))(),o=(()=>(class{}))()},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj"),s=n("lJxs"),a=n("Cfvw");function l(t,e){return"function"==typeof e?n=>n.pipe(l((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new u(t))}class u{constructor(t){this.project=t}call(t,e){return e.subscribe(new c(t,this.project))}}class c extends r.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new i.a(this,void 0,void 0);this.destination.add(s),this.innerSubscription=Object(o.a)(this,t,e,n,s)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}},ehau:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("8Y7J");n("Dn3B");class i{constructor(t,e){this.fb=t,this.filterService=e,this.submitForm=new r.p}ngOnInit(){this.myForm=this.fb.group({name:[""],bigRigFriendly:[!1],petFriendly:[!1],wifi:[!1],city:[""],state:[""]}),this.filterService.getCampAttributesFilter().subscribe(t=>{t&&(this.myForm=this.fb.group({name:[t.name],bigRigFriendly:[t.bigRigFriendly],petFriendly:[t.petFriendly],wifi:[t.wifi],city:[t.city],state:[t.state]}))})}onSubmit(){this.submitForm.emit(this.myForm.value)}}},fSjL:function(t,e,n){"use strict";n.r(e),n.d(e,"registerInstallations",function(){return G});var r,i=n("wj3C"),o=n.n(i),s=n("mrSG"),a=n("zVF4"),l=n("nbvr"),u=1e4,c="w:0.2.5",h="FIS_v2",d="https://firebaseinstallations.googleapis.com/v1",f=36e5,p=((r={})["missing-app-config-values"]="Missing App configuration values.",r["create-installation-failed"]="Could not register Firebase Installation.",r["generate-token-failed"]="Could not generate Auth Token.",r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),g=new a.ErrorFactory("installations","Installations",p);function m(t){return t instanceof a.FirebaseError&&t.code.includes("request-failed")}function b(t){if(!t||!t.options)throw g.create("missing-app-config-values");var e=t.name,n=t.options,r=n.projectId,i=n.apiKey,o=n.appId;if(!(e&&r&&i&&o))throw g.create("missing-app-config-values");return{appName:e,projectId:r,apiKey:i,appId:o}}function v(t){return d+"/projects/"+t.projectId+"/installations"}function y(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function w(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,g.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function _(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function k(t,e){var n=e.refreshToken,r=_(t);return r.append("Authorization",function(t){return h+" "+t}(n)),r}function C(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function E(t,e){var n=e.fid;return Object(s.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return e=v(t),r=_(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:h,appId:t.appId,sdkVersion:c})},[4,C(function(){return fetch(e,i)})];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:y(a.authToken)}];case 3:return[4,w("Create Installation",o)];case 4:throw s.sent()}})})}function S(t){return new Promise(function(e){setTimeout(e,t)})}var T=/^[cdef][\w-]{21}$/,x="";function A(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(s.__spread)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return T.test(e)?e:x}catch(r){return x}}var I="firebase-installations-database",D=1,P="firebase-installations-store",O=null;function N(){return O||(O=Object(l.openDb)(I,D,function(t){switch(t.oldVersion){case 0:t.createObjectStore(P)}})),O}function R(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return n=F(t),[4,N()];case 1:return r=o.sent(),[4,(i=r.transaction(P,"readwrite")).objectStore(P).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function M(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return e=F(t),[4,N()];case 1:return n=i.sent(),[4,(r=n.transaction(P,"readwrite")).objectStore(P).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function L(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,l;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return n=F(t),[4,N()];case 1:return r=s.sent(),i=r.transaction(P,"readwrite"),[4,(o=i.objectStore(P)).get(n)];case 2:return a=s.sent(),(l=e(a))===a?[2,l]:void 0!==l?[3,4]:[4,o.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,o.put(l,n)];case 5:s.sent(),s.label=6;case 6:return[4,i.complete];case 7:return s.sent(),[2,l]}})})}function F(t){return t.appName+"!"+t.appId}function j(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,L(t,function(n){var r=function(t){var e=t||{fid:A(),registrationStatus:0};return U(e)?{fid:e.fid,registrationStatus:0}:e}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(g.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,E(t,e)];case 1:return n=i.sent(),[2,R(t,n)];case 2:return m(r=i.sent())&&409===r.serverCode?[4,M(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,R(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:B(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return(n=i.sent()).fid!==x?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function B(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,V(t)];case 1:e=n.sent(),n.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,S(100)];case 3:return n.sent(),[4,V(t)];case 4:return e=n.sent(),[3,2];case 5:if(0===e.registrationStatus)throw g.create("create-installation-failed");return[2,e]}})})}function V(t){return L(t,function(t){if(!t)throw g.create("installation-not-found");return U(t)?{fid:t.fid,registrationStatus:0}:t})}function U(t){return 1===t.registrationStatus&&t.registrationTime+u<Date.now()}function z(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,n){var r=e.fid;return v(t)+"/"+r+"/authTokens:generate"}(t),r=k(t,e),i={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:c}})},[4,C(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,y(s.sent())];case 3:return[4,w("Generate Auth Token",o)];case 4:throw s.sent()}})})}function q(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,L(t,function(n){if(!$(n))throw g.create("not-registered");var r=n.authToken;if(2===r.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+f}(r))return n;if(1===r.requestStatus)return e=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,H(t)];case 1:e=r.sent(),r.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,S(100)];case 3:return r.sent(),[4,H(t)];case 4:return e=r.sent(),[3,2];case 5:if(0===(n=e.authToken).requestStatus)throw g.create("generate-token-failed");return[2,n]}})})}(t),n;if(!navigator.onLine)throw g.create("app-offline");var i=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(s.__assign)({},t,{authToken:e})}(n);return e=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,z(t,e)];case 1:return n=o.sent(),i=Object(s.__assign)({},e,{authToken:n}),[4,R(t,i)];case 2:return o.sent(),[2,n];case 3:return!m(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,M(t)];case 4:return o.sent(),[3,7];case 5:return i=Object(s.__assign)({},e,{authToken:{requestStatus:0}}),[4,R(t,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,i),i})];case 1:return n=i.sent(),e?[4,e]:[3,3];case 2:return r=i.sent(),[3,4];case 3:r=n.authToken,i.label=4;case 4:return[2,r.token]}})})}function H(t){return L(t,function(t){if(!$(t))throw g.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+u<Date.now()?Object(s.__assign)({},t,{authToken:{requestStatus:0}}):t})}function $(t){return void 0!==t&&2===t.registrationStatus}function W(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,j(t)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?[4,r]:[3,3];case 2:return i.sent(),[3,4];case 3:if(2!==n.registrationStatus)throw g.create("create-installation-failed");i.label=4;case 4:return[2]}})})}function J(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,n){var r=e.fid;return v(t)+"/"+r}(t),r=k(t,e),i={method:"DELETE",headers:r},[4,C(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,w("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function G(t){t.INTERNAL.registerService("installations",function(t){return b(t),{app:t,getId:function(){return function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return[4,j(e=b(t))];case 1:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)&&i.catch(function(){}),2===r.registrationStatus&&q(e).catch(function(){}),[2,r.fid]}})})}(t)},getToken:function(){return function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,W(e=b(t))];case 1:return n.sent(),[2,q(e)]}})})}(t)},delete:function(){return function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,L(e=b(t),function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw g.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw g.create("app-offline");case 3:return[4,J(e,n)];case 4:return r.sent(),[4,M(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(t)}}})}G(o.a)},fhSy:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("gnlj");class r{}},gHGA:function(t,e,n){"use strict";n.r(e),n.d(e,"isSupported",function(){return D}),n.d(e,"registerMessaging",function(){return I});var r,i=n("wj3C"),o=n.n(i),s=n("mrSG"),a=n("zVF4"),l=((r={})["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["should-be-overriden"]="This method should be overriden by extended classes.",r["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r["permission-default"]="The required permissions were not granted and dismissed instead.",r["permission-blocked"]="The required permissions were not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["notifications-blocked"]="Notifications have been blocked.",r["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["sw-registration-expected"]="A service worker registration was the expected input.",r["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",r["invalid-saved-token"]="Unable to access details of the saved token.",r["sw-reg-redundant"]="The service worker being used for push was made redundant.",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",r["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",r["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",r["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",r["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r["failed-to-delete-token"]="Unable to delete the currently saved token.",r["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r["bad-scope"]="The service worker scope must be a string with at least one character.",r["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",r["bad-subscription"]="The subscription must be a valid PushSubscription.",r["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",r["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",r["failed-delete-vapid-key"]="The VAPID key could not be deleted.",r["invalid-public-vapid-key"]="The public VAPID key must be a string.",r["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",r),u=new a.ErrorFactory("messaging","Messaging",l),c=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),h="https://fcm.googleapis.com",d=function(t){return t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data",t}({}),f=function(t){return t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function p(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function g(t){return function(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(s.__spread)(e)))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var m=function(){function t(){}return t.prototype.getToken=function(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,l,d,f,m;return Object(s.__generator)(this,function(s){switch(s.label){case 0:r=g(e.getKey("p256dh")),i=g(e.getKey("auth")),o="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+r+"&encryption_auth="+i,p(n.buffer,c.buffer)||(a=g(n),o+="&application_pub_key="+a),(l=new Headers).append("Content-Type","application/x-www-form-urlencoded"),d={method:"POST",headers:l,body:o},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(h+"/fcm/connect/subscribe",d)];case 2:return[4,s.sent().json()];case 3:return f=s.sent(),[3,5];case 4:throw m=s.sent(),u.create("token-subscribe-failed",{errorInfo:m});case 5:if(f.error)throw u.create("token-subscribe-failed",{errorInfo:f.error.message});if(!f.token)throw u.create("token-subscribe-no-token");if(!f.pushSet)throw u.create("token-subscribe-no-push-set");return[2,{token:f.token,pushSet:f.pushSet}]}})})},t.prototype.updateToken=function(t,e,n,r,i){return Object(s.__awaiter)(this,void 0,void 0,function(){var o,a,l,d,f,m,b,v;return Object(s.__generator)(this,function(s){switch(s.label){case 0:o=g(r.getKey("p256dh")),a=g(r.getKey("auth")),l="push_set="+n+"&token="+e+"&authorized_entity="+t+"&endpoint="+r.endpoint+"&encryption_key="+o+"&encryption_auth="+a,p(i.buffer,c.buffer)||(d=g(i),l+="&application_pub_key="+d),(f=new Headers).append("Content-Type","application/x-www-form-urlencoded"),m={method:"POST",headers:f,body:l},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(h+"/fcm/connect/subscribe",m)];case 2:return[4,s.sent().json()];case 3:return b=s.sent(),[3,5];case 4:throw v=s.sent(),u.create("token-update-failed",{errorInfo:v});case 5:if(b.error)throw u.create("token-update-failed",{errorInfo:b.error.message});if(!b.token)throw u.create("token-update-no-token");return[2,b.token]}})})},t.prototype.deleteToken=function(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,l;return Object(s.__generator)(this,function(s){switch(s.label){case 0:r="authorized_entity="+t+"&token="+e+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(h+"/fcm/connect/unsubscribe",o)];case 2:return[4,s.sent().json()];case 3:if((a=s.sent()).error)throw u.create("token-unsubscribe-failed",{errorInfo:a.error.message});return[3,5];case 4:throw l=s.sent(),u.create("token-unsubscribe-failed",{errorInfo:l});case 5:return[2]}})})},t}();function b(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var v=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){return this.createTransaction(function(n){return n.index(t).get(e)})},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},t.prototype.closeDatabase=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return void 0===e&&(e="readonly"),Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return[4,this.getDb()];case 1:return n=s.sent(),r=n.transaction(this.objectStoreName,e),i=r.objectStore(this.objectStoreName),[4,y(t(i))];case 2:return o=s.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(o)},r.onerror=function(){e(r.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,n){var r=indexedDB.open(t.dbName,t.dbVersion);r.onsuccess=function(){e(r.result)},r.onerror=function(){t.dbPromise=null,n(r.error)},r.onupgradeneeded=function(e){return t.onDbUpgrade(r,e)}})),this.dbPromise},t}();function y(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return Object(s.__extends)(e,t),e.prototype.onDbUpgrade=function(t,e){var n=t.result;switch(e.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:!function(){var t=indexedDB.open("undefined");t.onerror=function(t){},t.onsuccess=function(e){!function(t){if(t.objectStoreNames.contains("fcm_token_object_Store")){var e=t.transaction("fcm_token_object_Store").objectStore("fcm_token_object_Store"),n=new m,r=e.openCursor();r.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},r.onsuccess=function(){var e=r.result;if(e){var i=e.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase("undefined")}}}(t.result)}}();case 2:var r,i=(r=t.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var t=i.result;if(t){var e=t.value,n=Object(s.__assign)({},e);e.createTime||(n.createTime=Date.now()),"string"==typeof e.vapidKey&&(n.vapidKey=b(e.vapidKey)),"string"==typeof e.auth&&(n.auth=b(e.auth).buffer),"string"==typeof e.auth&&(n.p256dh=b(e.p256dh).buffer),t.update(n),t.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(e){if(!t)throw u.create("bad-token");return _({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(e){if(!t)throw u.create("bad-scope");return _({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(e){if(!t.swScope)throw u.create("bad-scope");if(!t.vapidKey)throw u.create("bad-vapid-key");if(!t.endpoint||!t.auth||!t.p256dh)throw u.create("bad-subscription");if(!t.fcmSenderId)throw u.create("bad-sender-id");if(!t.fcmToken)throw u.create("bad-token");if(!t.fcmPushSet)throw u.create("bad-push-set");return _(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return"string"!=typeof t||0===t.length?[2,Promise.reject(u.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(!(e=n.sent()))throw u.create("delete-token-not-found");return[4,this.delete(e.swScope)];case 2:return n.sent(),[2,e]}})})},e}(v);function _(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw u.create("bad-token");if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw u.create("bad-scope");if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw u.create("bad-vapid-key");if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw u.create("bad-subscription");if(t.auth&&!(t.auth instanceof ArrayBuffer))throw u.create("bad-subscription");if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw u.create("bad-subscription");if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw u.create("bad-sender-id");if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw u.create("bad-push-set")}var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return Object(s.__extends)(e,t),e.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:if("string"!=typeof t||0===t.length)throw u.create("bad-scope");return[4,this.get(t)];case 1:return[2,(e=n.sent())?e.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(n){if("string"!=typeof t||0===t.length)throw u.create("bad-scope");if(null===e||65!==e.length)throw u.create("bad-vapid-key");return[2,this.put({swScope:t,vapidKey:e})]})})},e.prototype.deleteVapidDetails=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(!(e=n.sent()))throw u.create("delete-scope-not-found");return[4,this.delete(t)];case 2:return n.sent(),[2,e]}})})},e}(v),C="messagingSenderId",E=function(){function t(t){var e=this;if(!t.options[C]||"string"!=typeof t.options[C])throw u.create("bad-sender-id");this.messagingSenderId=t.options[C],this.tokenDetailsModel=new w,this.vapidDetailsModel=new k,this.iidModel=new m,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:if("denied"===(t=this.getNotificationPermission_()))throw u.create("notifications-blocked");return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return e=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(e,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(e,r,n,i)]:[2,this.getNewToken(e,r,n)]}})})},t.prototype.manageExistingToken=function(t,e,n,r){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(i){switch(i.label){case 0:return function(t,e,n){if(!n.vapidKey||!p(e.buffer,n.vapidKey.buffer))return!1;var r=t.endpoint===n.endpoint,i=p(t.getKey("auth"),n.auth),o=p(t.getKey("p256dh"),n.p256dh);return r&&i&&o}(e,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(t,e,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(t,e,n)]}})})},t.prototype.updateToken=function(t,e,n,r){return Object(s.__awaiter)(this,void 0,void 0,function(){var i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,e,n)];case 1:return i=s.sent(),o={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,n)];case 1:return r=o.sent(),i={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return o.sent(),[2,r.token]}})})},t.prototype.deleteToken=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(e=r.sent())?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=n.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return n.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw u.create("only-available-in-window")},t.prototype.useServiceWorker=function(t){throw u.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){throw u.create("only-available-in-window")},t.prototype.onMessage=function(t,e,n){throw u.create("only-available-in-window")},t.prototype.onTokenRefresh=function(t,e,n){throw u.create("only-available-in-window")},t.prototype.setBackgroundMessageHandler=function(t){throw u.create("only-available-in-sw")},t.prototype.delete=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIidModel=function(){return this.iidModel},t}(),S=function(t){function e(e){var n=t.call(this,e)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(t){n.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){n.onSubChange(t)}),self.addEventListener("notificationclick",function(t){n.onNotificationClick(t)}),n}return Object(s.__extends)(e,t),e.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},e.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},e.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},e.prototype.onPush_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(l){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(e)]:(n=this.getNotificationData_(e))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=i.sent(),[3,3];case 2:throw e=i.sent(),u.create("unable-to-resubscribe",{errorInfo:e});case 3:return i.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return t.notification&&t.notification.data&&t.notification.data.FCM_MSG?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(e=t.notification.data.FCM_MSG).notification&&(n=e.fcmOptions&&e.fcmOptions.link||e.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=o.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete e.notification,delete e.fcmOptions,i=x(f.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},e.prototype.getNotificationData_=function(t){var e;if(t&&"object"==typeof t.notification){var n=Object(s.__assign)({},t.notification);return n.data=Object(s.__assign)({},t.notification.data,((e={}).FCM_MSG=t,e)),n}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw u.create("bg-handler-function-expected");this.bgMessageHandler=t},e.prototype.getWindowClient_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return e=new URL(t,self.location.href).href,[4,T()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===e){r=n[i];break}return[2,r]}})})},e.prototype.attemptToMessageClient_=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(n){if(!t)throw u.create("no-window-client-to-msg");return t.postMessage(e),[2]})})},e.prototype.hasVisibleClients_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){switch(t.label){case 0:return[4,T()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})]}})})},e.prototype.sendMessageToWindowClients_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r=this;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,T()];case 1:return e=i.sent(),n=x(f.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,n)}))];case 2:return i.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=n.sent()))throw u.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(e=n.sent())?[2,c]:[2,e]}})})},e}(E);function T(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function x(t,e){var n;return(n={})[d.TYPE_OF_MSG]=t,n[d.DATA]=e,n}var A=function(t){function e(e){var n=t.call(this,e)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(a.createSubscribe)(function(t){n.messageObserver=t}),n.onTokenRefreshInternal=Object(a.createSubscribe)(function(t){n.tokenRefreshObserver=t}),n.setupSWMessageListener_(),n}return Object(s.__extends)(e,t),e.prototype.requestPermission=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var t;return Object(s.__generator)(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw u.create("denied"===t?"permission-blocked":"permission-default")}})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw u.create("sw-registration-expected");if(null!=this.registrationToUse)throw u.create("use-sw-before-get-token");this.registrationToUse=t},e.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw u.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw u.create("use-public-key-before-get-token");var e=b(t);if(65!==e.length)throw u.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=e},e.prototype.onMessage=function(t,e,n){return"function"==typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},e.prototype.onTokenRefresh=function(t,e,n){return"function"==typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},e.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(n,r){if(e)if("activated"!==e.state)if("redundant"!==e.state){var i=function(){if("activated"===e.state)n(t);else{if("redundant"!==e.state)return;r(u.create("sw-reg-redundant"))}e.removeEventListener("statechange",i)};e.addEventListener("statechange",i)}else r(u.create("sw-reg-redundant"));else n(t);else r(u.create("no-sw-in-reg"))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw u.create("failed-serviceworker-registration",{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,c]})})},e.prototype.setupSWMessageListener_=function(){var t=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[d.TYPE_OF_MSG]){var n=e.data;switch(n[d.TYPE_OF_MSG]){case f.PUSH_MSG_RECEIVED:case f.NOTIFICATION_CLICKED:t.messageObserver&&t.messageObserver.next(n[d.DATA])}}},!1)},e}(E);function I(t){t.INTERNAL.registerService("messaging",function(t){if(!D())throw u.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new S(t):new A(t)},{isSupported:D})}function D(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}I(o.a)},gJ2e:function(t,e,n){"use strict";n("mrSG");var r=n("8Y7J"),i=n("HDdC"),o=n("lJxs");function s(t){const e=function(t){return new i.a(e=>(t.on("state_changed",t=>e.next(t),t=>e.error(t),()=>e.complete()),()=>t.cancel()))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(o.a)(t=>t.bytesTransferred/t.totalBytes*100))}}var a=n("Cfvw");function l(t,e){return{getDownloadURL:()=>e.keepUnstableUntilFirst(e.runOutsideAngular(Object(a.a)(e.zone.runOutsideAngular(()=>t.getDownloadURL())))),getMetadata:()=>e.keepUnstableUntilFirst(e.runOutsideAngular(Object(a.a)(e.zone.runOutsideAngular(()=>t.getMetadata())))),delete:()=>Object(a.a)(t.delete()),child:n=>l(t.child(n),e),updateMetatdata:e=>Object(a.a)(t.updateMetadata(e)),updateMetadata:e=>Object(a.a)(t.updateMetadata(e)),put:(e,n)=>s(t.put(e,n)),putString:(e,n,r)=>s(t.putString(e,n,r))}}var u=n("1XSQ"),c=n("yA/v");n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d});const h=new r.r("angularfire2.storageBucket");let d=(()=>(class{constructor(t,e,n,r,i){this.scheduler=new u.a(i,r),this.storage=i.runOutsideAngular(()=>Object(c.e)(t,e).storage(n||void 0))}ref(t){return l(this.storage.ref(t),this.scheduler)}upload(t,e,n){return l(this.storage.ref(t),this.scheduler).put(e,n)}}))()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},gRsD:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t,e,n=null){this.url=t,this.isLocal=e,this.file=n}static getLocalImage(t,e){return new r(t,!0,e)}static getImageFromModal(t){return t.isLocal?new r(t.url,t.file,t.isLocal):new r(t.url,null,!1)}static getAlreadyUploadedImage(t){return new r(t,!1,null)}}},gnlj:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG");n("lGQG"),n("ZZ/e");class i{constructor(t,e,n){this.authService=t,this.toastCtrl=e,this.router=n}ngOnInit(){}register(t){return r.__awaiter(this,void 0,void 0,function*(){if(t.value.password!==t.value.confirm)return;const e={email:t.value.email,password:t.value.password,name:t.value.name};try{(yield this.authService.register(e))&&((yield this.toastCtrl.create({message:"Registration successful!",duration:2e3})).present(),this.router.navigate([""]))}catch(n){(yield this.toastCtrl.create({message:n.message,duration:2e3})).present()}})}googleLogin(){return r.__awaiter(this,void 0,void 0,function*(){try{yield this.authService.googleLogin(),this.router.navigate([""])}catch(t){this.showErrorAlert(t)}})}facebookLogin(){return r.__awaiter(this,void 0,void 0,function*(){try{yield this.authService.facebookLogin(),this.router.navigate([""])}catch(t){this.showErrorAlert(t)}})}showErrorAlert(t){return r.__awaiter(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t.message,duration:2e3})).present()})}}},hKQe:function(t,e,n){"use strict";n("HDdC"),n("KOl+")},iInd:function(t,e,n){"use strict";var r=n("SVse"),i=n("8Y7J"),o=n("LRne"),s=n("Cfvw"),a=n("2Vo4"),l=n("HDdC"),u=n("sVev"),c=n("itXk"),h=n("EY2u");function d(t){return new l.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(s.a)(n):Object(h.b)()).subscribe(e)})}var f=n("XNiG"),p=n("lJxs"),g=n("bHdf");function m(){return Object(g.a)(1)}var b=n("pLZG"),v=n("7o/Q"),y=n("4I5i");function w(t){return function(e){return 0===t?Object(h.b)():e.lift(new _(t))}}class _{constructor(t){if(this.total=t,this.total<0)throw new y.a}call(t,e){return e.subscribe(new k(t,this.total))}}class k extends v.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var C=n("XDbj"),E=n("xbPD"),S=n("SpAZ");function T(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(b.a)((e,n)=>t(e,n,r)):S.a,w(1),n?Object(E.a)(e):Object(C.a)(()=>new u.a))}var x=n("JIr8"),A=n("SxV6"),I=n("5+tZ");class D{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new P(t,this.predicate,this.thisArg,this.source))}}class P extends v.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var O=n("eIep"),N=n("IzEk");function R(...t){return m()(Object(o.a)(...t))}var M=n("z+Ro"),L=n("Kqap"),F=n("bOdf"),j=n("mCNh"),B=n("vkgz"),V=n("nYR2"),U=n("cUpR");n.d(e,"E",function(){return ot}),n.d(e,"u",function(){return kn}),n.d(e,"B",function(){return On}),n.d(e,"w",function(){return Tn}),n.d(e,"C",function(){return Nn}),n.d(e,"D",function(){return Rn}),n.d(e,"y",function(){return An}),n.d(e,"x",function(){return xn}),n.d(e,"A",function(){return Pn}),n.d(e,"v",function(){return En}),n.d(e,"z",function(){return Dn}),n.d(e,"F",function(){return wn}),n.d(e,"n",function(){return un}),n.d(e,"o",function(){return cn}),n.d(e,"q",function(){return pn}),n.d(e,"d",function(){return q}),n.d(e,"l",function(){return Xe}),n.d(e,"m",function(){return ln}),n.d(e,"k",function(){return tn}),n.d(e,"i",function(){return _n}),n.d(e,"j",function(){return Mn}),n.d(e,"p",function(){return Sn}),n.d(e,"b",function(){return fn}),n.d(e,"e",function(){return vn}),n.d(e,"g",function(){return bn}),n.d(e,"h",function(){return mn}),n.d(e,"r",function(){return yn}),n.d(e,"a",function(){return Kt}),n.d(e,"f",function(){return st}),n.d(e,"s",function(){return nn}),n.d(e,"c",function(){return It}),n.d(e,"t",function(){return At});class z{constructor(t,e){this.id=t,this.url=e}}class q extends z{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class H extends z{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $ extends z{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class W extends z{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class J extends z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G extends z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q extends z{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class K extends z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y extends z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Z{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tt{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class et{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rt{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class it{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ot=(()=>(class{}))();const st="primary";class at{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function lt(t){return new at(t)}const ut="ngNavigationCancelingError";function ct(t){const e=Error("NavigationCancelingError: "+t);return e[ut]=!0,e}function ht(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class dt{constructor(t,e){this.routes=t,this.module=e}}function ft(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];pt(r,gt(e,r))}}function pt(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==st)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&ft(t.children,e)}function gt(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function mt(t){const e=t.children&&t.children.map(mt),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==st&&(n.component=ot),n}function bt(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(t[i=n[o]]!==e[i])return!1;return!0}function vt(t){return Array.prototype.concat.apply([],t)}function yt(t){return t.length>0?t[t.length-1]:null}function wt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function _t(t){return Object(i.Db)(t)?t:Object(i.Eb)(t)?Object(s.a)(Promise.resolve(t)):Object(o.a)(t)}function kt(t,e,n){return n?function(t,e){return bt(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Tt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Tt(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Tt(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Tt(n.segments,t)&&!!n.children[st]&&e(n.children[st],r,o)}}(e,n,n.segments)}(t.root,e.root)}class Ct{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return Dt.serialize(this)}}class Et{constructor(t,e){this.segments=t,this.children=e,this.parent=null,wt(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pt(this)}}class St{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return Ft(this)}}function Tt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function xt(t,e){let n=[];return wt(t.children,(t,r)=>{r===st&&(n=n.concat(e(t,r)))}),wt(t.children,(t,r)=>{r!==st&&(n=n.concat(e(t,r)))}),n}class At{}class It{parse(t){const e=new zt(t);return new Ct(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Pt(e);if(n){const n=e.children[st]?t(e.children[st],!1):"",r=[];return wt(e.children,(e,n)=>{n!==st&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=xt(e,(n,r)=>r===st?[t(e.children[st],!1)]:[`${r}:${t(n,!1)}`]);return`${Pt(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Nt(e)}=${Nt(t)}`).join("&"):`${Nt(e)}=${Nt(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Dt=new It;function Pt(t){return t.segments.map(t=>Ft(t)).join("/")}function Ot(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nt(t){return Ot(t).replace(/%3B/gi,";")}function Rt(t){return Ot(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mt(t){return decodeURIComponent(t)}function Lt(t){return Mt(t.replace(/\+/g,"%20"))}function Ft(t){return`${Rt(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Rt(t)}=${Rt(e[t])}`).join("")}`;var e}const jt=/^[^\/()?;=#]+/;function Bt(t){const e=t.match(jt);return e?e[0]:""}const Vt=/^[^=?&#]+/,Ut=/^[^?&#]+/;class zt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[st]=new Et(t,e)),n}parseSegment(){const t=Bt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new St(Mt(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Bt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Bt(this.remaining);t&&this.capture(n=t)}t[Mt(e)]=Mt(n)}parseQueryParam(t){const e=function(t){const e=t.match(Vt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ut);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const r=Lt(e),i=Lt(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(t[r]=e=[e]),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Bt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=st);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o[st]:new Et([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class qt{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ht(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ht(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=$t(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return $t(t,this._root).map(t=>t.value)}}function Ht(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ht(t,n);if(e)return e}return null}function $t(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$t(t,n);if(r.length)return r.unshift(e),r}return[]}class Wt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Jt(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Gt extends qt{constructor(t,e){super(t),this.snapshot=e,te(this,t)}toString(){return this.snapshot.toString()}}function Qt(t,e){const n=function(t,e){const n=new Xt([],{},{},"",{},st,e,null,t.root,-1,{});return new Zt("",new Wt(n,[]))}(t,e),r=new a.a([new St("",{})]),i=new a.a({}),o=new a.a({}),s=new a.a({}),l=new a.a(""),u=new Kt(r,i,s,l,o,st,e,n.root);return u.snapshot=n.root,new Gt(new Wt(u,[]),n)}class Kt{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(p.a)(t=>lt(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(p.a)(t=>lt(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yt(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Xt{constructor(t,e,n,r,i,o,s,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zt extends qt{constructor(t,e){super(e),this.url=t,te(this,e)}toString(){return ee(this._root)}}function te(t,e){e.value._routerState=t,e.children.forEach(e=>te(t,e))}function ee(t){const e=t.children.length>0?` { ${t.children.map(ee).join(", ")} } `:"";return`${t.value}${e}`}function ne(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),bt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),bt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function re(t,e){var n,r;return bt(t.params,e.params)&&Tt(n=t.url,r=e.url)&&n.every((t,e)=>bt(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||re(t.parent,e.parent))}function ie(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function oe(t,e,n,r,i){let o={};return r&&wt(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ct(n.root===t?e:function t(e,n,r){const i={};return wt(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Et(e.segments,i)}(n.root,t,e),o,i)}class se{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ie(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==yt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ae{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function le(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[st]:`${t}`}function ue(t,e,n){if(t||(t=new Et([],{})),0===t.segments.length&&t.hasChildren())return ce(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=le(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!pe(s,a,e))return o;r+=2}else{if(!pe(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Et(t.segments.slice(0,r.pathIndex),{});return e.children[st]=new Et(t.segments.slice(r.pathIndex),t.children),ce(e,0,i)}return r.match&&0===i.length?new Et(t.segments,{}):r.match&&!t.hasChildren()?he(t,e,n):r.match?ce(t,0,i):he(t,e,n)}function ce(t,e,n){if(0===n.length)return new Et(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{[st]:t}:void 0===t[0].outlets?{[st]:t}:t[0].outlets}(n),i={};return wt(r,(n,r)=>{null!==n&&(i[r]=ue(t.children[r],e,n))}),wt(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Et(t.segments,i)}}function he(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=de(n[i].outlets);return new Et(r,t)}if(0===i&&ie(n[0])){r.push(new St(t.segments[e].path,n[0])),i++;continue}const o=le(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&ie(s)?(r.push(new St(o,fe(s))),i+=2):(r.push(new St(o,{})),i++)}return new Et(r,{})}function de(t){const e={};return wt(t,(t,n)=>{null!==t&&(e[n]=he(new Et([],{}),0,t))}),e}function fe(t){const e={};return wt(t,(t,n)=>e[n]=`${t}`),e}function pe(t,e,n){return t==n.path&&bt(e,n.parameters)}const ge=(t,e,n)=>Object(p.a)(r=>(new me(e,r.targetRouterState,r.currentRouterState,n).activate(t),r));class me{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ne(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Jt(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),wt(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Jt(t),i=t.value.component?n.children:e;wt(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Jt(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new rt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new et(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ne(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),be(t.route)}else{const n=function(t){for(let e=r.snapshot.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function be(t){ne(t.value),t.children.forEach(be)}function ve(t){return"function"==typeof t}function ye(t){return t instanceof Ct}class we{constructor(t){this.segmentGroup=t||null}}class _e{constructor(t){this.urlTree=t}}function ke(t){return new l.a(e=>e.error(new we(t)))}function Ce(t){return new l.a(e=>e.error(new _e(t)))}function Ee(t){return new l.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Se{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.z)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,st).pipe(Object(p.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object(x.a)(t=>{if(t instanceof _e)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof we)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,st).pipe(Object(p.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Object(x.a)(t=>{if(t instanceof we)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Et([],{[st]:t}):t;return new Ct(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(p.a)(t=>new Et([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(o.a)({});const n=[],r=[],i={};return wt(t,(t,o)=>{const s=e(o,t).pipe(Object(p.a)(t=>i[o]=t));o===st?n.push(s):r.push(s)}),o.a.apply(null,n.concat(r)).pipe(m(),T(),Object(p.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return Object(o.a)(...n).pipe(Object(p.a)(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,i,s).pipe(Object(x.a)(t=>{if(t instanceof we)return Object(o.a)(null);throw t}))),m(),Object(A.a)(t=>!!t),Object(x.a)((t,n)=>{if(t instanceof u.a||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(o.a)(new Et([],{}));throw new we(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ie(r)!==o?ke(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ke(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ce(i):this.lineralizeSegments(n,i).pipe(Object(I.a)(n=>{const i=new Et(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:u}=Te(e,r,i);if(!s)return ke(e);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?Ce(c):this.lineralizeSegments(r,c).pipe(Object(I.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(p.a)(t=>(n._loadedConfig=t,new Et(r,{})))):Object(o.a)(new Et(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=Te(e,n,r);if(!i)return ke(e);const l=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(I.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:a}=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(n=>Ae(t,e,n)&&Ie(n)!==st)}(t,n)?{segmentGroup:xe(new Et(e,function(t,e){const n={};n[st]=e;for(const r of t)""===r.path&&Ie(r)!==st&&(n[Ie(r)]=new Et([],{}));return n}(r,new Et(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(n=>Ae(t,e,n))}(t,n)?{segmentGroup:xe(new Et(t.segments,function(t,e,n,r){const i={};for(const o of n)Ae(t,e,o)&&!r[Ie(o)]&&(i[Ie(o)]=new Et([],{}));return Object.assign({},r,i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,l,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(p.a)(t=>new Et(s,t))):0===r.length&&0===a.length?Object(o.a)(new Et(s,{})):this.expandSegment(n,i,r,a,st,!0).pipe(Object(p.a)(t=>new Et(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(o.a)(new dt(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(s.a)(r).pipe(Object(p.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&ve(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ve(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return _t(o)})).pipe(m(),(i=t=>!0===t,t=>t.lift(new D(i,void 0,t)))):Object(o.a)(!0);var i}(t.injector,e,n).pipe(Object(I.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(p.a)(t=>(e._loadedConfig=t,t))):function(t){return new l.a(e=>e.error(ct(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(o.a)(new dt([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children[st])return Ee(t.redirectTo);r=r.children[st]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ct(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return wt(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return wt(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Et(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Te(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||ht)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function xe(t){if(1===t.numberOfChildren&&t.children[st]){const e=t.children[st];return new Et(t.segments.concat(e.segments),e.children)}return t}function Ae(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Ie(t){return t.outlet||st}class De{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Pe{constructor(t,e){this.component=t,this.route=e}}function Oe(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Jt(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,l=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Tt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Tt(t.url,e.url)||!bt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!re(t,e)||!bt(t.queryParams,e.queryParams);case"paramsChange":default:return!re(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new De(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?l?l.children:null:r,i,o),u&&o.canDeactivateChecks.push(new Pe(l&&l.outlet&&l.outlet.component||null,a))}else a&&Re(n,l,o),o.canActivateChecks.push(new De(i)),t(e,null,s.component?l?l.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),wt(s,(t,e)=>Re(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Ne(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Re(t,e,n){const r=Jt(t),i=t.value;wt(r,(t,r)=>{Re(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Pe(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Me=Symbol("INITIAL_VALUE");function Le(){return Object(O.a)(t=>Object(c.a)(...t.map(t=>t.pipe(Object(N.a)(1),function(...t){const e=t[t.length-1];return Object(M.a)(e)?(t.pop(),n=>R(t,n,e)):e=>R(t,e)}(Me)))).pipe(Object(L.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Me)return t;if(r===Me&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ye(r))return r}return t},t)},Me),Object(b.a)(t=>t!==Me),Object(p.a)(t=>ye(t)?t:!0===t),Object(N.a)(1)))}function Fe(t,e){return null!==t&&e&&e(new nt(t)),Object(o.a)(!0)}function je(t,e){return null!==t&&e&&e(new tt(t)),Object(o.a)(!0)}function Be(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>d(()=>{const i=Ne(r,e,n);let o;if(function(t){return t&&ve(t.canActivate)}(i))o=_t(i.canActivate(e,t));else{if(!ve(i))throw new Error("Invalid CanActivate guard");o=_t(i(e,t))}return o.pipe(Object(A.a)())}));return Object(o.a)(i).pipe(Le())}function Ve(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>d(()=>{const i=e.guards.map(i=>{const o=Ne(i,e.node,n);let s;if(function(t){return t&&ve(t.canActivateChild)}(o))s=_t(o.canActivateChild(r,t));else{if(!ve(o))throw new Error("Invalid CanActivateChild guard");s=_t(o(r,t))}return s.pipe(Object(A.a)())});return Object(o.a)(i).pipe(Le())}));return Object(o.a)(i).pipe(Le())}class Ue{}class ze{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const e=$e(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,st),r=new Xt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},st,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Wt(r,n),s=new Zt(this.url,i);return this.inheritParamsAndData(s._root),Object(o.a)(s)}catch(t){return new l.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Yt(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=xt(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};n.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(),n.sort((t,e)=>t.value.outlet===st?-1:e.value.outlet===st?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Ue))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Ue}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Ue;if((t.outlet||st)!==r)throw new Ue;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?yt(n).parameters:{};i=new Xt(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ge(t),r,t.component,t,qe(e),He(e)+n.length,Qe(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Ue;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||ht)(n,t,e);if(!r)throw new Ue;const i={};wt(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Xt(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ge(t),r,t.component,t,qe(e),He(e)+o.length,Qe(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=$e(e,o,s,a,this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new Wt(i,t)]}if(0===a.length&&0===u.length)return[new Wt(i,[])];const c=this.processSegment(a,l,u,st);return[new Wt(i,c)]}}function qe(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function He(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function $e(t,e,n,r,i){if(n.length>0&&function(t,e,n){return r.some(n=>We(t,e,n)&&Je(n)!==st)}(t,n)){const i=new Et(e,function(t,e,n,r){const i={};i[st]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Je(o)!==st){const n=new Et([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Je(o)]=n}return i}(t,e,r,new Et(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(n=>We(t,e,n))}(t,n)){const o=new Et(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(We(t,n,a)&&!i[Je(a)]){const n=new Et([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Je(a)]=n}return Object.assign({},i,s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Et(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function We(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Je(t){return t.outlet||st}function Ge(t){return t.data||{}}function Qe(t){return t.resolve||{}}function Ke(t,e,n,r){const i=Ne(t,e,r);return _t(i.resolve?i.resolve(e,n):i(e,n))}function Ye(t){return function(e){return e.pipe(Object(O.a)(e=>{const n=t(e);return n?Object(s.a)(n).pipe(Object(p.a)(()=>e)):Object(s.a)([e])}))}}class Xe{}class Ze{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const tn=new i.r("ROUTES");class en{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(p.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new dt(vt(r.injector.get(tn)).map(mt),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(s.a)(this.loader.load(t)):_t(t()).pipe(Object(I.a)(t=>t instanceof i.x?Object(o.a)(t):Object(s.a)(this.compiler.compileModuleAsync(t))))}}class nn{}class rn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function on(t){throw t}function sn(t,e,n){return e.parse("/")}function an(t,e){return Object(o.a)(null)}class ln{constructor(t,e,n,r,o,s,l,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new f.a,this.errorHandler=on,this.malformedUriErrorHandler=sn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:an,afterPreactivation:an},this.urlHandlingStrategy=new rn,this.routeReuseStrategy=new Ze,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(i.z),this.console=o.get(i.gb);const c=o.get(i.B);this.isNgZoneEnabled=c instanceof i.B,this.resetConfig(u),this.currentUrlTree=new Ct(new Et([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new en(s,l,t=>this.triggerEvent(new X(t)),t=>this.triggerEvent(new Z(t))),this.routerState=Qt(this.currentUrlTree,this.rootComponentType),this.transitions=new a.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(b.a)(t=>0!==t.id),Object(p.a)(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(O.a)(t=>{let n=!1,r=!1;return Object(o.a)(t).pipe(Object(B.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Object(O.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(Object(O.a)(t=>{const n=this.transitions.getValue();return e.next(new q(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?h.a:[t]}),Object(O.a)(t=>Promise.resolve(t)),function(t,e,n,r){return function(i){return i.pipe(Object(O.a)(i=>(function(t,e,n,r,o){return new Se(t,e,n,i.extractedUrl,o).apply()})(t,e,n,0,r).pipe(Object(p.a)(t=>Object.assign({},i,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Object(B.a)(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(I.a)(o=>(function(t,e,n,r,i="emptyOnly",o="legacy"){return new ze(t,e,n,r,i,o).recognize()})(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(p.a)(t=>Object.assign({},o,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(B.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(B.a)(t=>{const n=new J(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=t,l=new q(n,this.serializeUrl(r),i,s);e.next(l);const u=Qt(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign({},t,{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign({},a,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),h.a}),Ye(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(B.a)(t=>{const e=new G(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(p.a)(t=>Object.assign({},t,{guards:Oe(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(I.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=n;return 0===l.length&&0===a.length?Object(o.a)(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return Object(s.a)(t).pipe(Object(I.a)(t=>(function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(o.a)(!0);const a=s.map(o=>{const s=Ne(o,e,i);let a;if(function(t){return t&&ve(t.canDeactivate)}(s))a=_t(s.canDeactivate(t,e,n,r));else{if(!ve(s))throw new Error("Invalid CanDeactivate guard");a=_t(s(t,e,n,r))}return a.pipe(Object(A.a)())});return Object(o.a)(a).pipe(Le())})(t.component,t.route,n,e,r)),Object(A.a)(t=>!0!==t,!0))}(l,r,i,t).pipe(Object(I.a)(n=>n&&function(t){return"boolean"==typeof n}()?function(t,e,n,r){return Object(s.a)(e).pipe(Object(F.a)(e=>Object(s.a)([je(e.route.parent,r),Fe(e.route,r),Ve(t,e.path,n),Be(t,e.route,n)]).pipe(m(),Object(A.a)(t=>!0!==t,!0))),Object(A.a)(t=>!0!==t,!0))}(r,a,t,e):Object(o.a)(n)),Object(p.a)(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(B.a)(t=>{if(ye(t.guardsResult)){const e=ct(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(B.a)(t=>{const e=new Q(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(b.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new $(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ye(t=>{if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(Object(B.a)(t=>{const e=new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe(Object(I.a)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?Object(s.a)(i).pipe(Object(F.a)(n=>(function(t,e,n,i){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(o.a)({});if(1===i.length){const o=i[0];return Ke(t[o],e,n,r).pipe(Object(p.a)(t=>({[o]:t})))}const a={};return Object(s.a)(i).pipe(Object(I.a)(i=>Ke(t[i],e,n,r).pipe(Object(p.a)(t=>(a[i]=t,t))))).pipe(T(),Object(p.a)(()=>a))}(t._resolve,t,r,i).pipe(Object(p.a)(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,Yt(t,n).resolve),null)))})(n.route,0,t,e)),function(t,e){return arguments.length>=2?function(n){return Object(j.a)(Object(L.a)(t,e),w(1),Object(E.a)(e))(n)}:function(e){return Object(j.a)(Object(L.a)((e,n,r)=>t(e,n,r+1)),w(1))(e)}}((t,e)=>t),Object(p.a)(t=>n)):Object(o.a)(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Object(B.a)(t=>{const e=new Y(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ye(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(p.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Wt(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Kt(new a.a((i=n.value).url),new a.a(i.params),new a.a(i.queryParams),new a.a(i.fragment),new a.a(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Wt(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Gt(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Object(B.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),ge(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),Object(B.a)({next(){n=!0},complete(){n=!0}}),Object(V.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new $(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Object(x.a)(n=>{if(r=!0,function(t){return n&&n[ut]}()){const r=ye(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new $(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),t.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new W(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}return h.a}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ft(t),this.config=t.map(mt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:l}=e;Object(i.bb)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,c=l?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=s?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return oe(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new se(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return wt(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new se(n,e,r)}(n);if(o.toRoot())return oe(e.root,new Et([],{}),e,r,i);const s=function(t,n,r){if(t.isAbsolute)return new ae(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new ae(r.snapshot._urlSegment,!0,0);const i=ie(t.commands[0])?0:1;return function(e,n,o){let s=r.snapshot._urlSegment,a=r.snapshot._lastPathIndex+i,l=t.numberOfDoubleDots;for(;l>a;){if(l-=a,!(s=s.parent))throw new Error("Invalid number of '../'");a=s.segments.length}return new ae(s,!1,a-l)}()}(o,0,t),a=s.processChildren?ce(s.segmentGroup,s.index,o.commands):ue(s.segmentGroup,s.index,o.commands);return oe(s.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,h,c)}navigateByUrl(t,e={skipLocationChange:!1}){Object(i.bb)()&&this.isNgZoneEnabled&&!i.B.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=ye(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(ye(t))return kt(this.currentUrlTree,t,e);const n=this.parseUrl(t);return kt(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new H(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r){const i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o=null,s=null;const a=new Promise((t,e)=>{o=t,s=e}),l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}let un=(()=>(class{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.bb)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:hn(this.skipLocationChange),replaceUrl:hn(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:hn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:hn(this.preserveFragment)})}}))(),cn=(()=>(class{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof H&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.bb)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:hn(this.skipLocationChange),replaceUrl:hn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:hn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:hn(this.preserveFragment)})}}))();function hn(t){return""===t||!!t}class dn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fn,this.attachRef=null}}class fn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new dn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let pn=(()=>(class{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.p,this.deactivateEvents=new i.p,this.name=r||st,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new gn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}))();class gn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Kt?this.route:t===fn?this.childContexts:this.parent.get(t,e)}}class mn{}class bn{preload(t,e){return e().pipe(Object(x.a)(()=>Object(o.a)(null)))}}class vn{preload(t,e){return Object(o.a)(null)}}let yn=(()=>(class{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new en(e,n,e=>t.triggerEvent(new X(e)),e=>t.triggerEvent(new Z(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(b.a)(t=>t instanceof H),Object(F.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.z);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(s.a)(n).pipe(Object(g.a)(),Object(p.a)(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(I.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}))();class wn{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof q?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof H&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof it&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new it(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const _n=new i.r("ROUTER_CONFIGURATION"),kn=new i.r("ROUTER_FORROOT_GUARD"),Cn=[r.i,{provide:At,useClass:It},{provide:ln,useFactory:Dn,deps:[i.g,At,fn,r.i,i.s,i.y,i.j,tn,_n,[nn,new i.C],[Xe,new i.C]]},fn,{provide:Kt,useFactory:Pn,deps:[ln]},{provide:i.y,useClass:i.N},yn,vn,bn,{provide:_n,useValue:{enableTracing:!1}}];function En(){return new i.A("Router",ln)}let Sn=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Cn,In(e),{provide:kn,useFactory:An,deps:[[ln,new i.C,new i.M]]},{provide:_n,useValue:n||{}},{provide:r.j,useFactory:xn,deps:[r.s,[new i.q(r.a),new i.C],_n]},{provide:wn,useFactory:Tn,deps:[ln,r.w,_n]},{provide:mn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:vn},{provide:i.A,multi:!0,useFactory:En},[On,{provide:i.d,multi:!0,useFactory:Nn,deps:[On]},{provide:Mn,useFactory:Rn,deps:[On]},{provide:i.b,multi:!0,useExisting:Mn}]]}}static forChild(e){return{ngModule:t,providers:[In(e)]}}}return t})();function Tn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new wn(t,e,n)}function xn(t,e,n={}){return n.useHash?new r.g(t,e):new r.r(t,e)}function An(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function In(t){return[{provide:i.a,multi:!0,useValue:t},{provide:tn,multi:!0,useValue:t}]}function Dn(t,e,n,r,i,o,s,a,l={},u,c){const h=new ln(null,e,n,r,i,o,s,vt(a));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),l.errorHandler&&(h.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(h.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){const t=Object(U.r)();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l.onSameUrlNavigation&&(h.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(h.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(h.relativeLinkResolution=l.relativeLinkResolution),h}function Pn(t){return t.routerState.root}let On=(()=>(class{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new f.a}appInitializer(){return this.injector.get(r.h,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ln),r=this.injector.get(_n);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(_n),n=this.injector.get(yn),r=this.injector.get(wn),o=this.injector.get(ln),s=this.injector.get(i.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}))();function Nn(t){return t.appInitializer.bind(t)}function Rn(t){return t.bootstrapListener.bind(t)}const Mn=new i.r("Router Initializer")},igpV:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return a});const r="ionViewWillEnter",i="ionViewDidEnter",o="ionViewWillLeave",s="ionViewDidLeave",a="ionViewWillUnload"},iqUP:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),n("bQlE"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),t.exports=i},irV9:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n("mrSG");var r=n("HDdC"),i=n("Cfvw"),o=n("LRne"),s=n("eIep"),a=n("1XSQ"),l=n("yA/v");let u=(()=>(class{constructor(t,e,n,u){this.zone=u;const c=new a.a(u,n);this.auth=u.runOutsideAngular(()=>Object(l.e)(t,e).auth()),this.authState=c.keepUnstableUntilFirst(c.runOutsideAngular(new r.a(t=>({unsubscribe:this.auth.onAuthStateChanged(t)})))),this.user=c.keepUnstableUntilFirst(c.runOutsideAngular(new r.a(t=>({unsubscribe:this.auth.onIdTokenChanged(t)})))),this.idToken=this.user.pipe(Object(s.a)(t=>t?Object(i.a)(t.getIdToken()):Object(o.a)(null))),this.idTokenResult=this.user.pipe(Object(s.a)(t=>t?Object(i.a)(t.getIdTokenResult()):Object(o.a)(null)))}}))()},itXk:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("z+Ro"),i=n("DH7j"),o=n("l7GE"),s=n("ZUHj"),a=n("yCtX");const l={};function u(...t){let e=null,n=null;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(a.a)(t,n).lift(new c(e))}class c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends o.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(l),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(s.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===l?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},j1ZV:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},kLfG:function(t,e,n){var r={"./ion-action-sheet-controller_8.entry.js":["0BR9",0,28],"./ion-action-sheet-ios.entry.js":["bnjm",0,29],"./ion-action-sheet-md.entry.js":["utt2",0,30],"./ion-alert-ios.entry.js":["yaSn",0,31],"./ion-alert-md.entry.js":["2/RY",0,32],"./ion-app_8-ios.entry.js":["iInF",0,33],"./ion-app_8-md.entry.js":["K9Nc",0,34],"./ion-avatar_3-ios.entry.js":["hH1s",0,35],"./ion-avatar_3-md.entry.js":["Jw9y",0,36],"./ion-back-button-ios.entry.js":["ouVF",0,37],"./ion-back-button-md.entry.js":["/joy",0,38],"./ion-backdrop-ios.entry.js":["uJLv",0,39],"./ion-backdrop-md.entry.js":["fSmE",0,40],"./ion-button_2-ios.entry.js":["s1jK",0,41],"./ion-button_2-md.entry.js":["Wou7",0,42],"./ion-card_5-ios.entry.js":["qshq",0,43],"./ion-card_5-md.entry.js":["Q1uX",0,44],"./ion-checkbox-ios.entry.js":["059i",0,45],"./ion-checkbox-md.entry.js":["eLfv",0,46],"./ion-chip-ios.entry.js":["+FzG",0,47],"./ion-chip-md.entry.js":["yRpg",0,48],"./ion-col_3.entry.js":["/CAe",49],"./ion-datetime_3-ios.entry.js":["Z1Jy",0,50],"./ion-datetime_3-md.entry.js":["X0Dk",0,51],"./ion-fab_3-ios.entry.js":["wvyA",0,52],"./ion-fab_3-md.entry.js":["NkKY",0,53],"./ion-img.entry.js":["wHD8",54],"./ion-infinite-scroll_2-ios.entry.js":["nf6t",0,55],"./ion-infinite-scroll_2-md.entry.js":["lg/V",0,56],"./ion-input-ios.entry.js":["sdJS",0,57],"./ion-input-md.entry.js":["uQUw",0,58],"./ion-item-option_3-ios.entry.js":["Pa1g",0,59],"./ion-item-option_3-md.entry.js":["KTnd",0,60],"./ion-item_8-ios.entry.js":["Z51p",0,61],"./ion-item_8-md.entry.js":["8bam",0,62],"./ion-loading-ios.entry.js":["J3Yu",0,63],"./ion-loading-md.entry.js":["N3W9",0,64],"./ion-menu_4-ios.entry.js":["GEuc",0,65],"./ion-menu_4-md.entry.js":["BHpw",0,66],"./ion-modal-ios.entry.js":["mgaC",0,67],"./ion-modal-md.entry.js":["EpFf",0,68],"./ion-nav_4.entry.js":["SUlj",0,69],"./ion-popover-ios.entry.js":["Gdks",0,70],"./ion-popover-md.entry.js":["VgKV",0,71],"./ion-progress-bar-ios.entry.js":["0PGG",0,72],"./ion-progress-bar-md.entry.js":["h/Bu",0,73],"./ion-radio_2-ios.entry.js":["5bK7",0,74],"./ion-radio_2-md.entry.js":["pOmE",0,75],"./ion-range-ios.entry.js":["5g9+",0,76],"./ion-range-md.entry.js":["fD4w",0,77],"./ion-refresher_2-ios.entry.js":["CXux",0,78],"./ion-refresher_2-md.entry.js":["RODS",0,79],"./ion-reorder_2-ios.entry.js":["IdzL",0,80],"./ion-reorder_2-md.entry.js":["Ftzj",0,81],"./ion-ripple-effect.entry.js":["STjf",82],"./ion-route_4.entry.js":["k5eQ",0,83],"./ion-searchbar-ios.entry.js":["l0q3",0,84],"./ion-searchbar-md.entry.js":["mLlG",0,85],"./ion-segment_2-ios.entry.js":["Iymp",0,86],"./ion-segment_2-md.entry.js":["3msy",0,87],"./ion-select_3-ios.entry.js":["rYLK",0,88],"./ion-select_3-md.entry.js":["WOXB",0,89],"./ion-slide_2-ios.entry.js":["F/Xn",0,90],"./ion-slide_2-md.entry.js":["k8us",0,91],"./ion-spinner.entry.js":["nI0H",0,92],"./ion-split-pane-ios.entry.js":["edcM",93],"./ion-split-pane-md.entry.js":["RyPD",94],"./ion-tab-bar_2-ios.entry.js":["DP4G",0,95],"./ion-tab-bar_2-md.entry.js":["gaXT",0,96],"./ion-tab_2.entry.js":["TpdJ",0,97],"./ion-text.entry.js":["ISmu",0,98],"./ion-textarea-ios.entry.js":["xNZy",0,99],"./ion-textarea-md.entry.js":["p1XJ",0,100],"./ion-toast-ios.entry.js":["XGfm",0,101],"./ion-toast-md.entry.js":["Y/uG",0,102],"./ion-toggle-ios.entry.js":["WbT0",0,103],"./ion-toggle-md.entry.js":["upP9",0,104],"./ion-virtual-scroll.entry.js":["8Mb5",105]};function i(t){if(!n.o(r,t))return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e});var e=r[t],i=e[0];return Promise.all(e.slice(1).map(n.e)).then(function(){return n(i)})}i.keys=function(){return Object.keys(r)},i.id="kLfG",t.exports=i},kweq:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return y});var r=n("8Y7J"),i=n("dh1O"),o=n("SVse"),s=n("s7LF"),a=n("ZZ/e"),l=n("oBZk"),u=r.vb({encapsulation:2,styles:[],data:{}});function c(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"ion-icon",[["color","primary"]],[[8,"slot",0]],null,null,l.U,l.n)),r.wb(1,49152,null,0,a.A,[r.i,r.n,r.B],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary",e.component.frontIcon)},function(t,e){t(e,0,0,"start")})}function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"ion-icon",[],[[8,"slot",0]],null,null,l.U,l.n)),r.wb(1,49152,null,0,a.A,[r.i,r.n,r.B],{name:[0,"name"]},null)],function(t,e){t(e,1,0,e.component.removeButtonIcon)},function(t,e){t(e,0,0,e.component.removeButtonSlot)})}function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,9,"div",[["class","selected-items"]],null,null,null,null,null)),(t()(),r.xb(1,0,null,null,8,"ion-chip",[],[[8,"className",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.removeItem(t.context.$implicit)&&r),r},l.N,l.g)),r.wb(2,49152,null,0,a.q,[r.i,r.n,r.B],{color:[0,"color"],outline:[1,"outline"]},null),(t()(),r.mb(16777216,null,0,1,null,c)),r.wb(4,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.xb(5,0,null,0,2,"ion-label",[],null,null,null,l.X,l.q)),r.wb(6,49152,null,0,a.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(7,0,["",""])),(t()(),r.mb(16777216,null,0,1,null,h)),r.wb(9,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.removeButtonColor,!0),t(e,4,0,n.frontIcon),t(e,9,0,n.removeButtonIcon)},function(t,e){var n=e.component;t(e,1,0,r.Bb(1,"",n.removeButtonClasses,"")),t(e,7,0,n.getLabel(e.context.$implicit))})}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),r.mb(16777216,null,null,1,null,d)),r.wb(2,278528,null,0,o.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.selected)},null)}function p(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"span",[],[[8,"innerHTML",1]],null,null,null,null)),r.Nb(1,2)],null,function(t,e){var n=r.Sb(e,0,0,t(e,1,0,r.Jb(e.parent,0),e.context.attrs.label,e.context.attrs.keyword));t(e,0,0,n)})}function g(t){return r.Tb(0,[(t()(),r.mb(0,null,null,0))],null,null)}function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,4,"li",[],null,[[null,"click"],[null,"tap"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.handleSelectTap(n,t.context.$implicit)&&r),"tap"===e&&(r=!1!==i.handleSelectTap(n,t.context.$implicit)&&r),r},null,null)),(t()(),r.mb(16777216,null,null,3,null,g)),r.wb(2,540672,null,0,o.q,[r.S],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Mb(3,{data:0,label:1,keyword:2,formValue:3,labelAttribute:4,formValueAttribute:5}),r.Mb(4,{attrs:0})],function(t,e){var n=e.component,i=t(e,4,0,t(e,3,0,e.context.$implicit,n.getLabel(e.context.$implicit),n.keyword,n.getFormValue(e.context.$implicit),n.getLabel(e.context.$implicit),n.getFormValue(e.context.$implicit)));t(e,2,0,i,n.template||r.Jb(e.parent.parent,25))},null)}function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,4,"ul",[],null,null,null,null,null)),r.Ob(512,null,o.A,o.B,[r.n,r.v,r.H]),r.wb(2,278528,null,0,o.p,[o.A],{ngStyle:[0,"ngStyle"]},null),(t()(),r.mb(16777216,null,null,1,null,m)),r.wb(4,278528,null,0,o.l,[r.S,r.P,r.u],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.getStyle()),t(e,4,0,n.suggestions)},null)}function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Rb(1,null,[" ","\n"]))],null,function(t,e){t(e,1,0,e.component.options.noItems)})}function y(t){return r.Tb(0,[r.Lb(0,i.c,[]),r.Pb(671088640,1,{searchbarElem:0}),r.Pb(671088640,2,{inputElem:0}),(t()(),r.mb(16777216,null,null,1,null,f)),r.wb(4,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.xb(5,0,[[2,0]],null,9,"ion-input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"tap"],[null,"ngModelChange"],[null,"ionFocus"],[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,9)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,9)._handleInputEvent(n.target)&&i),"keyup"===e&&(i=!1!==o.getItems(n)&&i),"tap"===e&&(i=!1!==o.handleTap(n)&&i),"ngModelChange"===e&&(i=!1!==(o.keyword=n)&&i),"ngModelChange"===e&&(i=!1!==o.updateModel(n)&&i),"ionFocus"===e&&(i=!1!==o.onFocus(n)&&i),"ionBlur"===e&&(i=!1!==o.onBlur(n)&&i),i},l.V,l.o)),r.Ob(512,null,o.y,o.z,[r.u,r.v,r.n,r.H]),r.wb(7,278528,null,0,o.k,[o.y],{ngClass:[0,"ngClass"]},null),r.Mb(8,{hidden:0,loading:1}),r.wb(9,16384,null,0,a.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[a.Mb]),r.wb(11,671744,null,0,s.l,[[8,null],[8,null],[8,null],[6,s.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,s.h,null,[s.l]),r.wb(13,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(14,49152,[["inputElem",4]],0,a.E,[r.i,r.n,r.B],{clearInput:[0,"clearInput"],clearOnEdit:[1,"clearOnEdit"],color:[2,"color"],disabled:[3,"disabled"],mode:[4,"mode"],name:[5,"name"],placeholder:[6,"placeholder"],type:[7,"type"]},null),(t()(),r.xb(15,0,[[1,0]],null,9,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionInput"],[null,"tap"],[null,"ngModelChange"],[null,"ionClear"],[null,"ionFocus"],[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0,o=t.component;return"ionBlur"===e&&(i=!1!==r.Jb(t,19)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,19)._handleInputEvent(n.target)&&i),"ionInput"===e&&(i=!1!==o.getItems(n)&&i),"tap"===e&&(i=!1!==o.handleTap(n)&&i),"ngModelChange"===e&&(i=!1!==(o.keyword=n)&&i),"ngModelChange"===e&&(i=!1!==o.updateModel(n)&&i),"ionClear"===e&&(i=!1!==o.clearValue(!0)&&i),"ionFocus"===e&&(i=!1!==o.onFocus(n)&&i),"ionBlur"===e&&(i=!1!==o.onBlur(n)&&i),i},l.cb,l.v)),r.Ob(512,null,o.y,o.z,[r.u,r.v,r.n,r.H]),r.wb(17,278528,null,0,o.k,[o.y],{ngClass:[0,"ngClass"]},null),r.Mb(18,{hidden:0,loading:1,disabled:2}),r.wb(19,16384,null,0,a.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[a.Mb]),r.wb(21,671744,null,0,s.l,[[8,null],[8,null],[8,null],[6,s.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Ob(2048,null,s.h,null,[s.l]),r.wb(23,16384,null,0,s.i,[[4,s.h]],null,null),r.wb(24,49152,[["searchbarElem",4]],0,a.hb,[r.i,r.n,r.B],{animated:[0,"animated"],autocomplete:[1,"autocomplete"],autocorrect:[2,"autocorrect"],cancelButtonIcon:[3,"cancelButtonIcon"],cancelButtonText:[4,"cancelButtonText"],clearIcon:[5,"clearIcon"],color:[6,"color"],debounce:[7,"debounce"],mode:[8,"mode"],placeholder:[9,"placeholder"],searchIcon:[10,"searchIcon"],showCancelButton:[11,"showCancelButton"],spellcheck:[12,"spellcheck"],type:[13,"type"]},null),(t()(),r.mb(0,[["defaultTemplate",2]],null,0,null,p)),(t()(),r.mb(16777216,null,null,1,null,b)),r.wb(27,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,v)),r.wb(29,16384,null,0,o.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,4,0,n.multi);var r=t(e,8,0,!n.useIonInput,n.isLoading);t(e,7,0,r),t(e,11,0,n.name,n.disabled,n.keyword),t(e,14,0,null==n.options.clearInput?n.defaultOpts.clearInput:n.options.clearInput,null==n.options.clearOnEdit?n.defaultOpts.clearOnEdit:n.options.clearOnEdit,null==n.options.color?null:n.options.color,n.disabled,null==n.options.mode?n.defaultOpts.mode:n.options.mode,n.name,null==n.options.placeholder?n.defaultOpts.placeholder:n.options.placeholder,null==n.options.type?n.defaultOpts.type:n.options.type);var i=t(e,18,0,n.useIonInput,n.isLoading,n.disabled);t(e,17,0,i),t(e,21,0,n.name,n.keyword),t(e,24,1,[null==n.options.animated?n.defaultOpts.animated:n.options.animated,null==n.options.autocomplete?n.defaultOpts.autocomplete:n.options.autocomplete,null==n.options.autocorrect?n.defaultOpts.autocorrect:n.options.autocorrect,null==n.options.cancelButtonIcon?n.defaultOpts.cancelButtonIcon:n.options.cancelButtonIcon,null==n.options.cancelButtonText?n.defaultOpts.cancelButtonText:n.options.cancelButtonText,null==n.options.clearIcon?n.defaultOpts.clearIcon:n.options.clearIcon,null==n.options.color?null:n.options.color,null==n.options.debounce?n.defaultOpts.debounce:n.options.debounce,null==n.options.mode?n.defaultOpts.mode:n.options.mode,null==n.options.placeholder?n.defaultOpts.placeholder:n.options.placeholder,null==n.options.searchIcon?n.defaultOpts.searchIcon:n.options.searchIcon,null==n.options.showCancelButton?n.defaultOpts.showCancelButton:n.options.showCancelButton,null==n.options.spellcheck?n.defaultOpts.spellcheck:n.options.spellcheck,null==n.options.type?n.defaultOpts.type:n.options.type]),t(e,27,0,!n.disabled&&n.suggestions.length>0&&n.showList),t(e,29,0,0==n.suggestions.length&&n.showList&&n.options.noItems)},function(t,e){t(e,5,0,r.Jb(e,13).ngClassUntouched,r.Jb(e,13).ngClassTouched,r.Jb(e,13).ngClassPristine,r.Jb(e,13).ngClassDirty,r.Jb(e,13).ngClassValid,r.Jb(e,13).ngClassInvalid,r.Jb(e,13).ngClassPending),t(e,15,0,r.Jb(e,23).ngClassUntouched,r.Jb(e,23).ngClassTouched,r.Jb(e,23).ngClassPristine,r.Jb(e,23).ngClassDirty,r.Jb(e,23).ngClassValid,r.Jb(e,23).ngClassInvalid,r.Jb(e,23).ngClassPending)})}},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lGQG:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("mrSG"),i=n("lJxs"),o=n("eIep"),s=n("Wcq6"),a=n("ajt+"),l=n("8Y7J"),u=n("irV9");let c=(()=>{class t{constructor(t,e){this.afAuth=t,this.dbService=e}isAuthenticated(){return null!=this.afAuth.auth.currentUser}getUserId(){return this.isAuthenticated()?this.afAuth.auth.currentUser.uid:void 0}tryGetUserId(){return this.afAuth.user.pipe(Object(i.a)(t=>t?t.uid:void 0))}isAdmin(){return this.tryGetUserId().pipe(Object(o.a)(t=>this.dbService.getObjectValues(`admin/${t}`).pipe(Object(i.a)(t=>!!t))))}isAuthorized(){return this.afAuth.user.pipe(Object(i.a)(t=>!!t))}register(t){return r.__awaiter(this,void 0,void 0,function*(){const e=yield this.afAuth.auth.createUserWithEmailAndPassword(t.email,t.password);return yield e.user.updateProfile({displayName:t.name}),this.setUserData(e.user.uid,{name:t.name}),e})}setUserData(t,e){return r.__awaiter(this,void 0,void 0,function*(){yield this.dbService.setObjectAtPath(`users/${t}`,e)})}login(t){return r.__awaiter(this,void 0,void 0,function*(){return yield this.afAuth.auth.signInWithEmailAndPassword(t.email,t.password)})}googleLogin(){return r.__awaiter(this,void 0,void 0,function*(){const t=new s.auth.GoogleAuthProvider,e=yield this.afAuth.auth.signInWithPopup(t),n={name:e.user.displayName,photoUrl:e.user.photoURL};return yield this.setUserData(e.user.uid,n),e})}facebookLogin(){return r.__awaiter(this,void 0,void 0,function*(){const t=new s.auth.FacebookAuthProvider,e=yield this.afAuth.auth.signInWithPopup(t),n={name:e.user.displayName,photoUrl:e.user.photoURL};return yield this.setUserData(e.user.uid,n),e})}logout(){return this.afAuth.auth.signOut()}}return t.ngInjectableDef=l.Wb({factory:function(){return new t(l.Xb(u.a),l.Xb(a.a))},token:t,providedIn:"root"}),t})()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("KqfI");function i(...t){return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:r.a}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return g}),n.d(e,"__spreadArrays",function(){return m}),n.d(e,"__await",function(){return b}),n.d(e,"__asyncGenerator",function(){return v}),n.d(e,"__asyncDelegator",function(){return y}),n.d(e,"__asyncValues",function(){return w}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return k}),n.d(e,"__importDefault",function(){return C});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof b?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function l(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function y(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("quSY");function o(t){return e=>e.lift(new s(t))}class s{constructor(t){this.callback=t}call(t,e){return e.subscribe(new a(t,this.callback))}}class a extends r.a{constructor(t,e){super(t),this.add(new i.a(e))}}},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new c(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function l(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function u(t){this._index=t}function c(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}o(u,"_index",["name","keyPath","multiEntry","unique"]),s(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(c,"_cursor",["direction","key","primaryKey","value"]),s(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(c.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new c(t,e._request)})})})}),h.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,u].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[u,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new f(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oBZk:function(t,e,n){"use strict";n.d(e,"D",function(){return a}),n.d(e,"kb",function(){return l}),n.d(e,"a",function(){return u}),n.d(e,"H",function(){return c}),n.d(e,"b",function(){return h}),n.d(e,"I",function(){return d}),n.d(e,"c",function(){return f}),n.d(e,"J",function(){return p}),n.d(e,"d",function(){return g}),n.d(e,"M",function(){return m}),n.d(e,"e",function(){return b}),n.d(e,"K",function(){return v}),n.d(e,"f",function(){return y}),n.d(e,"L",function(){return w}),n.d(e,"g",function(){return _}),n.d(e,"N",function(){return k}),n.d(e,"h",function(){return C}),n.d(e,"O",function(){return E}),n.d(e,"i",function(){return S}),n.d(e,"P",function(){return T}),n.d(e,"j",function(){return x}),n.d(e,"Q",function(){return A}),n.d(e,"k",function(){return I}),n.d(e,"R",function(){return D}),n.d(e,"l",function(){return P}),n.d(e,"S",function(){return O}),n.d(e,"m",function(){return N}),n.d(e,"T",function(){return R}),n.d(e,"n",function(){return M}),n.d(e,"U",function(){return L}),n.d(e,"o",function(){return F}),n.d(e,"V",function(){return j}),n.d(e,"p",function(){return B}),n.d(e,"W",function(){return V}),n.d(e,"q",function(){return U}),n.d(e,"X",function(){return z}),n.d(e,"r",function(){return q}),n.d(e,"Y",function(){return H}),n.d(e,"s",function(){return $}),n.d(e,"ab",function(){return W}),n.d(e,"t",function(){return J}),n.d(e,"Z",function(){return G}),n.d(e,"u",function(){return Q}),n.d(e,"bb",function(){return K}),n.d(e,"v",function(){return Y}),n.d(e,"cb",function(){return X}),n.d(e,"w",function(){return Z}),n.d(e,"eb",function(){return tt}),n.d(e,"x",function(){return et}),n.d(e,"db",function(){return nt}),n.d(e,"y",function(){return rt}),n.d(e,"fb",function(){return it}),n.d(e,"z",function(){return ot}),n.d(e,"gb",function(){return st}),n.d(e,"A",function(){return at}),n.d(e,"hb",function(){return lt}),n.d(e,"B",function(){return ut}),n.d(e,"ib",function(){return ct}),n.d(e,"C",function(){return ht}),n.d(e,"jb",function(){return dt}),n.d(e,"E",function(){return ft}),n.d(e,"lb",function(){return pt}),n.d(e,"F",function(){return gt}),n.d(e,"mb",function(){return mt}),n.d(e,"G",function(){return bt}),n.d(e,"nb",function(){return vt});var r=n("8Y7J"),i=n("ZZ/e"),o=n("SVse"),s=n("iInd"),a=r.vb({encapsulation:0,styles:["[_nghost-%COMP%] {\n      display: flex;\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n\n      flex-direction: column;\n\n      width: 100%;\n      height: 100%;\n\n      contain: layout size style;\n      z-index: $z-index-page-container;\n    }\n    .tabs-inner[_ngcontent-%COMP%] {\n      position: relative;\n\n      flex: 1;\n\n      contain: layout size style;\n    }"],data:{}});function l(t){return r.Tb(0,[r.Pb(402653184,1,{outlet:0}),r.Ib(null,0),(t()(),r.xb(2,0,null,null,2,"div",[["class","tabs-inner"]],null,null,null,null,null)),(t()(),r.xb(3,16777216,[["outlet",1]],null,1,"ion-router-outlet",[["tabs","true"]],null,[[null,"stackEvents"]],function(t,e,n){var r=!0;return"stackEvents"===e&&(r=!1!==t.component.onPageSelected(n)&&r),r},null,null)),r.wb(4,212992,[[1,4]],0,i.fb,[s.b,r.S,r.l,[8,null],[8,"true"],i.c,i.Gb,o.i,r.n,s.m,r.B,s.a,[3,i.fb]],null,{stackEvents:"stackEvents"}),r.Ib(null,1)],function(t,e){t(e,4,0)},null)}var u=r.vb({encapsulation:2,styles:[],data:{}});function c(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var h=r.vb({encapsulation:2,styles:[],data:{}});function d(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var f=r.vb({encapsulation:2,styles:[],data:{}});function p(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var g=r.vb({encapsulation:2,styles:[],data:{}});function m(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var b=r.vb({encapsulation:2,styles:[],data:{}});function v(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var y=r.vb({encapsulation:2,styles:[],data:{}});function w(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var _=r.vb({encapsulation:2,styles:[],data:{}});function k(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var C=r.vb({encapsulation:2,styles:[],data:{}});function E(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var S=r.vb({encapsulation:2,styles:[],data:{}});function T(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var x=r.vb({encapsulation:2,styles:[],data:{}});function A(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var I=r.vb({encapsulation:2,styles:[],data:{}});function D(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var P=r.vb({encapsulation:2,styles:[],data:{}});function O(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var N=r.vb({encapsulation:2,styles:[],data:{}});function R(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var M=r.vb({encapsulation:2,styles:[],data:{}});function L(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var F=r.vb({encapsulation:2,styles:[],data:{}});function j(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var B=r.vb({encapsulation:2,styles:[],data:{}});function V(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var U=r.vb({encapsulation:2,styles:[],data:{}});function z(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var q=r.vb({encapsulation:2,styles:[],data:{}});function H(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var $=r.vb({encapsulation:2,styles:[],data:{}});function W(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var J=r.vb({encapsulation:2,styles:[],data:{}});function G(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var Q=r.vb({encapsulation:2,styles:[],data:{}});function K(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var Y=r.vb({encapsulation:2,styles:[],data:{}});function X(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var Z=r.vb({encapsulation:2,styles:[],data:{}});function tt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var et=r.vb({encapsulation:2,styles:[],data:{}});function nt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var rt=r.vb({encapsulation:2,styles:[],data:{}});function it(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var ot=r.vb({encapsulation:2,styles:[],data:{}});function st(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var at=r.vb({encapsulation:2,styles:[],data:{}});function lt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var ut=r.vb({encapsulation:2,styles:[],data:{}});function ct(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var ht=r.vb({encapsulation:2,styles:[],data:{}});function dt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var ft=r.vb({encapsulation:2,styles:[],data:{}});function pt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var gt=r.vb({encapsulation:2,styles:[],data:{}});function mt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}var bt=r.vb({encapsulation:2,styles:[],data:{}});function vt(t){return r.Tb(2,[r.Ib(null,0)],null,null)}},oTFL:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pMnS:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("8Y7J"),i=n("iInd"),o=r.vb({encapsulation:2,styles:[],data:{}});function s(t){return r.Tb(0,[(t()(),r.xb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.wb(1,212992,null,0,i.q,[i.b,r.S,r.l,[8,null],r.i],null,null)],function(t,e){t(e,1,0)},null)}function a(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"ng-component",[],null,null,null,s,o)),r.wb(1,49152,null,0,i.E,[],null,null)],null,null)}var l=r.tb("ng-component",i.E,a,{},{},[])},"pxS/":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("KOl+");function i(t,e){return!0===Object(r.a)(t,e)?Object(r.b)(t.constructor.getPluginRef())[e]:null}function o(t,e,n){!0===Object(r.a)(t,e)&&(Object(r.b)(t.constructor.getPluginRef())[e]=n)}},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",function(){return i}),n.d(e,"Logger",function(){return a}),n.d(e,"setLogLevel",function(){return l});var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},a=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=s,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function l(t){r.forEach(function(e){e.logLevel=t})}},qLiL:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("PjcS"),l=(n("SVse"),r.vb({encapsulation:2,styles:[],data:{}}));function u(t){return r.Tb(0,[(t()(),r.mb(0,null,null,0))],null,null)}function c(t){return r.Tb(0,[(t()(),r.mb(0,null,null,0,null,u))],null,null)}var h=n("sueB"),d=n("a+Xp"),f=n("ajt+"),p=n("lGQG"),g=n("iInd");n.d(e,"a",function(){return y});var m=r.vb({encapsulation:0,styles:[[""]],data:{}});function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,59,"ion-content",[["padding",""]],null,null,null,i.P,i.i)),r.wb(1,49152,null,0,o.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,57,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.submit()&&i),i},null,null)),r.wb(3,16384,null,0,s.s,[],null,null),r.wb(4,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.d]),r.wb(6,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(7,0,null,null,52,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(8,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,50,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,i.bb,i.u)),r.wb(10,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,48,"ion-col",[["align-self-center",""],["size-lg","12"],["size-md","12"],["size-xs","12"]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(13,0,null,0,39,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(14,0,null,null,38,"ion-list",[],null,null,null,i.Y,i.r)),r.wb(15,49152,null,0,o.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(16,0,null,0,1,"h1",[["text-center",""]],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Add New Blog Post"])),(t()(),r.xb(18,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(19,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(20,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(21,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Title"])),(t()(),r.xb(23,0,null,0,6,"ion-input",[["formControlName","title"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,25)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,25)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(24,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(25,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(27,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(29,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(30,0,null,0,4,"ion-item",[],null,null,null,i.W,i.p)),r.wb(31,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(32,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(33,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Content"])),(t()(),r.xb(35,0,null,0,5,"ckeditor",[["data","<p>Hello, world!</p>"],["formControlName","description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,c,l)),r.wb(36,4374528,null,0,a.a,[r.n,r.B],{editor:[0,"editor"],data:[1,"data"]},null),r.Ob(1024,null,s.g,function(t){return[t]},[a.a]),r.wb(38,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(40,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(41,0,null,0,11,"ion-item",[],null,null,null,i.W,i.p)),r.wb(42,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(43,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,i.X,i.q)),r.wb(44,49152,null,0,o.L,[r.i,r.n,r.B],{position:[0,"position"]},null),(t()(),r.Rb(-1,0,["Thumbnail URL"])),(t()(),r.xb(46,0,null,0,6,"ion-input",[["formControlName","pictureUrl"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,48)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,48)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(47,49152,null,0,o.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(48,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(50,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(52,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(53,0,null,0,6,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(54,0,null,null,2,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,i.I,i.b)),r.wb(55,49152,null,0,o.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Submit"])),(t()(),r.xb(57,0,null,null,2,"ion-button",[["color","danger"],["expand","block"],["routerDirection","back"],["size","large"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onCloseButton()&&r),r},i.I,i.b)),r.wb(58,49152,null,0,o.i,[r.i,r.n,r.B],{color:[0,"color"],expand:[1,"expand"],routerDirection:[2,"routerDirection"],size:[3,"size"],type:[4,"type"]},null),(t()(),r.Rb(-1,0,["Cancel"]))],function(t,e){var n=e.component;t(e,4,0,n.myForm),t(e,21,0,"stacked"),t(e,24,0,"text"),t(e,27,0,"title"),t(e,33,0,"stacked"),t(e,36,0,n.Editor,"<p>Hello, world!</p>"),t(e,38,0,"description"),t(e,44,0,"stacked"),t(e,47,0,"url"),t(e,50,0,"pictureUrl"),t(e,55,0,n.myForm.invalid,"block","large","submit"),t(e,58,0,"danger","block","back","large","button")},function(t,e){t(e,2,0,r.Jb(e,6).ngClassUntouched,r.Jb(e,6).ngClassTouched,r.Jb(e,6).ngClassPristine,r.Jb(e,6).ngClassDirty,r.Jb(e,6).ngClassValid,r.Jb(e,6).ngClassInvalid,r.Jb(e,6).ngClassPending),t(e,23,0,r.Jb(e,29).ngClassUntouched,r.Jb(e,29).ngClassTouched,r.Jb(e,29).ngClassPristine,r.Jb(e,29).ngClassDirty,r.Jb(e,29).ngClassValid,r.Jb(e,29).ngClassInvalid,r.Jb(e,29).ngClassPending),t(e,35,0,r.Jb(e,40).ngClassUntouched,r.Jb(e,40).ngClassTouched,r.Jb(e,40).ngClassPristine,r.Jb(e,40).ngClassDirty,r.Jb(e,40).ngClassValid,r.Jb(e,40).ngClassInvalid,r.Jb(e,40).ngClassPending),t(e,46,0,r.Jb(e,52).ngClassUntouched,r.Jb(e,52).ngClassTouched,r.Jb(e,52).ngClassPristine,r.Jb(e,52).ngClassDirty,r.Jb(e,52).ngClassValid,r.Jb(e,52).ngClassInvalid,r.Jb(e,52).ngClassPending)})}function v(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-add-blog",[],null,null,null,b,m)),r.wb(1,114688,null,0,h.a,[s.b,o.Fb,d.a,f.a,p.a,g.m],null,null)],function(t,e){t(e,1,0)},null)}var y=r.tb("app-add-blog",h.a,v,{},{},[])},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");function s(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}s.prototype=Object.create(Error.prototype);const a=s;n.d(e,"a",function(){return l});let l=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:s,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(s))try{s.call(this)}catch(c){e=c instanceof a?u(c.errors):[c]}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(c){e=e||[],c instanceof a?e=e.concat(u(c.errors)):e.push(c)}}}if(e)throw new a(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof a?e.errors:e),[])}},s7LF:function(t,e,n){"use strict";n.d(e,"p",function(){return vt}),n.d(e,"s",function(){return ct}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return ht}),n.d(e,"a",function(){return d}),n.d(e,"g",function(){return l}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return b}),n.d(e,"k",function(){return rt}),n.d(e,"l",function(){return ut}),n.d(e,"c",function(){return mt}),n.d(e,"d",function(){return dt}),n.d(e,"n",function(){return bt}),n.d(e,"b",function(){return yt}),n.d(e,"f",function(){return y}),n.d(e,"o",function(){return _}),n.d(e,"e",function(){return wt}),n.d(e,"m",function(){return _t});var r=n("8Y7J"),i=n("cUpR"),o=n("cp0P"),s=n("Cfvw"),a=n("lJxs");const l=new r.r("NgValueAccessor");let u=(()=>(class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}))(),c=(()=>(class{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(i.r)()?Object(i.r)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}))();class h{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class d extends h{get formDirective(){return null}get path(){return null}}function f(){throw new Error("unimplemented")}class p extends h{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return f()}get asyncValidator(){return f()}}class g{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let m=(()=>(class extends g{constructor(t){super(t)}}))(),b=(()=>(class extends g{constructor(t){super(t)}}))();function v(t){return null==t||0===t.length}const y=new r.r("NgValidators"),w=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class _{static min(t){return e=>{if(v(e.value)||v(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(v(e.value)||v(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return v(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return v(t.value)?null:w.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(v(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return _.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(v(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(k);return 0==e.length?null:function(t){return E(function(t,n){return e.map(e=>e(t))}(t))}}static composeAsync(t){if(!t)return null;const e=t.filter(k);return 0==e.length?null:function(t){const n=function(t,n){return e.map(e=>e(t))}(t).map(C);return Object(o.a)(n).pipe(Object(a.a)(E))}}}function k(t){return null!=t}function C(t){const e=Object(r.Eb)(t)?Object(s.a)(t):t;if(!Object(r.Db)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function E(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function S(t){return t.validate?e=>t.validate(e):t}function T(t){return t.validate?e=>t.validate(e):t}let x=(()=>(class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}))(),A=(()=>(class{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}))(),I=(()=>(class{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(p),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}))();const D={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class P{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${D.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${D.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${D.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${D.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${D.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${D.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function O(t,e){return[...e.path,t]}function N(t,e){t||F(e,"Cannot find control with"),e.valueAccessor||F(e,"No value accessor for form control with"),t.validator=_.compose([t.validator,e.validator]),t.asyncValidator=_.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&R(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&R(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function R(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function M(t,e){null==t&&F(e,"Cannot find control with"),t.validator=_.compose([t.validator,e.validator]),t.asyncValidator=_.composeAsync([t.asyncValidator,e.asyncValidator])}function L(t){return F(t,"There is no FormControl instance attached to form control element with")}function F(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function j(t){return null!=t?_.compose(t.map(S)):null}function B(t){return null!=t?_.composeAsync(t.map(T)):null}function V(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object(r.Fb)(e,n.currentValue)}const U=[u,(()=>(class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}))(),x,(()=>(class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.Fb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}))(),(()=>(class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.Fb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}))(),I];function z(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function q(t,e){if(!e)return null;Array.isArray(e)||F(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{e.constructor===c?n=e:function(t){return U.some(e=>t.constructor===e)}(e)?(r&&F(t,"More than one built-in value accessor matches form control with"),r=e):(i&&F(t,"More than one custom value accessor matches form control with"),i=e)}),i||r||n||(F(t,"No valid value accessor for form control with"),null)}function H(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const $="VALID",W="INVALID",J="PENDING",G="DISABLED";function Q(t){const e=Y(t)?t.validators:t;return Array.isArray(e)?j(e):e||null}function K(t,e){const n=Y(e)?e.asyncValidators:t;return Array.isArray(n)?B(n):n||null}function Y(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class X{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===$}get invalid(){return this.status===W}get pending(){return this.status==J}get disabled(){return this.status===G}get enabled(){return this.status!==G}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Q(t)}setAsyncValidators(t){this.asyncValidator=K(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=J,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=G,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=$,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==$&&this.status!==J||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?G:$}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=J;const e=C(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof tt?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof et&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.p,this.statusChanges=new r.p}_calculateStatus(){return this._allControlsDisabled()?G:this.errors?W:this._anyControlsHaveStatus(J)?J:this._anyControlsHaveStatus(W)?W:$}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Y(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Z extends X{constructor(t=null,e,n){super(Q(e),K(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class tt extends X{constructor(t,e,n){super(Q(e),K(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Z?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class et extends X{constructor(t,e,n){super(Q(e),K(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Z?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const nt=(()=>Promise.resolve(null))();let rt=(()=>(class extends d{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.p,this.form=new tt({},j(t),B(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nt.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),N(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nt.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),H(this._directives,t)})}addFormGroup(t){nt.then(()=>{const e=this._findContainer(t.path),n=new tt({});M(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nt.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){nt.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,z(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}))();class it{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${D.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${D.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${D.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${D.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${D.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${D.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const ot=new r.r("NgFormSelectorWarning");class st extends d{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return O(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return j(this._validators)}get asyncValidator(){return B(this._asyncValidators)}_checkParentType(){}}let at=(()=>{class t extends st{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof rt||it.modelGroupParentException()}}return t})();const lt=(()=>Promise.resolve(null))();let ut=(()=>(class extends p{constructor(t,e,n,i){super(),this.control=new Z,this._registered=!1,this.update=new r.p,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=q(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),V(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?O(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return j(this._rawValidators)}get asyncValidator(){return B(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){N(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof at)&&this._parent instanceof st?it.formGroupNameException():this._parent instanceof at||this._parent instanceof rt||it.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||it.missingNameException()}_updateValue(t){lt.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;lt.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}))(),ct=(()=>(class{}))();const ht=new r.r("NgModelWithFormControlWarning");let dt=(()=>(class extends d{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.p}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return N(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){H(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);M(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);M(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,z(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>L(e)),e.valueAccessor.registerOnTouched(()=>L(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&N(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=j(this._validators);this.form.validator=_.compose([this.form.validator,t]);const e=B(this._asyncValidators);this.form.asyncValidator=_.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||P.missingFormException()}}))(),ft=(()=>(class extends st{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){gt(this._parent)&&P.groupParentException()}}))(),pt=(()=>(class extends d{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return O(this.name,this._parent)}get validator(){return j(this._validators)}get asyncValidator(){return B(this._asyncValidators)}_checkParentType(){gt(this._parent)&&P.arrayParentException()}}))();function gt(t){return!(t instanceof ft||t instanceof dt||t instanceof pt)}let mt=(()=>{class t extends p{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.p,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=q(this,i)}set isDisabled(t){P.disabledAttrWarning()}ngOnChanges(e){var n,i,o;this._added||this._setUpControl(),V(e,this.viewModel)&&(n=t,i=this,o=this._ngModelWarningConfig,Object(r.bb)()&&"never"!==o&&((null!==o&&"once"!==o||n._ngModelWarningSentOnce)&&("always"!==o||i._ngModelWarningSent)||(P.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,i._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return O(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return j(this._rawValidators)}get asyncValidator(){return B(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof ft)&&this._parent instanceof st?P.ngModelGroupException():this._parent instanceof ft||this._parent instanceof dt||this._parent instanceof pt||P.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t})(),bt=(()=>(class{get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!==`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?_.required(t):null}registerOnValidatorChange(t){this._onChange=t}}))(),vt=(()=>(class{}))(),yt=(()=>(class{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new tt(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Z(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new et(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Z||t instanceof tt||t instanceof et?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}))(),wt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ot,useValue:e.warnOnDeprecatedNgFormSelector}]}}}return t})(),_t=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ht,useValue:e.warnOnNgModelWithFormControl}]}}}return t})()},sVev:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},ssx2:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("mrSG"),i=n("8Y7J"),o=(n("ZZ/e"),n("Ovnn"));n("gRsD");class s{constructor(t){this.modalCtrl=t,this.inputUrls=[],this.onFilesChanged=new i.p}ngOnInit(){}onAddPhotoButton(){return r.__awaiter(this,void 0,void 0,function*(){this.openPhotoModal()})}onEditPhotoButton(t){return r.__awaiter(this,void 0,void 0,function*(){this.openPhotoModal(!0,t)})}openPhotoModal(t=!1,e=null){return r.__awaiter(this,void 0,void 0,function*(){const n=yield this.modalCtrl.create({component:o.a,componentProps:{url:this.inputUrls[e]}});n.present(),n.onDidDismiss().then(n=>{n.data&&(t?this.inputUrls[e]=n.data:this.inputUrls.push(n.data),console.log(this.inputUrls))}),this.updateOutput()})}onRemovePhotoButton(t){this.inputUrls.splice(t,1),this.updateOutput()}updateOutput(){this.onFilesChanged.next(this.inputUrls)}}},sueB:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("s7LF"),i=(n("a+Xp"),n("ajt+"),n("lGQG"),n("ZZ/e"),n("+z1p"));class o{constructor(t,e,n,o,s,a){this.fb=t,this.modalCtrl=e,this.blogService=n,this.db=o,this.authService=s,this.router=a,this.Editor=i,this.myForm=t.group({title:["",r.o.required],description:["",r.o.required],pictureUrl:["",r.o.required]})}ngOnInit(){}submit(){console.log(this.myForm.getRawValue()),this.authService.tryGetUserId().subscribe(t=>{const e={id:this.db.uuidv4(),dateTime:new Date,uid:t,title:this.myForm.get("title").value,description:this.myForm.get("description").value,pictureUrl:this.myForm.get("pictureUrl").value};this.blogService.tryAddNew(e),this.onCloseButton()})}onCloseButton(){this.myForm.reset(),this.modalCtrl.dismiss(),this.router.navigate(["admin/blog"])}}},t6oF:function(t,e,n){"use strict";n.r(e);var r=n("wj3C"),i=n.n(r);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.o),reject:t(this.g)}},e.prototype.o=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.u(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.l(t):this.h(t)}},e.prototype.l=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.m()},e.prototype.m=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.u=function(t){var e=this.f();t.Ha(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ha(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ha=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Ha(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Ha(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self;function l(t){return"string"==typeof t}function u(t){return"boolean"==typeof t}var c=/^[\w+/_-]+[=]{0,2}$/,h=null;function d(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function g(t){return"array"==f(t)}function m(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function b(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function k(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function C(t,e,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:k).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.mb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ad=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function A(t){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function I(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");A.call(this,n+t[r])}function D(t,e){throw new I("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function O(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function N(){this.b=this.a=null}T(A,Error),A.prototype.name="CustomError",T(I,A),I.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var R=new P(function(){return new L},function(t){t.reset()});function M(){var t=zt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function L(){this.next=this.b=this.a=null}function F(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}N.prototype.add=function(t,e){var n=R.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},L.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},L.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=l(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},U=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e){return 0<=j(t,e)}function q(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(t,e){!function(t,e){for(var n=l(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function $(t){return Array.prototype.concat.apply([],arguments)}function W(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function J(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function G(t){for(var e in t)return!1;return!0}function Q(t){var e,n={};for(e in t)n[e]=t[e];return n}var K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<K.length;o++)n=K[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function X(t,e){this.a=t===et&&e||"",this.b=tt}function Z(t){return t instanceof X&&t.constructor===X&&t.b===tt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}X.prototype.na=!0,X.prototype.ma=function(){return this.a},X.prototype.toString=function(){return"Const{"+this.a+"}"};var tt={},et={},nt=new X(et,"");function rt(){this.a="",this.b=lt}function it(t){return t instanceof rt&&t.constructor===rt&&t.b===lt?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function ot(t,e){var n=Z(t);if(!at.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ut(t=n.replace(st,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof X?Z(t):encodeURIComponent(String(t))}))}rt.prototype.na=!0,rt.prototype.ma=function(){return this.a.toString()},rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var st=/%{(\w+)}/g,at=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,lt={};function ut(t){var e=new rt;return e.a=t,e}var ct=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ht=/&/g,dt=/</g,ft=/>/g,pt=/"/g,gt=/'/g,mt=/\x00/g,bt=/[\x00&<>"']/;function vt(t,e){return-1!=t.indexOf(e)}function yt(t,e){return t<e?-1:t>e?1:0}function wt(){this.a="",this.b=St}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===St?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}wt.prototype.na=!0,wt.prototype.ma=function(){return this.a.toString()},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ct(t){return t instanceof wt?t:(t="object"==typeof t&&t.na?t.ma():String(t),kt.test(t)||(t="about:invalid#zClosurez"),Tt(t))}var Et,St={};function Tt(t){var e=new wt;return e.a=t,e}Tt("about:blank");t:{var xt=a.navigator;if(xt){var At=xt.userAgent;if(At){Et=At;break t}}Et=""}function It(t){return vt(Et,t)}function Dt(){this.a="",this.b=Ot}function Pt(t){return t instanceof Dt&&t.constructor===Dt&&t.b===Ot?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}Dt.prototype.na=!0,Dt.prototype.ma=function(){return this.a.toString()},Dt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ot={};function Nt(t){var e=new Dt;return e.a=t,e}Nt("<!DOCTYPE html>");var Rt,Mt,Lt=Nt("");function Ft(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function jt(t){return bt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ht,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(dt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ft,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(gt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(mt,"&#0;"))),t}function Bt(t){a.setTimeout(function(){throw t},0)}function Vt(t,e){Mt||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);Mt=function(){t.then(qt)}}else Mt=function(){var t=qt;!b(a.setImmediate)||a.Window&&a.Window.prototype&&!It("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(Rt||(Rt=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!It("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=ut(Z(nt));F(t,"HTMLIFrameElement"),t.src=it(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Pt(Lt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=C(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!It("Trident")&&!It("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).ub;n.ub=null,t()}},function(t){r.next={ub:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){a.setTimeout(t,0)}}()),Rt(t)):a.setImmediate(t)}}(),Ut||(Mt(),Ut=!0),zt.add(t,e)}Nt("<br>");var Ut=!1,zt=new N;function qt(){for(var t;t=M();){try{t.a.call(t.b)}catch(e){Bt(e)}O(R,t)}Ut=!1}function Ht(t,e){if(this.a=$t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,function(t){re(n,Wt,t)},function(t){if(!(t instanceof ce))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}re(n,Jt,t)})}catch(r){re(this,Jt,r)}}var $t=0,Wt=2,Jt=3;function Gt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Gt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qt=new P(function(){return new Gt},function(t){t.reset()});function Kt(t,e,n){var r=Qt.get();return r.g=t,r.b=e,r.f=n,r}function Yt(t){if(t instanceof Ht)return t;var e=new Ht(d);return re(e,Wt,t),e}function Xt(t){return new Ht(function(e,n){n(t)})}function Zt(t,e,n){ie(t,e,n,null)||Vt(E(e,t))}function te(t){return new Ht(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Cb:!0,value:o}:{Cb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Zt(t[o],E(i,o,!0),E(i,o,!1));else e(r)})}function ee(t,e){t.b||t.a!=Wt&&t.a!=Jt||oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function ne(t,e,n,r){var i=Kt(null,null,null);return i.a=new Ht(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ce?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,ee(t,i),i.a}function re(t,e,n){t.a==$t&&(t===n&&(e=Jt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ie(n,t.Jc,t.Kc,t)||(t.i=n,t.a=e,t.c=null,oe(t),e!=Jt||n instanceof ce||function(t,e){t.g=!0,Vt(function(){t.g&&ue.call(null,e)})}(t,n)))}function ie(t,e,n,r){if(t instanceof Ht)return ee(t,Kt(e||d,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(b(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function oe(t){t.h||(t.h=!0,Vt(t.Ub,t))}function se(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function ae(t,e,n,r){if(n==Jt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,le(e,n,r);else try{e.c?e.g.call(e.f):le(e,n,r)}catch(i){ue.call(null,i)}O(Qt,e)}function le(t,e,n){e==Wt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ht.prototype.then=function(t,e,n){return ne(this,b(t)?t:null,b(e)?e:null,n)},Ht.prototype.$goog_Thenable=!0,(t=Ht.prototype).ha=function(t,e){return(t=Kt(t,t,e)).c=!0,ee(this,t),this},t.s=function(t,e){return ne(this,null,t,e)},t.cancel=function(t){this.a==$t&&Vt(function(){!function t(e,n){if(e.a==$t)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==$t&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):se(r),ae(r,o,Jt,n)))}e.c=null}else re(e,Jt,n)}(this,new ce(t))},this)},t.Jc=function(t){this.a=$t,re(this,Wt,t)},t.Kc=function(t){this.a=$t,re(this,Jt,t)},t.Ub=function(){for(var t;t=se(this);)ae(this,t,this.a,this.i);this.h=!1};var ue=Bt;function ce(t){A.call(this,t)}function he(){0!=de&&(fe[this[y]||(this[y]=++w)]=this),this.qa=this.qa,this.ia=this.ia}T(ce,A),ce.prototype.name="cancel";var de=0,fe={};function pe(t){if(!t.qa&&(t.qa=!0,t.va(),0!=de)){var e=t[y]||(t[y]=++w);if(0!=de&&t.ia&&0<t.ia.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete fe[e]}}function ge(t){return ge[" "](t),t}he.prototype.qa=!1,he.prototype.va=function(){if(this.ia)for(;this.ia.length;)this.ia.shift()()},ge[" "]=d;var me,be,ve=It("Opera"),ye=It("Trident")||It("MSIE"),we=It("Edge"),_e=we||ye,ke=It("Gecko")&&!(vt(Et.toLowerCase(),"webkit")&&!It("Edge"))&&!(It("Trident")||It("MSIE"))&&!It("Edge"),Ce=vt(Et.toLowerCase(),"webkit")&&!It("Edge");function Ee(){var t=a.document;return t?t.documentMode:void 0}t:{var Se="",Te=(be=Et,ke?/rv:([^\);]+)(\)|;)/.exec(be):we?/Edge\/([\d\.]+)/.exec(be):ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(be):Ce?/WebKit\/(\S+)/.exec(be):ve?/(?:Version)[ \/]?(\S+)/.exec(be):void 0);if(Te&&(Se=Te?Te[1]:""),ye){var xe=Ee();if(null!=xe&&xe>parseFloat(Se)){me=String(xe);break t}}me=Se}var Ae,Ie={};function De(t){return function(t,e){var n=Ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=ct(String(me)).split("."),r=ct(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=yt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||yt(0==s[2].length,0==a[2].length)||yt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}Ae=a.document&&ye?Ee():void 0;var Pe=Object.freeze||function(t){return t},Oe=!ye||9<=Number(Ae),Ne=ye&&!De("9"),Re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",d,e),a.removeEventListener("test",d,e)}catch(n){}return t}();function Me(t,e){this.type=t,this.b=this.target=e,this.Ib=!0}function Le(t,e){if(Me.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ke){t:{try{ge(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:Fe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Me.prototype.preventDefault=function(){this.Ib=!1},T(Le,Me);var Fe=Pe({2:"touch",3:"pen",4:"mouse"});Le.prototype.preventDefault=function(){Le.mb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ne)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Le.prototype.f=function(){return this.a};var je="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ve(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++Be,this.oa=this.Ga=!1}function Ue(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function ze(t){this.src=t,this.a={},this.b=0}function qe(t,e){var n=e.type;n in t.a&&q(t.a[n],e)&&(Ue(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function He(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}ze.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=He(t,e,r,i);return-1<s?(e=t[s],n||(e.Ga=!1)):((e=new Ve(e,this.src,o,!!r,i)).Ga=n,t.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),We={};function Je(t,e,n,r,i){if(r&&r.once)Qe(t,e,n,r,i);else if(g(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else n=on(n),t&&t[je]?an(t,e,n,v(r)?!!r.capture:!!r,i):Ge(t,e,n,!1,r,i)}function Ge(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=nn(t);if(a||(t[$e]=a=new ze(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=en,e=Oe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Re||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Qe(t,e,n,r,i){if(g(e))for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);else n=on(n),t&&t[je]?ln(t,e,n,v(r)?!!r.capture:!!r,i):Ge(t,e,n,!0,r,i)}function Ke(t,e,n,r,i){if(g(e))for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=on(n),t&&t[je]?(t=t.m,(e=String(e).toString())in t.a&&-1<(n=He(o=t.a[e],n,r,i))&&(Ue(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=nn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=He(e,n,r,i)),(n=-1<t?e[t]:null)&&Ye(n))}function Ye(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[je])qe(e.m,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nn(e))?(qe(n,t),0==n.b&&(n.src=null,e[$e]=null)):Ue(t)}}}function Xe(t){return t in We?We[t]:We[t]="on"+t}function Ze(t,e,n,r){var i=!0;if((t=nn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=tn(o,r),i=i&&!1!==o)}return i}function tn(t,e){var n=t.listener,r=t.La||t.src;return t.Ga&&Ye(t),n.call(r,e)}function en(t,e){if(t.oa)return!0;if(!Oe){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Le(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ze(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ze(r[i],t,!1,e),n=n&&o}return n}return tn(t,new Le(e,this))}function nn(t){return(t=t[$e])instanceof ze?t:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(t){return b(t)?t:(t[rn]||(t[rn]=function(e){return t.handleEvent(e)}),t[rn])}function sn(){he.call(this),this.m=new ze(this),this.Nb=this,this.Ua=null}function an(t,e,n,r,i){t.m.add(String(e),n,!1,r,i)}function ln(t,e,n,r,i){t.m.add(String(e),n,!0,r,i)}function un(t,e,n,r){if(!(e=t.m.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.oa&&s.capture==n){var a=s.listener,l=s.La||s.src;s.Ga&&qe(t.m,s),i=!1!==a.call(l,r)&&i}}return i&&0!=r.Ib}function cn(t,e,n){if(b(t))n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function hn(t){var e=null;return new Ht(function(n,r){-1==(e=cn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw a.clearTimeout(e),t})}function dn(t){if(t.S&&"function"==typeof t.S)return t.S();if(l(t))return t.split("");if(m(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function fn(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(m(t)||l(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pn)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];mn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)mn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(sn,he),sn.prototype[je]=!0,sn.prototype.addEventListener=function(t,e,n,r){Je(this,t,e,n,r)},sn.prototype.removeEventListener=function(t,e,n,r){Ke(this,t,e,n,r)},sn.prototype.dispatchEvent=function(t){var e,n=this.Ua;if(n)for(e=[];n;n=n.Ua)e.push(n);n=this.Nb;var r=t.type||t;if(l(t))t=new Me(t,n);else if(t instanceof Me)t.target=t.target||n;else{var i=t;Y(t=new Me(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=un(s,r,!0,t)&&i}if(i=un(s=t.b=n,r,!0,t)&&i,i=un(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=un(s=t.b=e[o],r,!1,t)&&i;return i},sn.prototype.va=function(){if(sn.mb.va.call(this),this.m){var t,e=this.m;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ue(n[r]);delete e.a[t],e.b--}}this.Ua=null},(t=pn.prototype).S=function(){gn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return gn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return mn(this.b,t)?this.b[t]:e},t.set=function(t,e){mn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vn(t,e){var n;this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1,t instanceof vn?(this.h=void 0!==e?e:t.h,yn(this,t.f),this.i=t.i,this.b=t.b,wn(this,t.m),this.c=t.c,_n(this,Vn(t.a)),this.g=t.g):t&&(n=String(t).match(bn))?(this.h=!!e,yn(this,n[1]||"",!0),this.i=Tn(n[2]||""),this.b=Tn(n[3]||"",!0),wn(this,n[4]),this.c=Tn(n[5]||"",!0),_n(this,n[6]||"",!0),this.g=Tn(n[7]||"")):(this.h=!!e,this.a=new Rn(null,this.h))}function yn(t,e,n){t.f=n?Tn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _n(t,e,n){e instanceof Rn?(t.a=e,function(t,e){e&&!t.f&&(Mn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fn(this,e),Bn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=xn(e,On)),t.a=new Rn(e,t.h))}function kn(t,e,n){t.a.set(e,n)}function Cn(t,e){return t.a.get(e)}function En(t){return t instanceof vn?new vn(t):new vn(t,void 0)}function Sn(t,e){var n=new vn(null,void 0);return yn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xn(t,e,n){return l(t)?(t=encodeURI(t).replace(e,An),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function An(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(xn(e,In,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(xn(e,In,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(xn(n,"/"==n.charAt(0)?Pn:Dn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",xn(n,Nn)),t.join("")},vn.prototype.resolve=function(t){var e=new vn(this),n=!!t.f;n?yn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.m;var r=t.c;if(n)wn(e,t.m);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(vt(i,"./")||vt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?_n(e,Vn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var In=/[#\/\?@]/g,Dn=/[#\?:]/g,Pn=/[#\?]/g,On=/[#\?@]/g,Nn=/#/g;function Rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mn(t){t.a||(t.a=new pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ln(t){var e=fn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Rn(null,void 0);t=dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];g(o)?Bn(n,i,o):n.add(i,o)}return n}function Fn(t,e){Mn(t),e=Un(t,e),mn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gn(t)))}function jn(t,e){return Mn(t),e=Un(t,e),mn(t.a.b,e)}function Bn(t,e,n){Fn(t,e),0<n.length&&(t.c=null,t.a.set(Un(t,e),W(n)),t.b+=n.length)}function Vn(t){var e=new Rn;return e.c=t.c,t.a&&(e.a=new pn(t.a),e.b=t.b),e}function Un(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Rn.prototype).add=function(t,e){Mn(this),this.c=null,t=Un(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Mn(this),this.a.forEach(function(n,r){B(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){Mn(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){Mn(this);var e=[];if(l(t))jn(this,t)&&(e=$(e,this.a.get(Un(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Mn(this),this.c=null,jn(this,t=Un(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.S(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var zn=!ye||9<=Number(Ae);function qn(t){var e=document;return l(t)?e.getElementById(t):t}function Hn(t,e){J(e,function(e,n){e&&"object"==typeof e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:$n.hasOwnProperty(n)?t.setAttribute($n[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var $n={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(b(t))return"function"==typeof t.item}return!1}function Jn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(g(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Yn(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Yn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Gn,t,e),e.join("")}function Gn(){}var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Kn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(t,e){e.push('"',t.replace(Kn,function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e}),'"')}function Xn(){var t=br();return ye&&!!Ae&&11==Ae||/Edge\/\d+/.test(t)}function Zn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function tr(t,e){e=e||a.window;var n="about:blank";t&&(n=_t(Ct(t)).toString()),e.location.href=n}function er(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nr(t){t=t||a.window;try{t.close()}catch(e){}}function rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,vt(n,"crios/")&&(e.target="_blank")),pr(br())==dr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof wt?n:Ct(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((It("iPhone")&&!It("iPod")&&!It("iPad")||It("iPad")||It("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(F(s=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof wt||e instanceof wt||(e="object"==typeof e&&e.na?e.ma():String(e),kt.test(e)||(e="about:invalid#zClosurez"),e=Tt(e)),s.href=_t(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=_t(e).toString(),s&&(_e&&vt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Nt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">'),s.document.write(Pt(t)),s.document.close())):(s=r.open(_t(e).toString(),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function sr(){var t=null;return new Ht(function(e){"complete"==a.document.readyState?e():(t=function(){e()},Qe(window,"load",t))}).s(function(e){throw Ke(window,"load",t),e})}function ar(t){return t=t||br(),!("file:"!==kr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function ur(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function cr(){return i.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.a.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function hr(){var t=cr();return"ReactNative"===t||"Node"===t}var dr="Firefox",fr="Chrome";function pr(t){var e=t.toLowerCase();return vt(e,"opera/")||vt(e,"opr/")||vt(e,"opios/")?"Opera":vt(e,"iemobile")?"IEMobile":vt(e,"msie")||vt(e,"trident/")?"IE":vt(e,"edge/")?"Edge":vt(e,"firefox/")?dr:vt(e,"silk/")?"Silk":vt(e,"blackberry")?"Blackberry":vt(e,"webos")?"Webos":!vt(e,"safari/")||vt(e,"chrome/")||vt(e,"crios/")||vt(e,"android")?!vt(e,"chrome/")&&!vt(e,"crios/")||vt(e,"edge/")?vt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":fr:"Safari"}var gr={Qc:"FirebaseCore-web",Sc:"FirebaseUI-web"};function mr(t,e){e=e||[];var n,r=[],i={};for(n in gr)i[gr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=cr())?r=pr(i=br()):"Worker"===r&&(r=pr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return a.navigator&&a.navigator.userAgent||""}function vr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function yr(){try{var t=a.localStorage,e=xr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Xn()||!!a.indexedDB}catch(n){return ur()&&!!a.indexedDB}return!1}function wr(){return(_r()||"chrome-extension:"===kr()||ar())&&!hr()&&yr()&&!ur()}function _r(){return"http:"===kr()||"https:"===kr()}function kr(){return a.location&&a.location.protocol||null}function Cr(t){return!er(t=t||br())&&pr(t)!=dr}function Er(t){return void 0===t?null:Jn(t)}function Sr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Tr(t){if(null!==t)return JSON.parse(t)}function xr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ar(t){return"Safari"!=pr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ir(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Dr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=cr(),this.b=er(t)||"ReactNative"===e}function Pr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Or(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Nr(){return!(!vr("fireauth.oauthhelper",a)&&!vr("fireauth.iframe",a))}Dr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==kr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Rr,Mr={};function Lr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),Rr=2==Fr.abcd}catch(be){Rr=!1}function jr(t,e,n){Rr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Br(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function Vr(t){var e={};return Br(e,t),e}function Ur(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Ur(t[n]));return e}function zr(t){var e={},n=t[Hr],r=t[$r];if(!(t=t[Wr])||t!=qr&&!n)throw Error("Invalid provider user info!");e[Gr]=r||null,e[Jr]=n||null,jr(this,Kr,t),jr(this,Qr,Ur(e))}var qr="EMAIL_SIGNIN",Hr="email",$r="newEmail",Wr="requestType",Jr="email",Gr="fromEmail",Qr="data",Kr="operation";function Yr(t,e){this.code=Zr+t,this.message=e||ti[t]||""}function Xr(t){var e=t&&t.code;return e?new Yr(e.substring(Zr.length),t.message):null}T(Yr,Error),Yr.prototype.A=function(){return{code:this.code,message:this.message}},Yr.prototype.toJSON=function(){return this.A()};var Zr="auth/",ti={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ei(t){var e=t[si];if(void 0===e)throw new Yr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Yr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ni];if(n&&"object"==typeof n){e=n[ui];var r=n[ai];if(n=n[li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Yr("argument-error",ai+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Yr("argument-error",li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Yr("argument-error",ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Yr("missing-android-pkg-name")}}else if(void 0!==n)throw new Yr("argument-error",ni+" property must be a non null object when specified.");if(this.f=null,(e=t[oi])&&"object"==typeof e){if("string"==typeof(e=e[ci])&&e.length)this.f=e;else if(void 0!==e)throw new Yr("argument-error",ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Yr("argument-error",oi+" property must be a non null object when specified.");if(void 0!==(e=t[ii])&&"boolean"!=typeof e)throw new Yr("argument-error",ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Yr("argument-error",ri+" property must be a non empty string when specified.");this.i=t||null}var ni="android",ri="dynamicLinkDomain",ii="handleCodeInApp",oi="iOS",si="url",ai="installApp",li="minimumVersion",ui="packageName",ci="bundleId";function hi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var di=null,fi=null;function pi(t){this.c=t.sub,S(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function gi(t){return(t=mi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new pi(t):null}function mi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!di){di={},fi={};for(var t=0;65>t;t++)di[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),fi[di[t]]=t,62<=t&&(fi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}pi.prototype.f=function(){return this.b};var bi,vi={Wc:{Za:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://securetoken.googleapis.com/v1/token",id:"p"},Yc:{Za:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Zc:{Za:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",fb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function yi(t){for(var e in vi)if(vi[e].id===t)return{firebaseEndpoint:(t=vi[e]).Za,secureTokenEndpoint:t.fb};return null}bi=yi("__EID__")?"__EID__":void 0;var wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),_i=["client_id","response_type","scope","redirect_uri","state"],ki={Rc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",eb:_i},Tc:{Ma:null,Ba:500,Aa:620,Na:"github.com",eb:_i},Uc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",eb:_i},$c:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",eb:wi}};function Ci(t){for(var e in ki)if(ki[e].Na==t)return ki[e];return null}function Ei(t){var e={};e["facebook.com"]=Ii,e["google.com"]=Pi,e["github.com"]=Di,e["twitter.com"]=Oi;var n=t&&t[Ti];try{if(n)return e[n]?new e[n](t):new Ai(t);if(void 0!==t[Si])return new xi(t)}catch(r){}return null}var Si="idToken",Ti="providerId";function xi(t){var e=t[Ti];if(!e&&t[Si]){var n=gi(t[Si]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),jr(this,"providerId",e),jr(this,"isNewUser",n)}function Ai(t){xi.call(this,t),jr(this,"profile",Ur((t=Tr(t.rawUserInfo||"{}"))||{}))}function Ii(t){if(Ai.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Di(t){if(Ai.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Pi(t){if(Ai.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Oi(t){if(Ai.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Ni(t){this.a=En(t)}function Ri(t){var e=En(t),n=Cn(e,"link"),r=Cn(En(n),"link");return e=Cn(e,"deep_link_id"),Cn(En(e),"link")||e||r||n||t}function Mi(){}function Li(t,e){return t.then(function(t){if(t[ks]){var n=gi(t[ks]);if(!n||e!=n.c)throw new Yr("user-mismatch");return t}throw new Yr("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Zr+"user-not-found"?new Yr("user-mismatch"):t})}function Fi(t,e){if(!e)throw new Yr("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function ji(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Bi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Fi(t.providerId,t.pendingToken)}catch(e){}return null}function Vi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Yr("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function Ui(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Ln(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function zi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Vi(t.providerId,e,t.signInMethod)}catch(n){}}return null}function qi(t,e){this.Ac=e||[],Br(this,{providerId:t,isOAuthProvider:!0}),this.vb={},this.$a=(Ci(t)||{}).Ma||null,this.Ya=null}function Hi(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Yr("argument-error",'SAML provider IDs must be prefixed with "saml."');qi.call(this,t,[])}function $i(t){qi.call(this,t,_i),this.a=[]}function Wi(){$i.call(this,"facebook.com")}function Ji(t){if(!t)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Wi).credential({accessToken:e})}function Gi(){$i.call(this,"github.com")}function Qi(t){if(!t)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Gi).credential({accessToken:e})}function Ki(){$i.call(this,"google.com"),this.ua("profile")}function Yi(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Ki).credential({idToken:n,accessToken:e})}function Xi(){qi.call(this,"twitter.com",wi)}function Zi(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Yr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Vi("twitter.com",n,"twitter.com")}function to(t,e,n){this.a=t,this.c=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===no.EMAIL_LINK_SIGN_IN_METHOD?no.EMAIL_LINK_SIGN_IN_METHOD:no.EMAIL_PASSWORD_SIGN_IN_METHOD)}function eo(t){return t&&t.email&&t.password?new to(t.email,t.password,t.signInMethod):null}function no(){Br(this,{providerId:"password",isOAuthProvider:!1})}function ro(t,e){if(!(e=io(e)))throw new Yr("argument-error","Invalid email link!");return new to(t,e,no.EMAIL_LINK_SIGN_IN_METHOD)}function io(t){var e=Cn((t=new Ni(t=Ri(t))).a,"oobCode")||null;return"signIn"===(Cn(t.a,"mode")||null)&&e?e:null}function oo(t){if(!(t.Sa&&t.Ra||t.Da&&t.$))throw new Yr("internal-error");this.a=t,jr(this,"providerId","phone"),jr(this,"signInMethod","phone")}function so(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new oo(e)}return null}function ao(t){return t.a.Da&&t.a.$?{temporaryProof:t.a.Da,phoneNumber:t.a.$}:{sessionInfo:t.a.Sa,code:t.a.Ra}}function lo(t){try{this.a=t||i.a.auth()}catch(e){throw new Yr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function uo(t,e){if(!t)throw new Yr("missing-verification-id");if(!e)throw new Yr("missing-verification-code");return new oo({Sa:t,Ra:e})}function co(t){if(t.temporaryProof&&t.phoneNumber)return new oo({Da:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Yi(o,n);case"facebook.com":return Ji(n);case"github.com":return Qi(n);case"twitter.com":return Zi(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Fi(e,s):new Vi(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new $i(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function ho(t){if(!t.isOAuthProvider)throw new Yr("invalid-oauth-provider")}function fo(t,e,n,r,i,o){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new Yr("invalid-auth-event");if(this.g&&this.a)throw new Yr("invalid-auth-event");if(this.g&&!this.f)throw new Yr("invalid-auth-event")}function po(t){return(t=t||{}).type?new fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Xr(t.error),t.postBody):null}function go(){this.b=null,this.a=[]}T(Ai,xi),T(Ii,Ai),T(Di,Ai),T(Pi,Ai),T(Oi,Ai),Fi.prototype.ka=function(t){return Vs(t,ji(this))},Fi.prototype.b=function(t,e){var n=ji(this);return n.idToken=e,Us(t,n)},Fi.prototype.f=function(t,e){return Li(zs(t,ji(this)),e)},Fi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Vi.prototype.ka=function(t){return Vs(t,Ui(this))},Vi.prototype.b=function(t,e){var n=Ui(this);return n.idToken=e,Us(t,n)},Vi.prototype.f=function(t,e){return Li(zs(t,Ui(this)),e)},Vi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},qi.prototype.Ca=function(t){return this.vb=Q(t),this},T(Hi,qi),T($i,qi),$i.prototype.ua=function(t){return z(this.a,t)||this.a.push(t),this},$i.prototype.Db=function(){return W(this.a)},$i.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Yr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Vi(this.providerId,n,this.providerId)},T(Wi,$i),jr(Wi,"PROVIDER_ID","facebook.com"),jr(Wi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Gi,$i),jr(Gi,"PROVIDER_ID","github.com"),jr(Gi,"GITHUB_SIGN_IN_METHOD","github.com"),T(Ki,$i),jr(Ki,"PROVIDER_ID","google.com"),jr(Ki,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Xi,qi),jr(Xi,"PROVIDER_ID","twitter.com"),jr(Xi,"TWITTER_SIGN_IN_METHOD","twitter.com"),to.prototype.ka=function(t){return this.signInMethod==no.EMAIL_LINK_SIGN_IN_METHOD?ba(t,Ks,{email:this.a,oobCode:this.c}):ba(t,fa,{email:this.a,password:this.c})},to.prototype.b=function(t,e){return this.signInMethod==no.EMAIL_LINK_SIGN_IN_METHOD?ba(t,Ys,{idToken:e,email:this.a,oobCode:this.c}):ba(t,aa,{idToken:e,email:this.a,password:this.c})},to.prototype.f=function(t,e){return Li(this.ka(t),e)},to.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Br(no,{PROVIDER_ID:"password"}),Br(no,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(no,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),oo.prototype.ka=function(t){return t.Ta(ao(this))},oo.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,ba(t,ga,n)},oo.prototype.f=function(t,e){var n=ao(this);return n.operation="REAUTH",Li(t=ba(t,ma,n),e)},oo.prototype.A=function(){var t={providerId:"phone"};return this.a.Sa&&(t.verificationId=this.a.Sa),this.a.Ra&&(t.verificationCode=this.a.Ra),this.a.Da&&(t.temporaryProof=this.a.Da),this.a.$&&(t.phoneNumber=this.a.$),t},lo.prototype.Ta=function(t,e){var n=this.a.c;return Yt(e.verify()).then(function(r){if(!l(r))throw new Yr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return ba(n,oa,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Yr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Br(lo,{PROVIDER_ID:"phone"}),Br(lo,{PHONE_SIGN_IN_METHOD:"phone"}),fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},fo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.A()}};var mo,bo=null;function vo(t){var e="unauthorized-domain",n=void 0,r=En(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Yr.call(this,e,n)}function yo(t,e,n){Yr.call(this,t,n),(t=e||{}).wb&&jr(this,"email",t.wb),t.$&&jr(this,"phoneNumber",t.$),t.credential&&jr(this,"credential",t.credential)}function wo(t){if(t.code){var e=t.code||"";0==e.indexOf(Zr)&&(e=e.substring(Zr.length));var n={credential:co(t)};if(t.email)n.wb=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Yr(e,t.message||void 0);return new yo(e,n,t.message)}return null}function _o(){}function ko(){}function Co(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Eo(){}function So(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=C(this.ac,this),this.a.onerror=C(this.Eb,this),this.a.onprogress=C(this.bc,this),this.a.ontimeout=C(this.fc,this)}function To(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function xo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ao(t){this.f=t,this.b=this.c=this.a=null}function Io(t,e){this.name=t,this.value=e}T(vo,Yr),T(yo,Yr),yo.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.A();return e&&Y(t,e),t},yo.prototype.toJSON=function(){return this.A()},_o.prototype.c=null,T(ko,_o),ko.prototype.a=function(){var t=Co(this);return t?new ActiveXObject(t):new XMLHttpRequest},ko.prototype.b=function(){var t={};return Co(this)&&(t[0]=!0,t[1]=!0),t},mo=new ko,T(Eo,_o),Eo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new So;throw Error("Unsupported browser")},Eo.prototype.b=function(){return{}},(t=So.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ac=function(){this.status=200,this.response=this.responseText=this.a.responseText,To(this,4)},t.Eb=function(){this.status=500,this.response=this.responseText="",To(this,4)},t.fc=function(){this.Eb()},t.bc=function(){this.status=200,To(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},xo.prototype.a=null,xo.prototype.reset=function(t,e,n,r,i){r||S(),delete this.a},Io.prototype.toString=function(){return this.name};var Do=new Io("SEVERE",1e3),Po=new Io("WARNING",900),Oo=new Io("CONFIG",700),No=new Io("FINE",500);Ao.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(b(e)&&(e=e()),t=new xo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ro={},Mo=null;function Lo(t){var e;if(Mo||(Mo=new Ao(""),Ro[""]=Mo,Mo.c=Oo),!(e=Ro[t])){e=new Ao(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Lo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Ro[t]=e}return e}function Fo(t,e){t&&t.log(No,e,void 0)}function jo(t){this.f=t}function Bo(t){sn.call(this),this.u=t,this.readyState=Vo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=Lo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(jo,_o),jo.prototype.a=function(){return new Bo(this.f)},jo.prototype.b=function(t){return function(){return t}}({}),T(Bo,sn);var Vo=0;function Uo(t){t.c.read().then(t.$b.bind(t)).catch(t.Ka.bind(t))}function zo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,qo(t)}function qo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ho(t){sn.call(this),this.headers=new pn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=$o,this.v=this.O=!1}(t=Bo.prototype).open=function(t,e){if(this.readyState!=Vo)throw this.abort(),Error("Error reopening a connection");this.o=t,this.g=e,this.readyState=1,qo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.o,credentials:void 0,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.g,e)).then(this.ec.bind(this),this.Ka.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,zo(this,!1)),this.readyState=Vo},t.ec=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,qo(this)),this.a&&(this.readyState=3,qo(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.cc.bind(this),this.Ka.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Uo(this)):t.text().then(this.dc.bind(this),this.Ka.bind(this)))))},t.$b=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?zo(this,!0):qo(this),3==this.readyState&&Uo(this)}},t.dc=function(t){this.a&&(this.response=this.responseText=t,zo(this,!0))},t.cc=function(t){this.a&&(this.response=t,zo(this,!0))},t.Ka=function(t){var e=this.h;e&&e.log(Po,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&zo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Po,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Po,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(Ho,sn);var $o="";Ho.prototype.b=Lo("goog.net.XhrIo");var Wo=/^https?$/i,Jo=["POST","PUT"];function Go(t){return"content-type"==t.toLowerCase()}function Qo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ko(t),Xo(t)}function Ko(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Yo(t){if(t.c&&void 0!==s)if(t.w[1]&&4==ts(t)&&2==es(t))Fo(t.b,ns(t,"Local request error detected and ignored"));else if(t.i&&4==ts(t))cn(t.Hb,0,t);else if(t.dispatchEvent("readystatechange"),4==ts(t)){Fo(t.b,ns(t,"Request complete")),t.c=!1;try{var e,n=es(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(bn)[1]||null;if(!o&&a.self&&a.self.location){var l=a.self.location.protocol;o=l.substr(0,l.length-1)}i=!Wo.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var u=2<ts(t)?t.a.statusText:""}catch(c){Fo(t.b,"Can not get status: "+c.message),u=""}t.h=u+" ["+es(t)+"]",Ko(t)}}finally{Xo(t)}}}function Xo(t,e){if(t.a){Zo(t);var n=t.a,r=t.w[0]?d:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Do,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Zo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(a.clearTimeout(t.u),t.u=null)}function ts(t){return t.a?t.a.readyState:0}function es(t){try{return 2<ts(t)?t.a.status:-1}catch(e){return-1}}function ns(t,e){return e+" ["+t.N+" "+t.l+" "+es(t)+"]"}function rs(t){var e=ps;this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.m=0}function is(t,e,n){t.a=!0,t.c=n,t.f=!e,ls(t)}function os(t){if(t.a){if(!t.l)throw new us(t);t.l=!1}}function ss(t,e,n,r){t.g.push([e,n,r]),t.a&&ls(t)}function as(t){return U(t.g,function(t){return b(t[1])})}function ls(t){if(t.h&&t.a&&as(t)){var e=t.h,n=ds[e];n&&(a.clearTimeout(n.a),delete ds[e]),t.h=0}t.b&&(t.b.m--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var l=o.call(i||t.u,e);void 0!==l&&(t.f=t.f&&(l==e||l instanceof Error),t.c=e=l),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,as(t)||(n=!0)}}t.c=e,r&&(l=C(t.o,t,!0),r=C(t.o,t,!1),e instanceof rs?(ss(e,l,r),e.w=!0):e.then(l,r)),n&&(e=new hs(e),ds[e.a]=e,t.h=e.a)}function us(){A.call(this)}function cs(){A.call(this)}function hs(t){this.a=a.setTimeout(C(this.c,this),0),this.b=t}(t=Ho.prototype).Ea=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Fo(this.b,ns(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Fo(this.b,ns(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Xo(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Xo(this,!0)),Ho.mb.va.call(this)},t.Hb=function(){this.qa||(this.I||this.i||this.f?Yo(this):this.tc())},t.tc=function(){Yo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case $o:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Do,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return Fo(this.b,"Can not get response: "+e.message),null}},rs.prototype.cancel=function(t){if(this.a)this.c instanceof rs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.m--,0>=e.m&&e.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new cs(this),os(this),is(this,!1,t))}},rs.prototype.o=function(t,e){this.i=!1,is(this,t,e)},rs.prototype.then=function(t,e,n){var r,i,o=new Ht(function(t,e){r=t,i=e});return ss(this,r,function(t){t instanceof cs?o.cancel():i(t)}),o.then(t,e,n)},rs.prototype.$goog_Thenable=!0,T(us,A),us.prototype.message="Deferred has already fired",us.prototype.name="AlreadyCalledError",T(cs,A),cs.prototype.message="Deferred was canceled",cs.prototype.name="CanceledError",hs.prototype.c=function(){throw delete ds[this.a],this.b};var ds={};function fs(t){var e={},n=e.document||document,r=it(t).toString(),i=document.createElement("SCRIPT"),o={Jb:i,Ea:void 0},s=new rs(o),l=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(l=window.setTimeout(function(){gs(i,!0);var t=new vs(bs,"Timeout reached for loading script "+r);os(s),is(s,!1,t)},u),o.Ea=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(gs(i,e.bd||!1,l),os(s),is(s,!0,null))},i.onerror=function(){gs(i,!0,l);var t=new vs(ms,"Error while loading script "+r);os(s),is(s,!1,t)},Y(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Hn(i,o),function(t,e){F(t,"HTMLScriptElement"),t.src=it(e),null===h&&(h=(e=(e=a.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function ps(){if(this&&this.Jb){var t=this.Jb;t&&"SCRIPT"==t.tagName&&gs(t,!0,this.Ea)}}function gs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var ms=0,bs=1;function vs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),A.call(this,n),this.code=t}function ys(t){this.f=t}function ws(t,e,n){if(this.b=t,this.i=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Cs,this.f=Q(t.secureTokenHeaders||Es),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Ss,this.a=Q(t.firebaseHeaders||Ts),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==cr(),!(n=a.XMLHttpRequest||n&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Yr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=ur()?new jo(self):hr()?new ys(n):new Eo}T(vs,A),T(ys,_o),ys.prototype.a=function(){return new this.f},ys.prototype.b=function(){return{}};var _s,ks="idToken",Cs=new Dr(3e4,6e4),Es={"Content-Type":"application/x-www-form-urlencoded"},Ss=new Dr(3e4,6e4),Ts={"Content-Type":"application/json"};function xs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function As(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function Is(t,e,n,r,i,o,s){(function(){var t=br();return!((t=pr(t)!=fr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||ye&&Ae&&!(9<Ae))})()||ur()?t=C(t.o,t):(_s||(_s=new Ht(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[Ps]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ss(fs(ot(Ds,{onload:Ps})),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=C(t.l,t)),t(e,n,r,i,o,s)}ws.prototype.o=function(t,e,n,r,i,o){if(ur()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Yr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Ho(this.c);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}an(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Fo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),ln(s,"ready",function(){u&&clearTimeout(u),pe(this)}),ln(s,"timeout",function(){u&&clearTimeout(u),pe(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.B?t.B.a():mo.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.B?t.B:mo),t.a.onreadystatechange=C(t.Hb,t);try{Fo(t.b,ns(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(s){return Fo(t.b,ns(t,"Error opening Xhr: "+s.message)),void Qo(t,s)}e=r||"";var o=new pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(m(t)||l(t))B(t,e,void 0);else for(var n=fn(t),r=dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Go,n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}(o.U()),r=a.FormData&&e instanceof a.FormData,!z(Jo,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Zo(t),0<t.g&&(t.v=function(t){return ye&&De(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Fo(t.b,ns(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=C(t.Ea,t)):t.u=cn(t.Ea,t.g,t)),Fo(t.b,ns(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){Fo(t.b,ns(t,"Send error: "+s.message)),Qo(t,s)}}(s,t,n,r,i)};var Ds=new X(et,"https://apis.google.com/js/client.js?onload=%{onload}"),Ps="__fcb"+Math.floor(1e6*Math.random()).toString();function Os(t){if(!l(t=t.email)||!or.test(t))throw new Yr("invalid-email")}function Ns(t){"email"in t&&Os(t)}function Rs(t){if(!t[ks])throw new Yr("internal-error")}function Ms(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Yr("internal-error")}else{if(!t.sessionInfo)throw new Yr("missing-verification-id");if(!t.code)throw new Yr("missing-verification-code")}}ws.prototype.l=function(t,e,n,r,i){var o=this;_s.then(function(){window.gapi.client.setApiKey(o.b);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},ws.prototype.kb=function(){return ba(this,la,{})},ws.prototype.nb=function(t,e){return ba(this,sa,{idToken:t,email:e})},ws.prototype.ob=function(t,e){return ba(this,aa,{idToken:t,password:e})};var Ls={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Fs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Yr("internal-error")}function js(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&jn(t=new Rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=wo(t)):t.errorMessage&&(e=va(t.errorMessage)),e)throw e;if(!t[ks])throw new Yr("internal-error")}function Vs(t,e){return e.returnIdpCredential=!0,ba(t,ua,e)}function Us(t,e){return e.returnIdpCredential=!0,ba(t,ha,e)}function zs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ba(t,ca,e)}function qs(t){if(!t.oobCode)throw new Yr("invalid-action-code")}(t=ws.prototype).pb=function(t,e){var n={idToken:t},r=[];return J(Ls,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),ba(this,sa,n)},t.hb=function(t,e){return Y(t={requestType:"PASSWORD_RESET",email:t},e),ba(this,ea,t)},t.ib=function(t,e){return Y(t={requestType:"EMAIL_SIGNIN",email:t},e),ba(this,Zs,t)},t.gb=function(t,e){return Y(t={requestType:"VERIFY_EMAIL",idToken:t},e),ba(this,ta,t)},t.Ta=function(t){return ba(this,pa,t)},t.Xa=function(t,e){return ba(this,ia,{oobCode:t,newPassword:e})},t.Ia=function(t){return ba(this,$s,{oobCode:t})},t.Va=function(t){return ba(this,Hs,{oobCode:t})};var Hs={endpoint:"setAccountInfo",D:qs,da:"email"},$s={endpoint:"resetPassword",D:qs,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Yr("internal-error")}},Ws={endpoint:"signupNewUser",D:function(t){if(Os(t),!t.password)throw new Yr("weak-password")},J:Rs,R:!0},Js={endpoint:"createAuthUri"},Gs={endpoint:"deleteAccount",T:["idToken"]},Qs={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],D:function(t){if(!g(t.deleteProvider))throw new Yr("internal-error")}},Ks={endpoint:"emailLinkSignin",T:["email","oobCode"],D:Os,J:Rs,R:!0},Ys={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],D:Os,J:Rs,R:!0},Xs={endpoint:"getAccountInfo"},Zs={endpoint:"getOobConfirmationCode",T:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Yr("internal-error");Os(t)},da:"email"},ta={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Yr("internal-error")},da:"email"},ea={endpoint:"getOobConfirmationCode",T:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Yr("internal-error");Os(t)},da:"email"},na={sb:!0,endpoint:"getProjectConfig",Gb:"GET"},ra={sb:!0,endpoint:"getRecaptchaParam",Gb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Yr("internal-error")}},ia={endpoint:"resetPassword",D:qs,da:"email"},oa={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},sa={endpoint:"setAccountInfo",T:["idToken"],D:Ns,R:!0},aa={endpoint:"setAccountInfo",T:["idToken"],D:function(t){if(Ns(t),!t.password)throw new Yr("weak-password")},J:Rs,R:!0},la={endpoint:"signupNewUser",J:Rs,R:!0},ua={endpoint:"verifyAssertion",D:Fs,Oa:js,J:Bs,R:!0},ca={endpoint:"verifyAssertion",D:Fs,Oa:js,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Yr("user-not-found");if(t.errorMessage)throw va(t.errorMessage);if(!t[ks])throw new Yr("internal-error")},R:!0},ha={endpoint:"verifyAssertion",D:function(t){if(Fs(t),!t.idToken)throw new Yr("internal-error")},Oa:js,J:Bs,R:!0},da={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Yr("invalid-custom-token")},J:Rs,R:!0},fa={endpoint:"verifyPassword",D:function(t){if(Os(t),!t.password)throw new Yr("wrong-password")},J:Rs,R:!0},pa={endpoint:"verifyPhoneNumber",D:Ms,J:Rs},ga={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Yr("internal-error");Ms(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",wo(t);Rs(t)}},ma={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ms,J:Rs};function ba(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.T))return Xt(new Yr("internal-error"));var r,i=e.Gb||"POST";return Yt(n).then(e.D).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var s=En(t.g+e);kn(s,"key",t.b),o&&kn(s,"cb",S().toString());var a="GET"==n;if(a)for(var l in r)r.hasOwnProperty(l)&&kn(s,l,r[l]);return new Ht(function(e,o){Is(t,s.toString(),function(t){t?t.error?o(ya(t,i||{})):e(t):o(new Yr("network-request-failed"))},n,a?void 0:Jn(Sr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.sb||!1)}).then(function(t){return r=t,e.Oa?e.Oa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new Yr("internal-error");return r[e.da]})}function va(t){return ya({error:{errors:[{message:t}],code:400,message:t}})}function ya(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Yr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Yr(r[i],e);return!e&&t&&(e=Er(t)),new Yr("internal-error",e)}function wa(t){this.b=t,this.a=null,this.bb=function(t){return(Ea||(Ea=new Ht(function(t,e){function n(){Ir(),vr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ir(),e(Error("Network Error"))},timeout:ka.get()})}if(vr("gapi.iframes.Iframe"))t();else if(vr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){vr("gapi.load")?n():e(Error("Network Error"))},Yt(fs(r=ot(_a,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Ea=null,t}))).then(function(){return new Ht(function(e,n){vr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Ca.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var _a=new X(et,"https://apis.google.com/js/api.js?onload=%{onload}"),ka=new Dr(3e4,6e4),Ca=new Dr(5e3,15e3),Ea=null;function Sa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Sn(this.i,"/__/auth/iframe"),kn(this.a,"apiKey",this.g),kn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ta(t,e,n,r,i){this.o=t,this.l=e,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function xa(t){try{return i.a.app(t).auth().ya()}catch(e){return[]}}function Aa(t,e,n,r,i){this.l=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function Ia(t){var e=Zn();return function(t){return ba(t,na,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=En(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=En(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ir.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new vo(Zn())})}function Da(t){return t.m?t.m:(t.m=sr().then(function(){if(!t.u){var e=t.c,n=t.h,r=xa(t.b),i=new Sa(t.l,t.f,t.b);i.f=e,i.b=n,i.c=W(r||[]),t.u=i.toString()}t.i=new wa(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.bb.then(function(){t.a.register("authEvent",e,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=po(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Yt(n)}return n.status="ERROR",Yt(n)})}(t)}),t.m)}function Pa(t){return t.o||(t.v=t.c?mr(t.c,xa(t.b)):null,t.o=new ws(t.f,yi(t.h),t.v)),t.o}function Oa(t,e,n,r,i,o,s,a,l,u){return(t=new Ta(t,e,n,r,i)).i=o,t.g=s,t.h=a,t.b=Q(l||null),t.f=u,t.toString()}function Na(t){if(this.a=t||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Yr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ra(t){this.b=t,this.a={},this.f=C(this.c,this)}Sa.prototype.toString=function(){return this.f?kn(this.a,"v",this.f):Fn(this.a.a,"v"),this.b?kn(this.a,"eid",this.b):Fn(this.a.a,"eid"),this.c.length?kn(this.a,"fw",this.c.join(",")):Fn(this.a.a,"fw"),this.a.toString()},Ta.prototype.toString=function(){var t=Sn(this.o,"/__/auth/handler");if(kn(t,"apiKey",this.l),kn(t,"appName",this.c),kn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=i.a.app(this.c).auth().ea()}catch(l){n=null}for(var r in e.Ya=n,kn(t,"providerId",this.a.providerId),n=Sr((e=this.a).vb))n[r]=n[r].toString();r=e.Ac,n=Q(n);for(var o=0;o<r.length;o++){var s=r[o];s in n&&delete n[s]}e.$a&&e.Ya&&!n[e.$a]&&(n[e.$a]=e.Ya),G(n)||kn(t,"customParameters",Er(n))}if("function"==typeof this.a.Db&&(e=this.a.Db()).length&&kn(t,"scopes",e.join(",")),this.i?kn(t,"redirectUrl",this.i):Fn(t.a,"redirectUrl"),this.g?kn(t,"eventId",this.g):Fn(t.a,"eventId"),this.h?kn(t,"v",this.h):Fn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Cn(t,a)&&kn(t,a,this.b[a]);return this.f?kn(t,"eid",this.f):Fn(t.a,"eid"),(a=xa(this.c)).length&&kn(t,"fw",a.join(",")),t.toString()},(t=Aa.prototype).Bb=function(t,e,n){var r=new Yr("popup-closed-by-user"),i=new Yr("web-storage-unsupported"),o=this,s=!1;return this.fa().then(function(){(function(t){var e={type:"webStorageSupport"};return Da(t).then(function(){return function(t,e){return t.bb.then(function(){return new Ht(function(n){t.a.send(e.type,e,n,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&nr(t),e(i),s=!0)})}).s(function(){}).then(function(){if(!s)return function(t){return new Ht(function(e){return function n(){hn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return hn(n).then(function(){e(r)})})},t.Kb=function(){var t=br();return!Cr(t)&&!Ar(t)},t.Fb=function(){return!1},t.zb=function(t,e,n,r,i,o,s){if(!t)return Xt(new Yr("popup-blocked"));if(s&&!Cr())return this.fa().s(function(e){nr(t),i(e)}),r(),Yt();this.a||(this.a=Ia(Pa(this)));var a=this;return this.a.then(function(){var e=a.fa().s(function(e){throw nr(t),i(e),e});return r(),e}).then(function(){ho(n),s||tr(Oa(a.l,a.f,a.b,e,n,null,o,a.c,void 0,a.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(a.a=null),t})},t.Ab=function(t,e,n){this.a||(this.a=Ia(Pa(this)));var r=this;return this.a.then(function(){ho(e),tr(Oa(r.l,r.f,r.b,t,e,Zn(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.fa=function(){var t=this;return Da(this).then(function(){return t.i.bb}).s(function(){throw t.a=null,new Yr("network-request-failed")})},t.Mb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ja=function(t){H(this.g,function(e){return e==t})},(t=Na.prototype).get=function(t){return Yt(this.a.getItem(t)).then(function(t){return t&&Tr(t)})},t.set=function(t,e){return Yt(this.a.setItem(t,Er(e)))},t.P=function(t){return Yt(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var Ma,La=[];function Fa(t,e,n){G(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ja(t){this.a=t}function Ba(t){this.c=t,this.b=!1,this.a=[]}function Va(t,e,n,r){var i,o,s,a,l=n||{},u=null;if(t.b)return Xt(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ht(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},c),t.a.push(u={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:l},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ua(t,u),e}).s(function(e){throw Ua(t,u),e})}function Ua(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),H(t.a,function(t){return t==e})}}function za(){if(!Ha())throw new Yr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var t=this;ur()&&self?(this.m=function(){var t=ur()?self:null;if(B(La,function(n){n.b==t&&(e=n)}),!e){var e=new Ra(t);La.push(e)}return e}(),Fa(this.m,"keyChanged",function(e,n){return Qa(t).then(function(e){return 0<e.length&&B(t.a,function(t){t(e)}),{keyProcessed:z(e,n.key)}})}),Fa(this.m,"ping",function(){return Yt(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?Yt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):Yt(null)}().then(function(e){(t.h=e)&&(t.g=new Ba(new ja(e)),Va(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&z(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function qa(t){return t.o||(t.o=function t(e){return new Ht(function(n,r){var i=e.l.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new Ht(function(e,n){var r=t.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(e).then(function(){return t(e)}).then(function(t){n(t)}).s(function(t){r(t)})}})}(t)),t.o}function Ha(){try{return!!a.indexedDB}catch(be){return!1}}function $a(t){return t.objectStore("firebaseLocalStorage")}function Wa(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ja(t){return new Ht(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ga(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Va(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):Yt()}function Qa(t){return qa(t).then(function(t){var e=$a(Wa(t,!1));return e.getAll?Ja(e.getAll()):new Ht(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function Ka(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ya(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Yt().then(function(){if(Ha()){var t=xr(),r="__sak"+t;return Ma||(Ma=new za),(n=Ma).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){B(e.a,function(e){e(t)})}),t})}function Xa(){this.a={},this.type="inMemory"}function Za(){if(!function(){var t="Node"==cr();if(!(t=tl()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==cr())throw new Yr("internal-error","The LocalStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=tl()||i.a.INTERNAL.node.localStorage,this.type="localStorage"}function tl(){try{var t=a.localStorage,e=xr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function el(){this.type="nullStorage"}function nl(){if(!function(){var t="Node"==cr();if(!(t=rl()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==cr())throw new Yr("internal-error","The SessionStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=rl()||i.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function rl(){try{var t=a.sessionStorage,e=xr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function il(){var t={};t.Browser=al,t.Node=ll,t.ReactNative=ul,t.Worker=cl,this.a=t[cr()]}Ra.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,function(e){i.push(Yt().then(function(){return e(t.origin,t.data.data)}))}),te(i).then(function(r){var i=[];B(r,function(t){i.push({fulfilled:t.Cb,value:t.value,reason:t.reason?t.reason.message:void 0})}),B(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},ja.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ba.prototype.close=function(){for(;0<this.a.length;)Ua(this,this.a[0]);this.b=!0},(t=za.prototype).set=function(t,e){var n,r=!1,i=this;return qa(this).then(function(e){return Ja((e=$a(Wa(n=e,!0))).get(t))}).then(function(o){var s=$a(Wa(n,!0));return o?(o.value=e,Ja(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Ja(s.add(o)))}).then(function(){return i.c[t]=e,Ga(i,t)}).ha(function(){r&&i.b--})},t.get=function(t){return qa(this).then(function(e){return Ja($a(Wa(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return qa(this).then(function(r){return e=!0,n.b++,Ja($a(Wa(r,!0)).delete(t))}).then(function(){return delete n.c[t],Ga(n,t)}).ha(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){Ka(t),function e(){t.f=setTimeout(function(){t.i=Qa(t).then(function(e){0<e.length&&B(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){H(this.a,function(e){return e==t}),0==this.a.length&&Ka(this)},(t=Ya.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){H(this.a,function(e){return e==t})},(t=Xa.prototype).get=function(t){return Yt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Yt()},t.P=function(t){return delete this.a[t],Yt()},t.Y=function(){},t.ca=function(){},(t=Za.prototype).get=function(t){var e=this;return Yt().then(function(){return Tr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Yt().then(function(){var r=Er(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.Y=function(t){a.window&&Je(a.window,"storage",t)},t.ca=function(t){a.window&&Ke(a.window,"storage",t)},(t=el.prototype).get=function(){return Yt(null)},t.set=function(){return Yt()},t.P=function(){return Yt()},t.Y=function(){},t.ca=function(){},(t=nl.prototype).get=function(t){var e=this;return Yt().then(function(){return Tr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Yt().then(function(){var r=Er(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var ol,sl,al={C:Za,Qa:nl},ll={C:Za,Qa:nl},ul={C:Na,Qa:el},cl={C:Za,Qa:el},hl={Vc:"local",NONE:"none",Xc:"session"};function dl(){var t=!(Ar(br())||!lr()),e=Cr(),n=yr();this.o=t,this.h=e,this.m=n,this.a={},ol||(ol=new il),t=ol;try{this.g=!Xn()&&Nr()||!a.indexedDB?new t.a.C:new Ya(ur()?new Xa:new t.a.C)}catch(r){this.g=new Xa,this.h=!0}try{this.i=new t.a.Qa}catch(r){this.i=new Xa}this.l=new Xa,this.f=C(this.Lb,this),this.b={}}function fl(){return sl||(sl=new dl),sl}function pl(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function gl(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ml(t,e,n){return n=gl(e,n),"local"==e.C&&(t.b[n]=null),pl(t,e.C).P(n)}function bl(t){t.c&&(clearInterval(t.c),t.c=null)}function vl(t){this.a=t,this.b=fl()}(t=dl.prototype).get=function(t,e){return pl(this,t.C).get(gl(t,e))},t.set=function(t,e,n){var r=gl(t,n),i=this,o=pl(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=gl(t,e),this.m&&(this.b[t]=a.localStorage.getItem(t)),G(this.a)&&(pl(this,"local").Y(this.f),this.h||(Xn()||!Nr())&&a.indexedDB||!this.m||function(t){bl(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Le({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Lb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=gl(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),G(this.a)&&(pl(this,"local").ca(this.f),bl(this))},t.Lb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Wa(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?pl(this,"local").ca(this.f):bl(this),this.o)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.Wa(e))},ye&&Ae&&10==Ae&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,C(this.Wa,this))},t.Wa=function(t){this.a[t]&&B(this.a[t],function(t){t()})};var yl,wl={name:"authEvent",C:"local"};function _l(){this.a=fl()}function kl(t,e){this.b=Cl,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.m=a.Int32Array?new Int32Array(64):Array(64),void 0!==yl||(yl=a.Int32Array?new Int32Array(Dl):Dl),this.reset()}T(kl,function(){this.b=-1});for(var Cl=64,El=Cl-1,Sl=[],Tl=0;Tl<El;Tl++)Sl[Tl]=0;var xl=$(128,Sl);function Al(t){for(var e=t.f,n=t.m,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],l=0|t.a[3],u=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((s=(s=u&c^~u&h)+(0|yl[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=u,u=l+s|0,l=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+l|0,t.a[4]=t.a[4]+u|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Il(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(l(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Al(t),i=0);else{if(!m(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Al(t),i=0)}}t.c=i,t.g+=n}kl.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):W(this.h)};var Dl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Pl(){kl.call(this,8,Ol)}T(Pl,kl);var Ol=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nl(t,e,n,r,i){this.l=t,this.i=e,this.m=n,this.o=r||null,this.u=i||null,this.h=e+":"+n,this.v=new _l,this.g=new vl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Rl(t){return new Yr("invalid-cordova-configuration",t)}function Ml(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Ll(t){return t.f||(t.f=t.fa().then(function(){return new Ht(function(e){t.wa(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Fl(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Ri(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Tr(Cn(o=En(i),"firebaseError")||null))?Xr(o):null)?new fo(r.c,r.b,null,null,o):new fo(r.c,r.b,i,r.f)),i=o||n}Ml(t,i)})}var n=new fo("unknown",null,null,null,new Yr("no-auth-event")),r=!1,i=hn(500).then(function(){return Fl(t).then(function(){r||Ml(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(vr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},bo||(bo=new go),function(t){var e=bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=vr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Fl(t){var e=null;return function(t){return t.b.get(wl,t.a).then(function(t){return po(t)})}(t.g).then(function(n){return e=n,ml((n=t.g).b,wl,n.a)}).then(function(){return e})}function jl(t){this.a=t,this.b=fl()}(t=Nl.prototype).fa=function(){return this.za?this.za:this.za=(ar(void 0)?sr().then(function(){return new Ht(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Xt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof vr("universalLinks.subscribe",a))throw Rl("cordova-universal-links-plugin-fix is not installed");if(void 0===vr("BuildInfo.packageName",a))throw Rl("cordova-plugin-buildinfo is not installed");if("function"!=typeof vr("cordova.plugins.browsertab.openUrl",a))throw Rl("cordova-plugin-browsertab is not installed");if("function"!=typeof vr("cordova.InAppBrowser.open",a))throw Rl("cordova-plugin-inappbrowser is not installed")},function(){throw new Yr("cordova-not-ready")})},t.Bb=function(t,e){return e(new Yr("operation-not-supported-in-this-environment")),Yt()},t.zb=function(){return Xt(new Yr("operation-not-supported-in-this-environment"))},t.Mb=function(){return!1},t.Kb=function(){return!0},t.Fb=function(){return!0},t.Ab=function(t,e,n){if(this.c)return Xt(new Yr("redirect-operation-pending"));var r=this,i=a.document,o=null,s=null,l=null,u=null;return this.c=Yt().then(function(){return ho(e),Ll(r)}).then(function(){return function(t,e,n,r){var i=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),o=new fo(e,r,null,i,new Yr("no-auth-event")),s=vr("BuildInfo.packageName",a);if("string"!=typeof s)throw new Yr("invalid-cordova-configuration");var l=vr("BuildInfo.displayName",a),u={};if(br().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=s;else{if(!br().toLowerCase().match(/android/))return Xt(new Yr("operation-not-supported-in-this-environment"));u.apn=s}l&&(u.appDisplayName=l),i=function(t){var e=new Pl;Il(e,t),t=[];var n=8*e.g;Il(e,xl,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Al(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(i),u.sessionId=i;var c=Oa(t.l,t.i,t.m,e,n,null,r,t.o,u,t.u);return t.fa().then(function(){var e=t.h;return t.v.a.set(wl,o.A(),e)}).then(function(){var e=vr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new Yr("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=vr("cordova.plugins.browsertab.openUrl",a)))throw new Yr("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=vr("cordova.InAppBrowser.open",a)))throw new Yr("invalid-cordova-configuration");e=br(),t.a=n(c,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new Ht(function(t,e){s=function(){var e=vr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(s),u=function(){Pr()&&l()},i.addEventListener("resume",l=function(){o||(o=hn(2e3).then(function(){e(new Yr("redirect-cancelled-by-user"))}))},!1),br().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(t){return Fl(r).then(function(){throw t})})}).ha(function(){l&&i.removeEventListener("resume",l,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),s&&r.Ja(s),r.c=null})},t.wa=function(t){this.b.push(t),Ll(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new fo("unknown",null,null,null,new Yr("no-auth-event")),t(e))})},t.Ja=function(t){H(this.b,function(e){return e==t})};var Bl={name:"pendingRedirect",C:"session"};function Vl(t){return ml(t.b,Bl,t.a)}function Ul(t,e,n){this.i={},this.v=0,this.B=t,this.l=e,this.o=n,this.h=[],this.f=!1,this.m=C(this.u,this),this.b=new eu,this.w=new su,this.g=new jl(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=zl(this.B,this.l,this.o,bi)}function zl(t,e,n,r){var o=i.a.SDK_VERSION||null;return ar()?new Nl(t,e,n,o,r):new Aa(t,e,n,o,r)}function ql(t){t.f||(t.f=!0,t.a.wa(t.m));var e=t.a;return t.a.fa().s(function(n){throw t.a==e&&t.reset(),n})}function Hl(t){t.a.Kb()&&ql(t).s(function(e){var n=new fo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));Kl(e)&&t.u(n)}),t.a.Fb()||nu(t.b)}function $l(t,e){z(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Bl,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Vl(t.g).then(function(){ql(t).s(function(e){var n=new fo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));Kl(e)&&t.u(n)})}):Hl(t)}).s(function(){Hl(t)})}function Wl(t,e){H(t.h,function(t){return t==e})}Ul.prototype.reset=function(){this.f=!1,this.a.Ja(this.m),this.a=zl(this.B,this.l,this.o),this.i={}},Ul.prototype.u=function(t){if(!t)throw new Yr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.tb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=S())),e=!0;break}}return nu(this.b),e};var Jl=new Dr(2e3,1e4),Gl=new Dr(3e4,6e4);function Ql(t,e,n,r,i,o){return t.a.zb(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.m))},function(){t.reset()},i,o)}function Kl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Yl(t,e,n,r){var i;return function(t){return t.b.set(Bl,"pending",t.a)}(t.g).then(function(){return t.a.Ab(e,n,r).s(function(e){if(Kl(e))throw new Yr("operation-not-supported-in-this-environment");return i=e,Vl(t.g).then(function(){throw i})}).then(function(){return t.a.Mb()?new Ht(function(){}):Vl(t.g).then(function(){return t.la()}).then(function(){}).s(function(){})})})}function Xl(t,e,n,r,i){return t.a.Bb(r,function(t){e.ga(n,null,t,i)},Jl.get())}Ul.prototype.la=function(){return this.b.la()};var Zl={};function tu(t,e,n){var r=e+":"+n;return Zl[r]||(Zl[r]=new Ul(t,e,n)),Zl[r]}function eu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function nu(t){t.g||(t.g=!0,ou(t,!1,null,null))}function ru(t){t.g&&!t.i&&ou(t,!1,null,null)}function iu(t,e){if(t.b=function(){return Yt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function ou(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Xt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):iu(t,n):iu(t,{user:null}),t.f=[],t.c=[]}function su(){}function au(){this.qb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.qb},set:function(t){this.qb=t},enumerable:!1})}function lu(t,e){this.a=e,jr(this,"verificationId",t)}function uu(t,e,n,r){return new lo(t).Ta(e,n).then(function(t){return new lu(t,r)})}function cu(t){var e=mi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Yr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:t,expirationTime:Or(1e3*e.exp),authTime:Or(1e3*e.auth_time),issuedAtTime:Or(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function hu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function du(t){this.f=t,this.b=this.a=null,this.c=0}function fu(t,e){var n=e[ks],r=e.refreshToken;e=pu(e.expiresIn),t.b=n,t.c=e,t.a=r}function pu(t){return S()+1e3*parseInt(t,10)}function gu(t,e){this.a=t||null,this.b=e||null,Br(this,{lastSignInTime:Or(e||null),creationTime:Or(t||null)})}function mu(t,e,n,r,i,o){Br(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bu(t,e){for(var n in Me.call(this,t),e)this[n]=e[n]}function vu(t,e,n){this.G=[],this.l=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=i.a.SDK_VERSION?mr(i.a.SDK_VERSION):null,this.a=new ws(this.l,yi(bi),t),this.c=new du(this.a),Su(this,e[ks]),fu(this.c,e),jr(this,"refreshToken",this.c.a),Au(this,n||{}),sn.call(this),this.I=!1,this.u&&wr()&&(this.i=tu(this.u,this.l,this.o)),this.N=[],this.h=null,this.w=function(t){return new hu(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.c.c-S()-3e5;return 0<e?e:0})}(this),this.V=C(this.Fa,this);var r=this;this.ja=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){wu(r,t.c)},this.W=null}function yu(t,e){t.X&&Ke(t.X,"languageCodeChanged",t.ta),(t.X=e)&&Je(e,"languageCodeChanged",t.ta)}function wu(t,e){t.O=e,As(t.a,i.a.SDK_VERSION?mr(i.a.SDK_VERSION,t.O):null)}function _u(t,e){t.W&&Ke(t.W,"frameworkChanged",t.sa),(t.W=e)&&Je(e,"frameworkChanged",t.sa)}function ku(t){try{return i.a.app(t.o).auth()}catch(e){throw new Yr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Cu(t){t.B||t.w.b||(t.w.start(),Ke(t,"tokenChanged",t.V),Je(t,"tokenChanged",t.V))}function Eu(t){Ke(t,"tokenChanged",t.V),t.w.stop()}function Su(t,e){t.ra=e,jr(t,"_lat",e)}function Tu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return te(e).then(function(){return t})}function xu(t){t.i&&!t.I&&(t.I=!0,$l(t.i,t))}function Au(t,e){Br(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new gu(e.createdAt,e.lastLoginAt),providerData:[]})}function Iu(){}function Du(t){return Yt().then(function(){if(t.B)throw new Yr("app-deleted")})}function Pu(t){return V(t.providerData,function(t){return t.providerId})}function Ou(t,e){e&&(Nu(t,e.providerId),t.providerData.push(e))}function Nu(t,e){H(t.providerData,function(t){return t.providerId==e})}function Ru(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Mu(t,e){t!=e&&(Br(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),jr(t,"metadata",e.metadata?function(t){return new gu(t.a,t.b)}(e.metadata):new gu),B(e.providerData,function(e){Ou(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.c,e.c),jr(t,"refreshToken",t.c.a))}function Lu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return ba(t.a,Xs,{idToken:e}).then(C(t.uc,t))}(t,e).then(function(){return n||Ru(t,"isAnonymous",!1),e})})}function Fu(t,e){e[ks]&&t.ra!=e[ks]&&(fu(t.c,e),t.dispatchEvent(new bu("tokenChanged")),Su(t,e[ks]),Ru(t,"refreshToken",t.c.a))}function ju(t,e){return Lu(t).then(function(){if(z(Pu(t),e))return Tu(t).then(function(){throw new Yr("provider-already-linked")})})}function Bu(t,e,n){return Vr({user:t,credential:co(e),additionalUserInfo:e=Ei(e),operationType:n})}function Vu(t,e){return Fu(t,e),t.reload().then(function(){return t})}function Uu(t,e,n,r,o){if(!wr())return Xt(new Yr("operation-not-supported-in-this-environment"));if(t.h&&!o)return Xt(t.h);var s=Ci(n.providerId),a=xr(t.uid+":::"),l=null;(!Cr()||lr())&&t.u&&n.isOAuthProvider&&(l=Oa(t.u,t.l,t.o,e,n,null,a,i.a.SDK_VERSION||null));var u=rr(l,s&&s.Ba,s&&s.Aa);return r=r().then(function(){if(qu(t),!o)return t.F().then(function(){})}).then(function(){return Ql(t.i,u,e,n,a,!!l)}).then(function(){return new Ht(function(n,r){t.ga(e,null,new Yr("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=a,t.b=Xl(t.i,t,e,u,a)})}).then(function(t){return u&&nr(u),t?Vr(t):null}).s(function(t){throw u&&nr(u),t}),Hu(t,r,o)}function zu(t,e,n,r,i){if(!wr())return Xt(new Yr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Xt(t.h);var o=null,s=xr(t.uid+":::");return r=r().then(function(){if(qu(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=s,Tu(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(Ju,t.A(),e.a)),e}).then(function(){return Yl(t.i,e,n,s)}).s(function(e){if(o=e,t.ba)return Gu(t.ba);throw o}).then(function(){if(o)throw o}),Hu(t,r,i)}function qu(t){if(!t.i||!t.I){if(t.i&&!t.I)throw new Yr("internal-error");throw new Yr("auth-domain-config-required")}}function Hu(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Xt(t.h)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new bu("userInvalidated")),t.h=e),e})}(t,e,n);return t.G.push(r),r.ha(function(){q(t.G,r)}),r}function $u(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ks]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-S())/1e3;var r=new vu(e,n,t);return t.providerData&&B(t.providerData,function(t){t&&Ou(r,Vr(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function Wu(t){this.a=t,this.b=fl()}eu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},eu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(ou(this,!0,null,t.a),Yt()):e.xa(n,r)?function(t,e,n){n=n.xa(e.c,e.b);var r=e.g,i=e.f,o=e.h,s=!!e.c.match(/Redirect$/);n(r,i,o).then(function(e){ou(t,s,e,null)}).s(function(e){ou(t,s,null,e)})}(this,t,e):Xt(new Yr("invalid-auth-event")):(ou(this,!1,null,null),Yt())}else Xt(new Yr("invalid-auth-event"))},eu.prototype.la=function(){var t=this;return new Ht(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Yr("timeout");t.a&&t.a.cancel(),t.a=hn(Gl.get()).then(function(){t.b||(t.g=!0,ou(t,!0,null,e))})}(t))})},su.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ga(t.c,null,t.a,t.b),Yt()):e.xa(n,r)?function(t,e){var n=t.b,r=t.c;e.xa(r,n)(t.g,t.f,t.h).then(function(t){e.ga(r,t,null,n)}).s(function(t){e.ga(r,null,t,n)})}(t,e):Xt(new Yr("invalid-auth-event"))}else Xt(new Yr("invalid-auth-event"))},lu.prototype.confirm=function(t){return t=uo(this.verificationId,t),this.a(t)},hu.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=hn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return function(){var t=a.document,e=null;return Pr()||!t?Yt():new Ht(function(n){e=function(){Pr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},hu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},du.prototype.A=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},du.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Xt(new Yr("user-token-expired")):t||!this.b||S()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ht(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Is(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(ya(t)):t.access_token&&t.refresh_token?n(t):r(new Yr("internal-error")):r(new Yr("network-request-failed"))},"POST",Ln(e).toString(),t.f,t.m.get()):r(new Yr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=pu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Yt(null):Yt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},gu.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(bu,Me),T(vu,sn),vu.prototype.pa=function(t){this.ja=t,xs(this.a,t)},vu.prototype.ea=function(){return this.ja},vu.prototype.ya=function(){return W(this.O)},vu.prototype.Fa=function(){this.w.b&&(this.w.stop(),this.w.start())},jr(vu.prototype,"providerId","firebase"),(t=vu.prototype).reload=function(){var t=this;return Hu(this,Du(this).then(function(){return Lu(t).then(function(){return Tu(t)}).then(Iu)}))},t.Zb=function(t){return this.F(t).then(function(t){return new cu(t)})},t.F=function(t){var e=this;return Hu(this,Du(this).then(function(){return e.c.getToken(t)}).then(function(t){if(!t)throw new Yr("internal-error");return t.accessToken!=e.ra&&(Su(e,t.accessToken),e.dispatchEvent(new bu("tokenChanged"))),Ru(e,"refreshToken",t.refreshToken),t.accessToken}))},t.uc=function(t){if(!(t=t.users)||!t.length)throw new Yr("internal-error");Au(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?V(t,function(t){return new mu(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Ou(this,e[n]);Ru(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.vc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.cb(t)},t.cb=function(t){var e=this,n=null;return Hu(this,t.f(this.a,this.uid).then(function(t){return Fu(e,t),n=Bu(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.mc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.ab(t)},t.ab=function(t){var e=this,n=null;return Hu(this,ju(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Bu(e,t,"link"),Vu(e,t)}).then(function(){return n}))},t.nc=function(t,e){var n=this;return Hu(this,ju(this,"phone").then(function(){return uu(ku(n),t,e,C(n.ab,n))}))},t.wc=function(t,e){var n=this;return Hu(this,Yt().then(function(){return uu(ku(n),t,e,C(n.cb,n))}),!0)},t.nb=function(t){var e=this;return Hu(this,this.F().then(function(n){return e.a.nb(n,t)}).then(function(t){return Fu(e,t),e.reload()}))},t.Nc=function(t){var e=this;return Hu(this,this.F().then(function(n){return t.b(e.a,n)}).then(function(t){return Fu(e,t),e.reload()}))},t.ob=function(t){var e=this;return Hu(this,this.F().then(function(n){return e.a.ob(n,t)}).then(function(t){return Fu(e,t),e.reload()}))},t.pb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Du(this);var e=this;return Hu(this,this.F().then(function(n){return e.a.pb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Fu(e,t),Ru(e,"displayName",t.displayName||null),Ru(e,"photoURL",t.photoUrl||null),B(e.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",e.displayName),jr(t,"photoURL",e.photoURL))}),Tu(e)}).then(Iu))},t.Lc=function(t){var e=this;return Hu(this,Lu(this).then(function(n){return z(Pu(e),t)?function(t,e,n){return ba(t,Qs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return B(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),B(Pu(e),function(t){n[t]||Nu(e,t)}),n[lo.PROVIDER_ID]||jr(e,"phoneNumber",null),Tu(e)}):Tu(e).then(function(){throw new Yr("no-such-provider")})}))},t.delete=function(){var t=this;return Hu(this,this.F().then(function(e){return ba(t.a,Gs,{idToken:e})}).then(function(){t.dispatchEvent(new bu("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");yu(t,null),_u(t,null),t.G=[],t.B=!0,Eu(t),jr(t,"refreshToken",null),t.i&&Wl(t.i,t)})},t.tb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ga=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?C(this.xb,this):"reauthViaPopup"==t&&e==(this.g||null)?C(this.yb,this):"linkViaRedirect"==t&&(this.aa||null)==e?C(this.xb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?C(this.yb,this):null},t.oc=function(t){var e=this;return Uu(this,"linkViaPopup",t,function(){return ju(e,t.providerId).then(function(){return Tu(e)})},!1)},t.xc=function(t){return Uu(this,"reauthViaPopup",t,function(){return Yt()},!0)},t.pc=function(t){var e=this;return zu(this,"linkViaRedirect",t,function(){return ju(e,t.providerId)},!1)},t.yc=function(t){return zu(this,"reauthViaRedirect",t,function(){return Yt()},!0)},t.xb=function(t,e,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Hu(this,this.F().then(function(i){return Us(r.a,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=Bu(r,t,"link"),Vu(r,t)}).then(function(){return i}))},t.yb=function(t,e,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Hu(this,Yt().then(function(){return Li(zs(r.a,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=Bu(r,t,"reauthenticate"),Fu(r,t),r.h=null,r.reload()}).then(function(){return i}),!0)},t.gb=function(t){var e=this,n=null;return Hu(this,this.F().then(function(e){return n=e,void 0===t||G(t)?{}:hi(new ei(t))}).then(function(t){return e.a.gb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.c.A(),redirectEventId:this.aa||null};return this.metadata&&Y(t,this.metadata.A()),B(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Ju={name:"redirectUser",C:"session"};function Gu(t){return ml(t.b,Ju,t.a)}function Qu(t){this.a=t,this.b=fl(),this.c=null,this.f=function(t){var e=Xu("local"),n=Xu("session"),r=Xu("none");return function(t,e,n){var r=gl(e,n),i=pl(t,e.C);return t.get(e,n).then(function(o){var s=null;try{s=Tr(a.localStorage.getItem(r))}catch(l){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Yu,t.a).then(function(t){return t?Xu(t):e})})})}).then(function(e){return t.c=e,Ku(t,e.C)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Xu("local"),this.a,C(this.g,this))}function Ku(t,e){var n,r=[];for(n in hl)hl[n]!==e&&r.push(ml(t.b,Xu(hl[n]),t.a));return r.push(ml(t.b,Yu,t.a)),function(t){return new Ht(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Zt(t[a],E(o,a),s);else e(i)})}(r)}Qu.prototype.g=function(){var t=this,e=Xu("local");nc(this,function(){return Yt().then(function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null}).then(function(n){if(n)return Ku(t,"local").then(function(){t.c=e})})})};var Yu={name:"persistence",C:"session"};function Xu(t){return{name:"authUser",C:t}}function Zu(t,e){return nc(t,function(){return t.b.set(t.c,e.A(),t.a)})}function tc(t){return nc(t,function(){return ml(t.b,t.c,t.a)})}function ec(t,e){return nc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),$u(t||{})})})}function nc(t,e){return t.f=t.f.then(e,e),t.f}function rc(t){if(this.l=!1,jr(this,"settings",new au),jr(this,"app",t),!hc(this).options||!hc(this).options.apiKey)throw new Yr("invalid-api-key");t=i.a.SDK_VERSION?mr(i.a.SDK_VERSION):null,this.c=new ws(hc(this).options&&hc(this).options.apiKey,yi(bi),t),this.N=[],this.o=[],this.I=[],this.Pb=i.a.INTERNAL.createSubscribe(C(this.ic,this)),this.O=void 0,this.Qb=i.a.INTERNAL.createSubscribe(C(this.jc,this)),uc(this,null),this.h=new Qu(hc(this).options.apiKey+":"+hc(this).name),this.w=new Wu(hc(this).options.apiKey+":"+hc(this).name),this.V=gc(this,function(t){var e=hc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ju,t.a).then(function(t){return t&&e&&(t.authDomain=e),$u(t||{})})}(t.w,hc(t).options.authDomain).then(function(e){return(t.B=e)&&(e.ba=t.w),Gu(t.w)});return gc(t,e)}(t).then(function(){return ec(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.B&&(t.B.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Zu(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:tc(t.h)})):null}).then(function(e){uc(t,e||null)});return gc(t,n)}(this)),this.i=gc(this,function(t){return t.V.then(function(){return ac(t)}).s(function(){}).then(function(){if(!t.l)return t.ja()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Xu("local"),e.a,t.ja)}})}(this)),this.X=!1,this.ja=C(this.Ic,this),this.Fa=C(this.Z,this),this.ra=C(this.Xb,this),this.sa=C(this.gc,this),this.ta=C(this.hc,this),this.a=null,function(t){var e=hc(t).options.authDomain,n=hc(t).options.apiKey;e&&wr()&&(t.Ob=t.V.then(function(){if(!t.l){if(t.a=tu(e,n,hc(t).name),$l(t.a,t),dc(t)&&xu(dc(t)),t.B){xu(t.B);var r=t.B;r.pa(t.ea()),yu(r,t),wu(r=t.B,t.G),_u(r,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=C(this.delete,this),this.INTERNAL.logFramework=C(this.qc,this),this.u=0,sn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function ic(t){Me.call(this,"languageCodeChanged"),this.g=t}function oc(t){Me.call(this,"frameworkChanged"),this.c=t}function sc(t){return t.Ob||Xt(new Yr("auth-domain-config-required"))}function ac(t){if(!wr())return Xt(new Yr("operation-not-supported-in-this-environment"));var e=sc(t).then(function(){return t.a.la()}).then(function(t){return t?Vr(t):null});return gc(t,e)}function lc(t,e){var n={};return n.apiKey=hc(t).options.apiKey,n.authDomain=hc(t).options.authDomain,n.appName=hc(t).name,t.V.then(function(){return function(t,e,n,r){var i=new vu(t,e);return n&&(i.ba=n),r&&wu(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.ya())}).then(function(e){return dc(t)&&e.uid==dc(t).uid?(Mu(dc(t),e),t.Z(e)):(uc(t,e),xu(e),t.Z(e))}).then(function(){pc(t)})}function uc(t,e){dc(t)&&(function(t,e){H(t.N,function(t){return t==e})}(dc(t),t.Fa),Ke(dc(t),"tokenChanged",t.ra),Ke(dc(t),"userDeleted",t.sa),Ke(dc(t),"userInvalidated",t.ta),Eu(dc(t))),e&&(e.N.push(t.Fa),Je(e,"tokenChanged",t.ra),Je(e,"userDeleted",t.sa),Je(e,"userInvalidated",t.ta),0<t.u&&Cu(e)),jr(t,"currentUser",e),e&&(e.pa(t.ea()),yu(e,t),wu(e,t.G),_u(e,t))}function cc(t,e){var n=null,r=null;return gc(t,e.then(function(e){return n=co(e),r=Ei(e),lc(t,e)}).then(function(){return Vr({user:dc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function hc(t){return t.app}function dc(t){return t.currentUser}function fc(t){return dc(t)&&dc(t)._lat||null}function pc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](fc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](fc(t))}}function gc(t,e){return t.N.push(e),e.ha(function(){q(t.N,e)}),e}function mc(){}function bc(){this.a={},this.b=1e12}Qu.prototype.jb=function(t){var e=null,n=this;return function(t){var e=new Yr("invalid-persistence-type"),n=new Yr("unsupported-persistence-type");t:{for(r in hl)if(hl[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!yr()&&"none"!==t)throw n}}(t),nc(this,function(){return t!=n.c.C?n.b.get(n.c,n.a).then(function(r){return e=r,Ku(n,t)}).then(function(){if(n.c=Xu(t),e)return n.b.set(n.c,e,n.a)}):Yt()})},T(rc,sn),T(ic,Me),T(oc,Me),(t=rc.prototype).jb=function(t){return gc(this,t=this.h.jb(t))},t.pa=function(t){this.W===t||this.l||(this.W=t,xs(this.c,this.W),this.dispatchEvent(new ic(this.ea())))},t.ea=function(){return this.W},t.Oc=function(){var t=a.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.qc=function(t){this.G.push(t),As(this.c,i.a.SDK_VERSION?mr(i.a.SDK_VERSION,this.G):null),this.dispatchEvent(new oc(this.G))},t.ya=function(){return W(this.G)},t.toJSON=function(){return{apiKey:hc(this).options.apiKey,authDomain:hc(this).options.authDomain,appName:hc(this).name,currentUser:dc(this)&&dc(this).A()}},t.tb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ga=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?C(this.Wb,this):null},t.Wb=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.b&&(this.b.cancel(),this.b=null);var i=null,o=null,s=Vs(r.c,t).then(function(t){return i=co(t),o=Ei(t),t});return gc(this,t=r.V.then(function(){return s}).then(function(t){return lc(r,t)}).then(function(){return Vr({user:dc(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Gc=function(t){if(!wr())return Xt(new Yr("operation-not-supported-in-this-environment"));var e=this,n=Ci(t.providerId),r=xr(),o=null;(!Cr()||lr())&&hc(this).options.authDomain&&t.isOAuthProvider&&(o=Oa(hc(this).options.authDomain,hc(this).options.apiKey,hc(this).name,"signInViaPopup",t,null,r,i.a.SDK_VERSION||null));var s=rr(o,n&&n.Ba,n&&n.Aa);return gc(this,n=sc(this).then(function(e){return Ql(e,s,"signInViaPopup",t,r,!!o)}).then(function(){return new Ht(function(t,n){e.ga("signInViaPopup",null,new Yr("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.b=Xl(e.a,e,"signInViaPopup",s,r)})}).then(function(t){return s&&nr(s),t?Vr(t):null}).s(function(t){throw s&&nr(s),t}))},t.Hc=function(t){if(!wr())return Xt(new Yr("operation-not-supported-in-this-environment"));var e=this;return gc(this,sc(this).then(function(){return function(t){return nc(t,function(){return t.b.set(Yu,t.c.C,t.a)})}(e.h)}).then(function(){return Yl(e.a,"signInViaRedirect",t)}))},t.la=function(){var t=this;return ac(this).then(function(e){return t.a&&ru(t.a.b),e}).s(function(e){throw t.a&&ru(t.a.b),e})},t.Mc=function(t){if(!t)return Xt(new Yr("null-user"));var e=this,n={};n.apiKey=hc(this).options.apiKey,n.authDomain=hc(this).options.authDomain,n.appName=hc(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.u,appName:t.o};var i=t.c,o={};return o[ks]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,e=new vu(e,o),n&&(e.ba=n),r&&wu(e,r),Mu(e,t),e}(t,n,e.w,e.ya());return gc(this,this.i.then(function(){if(hc(e).options.apiKey!=t.l)return r.reload()}).then(function(){return dc(e)&&t.uid==dc(e).uid?(Mu(dc(e),t),e.Z(t)):(uc(e,r),xu(r),e.Z(r))}).then(function(){pc(e)}))},t.lb=function(){var t=this;return gc(this,this.i.then(function(){return t.a&&ru(t.a.b),dc(t)?(uc(t,null),tc(t.h).then(function(){pc(t)})):Yt()}))},t.Ic=function(){var t=this;return ec(this.h,hc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=dc(t)&&e){n=dc(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mu(dc(t),e),dc(t).F();(dc(t)||e)&&(uc(t,e),e&&(xu(e),e.ba=t.w),t.a&&$l(t.a,t),pc(t))}})},t.Z=function(t){return Zu(this.h,t)},t.Xb=function(){pc(this),this.Z(dc(this))},t.gc=function(){this.lb()},t.hc=function(){this.lb()},t.ic=function(t){var e=this;this.addAuthTokenListener(function(){t.next(dc(e))})},t.jc=function(t){var e=this;!function(t,e){t.I.push(e),gc(t,t.i.then(function(){!t.l&&z(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(fc(t)))}))}(this,function(){t.next(dc(e))})},t.sc=function(t,e,n){var r=this;return this.X&&Promise.resolve().then(function(){b(t)?t(dc(r)):b(t.next)&&t.next(dc(r))}),this.Pb(t,e,n)},t.rc=function(t,e,n){var r=this;return this.X&&Promise.resolve().then(function(){r.O=r.getUid(),b(t)?t(dc(r)):b(t.next)&&t.next(dc(r))}),this.Qb(t,e,n)},t.Yb=function(t){var e=this;return gc(this,this.i.then(function(){return dc(e)?dc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Cc=function(t){var e=this;return this.i.then(function(){return cc(e,ba(e.c,da,{token:t}))}).then(function(t){var n=t.user;return Ru(n,"isAnonymous",!1),e.Z(n),t})},t.Dc=function(t,e){var n=this;return this.i.then(function(){return cc(n,ba(n.c,fa,{email:t,password:e}))})},t.Sb=function(t,e){var n=this;return this.i.then(function(){return cc(n,ba(n.c,Ws,{email:t,password:e}))})},t.Pa=function(t){var e=this;return this.i.then(function(){return cc(e,t.ka(e.c))})},t.Bc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Pa(t)},t.kb=function(){var t=this;return this.i.then(function(){var e=dc(t);if(e&&e.isAnonymous){var n=Vr({providerId:null,isNewUser:!1});return Vr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return cc(t,t.c.kb()).then(function(e){var n=e.user;return Ru(n,"isAnonymous",!0),t.Z(n),e})})},t.getUid=function(){return dc(this)&&dc(this).uid||null},t.Rb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dc(this)&&Cu(dc(this))},t.zc=function(t){var e=this;B(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&dc(this)&&Eu(dc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),gc(this,this.i.then(function(){e.l||z(e.o,t)&&t(fc(e))}))},t.removeAuthTokenListener=function(t){H(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Xu("local"),t.a,this.ja),this.a&&(Wl(this.a,this),ru(this.a.b)),Promise.resolve()},t.Vb=function(t){return gc(this,function(t,e){return ba(t,Js,{identifier:e,continueUri:_r()?Zn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.c,t))},t.kc=function(t){return!!io(t)},t.ib=function(t,e){var n=this;return gc(this,Yt().then(function(){var t=new ei(e);if(!t.c)throw new Yr("argument-error",ii+" must be true when sending sign in link to email");return hi(t)}).then(function(e){return n.c.ib(t,e)}).then(function(){}))},t.Pc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Xa=function(t,e){return gc(this,this.c.Xa(t,e).then(function(){}))},t.Ia=function(t){return gc(this,this.c.Ia(t).then(function(t){return new zr(t)}))},t.Va=function(t){return gc(this,this.c.Va(t).then(function(){}))},t.hb=function(t,e){var n=this;return gc(this,Yt().then(function(){return void 0===e||G(e)?{}:hi(new ei(e))}).then(function(e){return n.c.hb(t,e)}).then(function(){}))},t.Fc=function(t,e){return gc(this,uu(this,t,e,C(this.Pa,this)))},t.Ec=function(t,e){var n=this;return gc(this,Yt().then(function(){var r=ro(t,e||Zn());return n.Pa(r)}))},mc.prototype.render=function(){},mc.prototype.reset=function(){},mc.prototype.getResponse=function(){},mc.prototype.execute=function(){};var vc=null;function yc(t,e){return(e=wc(e))&&t.a[e]||null}function wc(t){return(t=void 0===t?1e12:t)?t.toString():null}function _c(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=qn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Je(this.f,"click",this.i)}function kc(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Cc(){}bc.prototype.render=function(t,e){return this.a[this.b.toString()]=new _c(t,e),this.b++},bc.prototype.reset=function(t){var e=yc(this,t);t=wc(t),e&&t&&(e.delete(),delete this.a[t])},bc.prototype.getResponse=function(t){return(t=yc(this,t))?t.getResponse():null},bc.prototype.execute=function(t){(t=yc(this,t))&&t.execute()},_c.prototype.getResponse=function(){return kc(this),this.b},_c.prototype.execute=function(){kc(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},_c.prototype.delete=function(){kc(this),this.g=!0,clearTimeout(this.a),this.a=null,Ke(this.f,"click",this.i)},Cc.prototype.g=function(){return vc||(vc=new bc),Yt(vc)},Cc.prototype.c=function(){};var Ec=null;function Sc(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Tc=new X(et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xc=new Dr(3e4,6e4);Sc.prototype.g=function(t){var e=this;return new Ht(function(n,r){var i=setTimeout(function(){r(new Yr("network-request-failed"))},xc.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new Yr("internal-error"));delete a[e.a]},Yt(fs(ot(Tc,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new Yr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Sc.prototype.c=function(){this.b--};var Ac=null;function Ic(t,e,n,r,i,o,s){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.l=e,this.g=null,s?(Ec||(Ec=new Cc),s=Ec):(Ac||(Ac=new Sc),s=Ac),this.o=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Oc])throw new Yr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Nc],!a.document)throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!qn(e)||!this.i&&qn(e).hasChildNodes())throw new Yr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new ws(t,o||null,i||null),this.v=r||function(){return null};var l=this;this.m=[];var u=this.a[Dc];this.a[Dc]=function(t){if(Rc(l,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=vr(u,a);"function"==typeof e&&e(t)}};var c=this.a[Pc];this.a[Pc]=function(){if(Rc(l,null),"function"==typeof c)c();else if("string"==typeof c){var t=vr(c,a);"function"==typeof t&&t()}}}var Dc="callback",Pc="expired-callback",Oc="sitekey",Nc="size";function Rc(t,e){for(var n=0;n<t.m.length;n++)try{t.m[n](e)}catch(r){}}function Mc(t,e){return t.h.push(e),e.ha(function(){q(t.h,e)}),e}function Lc(t){if(t.B)throw new Yr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Fc(t,e,n){var r=!1;try{this.b=n||i.a.app()}catch(a){throw new Yr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Yr("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().ya()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=i.a.SDK_VERSION?mr(i.a.SDK_VERSION,s):null,Ic.call(this,n,t,e,function(){try{var t=o.b.auth().ea()}catch(e){t=null}return t},s,yi(bi),r)}function jc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new Yr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bc.length)throw new Yr("internal-error","Argument validator received an unsupported number of arguments.");n=Bc[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Yr("argument-error",t+" failed: "+r)}(t=Ic.prototype).za=function(){var t=this;return this.f?this.f:this.f=Mc(this,Yt().then(function(){if(_r()&&!ur())return sr();throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,ba(t.u,ra,{})}).then(function(e){t.a[Oc]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Lc(this);var t=this;return Mc(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=qn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!zn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',jt(s.name),'"'),s.type){o.push(' type="',jt(s.type),'"');var a={};Y(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(l(s)?o.className=s:g(s)?o.className=s.join(" "):Hn(o,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(l(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||v(o)&&0<o.nodeType?r(o):B(Wn(o)?W(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Lc(this);var t=this;return Mc(this,this.render().then(function(e){return new Ht(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){H(t.m,function(t){return t==e})}(t,i),n(e))};t.m.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Lc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Lc(this),this.B=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=qn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Fc,Ic);var Bc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:l}}function Uc(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:u}}function zc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function qc(t,e){return{name:t||"",K:"a function",optional:!!e,M:b}}function Hc(t,e){return{name:t||"",K:"null",optional:!!e,M:p}}function $c(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Wc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&l(t.type)&&b(t.verify))}}}function Jc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Gc(t,e){for(var n in e){var r=e[n].name;t[r]=Yc(r,t[n],e[n].j)}}function Qc(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E(function(t){return this[t]},n),set:E(function(t,e,n,r){jc(t,[n],[r],!0),this[e]=r},r,n,e[n].rb),enumerable:!0})}}function Kc(t,e,n,r){t[e]=Yc(e,n,r)}function Yc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Gc(rc.prototype,{Va:{name:"applyActionCode",j:[Vc("code")]},Ia:{name:"checkActionCode",j:[Vc("code")]},Xa:{name:"confirmPasswordReset",j:[Vc("code"),Vc("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",j:[Vc("email"),Vc("password")]},Vb:{name:"fetchSignInMethodsForEmail",j:[Vc("email")]},la:{name:"getRedirectResult",j:[]},kc:{name:"isSignInWithEmailLink",j:[Vc("emailLink")]},rc:{name:"onAuthStateChanged",j:[Jc(zc(),qc(),"nextOrObserver"),qc("opt_error",!0),qc("opt_completed",!0)]},sc:{name:"onIdTokenChanged",j:[Jc(zc(),qc(),"nextOrObserver"),qc("opt_error",!0),qc("opt_completed",!0)]},hb:{name:"sendPasswordResetEmail",j:[Vc("email"),Jc(zc("opt_actionCodeSettings",!0),Hc(null,!0),"opt_actionCodeSettings",!0)]},ib:{name:"sendSignInLinkToEmail",j:[Vc("email"),zc("actionCodeSettings")]},jb:{name:"setPersistence",j:[Vc("persistence")]},Bc:{name:"signInAndRetrieveDataWithCredential",j:[$c()]},kb:{name:"signInAnonymously",j:[]},Pa:{name:"signInWithCredential",j:[$c()]},Cc:{name:"signInWithCustomToken",j:[Vc("token")]},Dc:{name:"signInWithEmailAndPassword",j:[Vc("email"),Vc("password")]},Ec:{name:"signInWithEmailLink",j:[Vc("email"),Vc("emailLink",!0)]},Fc:{name:"signInWithPhoneNumber",j:[Vc("phoneNumber"),Wc()]},Gc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Hc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"updateCurrentUser",j:[Jc({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof vu)}},Hc(),"user")]},lb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vc(null,!0)]},Oc:{name:"useDeviceLanguage",j:[]},Pc:{name:"verifyPasswordResetCode",j:[Vc("code")]}}),Qc(rc.prototype,{lc:{name:"languageCode",rb:Jc(Vc(),Hc(),"languageCode")}}),(rc.Persistence=hl).LOCAL="local",rc.Persistence.SESSION="session",rc.Persistence.NONE="none",Gc(vu.prototype,{delete:{name:"delete",j:[]},Zb:{name:"getIdTokenResult",j:[Uc("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Uc("opt_forceRefresh",!0)]},mc:{name:"linkAndRetrieveDataWithCredential",j:[$c()]},ab:{name:"linkWithCredential",j:[$c()]},nc:{name:"linkWithPhoneNumber",j:[Vc("phoneNumber"),Wc()]},oc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},vc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[$c()]},cb:{name:"reauthenticateWithCredential",j:[$c()]},wc:{name:"reauthenticateWithPhoneNumber",j:[Vc("phoneNumber"),Wc()]},xc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},gb:{name:"sendEmailVerification",j:[Jc(zc("opt_actionCodeSettings",!0),Hc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vc(null,!0)]},Lc:{name:"unlink",j:[Vc("provider")]},nb:{name:"updateEmail",j:[Vc("email")]},ob:{name:"updatePassword",j:[Vc("password")]},Nc:{name:"updatePhoneNumber",j:[$c("phone")]},pb:{name:"updateProfile",j:[zc("profile")]}}),Gc(bc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gc(mc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gc(Ht.prototype,{ha:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Qc(au.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",rb:Uc("appVerificationDisabledForTesting")}}),Gc(lu.prototype,{confirm:{name:"confirm",j:[Vc("verificationCode")]}}),Kc(Mi,"fromJSON",function(t){t=l(t)?JSON.parse(t):t;for(var e,n=[zi,eo,so,Bi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Jc(Vc(),zc(),"json")]),Kc(no,"credential",function(t,e){return new to(t,e)},[Vc("email"),Vc("password")]),Gc(to.prototype,{A:{name:"toJSON",j:[Vc(null,!0)]}}),Gc(Wi.prototype,{ua:{name:"addScope",j:[Vc("scope")]},Ca:{name:"setCustomParameters",j:[zc("customOAuthParameters")]}}),Kc(Wi,"credential",Ji,[Jc(Vc(),zc(),"token")]),Kc(no,"credentialWithLink",ro,[Vc("email"),Vc("emailLink")]),Gc(Gi.prototype,{ua:{name:"addScope",j:[Vc("scope")]},Ca:{name:"setCustomParameters",j:[zc("customOAuthParameters")]}}),Kc(Gi,"credential",Qi,[Jc(Vc(),zc(),"token")]),Gc(Ki.prototype,{ua:{name:"addScope",j:[Vc("scope")]},Ca:{name:"setCustomParameters",j:[zc("customOAuthParameters")]}}),Kc(Ki,"credential",Yi,[Jc(Vc(),Jc(zc(),Hc()),"idToken"),Jc(Vc(),Hc(),"accessToken",!0)]),Gc(Xi.prototype,{Ca:{name:"setCustomParameters",j:[zc("customOAuthParameters")]}}),Kc(Xi,"credential",Zi,[Jc(Vc(),zc(),"token"),Vc("secret",!0)]),Gc($i.prototype,{ua:{name:"addScope",j:[Vc("scope")]},credential:{name:"credential",j:[Jc(Vc(),Jc(zc(),Hc()),"optionsOrIdToken"),Jc(Vc(),Hc(),"accessToken",!0)]},Ca:{name:"setCustomParameters",j:[zc("customOAuthParameters")]}}),Gc(Vi.prototype,{A:{name:"toJSON",j:[Vc(null,!0)]}}),Gc(Fi.prototype,{A:{name:"toJSON",j:[Vc(null,!0)]}}),Kc(lo,"credential",uo,[Vc("verificationId"),Vc("verificationCode")]),Gc(lo.prototype,{Ta:{name:"verifyPhoneNumber",j:[Vc("phoneNumber"),Wc()]}}),Gc(oo.prototype,{A:{name:"toJSON",j:[Vc(null,!0)]}}),Gc(Yr.prototype,{toJSON:{name:"toJSON",j:[Vc(null,!0)]}}),Gc(yo.prototype,{toJSON:{name:"toJSON",j:[Vc(null,!0)]}}),Gc(vo.prototype,{toJSON:{name:"toJSON",j:[Vc(null,!0)]}}),Gc(Fc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:rc,AuthCredential:Mi,Error:Yr};Kc(t,"EmailAuthProvider",no,[]),Kc(t,"FacebookAuthProvider",Wi,[]),Kc(t,"GithubAuthProvider",Gi,[]),Kc(t,"GoogleAuthProvider",Ki,[]),Kc(t,"TwitterAuthProvider",Xi,[]),Kc(t,"OAuthProvider",$i,[Vc("providerId")]),Kc(t,"SAMLAuthProvider",Hi,[Vc("providerId")]),Kc(t,"PhoneAuthProvider",lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof rc)}}]),Kc(t,"RecaptchaVerifier",Fc,[Jc(Vc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),zc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof i.a.app.App)}}]),i.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:C((t=new rc(t)).getUid,t),getToken:C(t.Yb,t),addAuthTokenListener:C(t.Rb,t),removeAuthTokenListener:C(t.zc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(n){}}),i.a.INTERNAL.extendNamespace({User:vu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},tLzv:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("s7LF"),o=n("oBZk"),s=n("ZZ/e"),a=n("weex"),l=n("ajt+");n.d(e,"a",function(){return d});var u=r.vb({encapsulation:0,styles:[[""]],data:{}});function c(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,87,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,2).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.submit()&&i),i},null,null)),r.wb(1,16384,null,0,i.s,[],null,null),r.wb(2,540672,null,0,i.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,i.a,null,[i.d]),r.wb(4,16384,null,0,i.j,[[4,i.a]],null,null),(t()(),r.xb(5,0,null,null,82,"ion-grid",[],null,null,null,o.S,o.l)),r.wb(6,49152,null,0,s.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(7,0,null,0,80,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,o.bb,o.u)),r.wb(8,49152,null,0,s.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,78,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,o.O,o.h)),r.wb(10,49152,null,0,s.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),(t()(),r.xb(12,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Rb(-1,null,["Request to Add a New Business"])),(t()(),r.xb(14,0,null,0,0,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(15,0,null,0,68,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(16,0,null,null,67,"ion-list",[],null,null,null,o.Y,o.r)),r.wb(17,49152,null,0,s.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(18,0,null,0,17,"ion-item",[],null,null,null,o.W,o.p)),r.wb(19,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(20,0,null,0,2,"ion-label",[],null,null,null,o.X,o.q)),r.wb(21,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Type"])),(t()(),r.xb(23,0,null,0,12,"ion-select",[["formControlName","type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,25)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,25)._handleChangeEvent(n.target)&&i),i},o.eb,o.w)),r.wb(24,49152,null,0,s.kb,[r.i,r.n,r.B],null,null),r.wb(25,16384,null,0,s.Lb,[r.n],null,null),r.Ob(1024,null,i.g,function(t){return[t]},[s.Lb]),r.wb(27,671744,null,0,i.c,[[3,i.a],[8,null],[8,null],[6,i.g],[2,i.r]],{name:[0,"name"]},null),r.Ob(2048,null,i.h,null,[i.c]),r.wb(29,16384,null,0,i.i,[[4,i.h]],null,null),(t()(),r.xb(30,0,null,0,2,"ion-select-option",[["value","camp"]],null,null,null,o.db,o.x)),r.wb(31,49152,null,0,s.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Camp"])),(t()(),r.xb(33,0,null,0,2,"ion-select-option",[["value","trail"]],null,null,null,o.db,o.x)),r.wb(34,49152,null,0,s.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Trail"])),(t()(),r.xb(36,0,null,0,11,"ion-item",[],null,null,null,o.W,o.p)),r.wb(37,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(38,0,null,0,2,"ion-label",[],null,null,null,o.X,o.q)),r.wb(39,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Name"])),(t()(),r.xb(41,0,null,0,6,"ion-input",[["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,43)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,43)._handleInputEvent(n.target)&&i),i},o.V,o.o)),r.wb(42,49152,null,0,s.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(43,16384,null,0,s.Mb,[r.n],null,null),r.Ob(1024,null,i.g,function(t){return[t]},[s.Mb]),r.wb(45,671744,null,0,i.c,[[3,i.a],[8,null],[8,null],[6,i.g],[2,i.r]],{name:[0,"name"]},null),r.Ob(2048,null,i.h,null,[i.c]),r.wb(47,16384,null,0,i.i,[[4,i.h]],null,null),(t()(),r.xb(48,0,null,0,11,"ion-item",[],null,null,null,o.W,o.p)),r.wb(49,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(50,0,null,0,2,"ion-label",[],null,null,null,o.X,o.q)),r.wb(51,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Description"])),(t()(),r.xb(53,0,null,0,6,"ion-textarea",[["formControlName","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,55)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,55)._handleInputEvent(n.target)&&i),i},o.lb,o.E)),r.wb(54,49152,null,0,s.vb,[r.i,r.n,r.B],null,null),r.wb(55,16384,null,0,s.Mb,[r.n],null,null),r.Ob(1024,null,i.g,function(t){return[t]},[s.Mb]),r.wb(57,671744,null,0,i.c,[[3,i.a],[8,null],[8,null],[6,i.g],[2,i.r]],{name:[0,"name"]},null),r.Ob(2048,null,i.h,null,[i.c]),r.wb(59,16384,null,0,i.i,[[4,i.h]],null,null),(t()(),r.xb(60,0,null,0,11,"ion-item",[],null,null,null,o.W,o.p)),r.wb(61,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(62,0,null,0,2,"ion-label",[],null,null,null,o.X,o.q)),r.wb(63,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["URL"])),(t()(),r.xb(65,0,null,0,6,"ion-input",[["formControlName","url"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,67)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,67)._handleInputEvent(n.target)&&i),i},o.V,o.o)),r.wb(66,49152,null,0,s.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(67,16384,null,0,s.Mb,[r.n],null,null),r.Ob(1024,null,i.g,function(t){return[t]},[s.Mb]),r.wb(69,671744,null,0,i.c,[[3,i.a],[8,null],[8,null],[6,i.g],[2,i.r]],{name:[0,"name"]},null),r.Ob(2048,null,i.h,null,[i.c]),r.wb(71,16384,null,0,i.i,[[4,i.h]],null,null),(t()(),r.xb(72,0,null,0,11,"ion-item",[],null,null,null,o.W,o.p)),r.wb(73,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(74,0,null,0,2,"ion-label",[],null,null,null,o.X,o.q)),r.wb(75,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Address"])),(t()(),r.xb(77,0,null,0,6,"ion-input",[["formControlName","address"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,79)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,79)._handleInputEvent(n.target)&&i),i},o.V,o.o)),r.wb(78,49152,null,0,s.E,[r.i,r.n,r.B],{type:[0,"type"]},null),r.wb(79,16384,null,0,s.Mb,[r.n],null,null),r.Ob(1024,null,i.g,function(t){return[t]},[s.Mb]),r.wb(81,671744,null,0,i.c,[[3,i.a],[8,null],[8,null],[6,i.g],[2,i.r]],{name:[0,"name"]},null),r.Ob(2048,null,i.h,null,[i.c]),r.wb(83,16384,null,0,i.i,[[4,i.h]],null,null),(t()(),r.xb(84,0,null,0,3,"div",[["padding",""]],null,null,null,null,null)),(t()(),r.xb(85,0,null,null,2,"ion-button",[["expand","block"],["size","large"],["type","submit"]],null,null,null,o.I,o.b)),r.wb(86,49152,null,0,s.i,[r.i,r.n,r.B],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"],type:[3,"type"]},null),(t()(),r.Rb(-1,0,["Submit"]))],function(t,e){var n=e.component;t(e,2,0,n.myForm),t(e,27,0,"type"),t(e,31,0,"camp"),t(e,34,0,"trail"),t(e,42,0,"text"),t(e,45,0,"name"),t(e,57,0,"description"),t(e,66,0,"url"),t(e,69,0,"url"),t(e,78,0,"text"),t(e,81,0,"address"),t(e,86,0,n.myForm.invalid,"block","large","submit")},function(t,e){t(e,0,0,r.Jb(e,4).ngClassUntouched,r.Jb(e,4).ngClassTouched,r.Jb(e,4).ngClassPristine,r.Jb(e,4).ngClassDirty,r.Jb(e,4).ngClassValid,r.Jb(e,4).ngClassInvalid,r.Jb(e,4).ngClassPending),t(e,23,0,r.Jb(e,29).ngClassUntouched,r.Jb(e,29).ngClassTouched,r.Jb(e,29).ngClassPristine,r.Jb(e,29).ngClassDirty,r.Jb(e,29).ngClassValid,r.Jb(e,29).ngClassInvalid,r.Jb(e,29).ngClassPending),t(e,41,0,r.Jb(e,47).ngClassUntouched,r.Jb(e,47).ngClassTouched,r.Jb(e,47).ngClassPristine,r.Jb(e,47).ngClassDirty,r.Jb(e,47).ngClassValid,r.Jb(e,47).ngClassInvalid,r.Jb(e,47).ngClassPending),t(e,53,0,r.Jb(e,59).ngClassUntouched,r.Jb(e,59).ngClassTouched,r.Jb(e,59).ngClassPristine,r.Jb(e,59).ngClassDirty,r.Jb(e,59).ngClassValid,r.Jb(e,59).ngClassInvalid,r.Jb(e,59).ngClassPending),t(e,65,0,r.Jb(e,71).ngClassUntouched,r.Jb(e,71).ngClassTouched,r.Jb(e,71).ngClassPristine,r.Jb(e,71).ngClassDirty,r.Jb(e,71).ngClassValid,r.Jb(e,71).ngClassInvalid,r.Jb(e,71).ngClassPending),t(e,77,0,r.Jb(e,83).ngClassUntouched,r.Jb(e,83).ngClassTouched,r.Jb(e,83).ngClassPristine,r.Jb(e,83).ngClassDirty,r.Jb(e,83).ngClassValid,r.Jb(e,83).ngClassInvalid,r.Jb(e,83).ngClassPending)})}function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-request-new-camp",[],null,null,null,c,u)),r.wb(1,114688,null,0,a.a,[i.b,l.a,s.Jb,s.Nb],null,null)],function(t,e){t(e,1,0)},null)}var d=r.tb("app-request-new-camp",a.a,h,{},{},[])},uCxy:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("s7LF"),a=n("SVse"),l=n("95Ir"),u=n("Dn3B");n.d(e,"a",function(){return c}),n.d(e,"c",function(){return d}),n.d(e,"b",function(){return p});var c=r.vb({encapsulation:0,styles:[[""]],data:{}});function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,10,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(1,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(2,0,null,0,8,"ion-item",[],null,null,null,i.W,i.p)),r.wb(3,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(4,0,null,0,6,"ion-input",[["formControlName","name"],["placeholder","Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,6)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,6)._handleInputEvent(n.target)&&i),i},i.V,i.o)),r.wb(5,49152,null,0,o.E,[r.i,r.n,r.B],{placeholder:[0,"placeholder"]},null),r.wb(6,16384,null,0,o.Mb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Mb]),r.wb(8,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(10,16384,null,0,s.i,[[4,s.h]],null,null)],function(t,e){t(e,1,0,"6"),t(e,5,0,"Name"),t(e,8,0,"name")},function(t,e){t(e,4,0,r.Jb(e,10).ngClassUntouched,r.Jb(e,10).ngClassTouched,r.Jb(e,10).ngClassPristine,r.Jb(e,10).ngClassDirty,r.Jb(e,10).ngClassValid,r.Jb(e,10).ngClassInvalid,r.Jb(e,10).ngClassPending)})}function d(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,150,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Jb(t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Jb(t,2).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSubmit()&&i),i},null,null)),r.wb(1,16384,null,0,s.s,[],null,null),r.wb(2,540672,null,0,s.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Ob(2048,null,s.a,null,[s.d]),r.wb(4,16384,null,0,s.j,[[4,s.a]],null,null),(t()(),r.xb(5,0,null,null,145,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(6,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(7,0,null,0,136,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(8,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.mb(16777216,null,0,1,null,h)),r.wb(10,16384,null,0,a.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.xb(11,0,null,0,25,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(12,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(13,0,null,0,23,"ion-item",[],null,null,null,i.W,i.p)),r.wb(14,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(15,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(16,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Difficulty"])),(t()(),r.xb(18,0,null,0,18,"ion-select",[["formControlName","difficulty"],["value","All"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,20)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,20)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(19,49152,null,0,o.kb,[r.i,r.n,r.B],{value:[0,"value"]},null),r.wb(20,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(22,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(24,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(25,0,null,0,2,"ion-select-option",[["value",""]],null,null,null,i.db,i.x)),r.wb(26,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["All"])),(t()(),r.xb(28,0,null,0,2,"ion-select-option",[["value","Easy"]],null,null,null,i.db,i.x)),r.wb(29,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Easy"])),(t()(),r.xb(31,0,null,0,2,"ion-select-option",[["value","Intermediate"]],null,null,null,i.db,i.x)),r.wb(32,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Intermediate"])),(t()(),r.xb(34,0,null,0,2,"ion-select-option",[["value","Extreme"]],null,null,null,i.db,i.x)),r.wb(35,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Extreme"])),(t()(),r.xb(37,0,null,0,25,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(38,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(39,0,null,0,23,"ion-item",[],null,null,null,i.W,i.p)),r.wb(40,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(41,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(42,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Water Crossings"])),(t()(),r.xb(44,0,null,0,18,"ion-select",[["formControlName","waterCrossings"],["value","All"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,46)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,46)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(45,49152,null,0,o.kb,[r.i,r.n,r.B],{value:[0,"value"]},null),r.wb(46,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(48,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(50,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(51,0,null,0,2,"ion-select-option",[["value",""]],null,null,null,i.db,i.x)),r.wb(52,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["All"])),(t()(),r.xb(54,0,null,0,2,"ion-select-option",[["value","Puddles"]],null,null,null,i.db,i.x)),r.wb(55,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Puddles"])),(t()(),r.xb(57,0,null,0,2,"ion-select-option",[["value","Streams"]],null,null,null,i.db,i.x)),r.wb(58,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Streams"])),(t()(),r.xb(60,0,null,0,2,"ion-select-option",[["value","Rivers"]],null,null,null,i.db,i.x)),r.wb(61,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Rivers"])),(t()(),r.xb(63,0,null,0,25,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(64,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(65,0,null,0,23,"ion-item",[],null,null,null,i.W,i.p)),r.wb(66,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(67,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(68,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Bridges"])),(t()(),r.xb(70,0,null,0,18,"ion-select",[["formControlName","bridges"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,72)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,72)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(71,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(72,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(74,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(76,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(77,0,null,0,2,"ion-select-option",[["value",""]],null,null,null,i.db,i.x)),r.wb(78,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["All"])),(t()(),r.xb(80,0,null,0,2,"ion-select-option",[["value","High"]],null,null,null,i.db,i.x)),r.wb(81,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["High"])),(t()(),r.xb(83,0,null,0,2,"ion-select-option",[["value","Low"]],null,null,null,i.db,i.x)),r.wb(84,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Low"])),(t()(),r.xb(86,0,null,0,2,"ion-select-option",[["value","Scary"]],null,null,null,i.db,i.x)),r.wb(87,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Scary"])),(t()(),r.xb(89,0,null,0,28,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(90,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(91,0,null,0,26,"ion-item",[],null,null,null,i.W,i.p)),r.wb(92,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(93,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(94,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Footing"])),(t()(),r.xb(96,0,null,0,21,"ion-select",[["formControlName","footing"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,98)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,98)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(97,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(98,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(100,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(102,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(103,0,null,0,2,"ion-select-option",[["value",""]],null,null,null,i.db,i.x)),r.wb(104,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["All"])),(t()(),r.xb(106,0,null,0,2,"ion-select-option",[["value","Carriage"]],null,null,null,i.db,i.x)),r.wb(107,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Carriage trails"])),(t()(),r.xb(109,0,null,0,2,"ion-select-option",[["value","Sandy"]],null,null,null,i.db,i.x)),r.wb(110,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Sandy Loamy"])),(t()(),r.xb(112,0,null,0,2,"ion-select-option",[["value","Muddy"]],null,null,null,i.db,i.x)),r.wb(113,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Muddy"])),(t()(),r.xb(115,0,null,0,2,"ion-select-option",[["value","Rocky"]],null,null,null,i.db,i.x)),r.wb(116,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Rocky"])),(t()(),r.xb(118,0,null,0,25,"ion-col",[["size","6"],["size-lg","4"],["size-sm",""]],null,null,null,i.O,i.h)),r.wb(119,49152,null,0,o.r,[r.i,r.n,r.B],{size:[0,"size"]},null),(t()(),r.xb(120,0,null,0,23,"ion-item",[],null,null,null,i.W,i.p)),r.wb(121,49152,null,0,o.F,[r.i,r.n,r.B],null,null),(t()(),r.xb(122,0,null,0,2,"ion-label",[],null,null,null,i.X,i.q)),r.wb(123,49152,null,0,o.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Parking for Rigs"])),(t()(),r.xb(125,0,null,0,18,"ion-select",[["formControlName","parking"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(t,e,n){var i=!0;return"ionBlur"===e&&(i=!1!==r.Jb(t,127)._handleBlurEvent(n.target)&&i),"ionChange"===e&&(i=!1!==r.Jb(t,127)._handleChangeEvent(n.target)&&i),i},i.eb,i.w)),r.wb(126,49152,null,0,o.kb,[r.i,r.n,r.B],null,null),r.wb(127,16384,null,0,o.Lb,[r.n],null,null),r.Ob(1024,null,s.g,function(t){return[t]},[o.Lb]),r.wb(129,671744,null,0,s.c,[[3,s.a],[8,null],[8,null],[6,s.g],[2,s.r]],{name:[0,"name"]},null),r.Ob(2048,null,s.h,null,[s.c]),r.wb(131,16384,null,0,s.i,[[4,s.h]],null,null),(t()(),r.xb(132,0,null,0,2,"ion-select-option",[["value",""]],null,null,null,i.db,i.x)),r.wb(133,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["All"])),(t()(),r.xb(135,0,null,0,2,"ion-select-option",[["value","Plenty"]],null,null,null,i.db,i.x)),r.wb(136,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Plenty"])),(t()(),r.xb(138,0,null,0,2,"ion-select-option",[["value","Limited"]],null,null,null,i.db,i.x)),r.wb(139,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["Limited"])),(t()(),r.xb(141,0,null,0,2,"ion-select-option",[["value","None"]],null,null,null,i.db,i.x)),r.wb(142,49152,null,0,o.lb,[r.i,r.n,r.B],{value:[0,"value"]},null),(t()(),r.Rb(-1,0,["None"])),(t()(),r.xb(144,0,null,0,6,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(145,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(146,0,null,0,4,"ion-col",[],null,null,null,i.O,i.h)),r.wb(147,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(148,0,null,0,2,"ion-button",[["type","submit"]],null,null,null,i.I,i.b)),r.wb(149,49152,null,0,o.i,[r.i,r.n,r.B],{type:[0,"type"]},null),(t()(),r.Rb(-1,0,["Filter Trails"]))],function(t,e){var n=e.component;t(e,2,0,n.myForm),t(e,10,0,!n.nameElementHidden),t(e,12,0,"6"),t(e,19,0,"All"),t(e,22,0,"difficulty"),t(e,26,0,""),t(e,29,0,"Easy"),t(e,32,0,"Intermediate"),t(e,35,0,"Extreme"),t(e,38,0,"6"),t(e,45,0,"All"),t(e,48,0,"waterCrossings"),t(e,52,0,""),t(e,55,0,"Puddles"),t(e,58,0,"Streams"),t(e,61,0,"Rivers"),t(e,64,0,"6"),t(e,74,0,"bridges"),t(e,78,0,""),t(e,81,0,"High"),t(e,84,0,"Low"),t(e,87,0,"Scary"),t(e,90,0,"6"),t(e,100,0,"footing"),t(e,104,0,""),t(e,107,0,"Carriage"),t(e,110,0,"Sandy"),t(e,113,0,"Muddy"),t(e,116,0,"Rocky"),t(e,119,0,"6"),t(e,129,0,"parking"),t(e,133,0,""),t(e,136,0,"Plenty"),t(e,139,0,"Limited"),t(e,142,0,"None"),t(e,149,0,"submit")},function(t,e){t(e,0,0,r.Jb(e,4).ngClassUntouched,r.Jb(e,4).ngClassTouched,r.Jb(e,4).ngClassPristine,r.Jb(e,4).ngClassDirty,r.Jb(e,4).ngClassValid,r.Jb(e,4).ngClassInvalid,r.Jb(e,4).ngClassPending),t(e,18,0,r.Jb(e,24).ngClassUntouched,r.Jb(e,24).ngClassTouched,r.Jb(e,24).ngClassPristine,r.Jb(e,24).ngClassDirty,r.Jb(e,24).ngClassValid,r.Jb(e,24).ngClassInvalid,r.Jb(e,24).ngClassPending),t(e,44,0,r.Jb(e,50).ngClassUntouched,r.Jb(e,50).ngClassTouched,r.Jb(e,50).ngClassPristine,r.Jb(e,50).ngClassDirty,r.Jb(e,50).ngClassValid,r.Jb(e,50).ngClassInvalid,r.Jb(e,50).ngClassPending),t(e,70,0,r.Jb(e,76).ngClassUntouched,r.Jb(e,76).ngClassTouched,r.Jb(e,76).ngClassPristine,r.Jb(e,76).ngClassDirty,r.Jb(e,76).ngClassValid,r.Jb(e,76).ngClassInvalid,r.Jb(e,76).ngClassPending),t(e,96,0,r.Jb(e,102).ngClassUntouched,r.Jb(e,102).ngClassTouched,r.Jb(e,102).ngClassPristine,r.Jb(e,102).ngClassDirty,r.Jb(e,102).ngClassValid,r.Jb(e,102).ngClassInvalid,r.Jb(e,102).ngClassPending),t(e,125,0,r.Jb(e,131).ngClassUntouched,r.Jb(e,131).ngClassTouched,r.Jb(e,131).ngClassPristine,r.Jb(e,131).ngClassDirty,r.Jb(e,131).ngClassValid,r.Jb(e,131).ngClassInvalid,r.Jb(e,131).ngClassPending)})}function f(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-trail-search-form",[],null,null,null,d,c)),r.wb(1,114688,null,0,l.a,[s.b,u.a],null,null)],function(t,e){t(e,1,0)},null)}var p=r.tb("app-trail-search-form",l.a,f,{nameElementHidden:"nameElementHidden"},{submitForm:"submitForm"},[])},vfXG:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SVse"),o=n("oBZk"),s=n("ZZ/e"),a=n("Y8sq"),l=n("Q+Hy");n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return d});var u=r.vb({encapsulation:0,styles:[['.title[_ngcontent-%COMP%]{font-family:"Samsung Sharp Sans";font-weight:800;color:#373838}.author[_ngcontent-%COMP%]{font-family:Futura;font-weight:590;color:#373838;font-size:2em;margin-bottom:.3em}.date[_ngcontent-%COMP%]{font-family:Futura;font-weight:400;color:#373838;font-size:1.3em;margin-bottom:.3em}.description[_ngcontent-%COMP%]{color:#373838;font-size:1.4em}ion-card[_ngcontent-%COMP%]{margin:auto;max-width:80%;padding:10px;box-shadow:none!important;border-bottom:2px solid #e8e8e8}']],data:{}});function c(t){return r.Tb(0,[r.Lb(0,i.e,[r.w]),(t()(),r.xb(1,0,null,null,27,"ion-card",[],null,null,null,o.M,o.d)),r.wb(2,49152,null,0,s.k,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,25,"ion-grid",[],null,null,null,o.S,o.l)),r.wb(4,49152,null,0,s.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(5,0,null,0,13,"ion-row",[],null,null,null,o.bb,o.u)),r.wb(6,49152,null,0,s.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(7,0,null,0,4,"ion-col",[],null,null,null,o.O,o.h)),r.wb(8,49152,null,0,s.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(9,0,null,0,2,"h1",[["class","title"]],null,null,null,null,null)),(t()(),r.Rb(10,null,["",""])),r.Lb(0,i.t,[]),(t()(),r.xb(12,0,null,0,3,"ion-col",[],null,null,null,o.O,o.h)),r.wb(13,49152,null,0,s.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(14,0,null,0,1,"div",[["class","description"]],[[8,"innerHTML",1]],null,null,null,null)),r.Lb(0,i.t,[]),(t()(),r.xb(16,0,null,0,2,"ion-col",[],null,null,null,o.O,o.h)),r.wb(17,49152,null,0,s.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(18,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),r.xb(19,0,null,0,9,"ion-row",[],null,null,null,o.bb,o.u)),r.wb(20,49152,null,0,s.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(21,0,null,0,7,"ion-col",[],null,null,null,o.O,o.h)),r.wb(22,49152,null,0,s.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(23,0,null,0,2,"p",[["class","author"]],null,null,null,null,null)),(t()(),r.Rb(24,null,["",""])),r.Lb(131072,i.b,[r.i]),(t()(),r.xb(26,0,null,0,2,"p",[["class","date"]],null,null,null,null,null)),(t()(),r.Rb(27,null,["",""])),r.Nb(28,2)],null,function(t,e){var n,i=e.component;t(e,10,0,r.Sb(e,10,0,r.Jb(e,11).transform(null==i.blog?null:i.blog.title,0,100))),t(e,14,0,r.Sb(e,14,0,r.Jb(e,15).transform(null==i.blog?null:i.blog.description,0,100))),t(e,18,0,null==i.blog?null:i.blog.pictureUrl),t(e,24,0,null==(n=r.Sb(e,24,0,r.Jb(e,25).transform(i.userData$)))?null:n.name);var o=r.Sb(e,27,0,t(e,28,0,r.Jb(e,0),null==i.blog?null:i.blog.dateTime,"mediumDate"));t(e,27,0,o)})}function h(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-blog-post",[],null,null,null,c,u)),r.wb(1,638976,null,0,a.a,[l.a],null,null)],function(t,e){t(e,1,0)},null)}var d=r.tb("app-blog-post",a.a,h,{blog:"blog"},{onRemoveButton:"onRemoveButton"},[])},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new l(t,this.nextOrObserver,this.error,this.complete))}}class l extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new l(t))}}class l{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class u extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const c=class extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>a()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,h);return r.source=e,r.subjectFactory=n,r}}(f)(t))}n.d(e,"a",function(){return p})},weex:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("mrSG"),i=n("s7LF");n("ajt+"),n("ZZ/e");class o{constructor(t,e,n,r){this.fb=t,this.db=e,this.popoverCtrl=n,this.toastCtrl=r,this.myForm=this.fb.group({name:[""],address:[""],description:[""],url:[""],type:["",i.o.required]})}ngOnInit(){}submit(){return r.__awaiter(this,void 0,void 0,function*(){yield this.db.pushObjectAtPath("newBusinessRequests",this.myForm.value),(yield this.toastCtrl.create({message:"Request submitted!",duration:1500})).present(),this.popoverCtrl.dismiss()})}}},wgVs:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("oBZk"),o=n("ZZ/e"),s=n("8lbj");n.d(e,"b",function(){return a}),n.d(e,"c",function(){return l}),n.d(e,"a",function(){return c});var a=r.vb({encapsulation:0,styles:[["ion-row[_ngcontent-%COMP%]{text-align:center}.footer-body[_ngcontent-%COMP%]{height:10vh;background:-webkit-gradient(linear,left top,left bottom,from(#fffeff),to(#ffe8d2));background:linear-gradient(to bottom,#fffeff,#ffe8d2)}"]],data:{}});function l(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,9,"ion-footer",[["class","footer-body"],["no-border",""]],null,null,null,i.R,i.k)),r.wb(1,49152,null,0,o.x,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,7,"ion-grid",[],null,null,null,i.S,i.l)),r.wb(3,49152,null,0,o.y,[r.i,r.n,r.B],null,null),(t()(),r.xb(4,0,null,0,5,"ion-row",[],null,null,null,i.bb,i.u)),r.wb(5,49152,null,0,o.gb,[r.i,r.n,r.B],null,null),(t()(),r.xb(6,0,null,0,3,"ion-col",[["align-items-center",""],["align-self-end",""]],null,null,null,i.O,i.h)),r.wb(7,49152,null,0,o.r,[r.i,r.n,r.B],null,null),(t()(),r.xb(8,0,null,0,1,"p",[],null,null,null,null,null)),(t()(),r.Rb(9,null,[" \xa9 2019 High Horse Drifter "," "]))],null,function(t,e){t(e,9,0,e.component.versionString)})}function u(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-pwa-nav-footer",[],null,null,null,l,a)),r.wb(1,114688,null,0,s.a,[o.Eb],null,null)],function(t,e){t(e,1,0)},null)}var c=r.tb("app-pwa-nav-footer",s.a,u,{},{},[])},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=n("zVF4"),s=n("q/0M"),a=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new o.ErrorFactory("app","Firebase",a),u="[DEFAULT]",c=[],h=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){c.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){c=c.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(t.services_[i]);o<s.length;o++)e.push(t.services_[i][s[o]]);return Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=u),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==u?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=u),this.services_[t]&&this.services_[t][e]&&delete this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(c.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),c=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var d=new s.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=function t(){var e=function(t){var e={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var s=r;void 0===s.name&&(s.name=u);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw l.create("duplicate-app",{appName:a});var h=new t(n,s,i);return e[a]=h,c(h,"create"),h},app:s,apps:null,SDK_VERSION:"6.4.1",INTERNAL:{registerService:function(e,u,c,h,f){if(void 0===f&&(f=!1),n[e])return d.debug("There were multiple attempts to register service "+e+"."),i[e];function p(t){if(void 0===t&&(t=s()),"function"!=typeof t[e])throw l.create("invalid-app-argument",{appName:e});return t[e]()}return n[e]=u,h&&(r[e]=h,a().forEach(function(t){h("create",t)})),void 0!==c&&o.deepExtend(p,c),i[e]=p,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._getService.bind(this,e);return r.apply(this,f?t:[])},p},removeApp:function(t){c(e[t],"delete"),delete e[t]},factories:n,useAsService:h}};function s(t){if(!o.contains(e,t=t||u))throw l.create("no-app",{appName:t});return e[t]}function a(){return Object.keys(e).map(function(t){return e[t]})}function c(t,e){for(var i=0,o=Object.keys(n);i<o.length;i++){var s=h(0,o[i]);if(null===s)return;r[s]&&r[s](e,t)}}function h(t,e){return"serverAuth"===e?null:e}return i.default=i,Object.defineProperty(i,"apps",{get:a}),s.App=t,i}(h);return e.INTERNAL=i.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),g=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,t)};var m=p;e.default=m,e.firebase=m},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",function(){return ar}),n.d(e,"EventType",function(){return lr}),n.d(e,"WebChannel",function(){return ur}),n.d(e,"XhrIo",function(){return cr}),n.d(e,"createWebChannelTransport",function(){return sr});var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(t){return"string"==typeof t}function l(t){return"number"==typeof t}function u(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:v).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function k(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[g]||(this[g]=++m))},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function x(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var I,D=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function P(t,e){return-1!=t.indexOf(e)}function O(t,e){return t<e?-1:t>e?1:0}t:{var N=s.navigator;if(N){var R=N.userAgent;if(R){I=R;break t}}I=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function B(t){return B[" "](t),t}B[" "]=c;var V,U,z=P(I,"Opera"),q=P(I,"Trident")||P(I,"MSIE"),H=P(I,"Edge"),$=H||q,W=P(I,"Gecko")&&!(P(I.toLowerCase(),"webkit")&&!P(I,"Edge"))&&!(P(I,"Trident")||P(I,"MSIE"))&&!P(I,"Edge"),J=P(I.toLowerCase(),"webkit")&&!P(I,"Edge");function G(){var t=s.document;return t?t.documentMode:void 0}t:{var Q="",K=(U=I,W?/rv:([^\);]+)(\)|;)/.exec(U):H?/Edge\/([\d\.]+)/.exec(U):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):J?/WebKit\/(\S+)/.exec(U):z?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(K&&(Q=K?K[1]:""),q){var Y=G();if(null!=Y&&Y>parseFloat(Q)){V=String(Y);break t}}V=Q}var X,Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=D(String(V)).split("."),r=D(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=O(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==s[2].length,0==a[2].length)||O(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var et=s.document;X=et&&q?G()||("CSS1Compat"==et.compatMode?parseInt(V,10):5):void 0;var nt=!q||9<=Number(X),rt=q&&!tt("9"),it=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{B(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},k(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var lt="closure_listenable_"+(1e6*Math.random()|0),ut=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ut,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function dt(t){this.src=t,this.a={},this.b=0}function ft(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=pt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ct(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),mt={};function bt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(d(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Et(r),e&&e[lt]?e.Ba(n,r,p(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(d(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Et(n),t&&t[lt]?t.Aa(e,n,p(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i;if(s&&!nt)return null;var a=kt(t);if(a||(t[gt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=_t,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t){if(!l(t)&&t&&!t.X){var e=t.src;if(e&&e[lt])ft(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kt(e))?(ft(n,t),0==n.b&&(n.src=null,e[gt]=null)):ht(t)}}}function wt(t){return t in mt?mt[t]:mt[t]="on"+t}function _t(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&yt(t),n.call(r,e)}(t,nt?new st(e,this):e=new st(e||u("window.event"),this))}function kt(t){return(t=t[gt])instanceof dt?t:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"==h(t)?t:(t[Ct]||(t[Ct]=function(e){return t.handleEvent(e)}),t[Ct])}function St(){C.call(this),this.c=new dt(this),this.J=this,this.B=null}function Tt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,l=s.da||s.src;s.Z&&ft(t.c,s),i=!1!==a.call(l,r)&&i}}return i&&0!=r.Ja}k(St,C),St.prototype[lt]=!0,(r=St.prototype).addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(d(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=Et(r),e&&e[lt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=pt(s=e.a[n],r,i,o))&&(ht(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=kt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=pt(n,r,i,o)),(r=-1<e?n[e]:null)&&yt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(a(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;j(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Tt(s,r,!0,t)&&i}if(i=Tt(s=t.a=n,r,!0,t)&&i,i=Tt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tt(s=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(St.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=s.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function It(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Dt,Pt=new At(function(){return new Nt},function(t){t.reset()});function Ot(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Nt(){this.next=this.b=this.a=null}function Rt(t){s.setTimeout(function(){throw t},0)}function Mt(t,e){Dt||function(){var t=s.Promise.resolve(void 0);Dt=function(){t.then(jt)}}(),Lt||(Dt(),Lt=!0),Ft.add(t,e)}It.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Nt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Nt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Ft=new It;function jt(){for(var t;t=Ot();){try{t.a.call(t.b)}catch(n){Rt(n)}var e=Pt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Bt(t,e){St.call(this),this.b=t||1,this.a=e||s,this.f=y(this.gb,this),this.g=_()}function Vt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Ut(t,e,n){if("function"==h(t))n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function zt(t,e,n){C.call(this),this.f=null!=n?y(t,n):t,this.c=e,this.b=y(this.ab,this),this.a=[]}function qt(t){t.U=Ut(t.b,t.c),t.f.apply(null,t.a)}function Ht(t){C.call(this),this.b=t,this.a={}}k(Bt,St),(r=Bt.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=_()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Vt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){Bt.N.G.call(this),Vt(this),delete this.a},k(zt,C),(r=zt.prototype).ea=!1,r.U=null,r.Ua=function(t){this.a=arguments,this.U?this.ea=!0:qt(this)},r.G=function(){zt.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,qt(this))},k(Ht,C);var $t=[];function Wt(t,e,n,r){d(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Jt(t){M(t.a,function(t,e){this.a.hasOwnProperty(e)&&yt(t)},t),t.a={}}function Gt(){}Ht.prototype.G=function(){Ht.N.G.call(this),Jt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=new St;function Kt(t){ot.call(this,"serverreachability",t)}function Yt(t){Qt.dispatchEvent(new Kt(Qt,t))}function Xt(t){ot.call(this,"statevent",t)}function Zt(t){Qt.dispatchEvent(new Xt(Qt,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}k(Kt,ot),k(Xt,ot),k(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var se,ae={OPEN:"a",ib:"b",Na:"c",rb:"d"};function le(){ot.call(this,"d")}function ue(){ot.call(this,"c")}function ce(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Ht(this),this.O=de,this.P=new Bt(t=$?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}k(le,ot),k(ue,ot),k(ce,ie),se=new ce;var de=45e3,fe={},pe={};function ge(t,e,n){t.F=1,t.f=Ve(Ne(e)),t.l=n,t.H=!0,be(t,null)}function me(t,e,n,r){t.F=1,t.f=Ve(Ne(e)),t.l=null,t.H=n,be(t,r)}function be(t,e){t.v=_(),we(t),t.D=Ne(t.f),Be(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new zt(y(t.Ka,t,t.a),t.J)),Wt(t.I,t.a,"readystatechange",t.eb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Yt(1)}function ve(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=ye(t,n);if(i==pe){4==e&&(t.c=4,Zt(14),r=!1);break}if(i==fe){t.c=4,Zt(15),r=!1;break}Se(t,i)}4==e&&0==n.length&&(t.c=1,Zt(16),r=!1),t.b=t.b&&r,r||(Ee(t),Ce(t))}function ye(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?fe:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function we(t){t.R=_()+t.O,_e(t,t.O)}function _e(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(y(t.bb,t),e)}function ke(t){t.i&&(s.clearTimeout(t.i),t.i=null)}function Ce(t){t.g.Da()||t.m||t.g.na(t)}function Ee(t){ke(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Vt(t.P),Jt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Se(t,e){try{t.g.Ga(t,e),Yt(4)}catch(n){}}function Te(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||a(t))S(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(f(t)||a(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t,e){De(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ie(t))}function Ie(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];De(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)De(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function De(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.eb=function(t){t=t.target;var e=this.B;e&&3==Nn(t)?e.Ua():this.Ka(t)},r.Ka=function(t){try{if(t==this.a)t:{var e=Nn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!$&&!this.a.aa())){this.m||4!=e||7==n||Yt(8==n||0>=r?3:2),ke(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=Rn(this.a,"X-HTTP-Initial-Response");if(s&&!A(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Zt(12),Ee(this),Ce(this);break t}this.s=!0,Se(this,a)}this.H?(ve(this,e,o),$&&this.b&&3==e&&(Wt(this.I,this.P,"tick",this.cb),this.P.start())):Se(this,o),4==e&&Ee(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,we(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Zt(12)):(this.c=0,Zt(13)),Ee(this),Ce(this)}}}catch(l){}},r.cb=function(){if(this.a){var t=Nn(this.a),e=this.a.aa();this.A<e.length&&(ke(this),ve(this,t,e),this.b&&4!=t&&we(this))}},r.cancel=function(){this.m=!0,Ee(this)},r.bb=function(){this.i=null;var t=_();0<=t-this.R?(2!=this.F&&(Yt(3),Zt(17)),Ee(this),this.c=2,Ce(this)):_e(this,this.R-t)},(r=xe.prototype).C=function(){Ie(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return Ie(this),this.a.concat()},r.get=function(t,e){return De(this.b,t)?this.b[t]:e},r.set=function(t,e){De(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Oe?(this.h=void 0!==e?e:t.h,Re(this,t.f),this.j=t.j,Me(this,t.b),Le(this,t.i),this.a=t.a,Fe(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Pe))?(this.h=!!e,Re(this,n[1]||"",!0),this.j=Ue(n[2]||""),Me(this,n[3]||"",!0),Le(this,n[4]),this.a=Ue(n[5]||"",!0),Fe(this,n[6]||"",!0),this.g=Ue(n[7]||"")):(this.h=!!e,this.c=new Qe(null,this.h))}function Ne(t){return new Oe(t)}function Re(t,e,n){t.f=n?Ue(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Me(t,e,n){t.b=n?Ue(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Fe(t,e,n){e instanceof Qe?(t.c=e,function(t,e){e&&!t.f&&(Ke(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ye(this,e),Ze(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=ze(e,Je)),t.c=new Qe(e,t.h))}function je(t,e,n){t.c.set(e,n)}function Be(t,e,n){d(n)||(n=[String(n)]),Ze(t.c,e,n)}function Ve(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function Ue(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return a(t)?(t=encodeURI(t).replace(e,qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ze(e,He,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ze(e,He,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?We:$e,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",ze(n,Ge)),t.join("")},Oe.prototype.resolve=function(t){var e=Ne(this),n=!!t.f;n?Re(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Me(e,t.b):n=null!=t.i;var r=t.a;if(n)Le(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(P(i,"./")||P(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Fe(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var He=/[#\/\?@]/g,$e=/[#\?:]/g,We=/[#\?]/g,Je=/[#\?@]/g,Ge=/#/g;function Qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ke(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ye(t,e){Ke(t),e=en(t,e),De(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function Xe(t,e){return Ke(t),e=en(t,e),De(t.a.b,e)}function Ze(t,e,n){Ye(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),x(n)),t.b+=n.length)}function tn(t){var e=new Qe;return e.c=t.c,t.a&&(e.a=new xe(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)Zt(4),e?(Zt(10),Wn(t.a,t,!1)):(Zt(11),Wn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Yn(e=t.a,e.Y()?t.f:null,t.i),Zt(4),Be(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&je(e,n,r),me(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function sn(){this.a=new xe}function an(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[g]||(t[g]=++m)):e.charAt(0)+t}function ln(t,e){this.b=t,this.a=e}function un(t){this.g=t||cn,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.ka&&s.ka.Ea&&s.ka.Ea()&&s.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=Qe.prototype).add=function(t,e){Ke(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ke(this),this.a.forEach(function(n,r){S(n,function(n){t.call(e,n,r,this)},this)},this)},r.K=function(){Ke(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Ke(this);var e=[];if(a(t))Xe(this,t)&&(e=T(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},r.set=function(t,e){return Ke(this),this.c=null,Xe(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},k(function(){},function(){}),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Rn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Rn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Qn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Qn(e,2)}else 1==this.M&&(this.g?Zt(6):"11111"==e?(Zt(5),this.g=!0,(!q||10<=Number(X))&&(this.c=200,this.b.cancel(),Zt(11),Wn(this.a,this,!0))):(Zt(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Zt(11),Wn(this.a,this,!0)):(Zt(10),Wn(this.a,this,!1)));else{0==this.M?Zt(8):1==this.M&&Zt(9);var t=this.a;t.m=this.c,Qn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(t){this.a.set(an(t),t)},sn.prototype.C=function(){return this.a.C()};var cn=10;function hn(t,e){!t.a&&(P(e,"spdy")||P(e,"quic")||P(e,"h2"))&&(t.f=t.g,t.a=new sn,t.b&&(gn(t,t.b),t.b=null))}function dn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function fn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t.b?t=t.b==e:t.a?(e=an(e),t=De(t.a.a.b,e)):t=!1,t}function gn(t,e){t.a?t.a.add(e):t.b=e}function mn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=an(e),n=De(t.a.a.b,n)),n&&Ae(t.a.a,an(e)))}function bn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return S(t.a.C(),function(t){e=e.concat(t.j)}),e}return x(t.c)}function vn(){}function yn(){this.a=new vn}function wn(t,e,n){var r=n||"";try{Te(t,function(t,n){var i=t;p(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _n(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}un.prototype.cancel=function(){this.c=bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(S(this.a.C(),function(t){t.cancel()}),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},vn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var kn=s.JSON.parse;function Cn(t){St.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}k(Cn,St);var En="",Sn=/^https?$/i,Tn=["POST","PUT"];function xn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,In(t),Pn(t)}function In(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Dn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Nn(t)||2!=t.T()))if(t.l&&4==Nn(t))Ut(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==Nn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.A).match(Pe)[1]||null;if(!a&&s.self&&s.self.location){var l=s.self.location.protocol;a=l.substr(0,l.length-1)}i=!Sn.test(a?a.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",In(t))}finally{Pn(t)}}}function Pn(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function Nn(t){return t.a?t.a.readyState:0}function Rn(t,e){return t.a?t.a.getResponseHeader(e):null}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return M(n,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return je(t,e,n),t}function Ln(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!u("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new un(t&&t.concurrentRequestLimit),this.ja=new yn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(t){if(jn(t),3==t.u){var e=t.P++,n=Ne(t.B);je(n,"SID",t.H),je(n,"RID",e),je(n,"TYPE","terminate"),zn(t,n),(e=new he(t,e,void 0)).F=2,e.f=Ve(Ne(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=_(),we(e)}Kn(t)}function jn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(s.clearTimeout(t.l),t.l=null),Jn(t),t.b.cancel(),t.h&&(l(t.h)&&s.clearTimeout(t.h),t.h=null)}function Bn(t,e){t.f.push(new ln(t.Ra++,e)),3==t.u&&Vn(t)}function Vn(t){dn(t.b)||t.h||(t.h=!0,Mt(t.Ia,t),t.A=0)}function Un(t,e){var n;n=e?e.W:t.P++;var r=Ne(t.B);je(r,"SID",t.H),je(r,"RID",n),je(r,"AID",t.O),zn(t,r),t.g&&t.i&&Mn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),gn(t.b,n),ge(n,r,e)}function zn(t,e){t.c&&Te({},function(t,n){je(e,n,t)})}function qn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?y(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,l=0;l<n;l++){var u=i[l].b,c=i[l].a;if(0>(u-=o))o=Math.max(0,i[l].b-100),a=!1;else try{wn(c,s,"req"+u+"_")}catch(h){r&&r(c)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Hn(t){t.a||t.l||(t.S=1,Mt(t.Ha,t),t.v=0)}function $n(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(y(t.Ha,t),Gn(t,t.v)),t.v++,0))}function Wn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Yn(t,null,t.ha),Vn(t)}function Jn(t){null!=t.s&&(s.clearTimeout(t.s),t.s=null)}function Gn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function Qn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=y(t.fb,t);n||(n=new Oe("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Re(n,"https"),Ve(n)),function(t,e){var n=new Gt;if(s.Image){var r=new Image;r.onload=w(_n,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(_n,n,r,"TestLoadImage: error",!1,e),r.onabort=w(_n,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(_n,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.u=0,t.c&&t.c.ta(e),Kn(t),jn(t)}function Kn(t){t.u=0,t.m=-1,t.c&&(0==bn(t.b).length&&0==t.f.length||(t.b.c.length=0,x(t.f),t.f.length=0),t.c.sa())}function Yn(t,e,n){var r=function(t){return t instanceof Oe?Ne(t):new Oe(t,void 0)}(n);if(""!=r.b)e&&Me(r,e+"."+r.b),Le(r,r.i);else{var i=s.location;r=function(t,e,n,r){var i=new Oe(null,void 0);return t&&Re(i,t),e&&Me(i,e),n&&Le(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,function(t,e){je(r,e,t)}),n=t.I,(e=t.j)&&n&&je(r,e,n),je(r,"VER",t.wa),zn(t,r),r}function Xn(){}function Zn(){if(q&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function tr(t,e){St.call(this),this.a=new Ln(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){ue.call(this),this.status=1}function rr(t){this.a=t}(r=Cn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=y(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void An(this,o)}t=n||"";var i=new xe(this.headers);r&&Te(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=xn,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(i.K()),n=s.FormData&&t instanceof s.FormData,!(0<=E(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return q&&tt(9)&&l(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.Ca,this)):this.m=Ut(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){An(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Pn(this,!0)),Cn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Dn(this):this.$a())},r.$a=function(){Dn(this)},r.T=function(){try{return 2<Nn(this)?this.a.status:-1}catch(U){return-1}},r.za=function(){try{return 2<Nn(this)?this.a.statusText:""}catch(U){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(U){return""}},r.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),kn(e)}},r.ya=function(){return this.h},r.Ya=function(){return a(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?j(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),je(i=Ne(this.B),"RID",t),je(i,"CVER",22),this.o&&this.j&&je(i,"X-HTTP-Session-Id",this.j),zn(this,i),this.g&&r&&Mn(i,this.g,r),gn(this.b,n),this.W?(je(i,"$req",e),je(i,"SID","null"),n.S=!0,ge(n,i,null)):ge(n,i,e),this.u=2}}else 3==this.u&&(t?Un(this,t):0==this.f.length||dn(this.b)||Un(this))},r.Ha=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Ne(this.pa);je(t,"RID","rpc"),je(t,"SID",this.H),je(t,"CI",this.ia?"0":"1"),je(t,"AID",this.O),zn(this,t),je(t,"TYPE","xmlhttp"),this.g&&this.i&&Mn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),me(this.a,t,!0,this.ga)},r.Ga=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Jn(this),this.a.cancel(),this.a=null}$n(this),Zt(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(y(this.Za,this),6e3));if(1>=fn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Qn(this,11)}else if((t.s||this.a==t)&&Jn(this),!A(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&l(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,je(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Yn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(ke(r),we(r)),this.a=r):Hn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Qn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Qn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,$n(this),Zt(19))},r.na=function(t){var e=null;if(this.a==t){Jn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,mn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=_()-t.v,Qt.dispatchEvent(new te(Qt,t.l?t.l.length:0,e,this.A)),Vn(this)):Hn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(fn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ee(y(t.Ia,t,e),Gn(t,t.A)),t.A++,0)))}(this,t)||2==n&&$n(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Qn(this,5);break;case 4:Qn(this,10);break;case 3:Qn(this,6);break;default:Qn(this,2)}}},r.fb=function(t){Zt(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Cn(this.La)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Xn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},Zn.prototype.a=function(t,e){return new tr(t,e)},k(tr,St),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Zt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Mn(e,t.g,t.i)),(t=t.w).i=n,e=Yn(t.a,null,t.i),Zt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Be(e,"MODE","init"),!t.a.o&&t.a.j&&Be(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,me(t.b,e,!1,null),t.M=0)},r.close=function(){Fn(this.a)},r.Xa=function(t){if(a(t)){var e={};e.__data__=t,Bn(this.a,e)}else this.h?((e={}).__data__=xt(t),Bn(this.a,e)):Bn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,tr.N.G.call(this)},k(er,le),k(nr,ue),k(rr,Xn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Zn);Zn.prototype.createWebChannel=Zn.prototype.a,tr.prototype.send=tr.prototype.Xa,tr.prototype.open=tr.prototype.Wa,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",St.prototype.listen=St.prototype.Aa,Cn.prototype.listenOnce=Cn.prototype.Ba,Cn.prototype.getLastError=Cn.prototype.Ya,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getStatusText=Cn.prototype.za,Cn.prototype.getResponseJson=Cn.prototype.Va,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:Cn},sr=or.createWebChannelTransport,ar=or.ErrorCode,lr=or.EventType,ur=or.WebChannel,cr=or.XhrIo;e.default=or},xSm1:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("KOl+");function i(t,e,n,i){return Object(r.c)(t,e,n).apply(this,i)}},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},xgIS:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("DH7j"),o=n("n6bG"),s=n("lJxs");function a(t,e,n,l){return Object(o.a)(n)&&(l=n,n=void 0),l?a(t,e,n).pipe(Object(s.a)(t=>Object(i.a)(t)?l(...t):l(t))):new r.a(r=>{!function t(e,n,r,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,o),s=()=>t.removeEventListener(n,r,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,r,i,o)}i.add(s)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}},xkgV:function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return p}),n.d(e,"b",function(){return a});var r=n("mrSG"),i=n("8Y7J"),o=function(){function t(){this.change=new i.p,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}return t.prototype.defaultId=function(){return this.DEFAULT_ID},t.prototype.register=function(t){null==t.id&&(t.id=this.DEFAULT_ID),this.instances[t.id]?this.updateInstance(t)&&this.change.emit(t.id):(this.instances[t.id]=t,this.change.emit(t.id))},t.prototype.updateInstance=function(t){var e=!1;for(var n in this.instances[t.id])t[n]!==this.instances[t.id][n]&&(this.instances[t.id][n]=t[n],e=!0);return e},t.prototype.getCurrentPage=function(t){if(this.instances[t])return this.instances[t].currentPage},t.prototype.setCurrentPage=function(t,e){if(this.instances[t]){var n=this.instances[t];e<=Math.ceil(n.totalItems/n.itemsPerPage)&&1<=e&&(this.instances[t].currentPage=e,this.change.emit(t))}},t.prototype.setTotalItems=function(t,e){this.instances[t]&&0<=e&&(this.instances[t].totalItems=e,this.change.emit(t))},t.prototype.setItemsPerPage=function(t,e){this.instances[t]&&(this.instances[t].itemsPerPage=e,this.change.emit(t))},t.prototype.getInstance=function(t){return void 0===t&&(t=this.DEFAULT_ID),this.instances[t]?this.clone(this.instances[t]):{}},t.prototype.clone=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t}(),s=Number.MAX_SAFE_INTEGER,a=function(){function t(t){this.service=t,this.state={}}return t.prototype.transform=function(t,e){if(!(t instanceof Array)){var n=e.id||this.service.defaultId();return this.state[n]?this.state[n].slice:t}var r,i,o=e.totalItems&&e.totalItems!==t.length,a=this.createInstance(t,e),l=a.id,u=a.itemsPerPage;if(this.service.register(a),!o&&t instanceof Array){if(this.stateIsIdentical(l,t,r=(a.currentPage-1)*(u=+u||s),i=r+u))return this.state[l].slice;var c=t.slice(r,i);return this.saveState(l,t,c,r,i),this.service.change.emit(l),c}return this.saveState(l,t,t,r,i),t},t.prototype.createInstance=function(t,e){return this.checkConfig(e),{id:null!=e.id?e.id:this.service.defaultId(),itemsPerPage:+e.itemsPerPage||0,currentPage:+e.currentPage||1,totalItems:+e.totalItems||t.length}},t.prototype.checkConfig=function(t){var e=["itemsPerPage","currentPage"].filter(function(e){return!(e in t)});if(0<e.length)throw new Error("PaginatePipe: Argument is missing the following required properties: "+e.join(", "))},t.prototype.saveState=function(t,e,n,r,i){this.state[t]={collection:e,size:e.length,slice:n,start:r,end:i}},t.prototype.stateIsIdentical=function(t,e,n,r){var i=this.state[t];return!!i&&!(i.size!==e.length||i.start!==n||i.end!==r)&&i.slice.every(function(t,r){return t===e[n+r]})},function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([Object(i.G)({name:"paginate",pure:!1}),Object(r.__metadata)("design:paramtypes",[o])],t)}(),l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function c(t){return!!t&&"false"!==t}var h=function(){function t(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new i.p,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}return Object.defineProperty(t.prototype,"directionLinks",{get:function(){return this._directionLinks},set:function(t){this._directionLinks=c(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoHide",{get:function(){return this._autoHide},set:function(t){this._autoHide=c(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"responsive",{get:function(){return this._responsive},set:function(t){this._responsive=c(t)},enumerable:!0,configurable:!0}),l([Object(i.t)(),u("design:type",String)],t.prototype,"id",void 0),l([Object(i.t)(),u("design:type",Number)],t.prototype,"maxSize",void 0),l([Object(i.t)(),u("design:type",Boolean),u("design:paramtypes",[Boolean])],t.prototype,"directionLinks",null),l([Object(i.t)(),u("design:type",Boolean),u("design:paramtypes",[Boolean])],t.prototype,"autoHide",null),l([Object(i.t)(),u("design:type",Boolean),u("design:paramtypes",[Boolean])],t.prototype,"responsive",null),l([Object(i.t)(),u("design:type",String)],t.prototype,"previousLabel",void 0),l([Object(i.t)(),u("design:type",String)],t.prototype,"nextLabel",void 0),l([Object(i.t)(),u("design:type",String)],t.prototype,"screenReaderPaginationLabel",void 0),l([Object(i.t)(),u("design:type",String)],t.prototype,"screenReaderPageLabel",void 0),l([Object(i.t)(),u("design:type",String)],t.prototype,"screenReaderCurrentLabel",void 0),l([Object(i.D)(),u("design:type",i.p)],t.prototype,"pageChange",void 0),l([Object(i.k)({selector:"pagination-controls",template:'\n    <pagination-template  #p="paginationApi"\n                         [id]="id"\n                         [maxSize]="maxSize"\n                         (pageChange)="pageChange.emit($event)">\n    <ul class="ngx-pagination" \n        role="navigation" \n        [attr.aria-label]="screenReaderPaginationLabel" \n        [class.responsive]="responsive"\n        *ngIf="!(autoHide && p.pages.length <= 1)">\n\n        <li class="pagination-previous" [class.disabled]="p.isFirstPage()" *ngIf="directionLinks"> \n            <a tabindex="0" *ngIf="1 < p.getCurrent()" (keyup.enter)="p.previous()" (click)="p.previous()" [attr.aria-label]="previousLabel + \' \' + screenReaderPageLabel">\n                {{ previousLabel }} <span class="show-for-sr">{{ screenReaderPageLabel }}</span>\n            </a>\n            <span *ngIf="p.isFirstPage()">\n                {{ previousLabel }} <span class="show-for-sr">{{ screenReaderPageLabel }}</span>\n            </span>\n        </li> \n\n        <li class="small-screen">\n            {{ p.getCurrent() }} / {{ p.getLastPage() }}\n        </li>\n\n        <li [class.current]="p.getCurrent() === page.value" \n            [class.ellipsis]="page.label === \'...\'"\n            *ngFor="let page of p.pages">\n            <a tabindex="0" (keyup.enter)="p.setCurrent(page.value)" (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">\n                <span class="show-for-sr">{{ screenReaderPageLabel }} </span>\n                <span>{{ (page.label === \'...\') ? page.label : (page.label | number:\'\') }}</span>\n            </a>\n            <ng-container *ngIf="p.getCurrent() === page.value">\n                <span class="show-for-sr">{{ screenReaderCurrentLabel }} </span>\n                <span>{{ (page.label === \'...\') ? page.label : (page.label | number:\'\') }}</span> \n            </ng-container>\n        </li>\n\n        <li class="pagination-next" [class.disabled]="p.isLastPage()" *ngIf="directionLinks">\n            <a tabindex="0" *ngIf="!p.isLastPage()" (keyup.enter)="p.next()" (click)="p.next()" [attr.aria-label]="nextLabel + \' \' + screenReaderPageLabel">\n                 {{ nextLabel }} <span class="show-for-sr">{{ screenReaderPageLabel }}</span>\n            </a>\n            <span *ngIf="p.isLastPage()">\n                 {{ nextLabel }} <span class="show-for-sr">{{ screenReaderPageLabel }}</span>\n            </span>\n        </li>\n\n    </ul>\n    </pagination-template>\n    ',styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],changeDetection:i.h.OnPush,encapsulation:i.T.None})],t)}(),d=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e){var n=this;this.service=t,this.changeDetectorRef=e,this.maxSize=7,this.pageChange=new i.p,this.pages=[],this.changeSub=this.service.change.subscribe(function(t){n.id===t&&(n.updatePageLinks(),n.changeDetectorRef.markForCheck(),n.changeDetectorRef.detectChanges())})}return t.prototype.ngOnInit=function(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()},t.prototype.ngOnChanges=function(t){this.updatePageLinks()},t.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},t.prototype.previous=function(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)},t.prototype.next=function(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)},t.prototype.isFirstPage=function(){return 1===this.getCurrent()},t.prototype.isLastPage=function(){return this.getLastPage()===this.getCurrent()},t.prototype.setCurrent=function(t){this.pageChange.emit(t)},t.prototype.getCurrent=function(){return this.service.getCurrentPage(this.id)},t.prototype.getLastPage=function(){var t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)},t.prototype.getTotalItems=function(){return this.service.getInstance(this.id).totalItems},t.prototype.checkValidId=function(){null==this.service.getInstance(this.id).id&&console.warn('PaginationControlsDirective: the specified id "'+this.id+'" does not match any registered PaginationInstance')},t.prototype.updatePageLinks=function(){var t=this,e=this.service.getInstance(this.id),n=this.outOfBoundCorrection(e);n!==e.currentPage?setTimeout(function(){t.setCurrent(n),t.pages=t.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,t.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)},t.prototype.outOfBoundCorrection=function(t){var e=Math.ceil(t.totalItems/t.itemsPerPage);return e<t.currentPage&&0<e?e:t.currentPage<1?1:t.currentPage},t.prototype.createPageArray=function(t,e,n,r){r=+r;for(var i=[],o=Math.ceil(n/e),s=Math.ceil(r/2),a=t<=s,l=o-s<t,u=!a&&!l,c=r<o,h=1;h<=o&&h<=r;){var d=this.calculatePageNumber(h,t,r,o);i.push({label:c&&(2===h&&(u||l)||h===r-1&&(u||a))?"...":d,value:d}),h++}return i},t.prototype.calculatePageNumber=function(t,e,n,r){var i=Math.ceil(n/2);return t===n?r:1===t?t:n<r?r-i<e?r-n+t:i<e?e-i+t:t:t},d([Object(i.t)(),f("design:type",String)],t.prototype,"id",void 0),d([Object(i.t)(),f("design:type",Number)],t.prototype,"maxSize",void 0),d([Object(i.D)(),f("design:type",i.p)],t.prototype,"pageChange",void 0),d([Object(i.m)({selector:"pagination-template,[pagination-template]",exportAs:"paginationApi"}),f("design:paramtypes",[o,i.i])],t)}(),g=function(){return function(){}}()},"yA/v":function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return h}),n("mrSG");var r,i=n("8Y7J"),o=n("Wcq6"),s=n.n(o);const a=new i.r("angularfire2.app.options"),l=new i.r("angularfire2.app.nameOrConfig");class u{}function c(t,e){const n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",s.a.apps.filter(t=>t&&t.name===n.name)[0]||s.a.initializeApp(t,n)}let h=(()=>r=class{static initializeApp(t,e){return{ngModule:r,providers:[{provide:a,useValue:t},{provide:l,useValue:e}]}}})()},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J"),i=n("AytR");class o{}var s=n("ZZ/e"),a=n("mrSG"),l=n("a3Cf"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.__extends)(e,t),e.prototype.show=function(){return Object(l.cordova)(this,"show",{sync:!0},arguments)},e.prototype.hide=function(){return Object(l.cordova)(this,"hide",{sync:!0},arguments)},e.pluginName="SplashScreen",e.plugin="cordova-plugin-splashscreen",e.pluginRef="navigator.splashscreen",e.repo="https://github.com/apache/cordova-plugin-splashscreen",e.platforms=["Amazon Fire OS","Android","iOS","Windows"],e}(l.IonicNativePlugin),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.__extends)(e,t),e.prototype.overlaysWebView=function(t){return Object(l.cordova)(this,"overlaysWebView",{sync:!0},arguments)},e.prototype.styleDefault=function(){return Object(l.cordova)(this,"styleDefault",{sync:!0},arguments)},e.prototype.styleLightContent=function(){return Object(l.cordova)(this,"styleLightContent",{sync:!0},arguments)},e.prototype.styleBlackTranslucent=function(){return Object(l.cordova)(this,"styleBlackTranslucent",{sync:!0},arguments)},e.prototype.styleBlackOpaque=function(){return Object(l.cordova)(this,"styleBlackOpaque",{sync:!0},arguments)},e.prototype.backgroundColorByName=function(t){return Object(l.cordova)(this,"backgroundColorByName",{sync:!0},arguments)},e.prototype.backgroundColorByHexString=function(t){return Object(l.cordova)(this,"backgroundColorByHexString",{sync:!0},arguments)},e.prototype.hide=function(){return Object(l.cordova)(this,"hide",{sync:!0},arguments)},e.prototype.show=function(){return Object(l.cordova)(this,"show",{sync:!0},arguments)},Object.defineProperty(e.prototype,"isVisible",{get:function(){return Object(l.cordovaPropertyGet)(this,"isVisible")},set:function(t){Object(l.cordovaPropertySet)(this,"isVisible",t)},enumerable:!0,configurable:!0}),e.pluginName="StatusBar",e.plugin="cordova-plugin-statusbar",e.pluginRef="StatusBar",e.repo="https://github.com/apache/cordova-plugin-statusbar",e.platforms=["Android","iOS","Windows"],e}(l.IonicNativePlugin);class h{constructor(t,e,n,r){this.platform=t,this.splashScreen=e,this.statusBar=n,this.router=r,this.initializeApp()}initializeApp(){this.platform.ready().then(()=>{this.statusBar.hide(),this.splashScreen.hide()})}}var d=n("pMnS"),f=n("oBZk");class p{constructor(t){this.platform=t,this.isMobile=this.platform.is("ios")||this.platform.is("android")}ngOnInit(){this.hideTabBar()}hideTopBar(){const t=document.querySelector("ion-toolbar");null!==t&&(t.style.display="none")}hideTabBar(){const t=document.querySelector("ion-tab-bar");null!==t&&(t.style.display="none")}}var g=r.vb({encapsulation:0,styles:[[""]],data:{}});function m(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,26,"div",[],null,null,null,null,null)),(t()(),r.xb(1,0,null,null,25,"ion-tabs",[],null,[[null,"ionTabButtonClick"]],function(t,e,n){var i=!0;return"ionTabButtonClick"===e&&(i=!1!==r.Jb(t,2).select(n.detail.tab)&&i),i},f.kb,f.D)),r.wb(2,49152,null,1,s.tb,[s.Gb],null,null),r.Pb(335544320,1,{tabBar:0}),(t()(),r.xb(4,0,null,1,22,"ion-tab-bar",[["slot","bottom"]],null,null,null,f.ib,f.B)),r.wb(5,49152,[[1,4]],0,s.rb,[r.i,r.n,r.B],null,null),(t()(),r.xb(6,0,null,0,6,"ion-tab-button",[["tab","tab1"]],null,null,null,f.jb,f.C)),r.wb(7,49152,null,0,s.sb,[r.i,r.n,r.B],{tab:[0,"tab"]},null),(t()(),r.xb(8,0,null,0,1,"ion-icon",[["name","flash"]],null,null,null,f.U,f.n)),r.wb(9,49152,null,0,s.A,[r.i,r.n,r.B],{name:[0,"name"]},null),(t()(),r.xb(10,0,null,0,2,"ion-label",[],null,null,null,f.X,f.q)),r.wb(11,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Camps"])),(t()(),r.xb(13,0,null,0,6,"ion-tab-button",[["tab","tab2"]],null,null,null,f.jb,f.C)),r.wb(14,49152,null,0,s.sb,[r.i,r.n,r.B],{tab:[0,"tab"]},null),(t()(),r.xb(15,0,null,0,1,"ion-icon",[["name","apps"]],null,null,null,f.U,f.n)),r.wb(16,49152,null,0,s.A,[r.i,r.n,r.B],{name:[0,"name"]},null),(t()(),r.xb(17,0,null,0,2,"ion-label",[],null,null,null,f.X,f.q)),r.wb(18,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Tab Two"])),(t()(),r.xb(20,0,null,0,6,"ion-tab-button",[["tab","tab3"]],null,null,null,f.jb,f.C)),r.wb(21,49152,null,0,s.sb,[r.i,r.n,r.B],{tab:[0,"tab"]},null),(t()(),r.xb(22,0,null,0,1,"ion-icon",[["name","send"]],null,null,null,f.U,f.n)),r.wb(23,49152,null,0,s.A,[r.i,r.n,r.B],{name:[0,"name"]},null),(t()(),r.xb(24,0,null,0,2,"ion-label",[],null,null,null,f.X,f.q)),r.wb(25,49152,null,0,s.L,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Tab Three"]))],function(t,e){t(e,7,0,"tab1"),t(e,9,0,"flash"),t(e,14,0,"tab2"),t(e,16,0,"apps"),t(e,21,0,"tab3"),t(e,23,0,"send")},null)}function b(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-tabs",[],null,null,null,m,g)),r.wb(1,114688,null,0,p,[s.Ib],null,null)],function(t,e){t(e,1,0)},null)}var v=r.tb("app-tabs",p,b,{},{},[]),y=n("KJyt"),w=n("aCaX"),_=n("U7NT"),k=n("69p7"),C=n("S7Dv"),E=n("60Yi"),S=n("wgVs"),T=n("ZF4u"),x=n("uCxy"),A=n("EYAf"),I=n("tLzv"),D=n("vfXG"),P=n("VrSs"),O=n("7zPs"),N=n("9Vlk"),R=n("qLiL"),M=n("SGgB"),L=n("N2yL"),F=n("iInd"),j=n("SVse"),B=n("lGQG");class V{constructor(t,e,n,r,i,o){this.platform=t,this.router=e,this.modalCtrl=n,this.alertCtrl=r,this.authService=i,this.menuCtrl=o,this.currPageName="Home"}ngOnInit(){this.isPwa=!(this.platform.is("ios")||this.platform.is("android")),this.isAuthorized=this.authService.isAuthorized(),this.isAdmin=this.authService.isAdmin()}toggleMenu(){this.menuCtrl.toggle()}logOut(){return a.__awaiter(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Log out",message:"Are you sure you want to log out?",buttons:[{text:"No"},{text:"Yes",handler:()=>{this.authService.logout().then(()=>{this.router.navigate([""])})}}]})).present()})}routeAndCloseMenu(t,e=""){return a.__awaiter(this,void 0,void 0,function*(){this.router.navigate(t),this.currPageName=e,this.menuCtrl.toggle()})}}var U=r.vb({encapsulation:0,styles:[["ion-router-outlet[_ngcontent-%COMP%]{margin-top:50px}.logo[_ngcontent-%COMP%]{width:10vw;min-width:130px;height:auto}ion-header[_ngcontent-%COMP%]{background-color:#9cf;border:0;box-shadow:none}.signup[_ngcontent-%COMP%]{border-style:solid;border-width:3px}"]],data:{}});function z(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,4,"ion-button",[["routerLink","/admin"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,2).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,3).onClick(n)&&i),i},f.I,f.b)),r.wb(1,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(2,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(3,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Admin"]))],function(t,e){t(e,2,0,"/admin"),t(e,3,0)},null)}function q(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,10,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,4,"ion-button",[["routerLink","/login"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,3).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,4).onClick(n)&&i),i},f.I,f.b)),r.wb(2,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(3,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(4,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Log in"])),(t()(),r.xb(6,0,null,null,4,"ion-button",[["routerLink","/register"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,8).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,9).onClick(n)&&i),i},f.I,f.b)),r.wb(7,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(8,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(9,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Sign up"]))],function(t,e){t(e,3,0,"/login"),t(e,4,0),t(e,8,0,"/register"),t(e,9,0)},null)}function H(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logOut()&&r),r},f.I,f.b)),r.wb(2,49152,null,0,s.i,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Log out"]))],null,null)}function $(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,41,"div",[],null,null,null,null,null)),(t()(),r.xb(1,0,null,null,38,"ion-header",[["no-border",""]],null,null,null,f.T,f.m)),r.wb(2,49152,null,0,s.z,[r.i,r.n,r.B],null,null),(t()(),r.xb(3,0,null,0,36,"ion-toolbar",[],null,null,null,f.nb,f.G)),r.wb(4,49152,null,0,s.zb,[r.i,r.n,r.B],null,null),(t()(),r.xb(5,0,null,0,3,"a",[["routerLink",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,6).onClick(n)&&i),"click"===e&&(i=!1!==r.Jb(t,7).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.wb(6,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),r.wb(7,671744,null,0,F.o,[F.m,F.a,j.j],{routerLink:[0,"routerLink"]},null),(t()(),r.xb(8,0,null,null,0,"img",[["class","logo"],["padding",""],["src","assets/logo.png"]],null,null,null,null,null)),(t()(),r.xb(9,0,null,0,30,"ion-buttons",[["slot","end"]],null,null,null,f.J,f.c)),r.wb(10,49152,null,0,s.j,[r.i,r.n,r.B],null,null),(t()(),r.xb(11,0,null,0,4,"ion-button",[["routerLink","/blog"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,13).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,14).onClick(n)&&i),i},f.I,f.b)),r.wb(12,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(13,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(14,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Blog"])),(t()(),r.mb(16777216,null,0,2,null,z)),r.wb(17,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,j.b,[r.i]),(t()(),r.xb(19,0,null,0,4,"ion-button",[["routerLink","/tabs/places/trails"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,21).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,22).onClick(n)&&i),i},f.I,f.b)),r.wb(20,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(21,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(22,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Trails"])),(t()(),r.xb(24,0,null,0,4,"ion-button",[["routerLink","/tabs/places/camps"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,26).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,27).onClick(n)&&i),i},f.I,f.b)),r.wb(25,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(26,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(27,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Camps"])),(t()(),r.xb(29,0,null,0,4,"ion-button",[["routerLink","/contact"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Jb(t,31).onClick()&&i),"click"===e&&(i=!1!==r.Jb(t,32).onClick(n)&&i),i},f.I,f.b)),r.wb(30,49152,null,0,s.i,[r.i,r.n,r.B],null,null),r.wb(31,16384,null,0,F.n,[F.m,F.a,[8,null],r.H,r.n],{routerLink:[0,"routerLink"]},null),r.wb(32,737280,null,0,s.Kb,[j.j,s.Gb,r.n,F.m,[2,F.n]],null,null),(t()(),r.Rb(-1,0,["Contact"])),(t()(),r.mb(16777216,null,0,2,null,q)),r.wb(35,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,j.b,[r.i]),(t()(),r.mb(16777216,null,0,2,null,H)),r.wb(38,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,j.b,[r.i]),(t()(),r.xb(40,16777216,null,null,1,"ion-router-outlet",[["id","main"],["main",""]],null,null,null,null,null)),r.wb(41,212992,null,0,s.fb,[F.b,r.S,r.l,[8,null],[8,null],s.c,s.Gb,j.i,r.n,F.m,r.B,F.a,[3,s.fb]],null,null)],function(t,e){var n=e.component;t(e,6,0),t(e,7,0,""),t(e,13,0,"/blog"),t(e,14,0),t(e,17,0,r.Sb(e,17,0,r.Jb(e,18).transform(n.isAdmin))),t(e,21,0,"/tabs/places/trails"),t(e,22,0),t(e,26,0,"/tabs/places/camps"),t(e,27,0),t(e,31,0,"/contact"),t(e,32,0),t(e,35,0,!r.Sb(e,35,0,r.Jb(e,36).transform(n.isAuthorized))),t(e,38,0,r.Sb(e,38,0,r.Jb(e,39).transform(n.isAuthorized))),t(e,41,0)},function(t,e){t(e,5,0,r.Jb(e,7).target,r.Jb(e,7).href)})}function W(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/login"],"Login")&&r),r},f.W,f.p)),r.wb(2,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Log in"])),(t()(),r.xb(4,0,null,null,2,"ion-item",[["class","signup"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/register"],"Sign Up")&&r),r},f.W,f.p)),r.wb(5,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Sign up"]))],null,null)}function J(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.xb(1,0,null,null,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logOut()&&r),r},f.W,f.p)),r.wb(2,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Log out"]))],null,null)}function G(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,48,"div",[],null,null,null,null,null)),(t()(),r.xb(1,0,null,null,33,"ion-menu",[["contentID","main"],["side","start"],["type","overlay"]],null,null,null,f.ab,f.s)),r.wb(2,49152,null,0,s.O,[r.i,r.n,r.B],{side:[0,"side"],type:[1,"type"]},null),(t()(),r.xb(3,0,null,0,6,"ion-header",[],null,null,null,f.T,f.m)),r.wb(4,49152,null,0,s.z,[r.i,r.n,r.B],null,null),(t()(),r.xb(5,0,null,0,4,"ion-toolbar",[["color","primary"]],null,null,null,f.nb,f.G)),r.wb(6,49152,null,0,s.zb,[r.i,r.n,r.B],{color:[0,"color"]},null),(t()(),r.xb(7,0,null,0,2,"ion-title",[],null,null,null,f.mb,f.F)),r.wb(8,49152,null,0,s.xb,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Navigation"])),(t()(),r.xb(10,0,null,0,24,"ion-content",[],null,null,null,f.P,f.i)),r.wb(11,49152,null,0,s.s,[r.i,r.n,r.B],null,null),(t()(),r.xb(12,0,null,0,22,"ion-list",[],null,null,null,f.Y,f.r)),r.wb(13,49152,null,0,s.M,[r.i,r.n,r.B],null,null),(t()(),r.xb(14,0,null,0,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/landing"],"Home")&&r),r},f.W,f.p)),r.wb(15,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Home"])),(t()(),r.xb(17,0,null,0,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/blog"],"Blogs")&&r),r},f.W,f.p)),r.wb(18,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Blogs"])),(t()(),r.xb(20,0,null,0,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/tabs/places/trails"],"Trails")&&r),r},f.W,f.p)),r.wb(21,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Trails"])),(t()(),r.xb(23,0,null,0,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/tabs/places/camps"],"Camps")&&r),r},f.W,f.p)),r.wb(24,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Camps"])),(t()(),r.xb(26,0,null,0,2,"ion-item",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.routeAndCloseMenu(["/contact"],"Contact")&&r),r},f.W,f.p)),r.wb(27,49152,null,0,s.F,[r.i,r.n,r.B],null,null),(t()(),r.Rb(-1,0,["Contact"])),(t()(),r.mb(16777216,null,0,2,null,W)),r.wb(30,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,j.b,[r.i]),(t()(),r.mb(16777216,null,0,2,null,J)),r.wb(33,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),r.Lb(131072,j.b,[r.i]),(t()(),r.xb(35,16777216,null,null,1,"ion-router-outlet",[["id","main"],["main",""]],null,null,null,null,null)),r.wb(36,212992,null,0,s.fb,[F.b,r.S,r.l,[8,null],[8,null],s.c,s.Gb,j.i,r.n,F.m,r.B,F.a,[3,s.fb]],null,null),(t()(),r.xb(37,0,null,null,11,"ion-toolbar",[["color","primary"]],null,null,null,f.nb,f.G)),r.wb(38,49152,null,0,s.zb,[r.i,r.n,r.B],{color:[0,"color"]},null),(t()(),r.xb(39,0,null,0,9,"ion-buttons",[],null,null,null,f.J,f.c)),r.wb(40,49152,null,0,s.j,[r.i,r.n,r.B],null,null),(t()(),r.xb(41,0,null,0,7,"ion-menu-toggle",[],null,null,null,f.Z,f.t)),r.wb(42,49152,null,0,s.Q,[r.i,r.n,r.B],null,null),(t()(),r.xb(43,0,null,0,5,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleMenu()&&r),r},f.I,f.b)),r.wb(44,49152,null,0,s.i,[r.i,r.n,r.B],null,null),(t()(),r.xb(45,0,null,0,1,"ion-icon",[["name","menu"]],null,null,null,f.U,f.n)),r.wb(46,49152,null,0,s.A,[r.i,r.n,r.B],{name:[0,"name"]},null),(t()(),r.xb(47,0,null,0,1,"ion-label",[],null,null,null,f.X,f.q)),r.wb(48,49152,null,0,s.L,[r.i,r.n,r.B],null,null)],function(t,e){var n=e.component;t(e,2,0,"start","overlay"),t(e,6,0,"primary"),t(e,30,0,!r.Sb(e,30,0,r.Jb(e,31).transform(n.isAuthorized))),t(e,33,0,r.Sb(e,33,0,r.Jb(e,34).transform(n.isAuthorized))),t(e,36,0),t(e,38,0,"primary"),t(e,46,0,"menu")},null)}function Q(t){return r.Tb(0,[(t()(),r.mb(16777216,null,null,1,null,$)),r.wb(1,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.mb(16777216,null,null,1,null,G)),r.wb(3,16384,null,0,j.m,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.isPwa),t(e,3,0,!n.isPwa)},null)}var K=r.vb({encapsulation:0,styles:[[""]],data:{}});function Y(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,3,"ion-app",[],null,null,null,f.H,f.a)),r.wb(1,49152,null,0,s.d,[r.i,r.n,r.B],null,null),(t()(),r.xb(2,0,null,0,1,"app-pwa-nav-bar",[],null,null,null,Q,U)),r.wb(3,114688,null,0,V,[s.Ib,F.m,s.Fb,s.a,B.a,s.Eb],null,null)],function(t,e){t(e,3,0)},null)}function X(t){return r.Tb(0,[(t()(),r.xb(0,0,null,null,1,"app-root",[],null,null,null,Y,K)),r.wb(1,49152,null,0,h,[s.Ib,u,c,F.m],null,null)],null,null)}var Z=r.tb("app-root",h,X,{},{},[]),tt=n("cUpR"),et=n("yA/v"),nt=n("1XSQ"),rt=n("irV9");n("t6oF");let it=(()=>(class{}))();n("LRne"),n("mCNh");var ot=n("IzEk"),st=n("lJxs");n("eIep");let at=(()=>(class{constructor(t,e){this.afAuth=t,this.router=e}canActivate(t,e){const n=t.data.authGuardPipe||(()=>ut);return this.afAuth.user.pipe(Object(ot.a)(1),n(t,e),Object(st.a)(t=>"boolean"==typeof t?t:this.router.createUrlTree(t)))}}))();const lt=t=>!!t,ut=Object(st.a)(lt);let ct=(()=>(class{}))();var ht=n("PVcy");n("NSPt");let dt=(()=>(class{}))();var ft=n("gJ2e");n("LmZi");let pt=(()=>(class{}))();var gt=n("IheW"),mt=n("s7LF"),bt=n("xkgV"),vt=n("ajt+"),yt=n("4kQV"),wt=n("VMA6"),_t=n("Gon4");const kt=()=>Promise.all([n.e(1),n.e(4)]).then(n.bind(null,"fLL1")).then(t=>t.LandingPageModuleNgFactory),Ct=()=>Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.bind(null,"qI4B")).then(t=>t.Tab1PageModuleNgFactory),Et=()=>Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.bind(null,"qI4B")).then(t=>t.Tab1PageModuleNgFactory),St=()=>n.e(24).then(n.bind(null,"55Gs")).then(t=>t.Tab2PageModuleNgFactory),Tt=()=>n.e(25).then(n.bind(null,"JdsX")).then(t=>t.Tab3PageModuleNgFactory);class xt{}var At=n("gnlj"),It=n("bP1B");class Dt{}class Pt{}var Ot=n("fhSy"),Nt=n("F4UR"),Rt=n("dsYM"),Mt=n("oTFL"),Lt=n("j1ZV"),Ft=n("dh1O"),jt=n("PjcS"),Bt=n("UxCU"),Vt=r.ub(o,[h],function(t){return r.Gb([r.Hb(512,r.l,r.fb,[[8,[d.a,v,y.a,w.a,_.a,k.a,C.a,E.a,S.a,T.a,x.b,A.a,I.a,D.a,P.a,O.a,N.a,R.a,M.a,L.a,Z]],[3,r.l],r.z]),r.Hb(5120,r.w,r.rb,[[3,r.w]]),r.Hb(4608,j.o,j.n,[r.w,[2,j.D]]),r.Hb(5120,r.nb,r.sb,[r.B]),r.Hb(5120,r.c,r.ob,[]),r.Hb(5120,r.u,r.pb,[]),r.Hb(5120,r.v,r.qb,[]),r.Hb(4608,tt.b,tt.k,[j.d]),r.Hb(6144,r.K,null,[tt.b]),r.Hb(4608,tt.e,tt.g,[]),r.Hb(5120,tt.c,function(t,e,n,r,i,o,s,a){return[new tt.i(t,e,n),new tt.n(r),new tt.m(i,o,s,a)]},[j.d,r.B,r.E,j.d,j.d,tt.e,r.gb,[2,tt.f]]),r.Hb(4608,tt.d,tt.d,[tt.c,r.B]),r.Hb(135680,tt.l,tt.l,[j.d]),r.Hb(4608,tt.j,tt.j,[tt.d,tt.l,r.c]),r.Hb(6144,r.I,null,[tt.j]),r.Hb(6144,tt.o,null,[tt.l]),r.Hb(4608,r.Q,r.Q,[r.B]),r.Hb(4608,s.b,s.b,[r.B,r.g]),r.Hb(4608,s.Fb,s.Fb,[s.b,r.l,r.s]),r.Hb(4608,s.Jb,s.Jb,[s.b,r.l,r.s]),r.Hb(5120,F.a,F.A,[F.m]),r.Hb(4608,F.g,F.g,[]),r.Hb(6144,F.h,null,[F.g]),r.Hb(135680,F.r,F.r,[F.m,r.y,r.j,r.s,F.h]),r.Hb(4608,F.e,F.e,[]),r.Hb(5120,F.F,F.w,[F.m,j.w,F.i]),r.Hb(5120,F.j,F.D,[F.B]),r.Hb(5120,r.b,function(t){return[t]},[F.j]),r.Hb(5120,et.b,et.e,[et.d,[2,et.c]]),r.Hb(4608,rt.a,rt.a,[et.d,[2,et.c],r.E,r.B]),r.Hb(4608,at,at,[rt.a,F.m]),r.Hb(4608,ht.a,ht.a,[et.d,[2,et.c],[2,nt.b],r.E,r.B]),r.Hb(4608,ft.a,ft.a,[et.d,[2,et.c],[2,ft.b],r.E,r.B]),r.Hb(4608,gt.h,gt.n,[j.d,r.E,gt.l]),r.Hb(4608,gt.o,gt.o,[gt.h,gt.m]),r.Hb(5120,gt.a,function(t){return[t]},[gt.o]),r.Hb(4608,gt.k,gt.k,[]),r.Hb(6144,gt.i,null,[gt.k]),r.Hb(4608,gt.g,gt.g,[gt.i]),r.Hb(6144,gt.b,null,[gt.g]),r.Hb(4608,gt.f,gt.j,[gt.b,r.s]),r.Hb(4608,gt.c,gt.c,[gt.f]),r.Hb(4608,mt.q,mt.q,[]),r.Hb(4608,mt.b,mt.b,[]),r.Hb(4608,bt.e,bt.e,[]),r.Hb(4608,c,c,[]),r.Hb(4608,u,u,[]),r.Hb(4608,vt.a,vt.a,[ht.a,ft.a]),r.Hb(4608,yt.a,yt.a,[vt.a,wt.a]),r.Hb(4608,_t.a,_t.a,[gt.c]),r.Hb(1073742336,j.c,j.c,[]),r.Hb(1024,r.o,tt.p,[]),r.Hb(1024,r.A,function(){return[F.v()]},[]),r.Hb(512,F.B,F.B,[r.s]),r.Hb(256,s.Ob,void 0,[]),r.Hb(1024,r.d,function(t,e,n,r,i){return[tt.q(t),F.C(e),s.Pb(n,r,i)]},[[2,r.A],F.B,s.Ob,j.d,r.B]),r.Hb(512,r.e,r.e,[[2,r.d]]),r.Hb(131584,r.g,r.g,[r.B,r.gb,r.s,r.o,r.l,r.e]),r.Hb(1073742336,r.f,r.f,[r.g]),r.Hb(1073742336,tt.a,tt.a,[[3,tt.a]]),r.Hb(1073742336,s.Bb,s.Bb,[]),r.Hb(1024,F.u,F.y,[[3,F.m]]),r.Hb(512,F.t,F.c,[]),r.Hb(512,F.b,F.b,[]),r.Hb(256,F.i,{preloadingStrategy:F.g},[]),r.Hb(1024,j.j,F.x,[j.s,[2,j.a],F.i]),r.Hb(512,j.i,j.i,[j.j,j.s]),r.Hb(512,r.j,r.j,[]),r.Hb(512,r.y,r.N,[r.j,[2,r.O]]),r.Hb(1024,F.k,function(){return[[{path:"",redirectTo:"/landing",pathMatch:"full"},{path:"camp-info/:id",loadChildren:"./pages/camp-info/camp-info.module#CampInfoPageModule",pathMatch:"full"},{path:"landing",loadChildren:"./pages/landing/landing.module#LandingPageModule"},{path:"login",loadChildren:"./pages/login/login.module#LoginPageModule"},{path:"register",loadChildren:"./pages/register/register.module#RegisterPageModule"},{path:"launch",loadChildren:"./pages/launch/launch.module#LaunchPageModule"},{path:"admin",loadChildren:"./pages/admin/admin.module#AdminPageModule"},{path:"blog",loadChildren:"./pages/blog/blog.module#BlogPageModule"},{path:"blog-info/:id",loadChildren:"./pages/blog-info/blog-info.module#BlogInfoPageModule"},{path:"contact",loadChildren:"./pages/contact/contact.module#ContactPageModule"}],[{path:"tabs",component:p,children:[{path:"home",loadChildren:kt},{path:"tab1",children:[{path:"",loadChildren:Ct}]},{path:"places/:source",children:[{path:"",loadChildren:Et}]},{path:"tab2",children:[{path:"",loadChildren:St}]},{path:"tab3",children:[{path:"",loadChildren:Tt}]},{path:"",redirectTo:"/tabs/tab1",pathMatch:"full"}]}],[{path:"",component:At.a}],[{path:"",component:It.a}]]},[]),r.Hb(512,F.l,s.Cb,[]),r.Hb(1024,F.m,F.z,[r.g,F.t,F.b,j.i,r.s,r.y,r.j,F.k,F.i,[2,F.s],[2,F.l]]),r.Hb(1073742336,F.p,F.p,[[2,F.u],[2,F.m]]),r.Hb(1073742336,Dt,Dt,[]),r.Hb(1073742336,et.a,et.a,[]),r.Hb(1073742336,it,it,[]),r.Hb(1073742336,ct,ct,[]),r.Hb(1073742336,dt,dt,[]),r.Hb(1073742336,pt,pt,[]),r.Hb(1073742336,gt.e,gt.e,[]),r.Hb(1073742336,gt.d,gt.d,[]),r.Hb(1073742336,mt.p,mt.p,[]),r.Hb(1073742336,mt.e,mt.e,[]),r.Hb(1073742336,xt,xt,[]),r.Hb(1073742336,Pt,Pt,[]),r.Hb(1073742336,Ot.a,Ot.a,[]),r.Hb(1073742336,Nt.a,Nt.a,[]),r.Hb(1073742336,Rt.b,Rt.b,[]),r.Hb(1073742336,mt.m,mt.m,[]),r.Hb(1073742336,Mt.a,Mt.a,[]),r.Hb(1073742336,Lt.a,Lt.a,[]),r.Hb(1073742336,Ft.b,Ft.b,[]),r.Hb(1073742336,bt.a,bt.a,[]),r.Hb(1073742336,jt.b,jt.b,[]),r.Hb(1073742336,Bt.a,Bt.a,[]),r.Hb(1073742336,o,o,[]),r.Hb(256,r.eb,!0,[]),r.Hb(256,et.d,{apiKey:"AIzaSyA9WtOMm-vC_4oTp89ixutagUJWpYR3Ry0",authDomain:"horse-riding-app.firebaseapp.com",databaseURL:"https://horse-riding-app.firebaseio.com",projectId:"horse-riding-app",storageBucket:"",messagingSenderId:"215364264641",appId:"1:215364264641:web:75095f272cfe5cba"},[]),r.Hb(256,et.c,void 0,[]),r.Hb(256,gt.l,"XSRF-TOKEN",[]),r.Hb(256,gt.m,"X-XSRF-TOKEN",[])])});i.a.production&&Object(r.X)(),tt.h().bootstrapModuleFactory(Vt).catch(t=>console.log(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=(15&a)<<2|u>>6,h=63&u;l||(h=64,s||(c=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,l=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==l)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==l&&r.push(a<<6&192|l))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f="FirebaseError",p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,g.prototype.create),i}return r.__extends(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?m(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",l=new p(i,a),u=0,c=Object.keys(r);u<c.length;u++){var h=c[u];"_"!==h.slice(-1)&&(h in l&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),l[h]=r[h])}return l},t}();function m(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function v(t){return JSON.parse(t)}var y=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(u(o[0])||""),n=v(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=u^a&(l^u),o=1518500249):(i=a^l^u,o=1859775393):r<60?(i=a&l|u&(a|l),o=2400959708):(i=a^l^u,o=3395469782);var h=(s<<5|s>>>27)+i+c+o+n[r]&4294967295;c=u,u=l,l=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),_=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function k(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=g,e.FirebaseError=p,e.Sha1=w,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=l,e.base64Decode=u,e.base64Encode=function(t){var e=a(t);return l.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new _(t,e);return n.subscribe.bind(n)},e.decode=y,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=C,e.getUA=d,e.isAdmin=function(t){var e=y(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=y(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=y(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=y(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")}},zZxQ:function(t,e,n){"use strict";n.d(e,"a",function(){return x}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return b}),n.d(e,"f",function(){return v}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return f}),n.d(e,"i",function(){return g}),n.d(e,"j",function(){return C}),n.d(e,"k",function(){return m}),n.d(e,"l",function(){return l}),n.d(e,"m",function(){return u}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return T}),n.d(e,"p",function(){return d});var r=n("OoTa");let i=0;const o=t=>({create:e=>f(t,e),dismiss:(e,n,r)=>g(document,e,n,t,r),getTop:async()=>m(document,t)}),s=o("ion-alert"),a=o("ion-action-sheet"),l=o("ion-loading"),u=o("ion-modal"),c=o("ion-picker"),h=o("ion-popover"),d=o("ion-toast"),f=(t,e)=>customElements.whenDefined(t).then(()=>{const n=document,r=n.createElement(t);p(n),Object.assign(r,e),r.classList.add("overlay-hidden");const o=i++;return r.overlayIndex=o,r.hasAttribute("id")||(r.id=`ion-overlay-${o}`),y(n).appendChild(r),r.componentOnReady()}),p=t=>{0===i&&(i=1,t.addEventListener("focusin",e=>{const n=m(t);if(n&&n.backdropDismiss&&!E(n,e.target)){const t=n.querySelector("input,button");t&&t.focus()}}),t.addEventListener("ionBackButton",e=>{const n=m(t);n&&n.backdropDismiss&&e.detail.register(100,()=>n.dismiss(void 0,x))}),t.addEventListener("keyup",e=>{if("Escape"===e.key){const e=m(t);e&&e.backdropDismiss&&e.dismiss(void 0,x)}}))},g=(t,e,n,r,i)=>{const o=m(t,r,i);return o?o.dismiss(e,n):Promise.reject("overlay does not exist")},m=(t,e,n)=>{const r=((t,e)=>{const n=Array.from(y(t).children).filter(t=>t.overlayIndex>0);return void 0===e?n:(e=e.toUpperCase(),n.filter(t=>t.tagName===e))})(t,e);return void 0===n?r[r.length-1]:r.find(t=>t.id===n)},b=async(t,e,n,i,o)=>{if(t.presented)return;t.presented=!0,t.willPresent.emit();const s=t.enterAnimation?t.enterAnimation:r.b.get(e,"ios"===t.mode?n:i);await w(t,s,t.el,o)&&t.didPresent.emit()},v=async(t,e,n,i,o,s,a)=>{if(!t.presented)return!1;t.presented=!1;try{t.willDismiss.emit({data:e,role:n});const u=t.leaveAnimation?t.leaveAnimation:r.b.get(i,"ios"===t.mode?o:s);await w(t,u,t.el,a),t.didDismiss.emit({data:e,role:n})}catch(l){console.error(l)}return t.el.remove(),!0},y=t=>t.querySelector("ion-app")||t.body,w=async(t,e,i,o)=>{if(t.animation)return t.animation.destroy(),t.animation=void 0,!1;i.classList.remove("overlay-hidden");const s=i.shadowRoot||t.el,a=await n.e(8).then(n.bind(null,"gy97")).then(t=>t.create(e,s,o)),l=void 0===a.fill;l||a.fill("both"),t.animation=a,t.animated&&r.b.getBoolean("animated",!0)||a.duration(0),t.keyboardClose&&a.beforeAddWrite(()=>{const t=i.ownerDocument.activeElement;t&&t.matches("input, ion-input, ion-textarea")&&t.blur()});const u=await a.playAsync(),c="boolean"==typeof u?u:a.hasCompleted;return l&&a.destroy(),t.animation=void 0,c},_=(t,e)=>{let n;const r=new Promise(t=>n=t);return k(t,e,t=>{n(t.detail)}),r},k=(t,e,n)=>{const r=i=>{t.removeEventListener(e,r),n(i)};t.addEventListener(e,r)},C=t=>"cancel"===t||t===x,E=(t,e)=>{for(;e;){if(e===t)return!0;e=e.parentElement}return!1},S=t=>t(),T=(t,e)=>{if("function"==typeof t)return r.b.get("_zoneGate",S)(()=>{try{return t(e)}catch(n){console.error(n)}})},x="backdrop"},zgos:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(){}ngOnInit(){}}},zn8P:function(t,e,n){var r={"./pages/admin/admin.module.ngfactory":["ecMe",17],"./pages/blog-info/blog-info.module.ngfactory":["Losa",18],"./pages/blog/blog.module.ngfactory":["jT+6",19],"./pages/camp-info/camp-info.module.ngfactory":["cxD8",0,16],"./pages/contact/contact.module.ngfactory":["D2Ar",20],"./pages/landing/landing.module.ngfactory":["fLL1",1,4],"./pages/launch/launch.module.ngfactory":["CmLP",21],"./pages/login/login.module.ngfactory":["/yGZ",22],"./pages/register/register.module.ngfactory":["1sqi",23]};function i(t){if(!n.o(r,t))return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e});var e=r[t],i=e[0];return Promise.all(e.slice(1).map(n.e)).then(function(){return n(i)})}i.keys=function(){return Object.keys(r)},i.id="zn8P",t.exports=i}},[[0,2]]]);